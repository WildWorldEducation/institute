import{_ as b,A as f,f as P,K as B,r as c,o as a,c as i,a as e,k as d,p as C,d as w}from"./main-1119298b.js";import{u as v}from"./TeacherAnalyticsStore-26e4855c.js";import{u as j}from"./AnalyticsStore-99da243b.js";import{S as D}from"./StudentProgressLineChart-402a96cf.js";import{S as R}from"./StudentSkillActivityChart-6aad99c2.js";import{P as T,A as F}from"./AttemptedAssessmentsTimelineChart-f10596b8.js";import{F as z}from"./FailedAssessmentsHorizontalBarChart-cd5f45d0.js";import{S as H}from"./StudentDurationPerDayLineChart-c4304261.js";import{S as M,a as I,b as N}from"./StudentPassedAssessmentsByRootSubjectHorizontalBarChart-2bdd79cd.js";import"./transform-4d0f7c8f.js";import"./string-c67ea49d.js";import"./line-d122782f.js";import"./time-3c9385c3.js";import"./continuous-93813e6c.js";import"./point-ea70dc51.js";import"./linear-d9b6cbf2.js";import"./band-2263c9e7.js";import"./sort-fcaf8f38.js";const L={components:{StudentProgressLineChart:D,StudentSkillActivityChart:R,PassedAssessmentsTimelineChart:T,AttemptedAssessmentsTimelineChart:F,FailedAssessmentsHorizontalBarChart:z,StudentDurationPerDayLineChart:H,StudentAttemptedAssessmentsByRootSubjectHorizontalBarChart:M,StudentFailedAssessmentsByRootSubjectHorizontalBarChart:I,StudentPassedAssessmentsByRootSubjectHorizontalBarChart:N},setup(){const t=f(),s=P(),l=v(),o=B(),r=j();return t.users.length<1&&t.getUsers(),{usersStore:t,userDetailsStore:s,teacherAnalyticsStore:l,userSkillsStore:o,analyticsStore:r}},data(){return{userId:this.$route.params.studentId,isMobileCheck:window.innerWidth,studentProgress:[],assessmentPasses:[],assessmentAttempts:[],skillDurations:[],durationsPerDay:[],visitedSkills:[]}},async created(){await this.getStudentDurationPerDay(),await this.getTenantStudentProgress(),await this.getAssessmentPasses(),await this.getAssessmentAttempts(),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.userid),this.teacherAnalyticsStore.skillActivities.length==0&&await this.teacherAnalyticsStore.getSkillActivityReport(this.userid),this.teacherAnalyticsStore.skillActivities=this.teacherAnalyticsStore.skillActivities.map(t=>({...t,formattedQuantity:this.millisToMinutesAndSeconds(t.quantity)})),await this.analyticsStore.getStudentFailedAssessmentsBySubject(this.userid),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userid),await this.analyticsStore.getStudentAttemptedAssessmentsBySubject(this.userid)},computed:{studentName(){return`${this.$parent.user.username}`.trim()}},methods:{async getTenantStudentProgress(){fetch(`/student-analytics/student-progress/${this.userId}`).then(t=>t.json()).then(t=>{for(let s=0;s<t.length;s++)t[s].date=new Date(t[s].date);t.sort((s,l)=>s.date-l.date),this.studentProgress=t}).catch(t=>{console.error("Error fetching student progress:",t)})},async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.userId}`).then(t=>t.json()).then(t=>{this.assessmentAttempts=t.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`}))}).catch(t=>{console.error("Error fetching last visited skills:",t)})},async getAssessmentPasses(){await this.userSkillsStore.getMasteredSkills(this.userId),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(t=>({...t,url:`/skills/${t.url}`,labelName:`${t.name}`}))},async getStudentDurationPerDay(){fetch(`/student-analytics/student-duration-per-day/${this.userId}`).then(t=>t.json()).then(t=>{for(let s=0;s<t.length;s++)t[s].formattedQuantity=t[s].quantity/(1e3*60),t[s].date=new Date(t[s].date);t.sort((s,l)=>s.date-l.date),this.durationsPerDay=t}).catch(t=>{console.error("Error fetching student duration per day:",t)})},millisToMinutesAndSeconds(t){var s=Math.floor(t/6e4),l=(t%6e4/1e3).toFixed(0);return s+":"+(l<10?"0":"")+l}}},n=t=>(C("data-v-14aef477"),t=t(),w(),t),x={class:"container bg-light"},E={class:"d-flex justify-content-between"},U=n(()=>e("h1",{class:"heading"},"Student Report",-1)),V=n(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[e("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),q=[V],Q=n(()=>e("h2",{class:"secondary-heading"},"Engagement",-1)),K=n(()=>e("h4",null,"Total time on platform",-1)),W={key:1},G=n(()=>e("hr",{class:"mt-5 mb-5"},null,-1)),J=n(()=>e("h4",{class:"mt-4"},"Skills visited",-1)),O={key:3},X=n(()=>e("hr",{class:"mt-5 mb-5"},null,-1)),Y=n(()=>e("h2",{class:"secondary-heading mt-5"},"Academics",-1)),Z=n(()=>e("h4",null,"Skill mastery progress",-1)),$={key:5},tt=n(()=>e("hr",{class:"mt-5 mb-5"},null,-1)),st=n(()=>e("h3",{class:"secondary-heading mt-4"},"By subject",-1)),et=n(()=>e("h4",{class:""},"Failed more than once",-1)),nt={key:7},at=n(()=>e("hr",{class:"mt-5 mb-5"},null,-1)),ot=n(()=>e("h4",{class:""},"Passed",-1)),rt={key:9},it=n(()=>e("hr",{class:"mt-5 mb-5"},null,-1)),lt=n(()=>e("h4",{class:""},"Attempted",-1)),ct={key:11},dt=n(()=>e("hr",{class:"mt-5 mb-5"},null,-1)),ht=n(()=>e("h3",{class:"secondary-heading mt-4"},"By skill",-1)),mt=n(()=>e("h4",null,"Assessments failed",-1)),ut={key:13},yt=n(()=>e("hr",{class:"mt-5 mb-5"},null,-1)),_t=n(()=>e("h4",{class:"mt-4"},"Assessments passed",-1)),St={key:15},pt=n(()=>e("hr",{class:"mt-5 mb-5"},null,-1)),At=n(()=>e("h4",{class:"mt-4"},"Assessments attempted",-1)),gt={key:17,class:"mb-5"};function kt(t,s,l,o,r,bt){const h=c("StudentDurationPerDayLineChart"),m=c("StudentSkillActivityChart"),u=c("StudentProgressLineChart"),y=c("StudentFailedAssessmentsByRootSubjectHorizontalBarChart"),_=c("StudentPassedAssessmentsByRootSubjectHorizontalBarChart"),S=c("StudentAttemptedAssessmentsByRootSubjectHorizontalBarChart"),p=c("FailedAssessmentsHorizontalBarChart"),A=c("PassedAssessmentsTimelineChart"),g=c("AttemptedAssessmentsTimelineChart");return a(),i("div",x,[e("div",E,[U,e("button",{class:"btn me-1",onClick:s[0]||(s[0]=(...k)=>t.$parent.restartTutorial&&t.$parent.restartTutorial(...k))},q)]),Q,K,r.durationsPerDay.length>1?(a(),d(h,{key:0,data:r.durationsPerDay},null,8,["data"])):(a(),i("p",W,"There is no data to show yet.")),G,J,o.teacherAnalyticsStore.skillActivities.length>0?(a(),d(m,{key:2,data:o.teacherAnalyticsStore.skillActivities},null,8,["data"])):(a(),i("p",O,"No skills visited by this student.")),X,Y,Z,r.studentProgress.length>0?(a(),d(u,{key:4,data:r.studentProgress,colour:"#5f31dd"},null,8,["data"])):(a(),i("p",$,"No data to show yet.")),tt,st,et,o.analyticsStore.studentRootSubjectsFailedAssessments.length>0?(a(),d(y,{key:6,data:o.analyticsStore.studentRootSubjectsFailedAssessments,colour:"darkred",class:"mb-5"},null,8,["data"])):(a(),i("p",nt,"No data yet")),at,ot,o.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(a(),d(_,{key:8,data:o.analyticsStore.studentRootSubjectsPassedAssessments,colour:"darkgreen",class:"mb-5"},null,8,["data"])):(a(),i("p",rt,"No data yet")),it,lt,o.analyticsStore.studentRootSubjectsAttemptedAssessments.length>0?(a(),d(S,{key:10,data:o.analyticsStore.studentRootSubjectsAttemptedAssessments,colour:"darkblue",class:"mb-5"},null,8,["data"])):(a(),i("p",ct,"No data yet")),dt,ht,mt,o.teacherAnalyticsStore.studentMultipleFails.length>0?(a(),d(p,{key:12,data:o.teacherAnalyticsStore.studentMultipleFails,colour:"darkred"},null,8,["data"])):(a(),i("p",ut," This student has not failed any assessments more than once yet. ")),yt,_t,r.assessmentPasses.length>0?(a(),d(A,{key:14,data:r.assessmentPasses},null,8,["data"])):(a(),i("p",St,"This student has not completed any assessments yet.")),pt,At,r.assessmentAttempts.length>0?(a(),d(g,{key:16,class:"mb-5",data:r.assessmentAttempts},null,8,["data"])):(a(),i("p",gt," This student has attempted any assessments yet. "))])}const Et=b(L,[["render",kt],["__scopeId","data-v-14aef477"]]);export{Et as default};
