import{_ as ce,r as ae,o as $,c as S,d as e,b as H,e as W,m as P,t as _,i as le,s as Z,T as _e,p as he,f as ue,x as ke,F as de,k as ve,l as fe}from"./main-794a1e66.js";import{c as ge,g as we,d as J}from"./index.es6-593402c1.js";var ye={exports:{}};(function(c,x){(function(r,p){c.exports=p()})(ge,function(){var r=1e3,p=6e4,n=36e5,m="millisecond",f="second",w="minute",h="hour",g="day",O="week",b="month",j="quarter",T="year",V="date",q="Invalid Date",Q=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,K=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,X={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var i=["th","st","nd","rd"],t=a%100;return"["+a+(i[(t-20)%10]||i[t]||i[0])+"]"}},ee=function(a,i,t){var o=String(a);return!o||o.length>=i?a:""+Array(i+1-o.length).join(t)+a},Y={s:ee,z:function(a){var i=-a.utcOffset(),t=Math.abs(i),o=Math.floor(t/60),s=t%60;return(i<=0?"+":"-")+ee(o,2,"0")+":"+ee(s,2,"0")},m:function a(i,t){if(i.date()<t.date())return-a(t,i);var o=12*(t.year()-i.year())+(t.month()-i.month()),s=i.clone().add(o,b),d=t-s<0,l=i.clone().add(o+(d?-1:1),b);return+(-(o+(t-s)/(d?s-l:l-s))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:b,y:T,w:O,d:g,D:V,h,m:w,s:f,ms:m,Q:j}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},C="en",z={};z[C]=X;var E="$isDayjsObject",A=function(a){return a instanceof re||!(!a||!a[E])},ne=function a(i,t,o){var s;if(!i)return C;if(typeof i=="string"){var d=i.toLowerCase();z[d]&&(s=d),t&&(z[d]=t,s=d);var l=i.split("-");if(!s&&l.length>1)return a(l[0])}else{var v=i.name;z[v]=i,s=v}return!o&&s&&(C=s),s||!o&&C},M=function(a,i){if(A(a))return a.clone();var t=typeof i=="object"?i:{};return t.date=a,t.args=arguments,new re(t)},u=Y;u.l=ne,u.i=A,u.w=function(a,i){return M(a,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var re=function(){function a(t){this.$L=ne(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[E]=!0}var i=a.prototype;return i.parse=function(t){this.$d=function(o){var s=o.date,d=o.utc;if(s===null)return new Date(NaN);if(u.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var l=s.match(Q);if(l){var v=l[2]-1||0,y=(l[7]||"0").substring(0,3);return d?new Date(Date.UTC(l[1],v,l[3]||1,l[4]||0,l[5]||0,l[6]||0,y)):new Date(l[1],v,l[3]||1,l[4]||0,l[5]||0,l[6]||0,y)}}return new Date(s)}(t),this.init()},i.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},i.$utils=function(){return u},i.isValid=function(){return this.$d.toString()!==q},i.isSame=function(t,o){var s=M(t);return this.startOf(o)<=s&&s<=this.endOf(o)},i.isAfter=function(t,o){return M(t)<this.startOf(o)},i.isBefore=function(t,o){return this.endOf(o)<M(t)},i.$g=function(t,o,s){return u.u(t)?this[o]:this.set(s,t)},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this.$d.getTime()},i.startOf=function(t,o){var s=this,d=!!u.u(o)||o,l=u.p(t),v=function(I,R){var B=u.w(s.$u?Date.UTC(s.$y,R,I):new Date(s.$y,R,I),s);return d?B:B.endOf(g)},y=function(I,R){return u.w(s.toDate()[I].apply(s.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(R)),s)},k=this.$W,D=this.$M,L=this.$D,U="set"+(this.$u?"UTC":"");switch(l){case T:return d?v(1,0):v(31,11);case b:return d?v(1,D):v(0,D+1);case O:var F=this.$locale().weekStart||0,te=(k<F?k+7:k)-F;return v(d?L-te:L+(6-te),D);case g:case V:return y(U+"Hours",0);case h:return y(U+"Minutes",1);case w:return y(U+"Seconds",2);case f:return y(U+"Milliseconds",3);default:return this.clone()}},i.endOf=function(t){return this.startOf(t,!1)},i.$set=function(t,o){var s,d=u.p(t),l="set"+(this.$u?"UTC":""),v=(s={},s[g]=l+"Date",s[V]=l+"Date",s[b]=l+"Month",s[T]=l+"FullYear",s[h]=l+"Hours",s[w]=l+"Minutes",s[f]=l+"Seconds",s[m]=l+"Milliseconds",s)[d],y=d===g?this.$D+(o-this.$W):o;if(d===b||d===T){var k=this.clone().set(V,1);k.$d[v](y),k.init(),this.$d=k.set(V,Math.min(this.$D,k.daysInMonth())).$d}else v&&this.$d[v](y);return this.init(),this},i.set=function(t,o){return this.clone().$set(t,o)},i.get=function(t){return this[u.p(t)]()},i.add=function(t,o){var s,d=this;t=Number(t);var l=u.p(o),v=function(D){var L=M(d);return u.w(L.date(L.date()+Math.round(D*t)),d)};if(l===b)return this.set(b,this.$M+t);if(l===T)return this.set(T,this.$y+t);if(l===g)return v(1);if(l===O)return v(7);var y=(s={},s[w]=p,s[h]=n,s[f]=r,s)[l]||1,k=this.$d.getTime()+t*y;return u.w(k,this)},i.subtract=function(t,o){return this.add(-1*t,o)},i.format=function(t){var o=this,s=this.$locale();if(!this.isValid())return s.invalidDate||q;var d=t||"YYYY-MM-DDTHH:mm:ssZ",l=u.z(this),v=this.$H,y=this.$m,k=this.$M,D=s.weekdays,L=s.months,U=s.meridiem,F=function(R,B,se,oe){return R&&(R[B]||R(o,d))||se[B].slice(0,oe)},te=function(R){return u.s(v%12||12,R,"0")},I=U||function(R,B,se){var oe=R<12?"AM":"PM";return se?oe.toLowerCase():oe};return d.replace(K,function(R,B){return B||function(se){switch(se){case"YY":return String(o.$y).slice(-2);case"YYYY":return u.s(o.$y,4,"0");case"M":return k+1;case"MM":return u.s(k+1,2,"0");case"MMM":return F(s.monthsShort,k,L,3);case"MMMM":return F(L,k);case"D":return o.$D;case"DD":return u.s(o.$D,2,"0");case"d":return String(o.$W);case"dd":return F(s.weekdaysMin,o.$W,D,2);case"ddd":return F(s.weekdaysShort,o.$W,D,3);case"dddd":return D[o.$W];case"H":return String(v);case"HH":return u.s(v,2,"0");case"h":return te(1);case"hh":return te(2);case"a":return I(v,y,!0);case"A":return I(v,y,!1);case"m":return String(y);case"mm":return u.s(y,2,"0");case"s":return String(o.$s);case"ss":return u.s(o.$s,2,"0");case"SSS":return u.s(o.$ms,3,"0");case"Z":return l}return null}(R)||l.replace(":","")})},i.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},i.diff=function(t,o,s){var d,l=this,v=u.p(o),y=M(t),k=(y.utcOffset()-this.utcOffset())*p,D=this-y,L=function(){return u.m(l,y)};switch(v){case T:d=L()/12;break;case b:d=L();break;case j:d=L()/3;break;case O:d=(D-k)/6048e5;break;case g:d=(D-k)/864e5;break;case h:d=D/n;break;case w:d=D/p;break;case f:d=D/r;break;default:d=D}return s?d:u.a(d)},i.daysInMonth=function(){return this.endOf(b).$D},i.$locale=function(){return z[this.$L]},i.locale=function(t,o){if(!t)return this.$L;var s=this.clone(),d=ne(t,o,!0);return d&&(s.$L=d),s},i.clone=function(){return u.w(this.$d,this)},i.toDate=function(){return new Date(this.valueOf())},i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toISOString=function(){return this.$d.toISOString()},i.toString=function(){return this.$d.toUTCString()},a}(),me=re.prototype;return M.prototype=me,[["$ms",m],["$s",f],["$m",w],["$H",h],["$W",g],["$M",b],["$y",T],["$D",V]].forEach(function(a){me[a[1]]=function(i){return this.$g(i,a[0],a[1])}}),M.extend=function(a,i){return a.$i||(a(i,re,M),a.$i=!0),M},M.locale=ne,M.isDayjs=A,M.unix=function(a){return M(1e3*a)},M.en=z[C],M.Ls=z,M.p={},M})})(ye);var $e=ye.exports;const ie=we($e);var xe={exports:{}};(function(c,x){(function(r,p){c.exports=p()})(ge,function(){return function(r,p,n){r=r||{};var m=p.prototype,f={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function w(g,O,b,j){return m.fromToBase(g,O,b,j)}n.en.relativeTime=f,m.fromToBase=function(g,O,b,j,T){for(var V,q,Q,K=b.$locale().relativeTime||f,X=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],ee=X.length,Y=0;Y<ee;Y+=1){var C=X[Y];C.d&&(V=j?n(g).diff(b,C.d,!0):b.diff(g,C.d,!0));var z=(r.rounding||Math.round)(Math.abs(V));if(Q=V>0,z<=C.r||!C.r){z<=1&&Y>0&&(C=X[Y-1]);var E=K[C.l];T&&(z=T(""+z)),q=typeof E=="string"?E.replace("%d",z):E(z,O,C.l,Q);break}}if(O)return q;var A=Q?K.future:K.past;return typeof A=="function"?A(q):A.replace("%s",q)},m.to=function(g,O){return w(g,O,this,!0)},m.from=function(g,O){return w(g,O,this)};var h=function(g){return g.$u?n.utc():n()};m.toNow=function(g){return this.to(h(this),g)},m.fromNow=function(g){return this.from(h(this),g)}}})})(xe);var be=xe.exports;const pe=we(be);const De={setup(){},data(){return{hoverOn:!1,dateFromNow:"",added:0,removed:0,changed:{name:!1,description:!1,mastery_requirements:!1}}},props:["revision","skill"],methods:{extractContent(c){return new DOMParser().parseFromString(c,"text/html").documentElement.textContent},countDiff(){var m,f,w;const c=this.extractContent(this.revision.mastery_requirements),x=this.extractContent((m=this.revision.lastRevision)==null?void 0:m.mastery_requirements),r=J(x,c),p=J((f=this.revision.lastRevision)==null?void 0:f.name,this.revision.name),n=J((w=this.revision.lastRevision)==null?void 0:w.description,this.revision.description);r.forEach(h=>{h.added&&(this.added=this.added+1,this.changed.mastery_requirements=!0),h.removed&&(this.removed=this.removed+1,this.changed.mastery_requirements=!0)}),p.forEach(h=>{h.added&&(this.added=this.added+1,this.changed.name=!0),h.removed&&(this.removed=this.removed+1,this.changed.name=!0)}),n.forEach(h=>{h.added&&(this.added=this.added+1,this.changed.description=!0),h.removed&&(this.removed=this.removed+1,this.changed.description=!0)})}},async mounted(){ie.extend(pe),this.dateFromNow=ie(this.revision.timeStamp).fromNow(),this.revision.lastRevision&&this.countDiff()}},G=c=>(he("data-v-7be7d5c2"),c=c(),ue(),c),Se={class:"revision-header"},Ce={class:"row-header-circle"},ze={key:0,class:"inner-row-header-circle"},Re={class:"d-flex"},Oe={class:"d-flex align-items-start"},Le={class:"me-1 edit-date"},Te={class:"revision-comment"},Ne={key:0,class:"current-badge d-flex gap-1 align-items-center ms-2"},Ve=G(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",heigh:"15",width:"15",fill:"white"},[e("path",{d:"M448 256A192 192 0 1 0 64 256a192 192 0 1 0 384 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 80a80 80 0 1 0 0-160 80 80 0 1 0 0 160zm0-224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zM224 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1)),He=G(()=>e("div",null,"Current Version",-1)),Be=[Ve,He],qe={key:1,class:"origin-badge d-flex gap-1 align-items-center ms-2"},Ye=G(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"white",height:"15",width:"15"},[e("path",{d:"M502.3 159.7l-234-156c-8-4.9-16.5-5-24.6 0l-234 156C3.7 163.7 0 170.8 0 178v156c0 7.1 3.7 14.3 9.7 18.3l234 156c8 4.9 16.5 5 24.6 0l234-156c6-4 9.7-11.1 9.7-18.3V178c0-7.1-3.7-14.3-9.7-18.3zM278 63.1l172.3 114.9-76.9 51.4L278 165.7V63.1zm-44 0v102.6l-95.4 63.7-76.9-51.4L234 63.1zM44 219.1l55.1 36.9L44 292.8v-73.7zm190 229.7L61.7 334l76.9-51.4L234 346.3v102.6zm22-140.9l-77.7-52 77.7-52 77.7 52-77.7 52zm22 140.9V346.3l95.4-63.7 76.9 51.4L278 448.8zm190-156l-55.1-36.9L468 219.1v73.7z"})],-1)),Ae=G(()=>e("div",null,"Origin",-1)),Fe=[Ye,Ae],Ie={class:"by-user"},je={class:"position-relative anchor"},Ee={class:"d-flex align-items-center px-2"},Ue=G(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"15",height:"15",fill:"#64748b"},[e("path",{d:"M406.5 399.6C387.4 352.9 341.5 320 288 320l-64 0c-53.5 0-99.4 32.9-118.5 79.6C69.9 362.2 48 311.7 48 256C48 141.1 141.1 48 256 48s208 93.1 208 208c0 55.7-21.9 106.2-57.5 143.6zm-40.1 32.7C334.4 452.4 296.6 464 256 464s-78.4-11.6-110.5-31.7c7.3-36.7 39.7-64.3 78.5-64.3l64 0c38.8 0 71.2 27.6 78.5 64.3zM256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-272a40 40 0 1 1 0-80 40 40 0 1 1 0 80zm-88-40a88 88 0 1 0 176 0 88 88 0 1 0 -176 0z"})],-1)),We={class:"mx-1 d-flex align-items-center"},Pe={class:"d-flex align-items-center"},Ze=G(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"12",height:"12",class:"mx-1",fill:"#64748b"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9L0 168c0 13.3 10.7 24 24 24l110.1 0c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24l0 104c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65 0-94.1c0-13.3-10.7-24-24-24z"})],-1)),Je={class:"mt-2 px-2 break-line"},Ge={class:"hover-sub-info px-2"},Qe={class:"hover-sub-info px-2 break-line"},Ke={class:"insert","b-on-hoover":"",title:"number of words added"},Xe={class:"removed ms-1","b-on-hoover":"",title:"number of words removed"};function et(c,x,r,p,n,m){const f=ae("router-link");return $(),S("div",{onMouseover:x[0]||(x[0]=w=>n.hoverOn=!0),onMouseleave:x[1]||(x[1]=w=>n.hoverOn=!1),class:"d-flex"},[e("div",Se,[e("div",Ce,[n.hoverOn?($(),S("div",ze)):H("",!0)])]),e("div",Re,[W(f,{class:"d-flex flex-column ms-3 revision-data",to:`/skills/${r.skill.url}/revision/${r.revision.version_number}`},{default:P(()=>[e("div",Oe,[e("div",Le,_(r.revision.edited_date),1),e("div",Te," - "+_(r.revision.comment?r.revision.comment:"no comment"),1),r.revision.isCurrentRevision?($(),S("div",Ne,Be)):H("",!0),r.revision.isOrigin?($(),S("div",qe,Fe)):H("",!0)]),e("div",Ie,"By "+_(r.revision.username),1)]),_:1},8,["to"]),e("div",null,[e("div",je,[W(_e,{name:"appear"},{default:P(()=>[n.hoverOn?($(),S("div",{key:0,class:le(["revision-hover-detail",{"appear-top":r.revision.isCurrentRevision,"appear-center":!r.revision.isCurrentRevision&&r.revision.lastRevision,"appear-bottom":r.revision.isOrigin}])},[e("div",{class:le(["bubble",{"triangle-top":r.revision.isCurrentRevision,"triangle-center":!r.revision.isCurrentRevision&&r.revision.lastRevision,"triangle-bottom":!r.revision.lastRevision&&!r.revision.isCurrentRevision}])},[e("div",Ee,[Ue,e("div",We,[Z(_(r.revision.username)+", ",1),e("div",Pe,[Ze,e("div",null,_(n.dateFromNow),1)]),Z(" ("+_(r.revision.edited_date)+") ",1)])]),e("div",Je,_(r.revision.isOrigin?"Origin created by admin.":r.revision.comment?r.revision.comment:"No Comment"),1),e("div",Ge," Changed: "+_(n.changed.name?n.changed.description?"name,":"name":"")+" "+_(n.changed.description?n.changed.mastery_requirements?"description, ":"description":"")+" "+_(n.changed.mastery_requirements?"mastery requirements":""),1),e("div",Qe,[e("span",Ke,"+"+_(n.added)+" insertion,",1),e("span",Xe,"-"+_(n.removed)+" deletion",1)]),W(f,{class:"ms-2",to:`/skills/${r.skill.url}/revision/${r.revision.version_number}`},{default:P(()=>[Z("see this edited version")]),_:1},8,["to"])],2)],2)):H("",!0)]),_:1})])])])],32)}const tt=ce(De,[["render",et],["__scopeId","data-v-7be7d5c2"]]);const st={setup(){},data(){return{dateFromNow:"",added:0,showDetail:!1,removed:0,shortDate:"",changed:{name:!1,description:!1,mastery_requirements:!1}}},props:["revision","skill"],methods:{extractContent(c){return new DOMParser().parseFromString(c,"text/html").documentElement.textContent},countDiff(){var m,f,w;const c=this.extractContent(this.revision.mastery_requirements),x=this.extractContent((m=this.revision.lastRevision)==null?void 0:m.mastery_requirements),r=J(x,c),p=J((f=this.revision.lastRevision)==null?void 0:f.name,this.revision.name),n=J((w=this.revision.lastRevision)==null?void 0:w.description,this.revision.description);r.forEach(h=>{h.added&&(this.added=this.added+1,this.changed.mastery_requirements=!0),h.removed&&(this.removed=this.removed+1,this.changed.mastery_requirements=!0)}),p.forEach(h=>{h.added&&(this.added=this.added+1,this.changed.name=!0),h.removed&&(this.removed=this.removed+1,this.changed.name=!0)}),n.forEach(h=>{h.added&&(this.added=this.added+1,this.changed.description=!0),h.removed&&(this.removed=this.removed+1,this.changed.description=!0)})}},async mounted(){ie.extend(pe),this.dateFromNow=ie(this.revision.timeStamp).fromNow(),this.shortDate=ie(this.revision.timeStamp).format("DD-MM-YYYY"),this.revision.lastRevision&&this.countDiff()}},N=c=>(he("data-v-4ed32742"),c=c(),ue(),c),it={class:"d-flex"},nt={class:"revision-header"},rt={class:"row-header-circle"},ot={key:0,class:"inner-row-header-circle"},at={class:"d-flex"},dt={class:"d-flex flex-column ms-3 revision-data"},lt={class:"revision-comment"},ct={key:0,class:"current-badge d-flex gap-1 align-items-center ms-2 d-none"},ht=N(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",heigh:"15",width:"15",fill:"white"},[e("path",{d:"M448 256A192 192 0 1 0 64 256a192 192 0 1 0 384 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 80a80 80 0 1 0 0-160 80 80 0 1 0 0 160zm0-224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zM224 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1)),ut=N(()=>e("div",null,"Current Version",-1)),mt=[ht,ut],vt={key:1,class:"origin-badge d-flex gap-1 align-items-center ms-2 d-none"},ft=N(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"white",height:"15",width:"15"},[e("path",{d:"M502.3 159.7l-234-156c-8-4.9-16.5-5-24.6 0l-234 156C3.7 163.7 0 170.8 0 178v156c0 7.1 3.7 14.3 9.7 18.3l234 156c8 4.9 16.5 5 24.6 0l234-156c6-4 9.7-11.1 9.7-18.3V178c0-7.1-3.7-14.3-9.7-18.3zM278 63.1l172.3 114.9-76.9 51.4L278 165.7V63.1zm-44 0v102.6l-95.4 63.7-76.9-51.4L234 63.1zM44 219.1l55.1 36.9L44 292.8v-73.7zm190 229.7L61.7 334l76.9-51.4L234 346.3v102.6zm22-140.9l-77.7-52 77.7-52 77.7 52-77.7 52zm22 140.9V346.3l95.4-63.7 76.9 51.4L278 448.8zm190-156l-55.1-36.9L468 219.1v73.7z"})],-1)),_t=N(()=>e("div",null,"Origin",-1)),gt=[ft,_t],wt=N(()=>e("path",{d:"M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"},null,-1)),yt=[wt],xt={class:"by-user"},pt={class:"position-relative"},Mt={key:0,class:"d-flex flex-column details-div triangle-upper"},kt={class:"d-flex flex-column flex-md-row align-items-md-center px-2 align-items-start"},$t={class:"d-flex align-items-center justify-content-start"},bt=N(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"15",height:"15",fill:"#64748b",class:"me-1"},[e("path",{d:"M406.5 399.6C387.4 352.9 341.5 320 288 320l-64 0c-53.5 0-99.4 32.9-118.5 79.6C69.9 362.2 48 311.7 48 256C48 141.1 141.1 48 256 48s208 93.1 208 208c0 55.7-21.9 106.2-57.5 143.6zm-40.1 32.7C334.4 452.4 296.6 464 256 464s-78.4-11.6-110.5-31.7c7.3-36.7 39.7-64.3 78.5-64.3l64 0c38.8 0 71.2 27.6 78.5 64.3zM256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-272a40 40 0 1 1 0-80 40 40 0 1 1 0 80zm-88-40a88 88 0 1 0 176 0 88 88 0 1 0 -176 0z"})],-1)),Dt={class:"ms-0 ms-md-1 d-flex flex-column flex-md-row align-items-md-center align-items-start"},St={class:"d-flex align-items-center"},Ct=N(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"12",height:"12",class:"mx-md-1 me-1",fill:"#64748b"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9L0 168c0 13.3 10.7 24 24 24l110.1 0c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24l0 104c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65 0-94.1c0-13.3-10.7-24-24-24z"})],-1)),zt={class:"ms-0 ms-md-1"},Rt={class:"mt-2 px-2 break-line"},Ot={class:"hover-sub-info px-2"},Lt={class:"hover-sub-info px-2 break-line"},Tt={class:"insert","b-on-hoover":"",title:"number of words added"},Nt={class:"removed ms-1","b-on-hoover":"",title:"number of words removed"},Vt={class:"d-flex"},Ht={key:0,class:"current-badge d-flex gap-1 align-items-center ms-2 d-md-none"},Bt=N(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",heigh:"15",width:"15",fill:"white"},[e("path",{d:"M448 256A192 192 0 1 0 64 256a192 192 0 1 0 384 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 80a80 80 0 1 0 0-160 80 80 0 1 0 0 160zm0-224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zM224 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1)),qt=N(()=>e("div",null,"Current Version",-1)),Yt=[Bt,qt],At={key:1,class:"origin-badge d-flex gap-1 align-items-center ms-2 d-md-none"},Ft=N(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"white",height:"15",width:"15"},[e("path",{d:"M502.3 159.7l-234-156c-8-4.9-16.5-5-24.6 0l-234 156C3.7 163.7 0 170.8 0 178v156c0 7.1 3.7 14.3 9.7 18.3l234 156c8 4.9 16.5 5 24.6 0l234-156c6-4 9.7-11.1 9.7-18.3V178c0-7.1-3.7-14.3-9.7-18.3zM278 63.1l172.3 114.9-76.9 51.4L278 165.7V63.1zm-44 0v102.6l-95.4 63.7-76.9-51.4L234 63.1zM44 219.1l55.1 36.9L44 292.8v-73.7zm190 229.7L61.7 334l76.9-51.4L234 346.3v102.6zm22-140.9l-77.7-52 77.7-52 77.7 52-77.7 52zm22 140.9V346.3l95.4-63.7 76.9 51.4L278 448.8zm190-156l-55.1-36.9L468 219.1v73.7z"})],-1)),It=N(()=>e("div",null,"Origin",-1)),jt=[Ft,It];function Et(c,x,r,p,n,m){const f=ae("router-link");return $(),S("div",it,[e("div",nt,[e("div",rt,[n.showDetail?($(),S("div",ot)):H("",!0)])]),e("div",at,[e("div",dt,[e("div",{class:"d-flex align-items-start",onClick:x[0]||(x[0]=w=>n.showDetail=!n.showDetail)},[W(f,{to:`/skills/${r.skill.url}/revision/${r.revision.version_number}`,class:"me-1 edit-date"},{default:P(()=>[Z(_(n.shortDate),1)]),_:1},8,["to"]),e("div",lt," - "+_(r.revision.comment?r.revision.comment:"no comment"),1),r.revision.isCurrentRevision?($(),S("div",ct,mt)):H("",!0),r.revision.isOrigin?($(),S("div",vt,gt)):H("",!0),($(),S("svg",{class:le(["ms-1 my-auto chevron-icon",{"chevron-down":n.showDetail,"chevron-up":!n.showDetail}]),width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},yt,2))]),e("div",xt,"By "+_(r.revision.username),1),e("div",pt,[W(_e,{name:"appear"},{default:P(()=>[n.showDetail?($(),S("div",Mt,[e("div",kt,[e("div",$t,[bt,Z(" "+_(r.revision.username)+", ",1)]),e("div",Dt,[e("div",St,[Ct,e("div",null,_(n.dateFromNow),1)]),e("div",zt," ("+_(r.revision.edited_date)+") ",1)])]),e("div",Rt,_(r.revision.isOrigin?"Origin created by admin.":r.revision.comment?r.revision.comment:"No Comment"),1),e("div",Ot," Changed: "+_(n.changed.name?n.changed.description?"name,":"name":"")+" "+_(n.changed.description?n.changed.mastery_requirements?"description, ":"description":"")+" "+_(n.changed.mastery_requirements?"mastery requirements":""),1),e("div",Lt,[e("span",Tt,"+"+_(n.added)+" insertion,",1),e("span",Nt,"-"+_(n.removed)+" deletion",1)]),e("div",Vt,[r.revision.isCurrentRevision?($(),S("div",Ht,Yt)):H("",!0),r.revision.isOrigin?($(),S("div",At,jt)):H("",!0),W(f,{class:"ms-2",to:`/skills/${r.skill.url}/revision/${r.revision.version_number}`},{default:P(()=>[Z("see this edited version")]),_:1},8,["to"])])])):H("",!0)]),_:1})])])])])}const Ut=ce(st,[["render",Et],["__scopeId","data-v-4ed32742"]]),Wt="/images/banners/skills-banner.png";const Pt={setup(){return{usersStore:ke()}},data(){return{skillUrl:this.$route.params.skillUrl,skill:{},skillRevisions:[],currentVersionNumber:null}},components:{HistoryRow:tt,HistoryRowTabletPhone:Ut},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers(),await this.getSkill()},async mounted(){},methods:{async getSkill(){const c=await fetch("/skills/url/"+this.skillUrl);this.skill=await c.json(),this.currentVersionNumber=this.skill.version_number,await this.getRevisions()},async getRevisions(){const c=await fetch("/skill-history/"+this.skill.id+"/list");this.skillRevisions=await c.json();for(let n=0;n<this.skillRevisions.length;n++){this.skillRevisions[n].timeStamp=this.skillRevisions[n].edited_date;var x=this.skillRevisions[n].edited_date.replace("T"," ");x=x.replace("Z"," ");let m=x.split(/[- :]/);var r=new Date(Date.UTC(m[0],m[1]-1,m[2],m[3],m[4],m[5])),p={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};this.skillRevisions[n].edited_date=r.toLocaleDateString("en-US",p);let f=this.usersStore.users.find(w=>w.id===this.skillRevisions[n].user_id);this.skillRevisions[n].username=f.username,this.skillRevisions[n].isCurrentRevision=!1,this.skillRevisions[n].version_number==this.currentVersionNumber&&(this.skillRevisions[n].isCurrentRevision=!0),n+1===this.skillRevisions.length&&n>0?this.skillRevisions[n].isOrigin=!0:this.skillRevisions[n].lastRevision=this.skillRevisions[n+1]}}}},Me=c=>(he("data-v-7defafa5"),c=c(),ue(),c),Zt=Me(()=>e("div",{id:"banner"},[e("img",{src:Wt,class:"img-fluid"})],-1)),Jt={class:"container"},Gt=Me(()=>e("hr",null,null,-1)),Qt={class:"d-none d-lg-flex flex-column"},Kt={class:"d-flex d-lg-none flex-column"};function Xt(c,x,r,p,n,m){const f=ae("HistoryRow"),w=ae("HistoryRowTabletPhone");return $(),S(de,null,[Zt,e("div",Jt,[e("h1",null,_(n.skill.name)+": Revision history",1),Gt,e("div",Qt,[($(!0),S(de,null,ve(n.skillRevisions,h=>($(),fe(f,{revision:h,skill:n.skill},null,8,["revision","skill"]))),256))]),e("div",Kt,[($(!0),S(de,null,ve(n.skillRevisions,h=>($(),fe(w,{revision:h,skill:n.skill},null,8,["revision","skill"]))),256))])])],64)}const ss=ce(Pt,[["render",Xt],["__scopeId","data-v-7defafa5"]]);export{ss as default};
