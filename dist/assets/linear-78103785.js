import{a as F}from"./ascending-3ff63084.js";import{i as q}from"./init-77b53fdd.js";import{o as nn}from"./ordinal-ba9b4969.js";import{t as tn,c as rn,d as en,e as an,f as on}from"./continuous-29968068.js";function un(n,r){return Array.from(r,i=>n[i])}function zn(n,...r){if(typeof n[Symbol.iterator]!="function")throw new TypeError("values is not iterable");n=Array.from(n);let[i]=r;if(i&&i.length!==2||r.length>1){const t=Uint32Array.from(n,(e,a)=>a);return r.length>1?(r=r.map(e=>n.map(e)),t.sort((e,a)=>{for(const u of r){const f=R(u[e],u[a]);if(f)return f}})):(i=n.map(i),t.sort((e,a)=>R(i[e],i[a]))),un(n,t)}return n.sort(fn(i))}function fn(n=F){if(n===F)return R;if(typeof n!="function")throw new TypeError("compare is not a function");return(r,i)=>{const t=n(r,i);return t||t===0?t:(n(i,i)===0)-(n(r,r)===0)}}function R(n,r){return(n==null||!(n>=n))-(r==null||!(r>=r))||(n<r?-1:n>r?1:0)}function En(n,r){let i;if(r===void 0)for(const t of n)t!=null&&(i<t||i===void 0&&t>=t)&&(i=t);else{let t=-1;for(let e of n)(e=r(e,++t,n))!=null&&(i<e||i===void 0&&e>=e)&&(i=e)}return i}function dn(n,r,i){n=+n,r=+r,i=(e=arguments.length)<2?(r=n,n=0,1):e<3?1:+i;for(var t=-1,e=Math.max(0,Math.ceil((r-n)/i))|0,a=new Array(e);++t<e;)a[t]=n+t*i;return a}function hn(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function j(n,r){if((i=(n=r?n.toExponential(r-1):n.toExponential()).indexOf("e"))<0)return null;var i,t=n.slice(0,i);return[t.length>1?t[0]+t.slice(2):t,+n.slice(i+1)]}function N(n){return n=j(Math.abs(n)),n?n[1]:NaN}function mn(n,r){return function(i,t){for(var e=i.length,a=[],u=0,f=n[0],s=0;e>0&&f>0&&(s+f+1>t&&(f=Math.max(1,t-s)),a.push(i.substring(e-=f,e+f)),!((s+=f+1)>t));)f=n[u=(u+1)%n.length];return a.reverse().join(r)}}function sn(n){return function(r){return r.replace(/[0-9]/g,function(i){return n[+i]})}}var cn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function O(n){if(!(r=cn.exec(n)))throw new Error("invalid format: "+n);var r;return new $({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}O.prototype=$.prototype;function $(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function gn(n){n:for(var r=n.length,i=1,t=-1,e;i<r;++i)switch(n[i]){case".":t=e=i;break;case"0":t===0&&(t=i),e=i;break;default:if(!+n[i])break n;t>0&&(t=0);break}return t>0?n.slice(0,t)+n.slice(e+1):n}var B;function ln(n,r){var i=j(n,r);if(!i)return n+"";var t=i[0],e=i[1],a=e-(B=Math.max(-8,Math.min(8,Math.floor(e/3)))*3)+1,u=t.length;return a===u?t:a>u?t+new Array(a-u+1).join("0"):a>0?t.slice(0,a)+"."+t.slice(a):"0."+new Array(1-a).join("0")+j(n,Math.max(0,r+a-1))[0]}function G(n,r){var i=j(n,r);if(!i)return n+"";var t=i[0],e=i[1];return e<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")}const U={"%":(n,r)=>(n*100).toFixed(r),b:n=>Math.round(n).toString(2),c:n=>n+"",d:hn,e:(n,r)=>n.toExponential(r),f:(n,r)=>n.toFixed(r),g:(n,r)=>n.toPrecision(r),o:n=>Math.round(n).toString(8),p:(n,r)=>G(n*100,r),r:G,s:ln,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function X(n){return n}var Y=Array.prototype.map,Z=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function pn(n){var r=n.grouping===void 0||n.thousands===void 0?X:mn(Y.call(n.grouping,Number),n.thousands+""),i=n.currency===void 0?"":n.currency[0]+"",t=n.currency===void 0?"":n.currency[1]+"",e=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?X:sn(Y.call(n.numerals,String)),u=n.percent===void 0?"%":n.percent+"",f=n.minus===void 0?"−":n.minus+"",s=n.nan===void 0?"NaN":n.nan+"";function h(d){d=O(d);var m=d.fill,p=d.align,c=d.sign,b=d.symbol,y=d.zero,w=d.width,T=d.comma,k=d.precision,D=d.trim,g=d.type;g==="n"?(T=!0,g="g"):U[g]||(k===void 0&&(k=12),D=!0,g="g"),(y||m==="0"&&p==="=")&&(y=!0,m="0",p="=");var V=b==="$"?i:b==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",W=b==="$"?t:/[%p]/.test(g)?u:"",L=U[g],_=/[defgprs%]/.test(g);k=k===void 0?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function C(o){var S=V,l=W,A,v,P;if(g==="c")l=L(o)+l,o="";else{o=+o;var I=o<0||1/o<0;if(o=isNaN(o)?s:L(Math.abs(o),k),D&&(o=gn(o)),I&&+o==0&&c!=="+"&&(I=!1),S=(I?c==="("?c:f:c==="-"||c==="("?"":c)+S,l=(g==="s"?Z[8+B/3]:"")+l+(I&&c==="("?")":""),_){for(A=-1,v=o.length;++A<v;)if(P=o.charCodeAt(A),48>P||P>57){l=(P===46?e+o.slice(A+1):o.slice(A))+l,o=o.slice(0,A);break}}}T&&!y&&(o=r(o,1/0));var z=S.length+o.length+l.length,M=z<w?new Array(w-z+1).join(m):"";switch(T&&y&&(o=r(M+o,M.length?w-l.length:1/0),M=""),p){case"<":o=S+o+l+M;break;case"=":o=S+M+o+l;break;case"^":o=M.slice(0,z=M.length>>1)+S+o+l+M.slice(z);break;default:o=M+S+o+l;break}return a(o)}return C.toString=function(){return d+""},C}function x(d,m){var p=h((d=O(d),d.type="f",d)),c=Math.max(-8,Math.min(8,Math.floor(N(m)/3)))*3,b=Math.pow(10,-c),y=Z[8+c/3];return function(w){return p(b*w)+y}}return{format:h,formatPrefix:x}}var E,H,J;yn({thousands:",",grouping:[3],currency:["$",""]});function yn(n){return E=pn(n),H=E.format,J=E.formatPrefix,E}function Mn(n){return Math.max(0,-N(Math.abs(n)))}function xn(n,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(N(r)/3)))*3-N(Math.abs(n)))}function bn(n,r){return n=Math.abs(n),r=Math.abs(r)-n,Math.max(0,N(r)-N(n))+1}function K(){var n=nn().unknown(void 0),r=n.domain,i=n.range,t=0,e=1,a,u,f=!1,s=0,h=0,x=.5;delete n.unknown;function d(){var m=r().length,p=e<t,c=p?e:t,b=p?t:e;a=(b-c)/Math.max(1,m-s+h*2),f&&(a=Math.floor(a)),c+=(b-c-a*(m-s))*x,u=a*(1-s),f&&(c=Math.round(c),u=Math.round(u));var y=dn(m).map(function(w){return c+a*w});return i(p?y.reverse():y)}return n.domain=function(m){return arguments.length?(r(m),d()):r()},n.range=function(m){return arguments.length?([t,e]=m,t=+t,e=+e,d()):[t,e]},n.rangeRound=function(m){return[t,e]=m,t=+t,e=+e,f=!0,d()},n.bandwidth=function(){return u},n.step=function(){return a},n.round=function(m){return arguments.length?(f=!!m,d()):f},n.padding=function(m){return arguments.length?(s=Math.min(1,h=+m),d()):s},n.paddingInner=function(m){return arguments.length?(s=Math.min(1,m),d()):s},n.paddingOuter=function(m){return arguments.length?(h=+m,d()):h},n.align=function(m){return arguments.length?(x=Math.max(0,Math.min(1,m)),d()):x},n.copy=function(){return K(r(),[t,e]).round(f).paddingInner(s).paddingOuter(h).align(x)},q.apply(d(),arguments)}function Q(n){var r=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return Q(r())},n}function jn(){return Q(K.apply(null,arguments).paddingInner(1))}function wn(n,r,i,t){var e=tn(n,r,i),a;switch(t=O(t??",f"),t.type){case"s":{var u=Math.max(Math.abs(n),Math.abs(r));return t.precision==null&&!isNaN(a=xn(e,u))&&(t.precision=a),J(t,u)}case"":case"e":case"g":case"p":case"r":{t.precision==null&&!isNaN(a=bn(e,Math.max(Math.abs(n),Math.abs(r))))&&(t.precision=a-(t.type==="e"));break}case"f":case"%":{t.precision==null&&!isNaN(a=Mn(e))&&(t.precision=a-(t.type==="%")*2);break}}return H(t)}function kn(n){var r=n.domain;return n.ticks=function(i){var t=r();return an(t[0],t[t.length-1],i??10)},n.tickFormat=function(i,t){var e=r();return wn(e[0],e[e.length-1],i??10,t)},n.nice=function(i){i==null&&(i=10);var t=r(),e=0,a=t.length-1,u=t[e],f=t[a],s,h,x=10;for(f<u&&(h=u,u=f,f=h,h=e,e=a,a=h);x-- >0;){if(h=on(u,f,i),h===s)return t[e]=u,t[a]=f,r(t);if(h>0)u=Math.floor(u/h)*h,f=Math.ceil(f/h)*h;else if(h<0)u=Math.ceil(u*h)/h,f=Math.floor(f*h)/h;else break;s=h}return n},n}function Sn(){var n=rn();return n.copy=function(){return en(n,Sn())},q.apply(n,arguments),kn(n)}export{K as b,Sn as l,En as m,jn as p,zn as s};
