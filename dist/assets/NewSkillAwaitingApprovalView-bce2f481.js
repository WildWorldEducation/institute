import{_ as u,o,c as n,d as s,b as r,g as x,m as D,r as h,e as w,k as g,t as _,j as v,F as C,i as k,p as L,f as N}from"./main-82b75767.js";import{W as F}from"./WaitLoadingModal-6ce6e804.js";import{S as z,F as B}from"./FailsModal-07136b50.js";import{_ as O}from"./institute-collins-2-184bdfcb.js";const j={props:["showApproveModal","approveSkill","closeModal"],data(){return{showModal:!1}},methods:{handleApproveSkill(){this.closeModal(),this.approveSkill()}},watch:{showApproveModal:{handler(i){this.showModal=i}}}},T={key:0,id:"myModal",class:"modal"},V={class:"modal-content"},E=s("div",{class:"d-flex gap-4"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"grey",width:"45",height:"45"},[s("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})]),s("p",null,"Approve this skill and add it to the site?")],-1),H={class:"d-flex justify-content-lg-between justify-content-md-end justify-content-between gap-2"},I=s("span",{class:"d-none d-md-block"}," No ",-1),q=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1),K=[I,q],P=s("span",{class:"d-none d-md-block"}," Yes ",-1),U=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1),W=[P,U];function R(i,e,c,p,l,t){return l.showModal?(o(),n("div",T,[s("div",V,[E,s("div",H,[s("button",{type:"button",class:"btn red-btn modal-btn",onClick:e[0]||(e[0]=(...a)=>c.closeModal&&c.closeModal(...a))},K),s("button",{type:"button",class:"btn green-btn modal-btn",onClick:e[1]||(e[1]=(...a)=>t.handleApproveSkill&&t.handleApproveSkill(...a))},W)])])])):r("",!0)}const Y=u(j,[["render",R]]);const G={props:["showDismissModal","dismissSkill","closeDismissModal"],data(){return{showModal:!1}},methods:{handleDismissClick(){this.closeDismissModal(),this.dismissSkill()}},watch:{showDismissModal:{handler(i){console.log(i),this.showModal=i}}}},J={key:0,class:"modal"},Q={class:"modal-content"},X=s("div",{class:"d-flex gap-4"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"grey",width:"45",height:"45"},[s("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})]),s("p",null,"Permanently dismiss this suggested skill?")],-1),Z={class:"d-flex justify-content-lg-between justify-content-md-end justify-content-between gap-2"},$=s("span",{class:"d-none d-md-block"}," No ",-1),ss=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1),es=[$,ss],ls=s("span",{class:"d-none d-md-block"}," Yes ",-1),is=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1),ts=[ls,is];function os(i,e,c,p,l,t){return l.showModal?(o(),n("div",J,[s("div",Q,[X,s("div",Z,[s("button",{type:"button",class:"btn red-btn modal-btn",onClick:e[0]||(e[0]=a=>c.closeDismissModal())},es),s("button",{type:"button",class:"btn green-btn modal-btn",onClick:e[1]||(e[1]=(...a)=>t.handleDismissClick&&t.handleDismissClick(...a))},ts)])])])):r("",!0)}const ns=u(G,[["render",os]]);const as={setup(){const i=x(),e=D();return{skillsStore:i,usersStore:e}},data(){return{id:this.$route.params.id,newSkillAwaitingApproval:{},showApproveModal:!1,showDisMissModal:!1,severLoading:!1,showSuccessModal:!1,showFailsModal:!1,message:""}},async created(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),this.usersStore.users.length==0&&await this.usersStore.getUsers(),this.getNewSkillAwaitingApproval()},components:{ApproveNewSkillModal:Y,DismissModal:ns,WaitLoadingModal:F,SuccessModal:z,FailsModal:B},methods:{async getNewSkillAwaitingApproval(){await fetch("/new-skills-awaiting-approval/show/"+this.id).then(function(i){return i.json()}).then(i=>{this.newSkillAwaitingApproval=i,this.newSkillAwaitingApproval.type=="domain"&&(this.newSkillAwaitingApproval.type="category");for(let e=0;e<this.skillsStore.skillsList.length;e++)this.skillsStore.skillsList[e].id==this.newSkillAwaitingApproval.parent&&(this.newSkillAwaitingApproval.parentName=this.skillsStore.skillsList[e].name,this.newSkillAwaitingApproval.parentUrl=this.skillsStore.skillsList[e].url);for(let e=0;e<this.usersStore.users.length;e++)this.usersStore.users[e].id==this.newSkillAwaitingApproval.user_id&&(this.newSkillAwaitingApproval.userName=this.usersStore.users[e].username)})},dismissSkill(){const i=fetch("/new-skills-awaiting-approval/"+this.id+"?action=dismiss",{method:"DELETE"});if(i.error){console.log(i.error),this.message="Failed to dismiss suggested skill",this.showFailsModal=!0;return}this.message="Successfully dismissed suggested skill",this.showSuccessModal=!0},approveSkill(){this.severLoading=!0;const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.newSkillAwaitingApproval.name,mastery_requirements:this.newSkillAwaitingApproval.mastery_requirements,icon_image:this.newSkillAwaitingApproval.icon_image,type:this.newSkillAwaitingApproval.type,level:this.newSkillAwaitingApproval.level})};var e=`/new-skills-awaiting-approval/accept/${this.newSkillAwaitingApproval.id}`;fetch(e,i).then(c=>{console.log("Fetched"),(c.error||c.status===500)&&(this.message="Failed to add new skill",this.showFailsModal=!0);const p=fetch("/new-skills-awaiting-approval/"+this.id+"?action=approve",{method:"DELETE"});if(p.error){console.err(p.error),this.message="Failed to remove from list of suggested new skills",this.showFailsModal=!0;return}this.message="Successfully added skill",this.severLoading=!1,this.showSuccessModal=!0})},handleSaveBtnClick(){this.showApproveModal=!0},hideApproveModal(){this.showApproveModal=!1},handleDisMissBtnClick(){this.showDisMissModal=!0},hideDismissModal(){this.showDisMissModal=!1},handleSuccessOKclick(){this.$router.back()},handleFailsOKclick(){this.showFailsModal=!1}}},d=i=>(L("data-v-cfbcfaec"),i=i(),N(),i),ds=d(()=>s("div",{id:"banner"},[s("img",{src:O,class:"img-fluid"})],-1)),cs={class:"container mt-3"},rs={id:"user-alert","b-on-hoover":"",title:"Click on the user name to see their user details"},hs=d(()=>s("div",null,"Submitted by",-1)),ps={class:"container mt-3"},ws={id:"skill-info-container"},_s={class:"skill-name"},ms=d(()=>s("hr",{class:"border border-2 opacity-100 hr"},null,-1)),gs={class:"row"},vs={key:0,class:"col-md-8 order-2 order-md-1 info-box"},ks={class:"d-flex flex-column"},us={class:"mastery-requirements"},Ss=["innerHTML"],As={class:"col-md-4 order-1 order-md-2"},fs={class:"info-box p-2 mb-2"},Ms=["src"],ys={key:1,class:"d-flex flex-column align-items-center"},bs=d(()=>s("div",{class:"no-image-warn"}," This Skill Does Not Have Icon Image. ",-1)),xs=d(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"80",height:"80"},[s("path",{d:"M448 80c8.8 0 16 7.2 16 16l0 319.8-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3L48 96c0-8.8 7.2-16 16-16l384 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"})],-1)),Ds=[bs,xs],Cs={class:"mt-3 d-flex flex-column align-items-center"},Ls=d(()=>s("h2",{class:"h4 title"},"Parent",-1)),Ns={class:"mt-3 d-flex flex-column align-items-center"},Fs=d(()=>s("h2",{class:"h4 title"},"Type",-1)),zs={key:2,class:"mt-3 d-flex flex-column align-items-center"},Bs=d(()=>s("h2",{class:"h4 title"},"Level",-1)),Os={key:0},js={key:1},Ts={key:2},Vs={key:3},Es={key:4},Hs=d(()=>s("p",null,"Â ",-1)),Is={class:"d-flex justify-content-end gap-3"};function qs(i,e,c,p,l,t){const a=h("RouterLink"),S=h("router-link"),A=h("ApproveNewSkillModal"),f=h("DismissModal"),M=h("WaitLoadingModal"),y=h("SuccessModal"),b=h("FailsModal");return o(),n(C,null,[ds,s("div",cs,[s("div",rs,[hs,w(a,{class:"normal-text-link",to:`/users?username=${l.newSkillAwaitingApproval.userName}`},{default:g(()=>[k(_(l.newSkillAwaitingApproval.userName),1)]),_:1},8,["to"])])]),s("div",ps,[s("div",ws,[s("div",null,[s("h1",_s,_(l.newSkillAwaitingApproval.name),1),ms]),s("div",gs,[l.newSkillAwaitingApproval.type!="category"?(o(),n("div",vs,[s("div",ks,[s("div",us,[s("div",{innerHTML:l.newSkillAwaitingApproval.mastery_requirements},null,8,Ss)])])])):r("",!0),s("div",As,[s("div",fs,[l.newSkillAwaitingApproval.icon_image?(o(),n("img",{key:0,src:l.newSkillAwaitingApproval.icon_image,class:"rounded img-fluid"},null,8,Ms)):(o(),n("div",ys,Ds)),s("div",Cs,[Ls,w(a,{"b-on-hoover":"",title:"Click on parent name to see it details",class:"normal-text-link",to:`/skills/${l.newSkillAwaitingApproval.parentUrl}`},{default:g(()=>[k(_(l.newSkillAwaitingApproval.parentName),1)]),_:1},8,["to"])]),s("div",Ns,[Fs,s("div",null,_(l.newSkillAwaitingApproval.type),1)]),l.newSkillAwaitingApproval.type!="category"?(o(),n("div",zs,[Bs,l.newSkillAwaitingApproval.level=="grade_school"?(o(),n("span",Os,"Grade School")):l.newSkillAwaitingApproval.level=="middle_school"?(o(),n("span",js,"Middle School")):l.newSkillAwaitingApproval.level=="high_school"?(o(),n("span",Ts,"High School")):l.newSkillAwaitingApproval.level=="college"?(o(),n("span",Vs,"College")):l.newSkillAwaitingApproval.level=="phd"?(o(),n("span",Es,"PHD")):r("",!0)])):r("",!0)])])]),Hs,s("div",Is,[s("button",{class:"btn red-btn",onClick:e[0]||(e[0]=(...m)=>t.handleDisMissBtnClick&&t.handleDisMissBtnClick(...m))}," Dismiss "),w(S,{class:"btn purple-btn",to:"/new-skill-awaiting-approval/edit/"+l.id},{default:g(()=>[k(" Edit ")]),_:1},8,["to"]),s("button",{class:"btn green-btn",onClick:e[1]||(e[1]=(...m)=>t.handleSaveBtnClick&&t.handleSaveBtnClick(...m))}," Approve ")])])]),w(A,{showApproveModal:l.showApproveModal,approveSkill:t.approveSkill,closeModal:t.hideApproveModal},null,8,["showApproveModal","approveSkill","closeModal"]),w(f,{dismissSkill:t.dismissSkill,closeDismissModal:t.hideDismissModal,showDismissModal:l.showDisMissModal},null,8,["dismissSkill","closeDismissModal","showDismissModal"]),l.severLoading?(o(),v(M,{key:0})):r("",!0),l.showSuccessModal?(o(),v(y,{key:1,message:l.message,handleOkClick:t.handleSuccessOKclick},null,8,["message","handleOkClick"])):r("",!0),l.showFailsModal?(o(),v(b,{key:2,message:l.message,handleOkClick:t.handleFailsOKclick},null,8,["message","handleOkClick"])):r("",!0)],64)}const Rs=u(as,[["render",qs],["__scopeId","data-v-cfbcfaec"]]);export{Rs as default};
