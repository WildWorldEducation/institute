import{u as j}from"./AnalyticsStore-786d97ee.js";import{u as q}from"./TeacherAnalyticsStore-84ddd5ff.js";import{_ as C,o as p,c as _,f as P,r as D,a as e,g as S,l as v,k as w,b,F as R,z as H,s as x,t as L,p as F,d as V}from"./main-e575576e.js";import"./transform-4d0f7c8f.js";import{u as T,l as A}from"./line-d122782f.js";import{e as I}from"./time-3c9385c3.js";import{l as k,a as E,b as N}from"./linear-d9b6cbf2.js";import{m as $}from"./continuous-93813e6c.js";import{o as B,b as O}from"./band-2263c9e7.js";import{s as f}from"./string-c67ea49d.js";import{c as M}from"./category10-63f9141e.js";import{s as Y}from"./sort-fcaf8f38.js";import"./point-ea70dc51.js";import"./colors-98f238a0.js";const z={name:"SchoolProgressChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(s){s.student.length>0?this.axisData=s.student:s.average.length>0?this.axisData=s.average:this.axisData=[];const i=Object.entries(s).map(([t,y])=>({name:t,values:y}));f("#progress-chart-container");const n=document.getElementById("progress-chart-container").clientWidth,a=document.getElementById("progress-chart-container").clientHeight,l=0,d=0,c=0,u=0,o=T(I(this.axisData,t=>t.date),[u,n-d]),h=k([0,$(this.axisData,t=>t.quantity)],[a-c,l]);B().domain(i.map(t=>t.name)).range(M);const m=A().x(t=>o(t.date)).y(t=>h(t.quantity));f("#progress-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(n,a),+Math.min(n,a)]).attr("preserveAspectRatio","xMinYMin").selectAll(".line").data(i).join("path").attr("fill","none").attr("stroke",t=>t.name=="student"?"green":"#ff7f0e").attr("stroke-width",3).attr("d",t=>m(t.values))}}};function W(s,i,n,a,l,d){return null}const U=C(z,[["render",W]]),G={name:"SchoolTimeChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(s){s.student.length>0?this.axisData=s.student:s.average.length>0?this.axisData=s.average:this.axisData=[];const i=Object.entries(s).map(([t,y])=>({name:t,values:y}));f("#time-chart-container");const n=document.getElementById("time-chart-container").clientWidth,a=document.getElementById("time-chart-container").clientHeight,l=0,d=0,c=0,u=0,o=T(I(this.axisData,t=>t.date),[u,n-d]),h=k([0,$(this.axisData,t=>t.quantity)],[a-c,l]);B().domain(i.map(t=>t.name)).range(M);const m=A().x(t=>o(t.date)).y(t=>h(t.quantity));f("#time-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(n,a),+Math.min(n,a)]).attr("preserveAspectRatio","xMinYMin").selectAll(".line").data(i).join("path").attr("fill","none").attr("stroke",t=>t.name=="student"?"RoyalBlue":"#ff7f0e").attr("stroke-width",3).attr("d",t=>m(t.values))}}};function J(s,i,n,a,l,d){return null}const K=C(G,[["render",J]]),Q={name:"StudentComparisonChart",props:["data","colour"],data(){return{}},mounted(){},methods:{createChart(s){f("#student-comparison-container");const i=25,n=0,a=0,l=10,d=200,c=700,u=Math.ceil((s.length+.1)*i)+n+l,o=k().domain([0,$(s,t=>t.quantity)]).range([d,c-a]),h=O().domain(Y(s,t=>-t.quantity).map(t=>t.name)).rangeRound([n,u-l]).padding(.1),m=o.tickFormat(20),g=f("#student-comparison-container").append("svg").attr("width",c).attr("height",u).attr("viewBox",[0,0,c,u]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");g.append("g").selectAll().data(s).join("rect").attr("x",o(0)).attr("y",t=>h(t.name)).attr("width",t=>o(t.quantity)-o(0)).attr("height",h.bandwidth()).attr("fill",function(t){return t.name=="Language"?"green":t.name=="Mathematics"?"blue":t.name=="Science & Invention"?"purple":t.name=="Computer Science"?"pink":t.name=="Dangerous Ideas"?"brown":t.name=="History"?"cyan":t.name=="Life"?"magenta":"#ff7f0e"}),g.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(s).join("text").attr("x",t=>o(t.quantity)).attr("y",t=>h(t.name)+h.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>m(t.quantity)).call(t=>t.filter(y=>o(y.quantity)-o(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),g.append("g").attr("transform",`translate(0,${n})`).call(E(o).ticks(0)).call(t=>t.select(".domain").remove()),g.append("g").attr("transform",`translate(${d},0)`).attr("style","font-size: 16px").call(N(h).tickSizeOuter(0))}}},X={id:"student-comparison-container"};function Z(s,i,n,a,l,d){return p(),_("div",X)}const tt=C(Q,[["render",Z]]);const et={name:"Student-Dashboard",setup(){const s=P(),i=j(),n=q();return{userDetailsStore:s,analyticsStore:i,teacherAnalyticsStore:n}},data(){return{showSidebar:!0,screenWidth:screen.width,isStudentData:!0,isSchoolData:!0,isLanguageData:!1,isMathData:!1,isHistoryData:!1,isLifeData:!1,isCSData:!1,isSAndIData:!1,isDIData:!1,progressData:{student:[],average:[]},isAboveTheCurve:!1}},components:{StudentProgressChart:U,StudentComparisonChart:tt,StudentTimeChart:K},async created(){await this.analyticsStore.getStudentProgress(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userDetailsStore.userId),await this.analyticsStore.getStudentTime(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.teacherAnalyticsStore.getStudentMultipleFails(this.userDetailsStore.userId),this.analyticsStore.progress.student[this.analyticsStore.progress.student.length-1].quantity>this.analyticsStore.progress.tenant[this.analyticsStore.progress.tenant.length-1].quantity&&(this.isAboveTheCurve=!0),await this.HandleProgressData(),await this.HandleComparisonData(),await this.HandleTimeData()},methods:{async HandleProgressData(){if(this.isStudentData){this.progressData.student=[];for(let s=0;s<this.analyticsStore.progress.student.length;s++)this.progressData.student.push(this.analyticsStore.progress.student[s])}else this.progressData.student=[];if(this.isSchoolData){this.progressData.average=[];for(let s=0;s<this.analyticsStore.progress.tenant.length;s++)this.progressData.average.push(this.analyticsStore.progress.tenant[s])}else this.progressData.average=[];this.$nextTick(()=>{this.$refs.progressChart&&this.$refs.progressChart.createChart(this.progressData)})},async HandleComparisonData(){this.$nextTick(()=>{this.$refs.comparisonChart&&this.$refs.comparisonChart.createChart(this.analyticsStore.studentRootSubjectsPassedAssessments)})},async HandleTimeData(){this.$nextTick(()=>{this.$refs.timeChart&&this.$refs.timeChart.createChart(this.analyticsStore.time)})},toggleSidebar(){this.showSidebar=!this.showSidebar}}},r=s=>(F("data-v-42711266"),s=s(),V(),s),st={class:"dashboard"},at={class:"main"},nt={class:"content container"},rt={class:"dash-row row"},ot={class:"col-md-6 h-100 position-relative"},it={id:"progress-chart-container"},ct={class:"position-absolute chart-heading"},lt=r(()=>e("h2",{class:"heading h5"}," Progress over time ",-1)),ht=r(()=>e("span",{style:{color:"#5f31dd"}},[e("strong",null,"You")],-1)),dt=r(()=>e("br",null,null,-1)),ut=r(()=>e("span",{style:{color:"#ff7f0e"}},[e("strong",null,"School average")],-1)),mt={class:"col-md-6"},pt={id:"comparison-chart-container"},gt=r(()=>e("h2",{class:"heading h5 mt-1"},"Subject comparison",-1)),_t=r(()=>e("p",null,[e("em",null,"TODO: different color for each subject")],-1)),ft={class:"dash-row row"},yt={class:"col-md h-100 position-relative"},St={id:"time-chart-container"},vt={class:"position-absolute chart-heading"},Dt=r(()=>e("h2",{class:"heading h5"},"Study time",-1)),xt=r(()=>e("span",{style:{color:"#5f31dd"}},[e("strong",null,"You")],-1)),Ct=r(()=>e("br",null,null,-1)),wt=r(()=>e("span",{style:{color:"#ff7f0e"}},[e("strong",null,"School average")],-1)),bt={class:"col-md position-relative"},kt={class:"row"},$t={class:"col-md"},Tt=r(()=>e("h2",{class:"h5 heading"}," Super challenging skills ",-1)),At={key:0},It={key:1},Bt={class:"col-md"},Mt=r(()=>e("h2",{class:"h5 heading"},"Stats",-1)),jt=r(()=>e("li",null,[e("strong",null,"Skills passed:"),x(" 25")],-1)),qt=r(()=>e("li",null,[e("strong",null,"Total time spent:"),x(" 5:00 ")],-1)),Pt=r(()=>e("strong",null,"Tokens used:",-1));function Rt(s,i,n,a,l,d){const c=D("RouterLink"),u=D("StudentProgressChart"),o=D("StudentComparisonChart"),h=D("StudentTimeChart");return p(),_("div",st,[e("div",at,[e("div",nt,[e("div",rt,[e("div",ot,[e("div",it,[e("div",ct,[S(c,{to:"/my-progress/skills",class:""},{default:v(()=>[lt]),_:1}),ht,dt,ut]),l.progressData.student.length>0||l.progressData.average.length>0?(p(),w(u,{key:0,ref:"progressChart"},null,512)):b("",!0)])]),e("div",mt,[e("div",pt,[gt,_t,a.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(p(),w(o,{key:0,ref:"comparisonChart",data:a.analyticsStore.studentRootSubjectsPassedAssessments,colour:"#5f31dd"},null,8,["data"])):b("",!0)])])]),e("div",ft,[e("div",yt,[e("div",St,[e("div",vt,[S(c,{to:"/my-progress/time"},{default:v(()=>[Dt]),_:1}),xt,Ct,wt,a.analyticsStore.time.student.length>0||a.analyticsStore.time.tenant.length>0?(p(),w(h,{key:0,ref:"timeChart"},null,512)):b("",!0)])])]),e("div",bt,[e("div",kt,[e("div",$t,[S(c,{to:"/my-progress/super-challenging",class:"col"},{default:v(()=>[Tt]),_:1}),a.teacherAnalyticsStore.studentMultipleFails.length>0?(p(),_("ul",At,[(p(!0),_(R,null,H(a.teacherAnalyticsStore.studentMultipleFails,m=>(p(),_("li",{class:"failed-skills",key:m.id},[S(c,{to:"/skills/"+m.url,target:"_blank"},{default:v(()=>[x(L(m.name),1)]),_:2},1032,["to"])]))),128))])):(p(),_("p",It,"Nothing to worry about yet"))]),e("div",Bt,[Mt,e("ul",null,[jt,qt,e("li",null,[S(c,{to:"/my-progress/tokens"},{default:v(()=>[Pt,x(" 10,000")]),_:1})])])])])])])])])])}const Qt=C(et,[["render",Rt],["__scopeId","data-v-42711266"]]);export{Qt as default};
