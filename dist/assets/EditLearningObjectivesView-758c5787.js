import{_ as u,h as v,f as g,o as n,c as r,a as e,s as b,t as c,F as d,z as _,b as h,O as p,w as m,C as j,p as f,d as k}from"./main-506f87fd.js";const w={setup(){const s=v(),t=g();return{skillsStore:s,userDetailsStore:t}},data(){return{skillId:this.$route.params.skillId,objectiveId:this.$route.params.objectiveId,skill:{},objective:"",originalObjective:"",isLoading:!0,isSubmitting:!1,errors:[]}},async created(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let s=0;s<this.skillsStore.skillsList.length;s++)if(this.skillId==this.skillsStore.skillsList[s].id){this.skill=this.skillsStore.skillsList[s];break}await this.loadObjective()},methods:{async loadObjective(){this.isLoading=!0;try{const s=await fetch(`/skill-learning-objectives/${this.skillId}/${this.objectiveId}`);if(s.ok){const t=await s.json();this.objective=t.objective,this.originalObjective=t.objective}else{const t=await s.json();this.errors=[t.message||"Failed to load learning objective"]}}catch(s){console.error("Error loading learning objective:",s),this.errors=["An error occurred while loading the learning objective."]}finally{this.isLoading=!1}},validateForm(){return this.errors=[],this.objective.trim()||this.errors.push("Learning objective is required"),this.objective.trim().length<10&&this.errors.push("Learning objective must be at least 10 characters long"),this.errors.length===0},async updateObjective(){if(this.validateForm()){this.isSubmitting=!0;try{const s=await fetch(`/skill-learning-objectives/${this.skillId}/${this.objectiveId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({objective:this.objective.trim()})}),t=await s.json();s.ok&&t.success?this.$router.push(`/skills/${this.skill.URL}/learning-objectives`):this.errors=[t.message||"Failed to update learning objective"]}catch(s){console.error("Error updating learning objective:",s),this.errors=["An error occurred while updating the learning objective. Please try again."]}finally{this.isSubmitting=!1}}}},computed:{hasChanges(){return this.objective.trim()!==this.originalObjective.trim()}}},l=s=>(f("data-v-8fb6c907"),s=s(),k(),s),y={class:"row px-2 px-lg-2"},S={class:"col d-flex justify-content-end"},L={class:"d-flex justify-content-between"},x=l(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"20",height:"20",fill:"white"},[e("path",{d:"M208 96a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM123.7 200.5c1-.4 1.9-.8 2.9-1.2l-16.9 63.5c-5.6 21.1-.1 43.6 14.7 59.7l70.7 77.1 22 88.1c4.3 17.1 21.7 27.6 38.8 23.3s27.6-21.7 23.3-38.8l-23-92.1c-1.9-7.8-5.8-14.9-11.2-20.8l-49.5-54 19.3-65.5 9.6 23c4.4 10.6 12.5 19.3 22.8 24.5l26.7 13.3c15.8 7.9 35 1.5 42.9-14.3s1.5-35-14.3-42.9L281 232.7l-15.3-36.8C248.5 154.8 208.3 128 163.7 128c-22.8 0-45.3 4.8-66.1 14l-8 3.5c-32.9 14.6-58.1 42.4-69.4 76.5l-2.6 7.8c-5.6 16.8 3.5 34.9 20.2 40.5s34.9-3.5 40.5-20.2l2.6-7.8c5.7-17.1 18.3-30.9 34.7-38.2l8-3.5zm-30 135.1L68.7 398 9.4 457.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L116.3 441c4.6-4.6 8.2-10.1 10.6-16.1l14.5-36.2-40.7-44.4c-2.5-2.7-4.8-5.6-7-8.6zM550.6 153.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L530.7 224H384c-17.7 0-32 14.3-32 32s14.3 32 32 32H530.7l-25.4 25.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l80-80c12.5-12.5 12.5-32.8 0-45.3l-80-80z"})],-1)),O={class:"container bg-light rounded p-3"},I={class:"heading"},C={key:0,class:"text-center my-5"},E=l(()=>e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)),D=l(()=>e("p",{class:"mt-2 text-muted"},"Loading learning objective...",-1)),F=[E,D],U={key:1,class:"container-fluid"},V={class:"row justify-content-center"},z={class:"col-12 col-md-8 col-lg-6"},M={key:0,class:"alert alert-danger mb-4"},T={class:"mb-0"},B={class:"edit-form-card bg-white p-4 rounded shadow-sm"},N=l(()=>e("h2",{class:"secondary-heading mb-3"}," Learning Objective ",-1)),A={class:"mb-3"},H=l(()=>e("label",{for:"objective",class:"form-label"},[b(" Objective Text "),e("span",{class:"text-danger"},"*")],-1)),P=["disabled"],q=l(()=>e("div",{class:"form-text"},[e("span",{class:"d-none d-sm-inline"}," Describe what students should be able to do after mastering this skill. "),e("span",{class:"d-sm-none"}," Describe what students should be able to do. ")],-1)),J={class:"d-flex flex-row justify-content-end gap-2 mt-4"},R=["disabled"],$={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},G=l(()=>e("span",{class:"visually-hidden"},"Loading...",-1)),K=[G],Q=["disabled"];function W(s,t,X,Y,i,a){return n(),r(d,null,[e("div",y,[e("div",S,[e("div",L,[e("a",{class:"btn red-btn",onClick:t[0]||(t[0]=o=>s.$router.go(-1))},[b("Exit   "),x])])])]),e("div",O,[e("h1",I,c(i.skill.name)+" - Edit Learning Objective",1),i.isLoading?(n(),r("div",C,F)):(n(),r("div",U,[e("div",V,[e("div",z,[i.errors.length>0?(n(),r("div",M,[e("ul",T,[(n(!0),r(d,null,_(i.errors,o=>(n(),r("li",{key:o},c(o),1))),128))])])):h("",!0),e("div",B,[N,e("form",{onSubmit:t[3]||(t[3]=p((...o)=>a.updateObjective&&a.updateObjective(...o),["prevent"]))},[e("div",A,[H,m(e("textarea",{id:"objective","onUpdate:modelValue":t[1]||(t[1]=o=>i.objective=o),class:"form-control",rows:"4",placeholder:"Enter the learning objective...",disabled:i.isSubmitting},null,8,P),[[j,i.objective]]),q]),e("div",J,[e("button",{type:"submit",class:"btn primary-btn",disabled:i.isSubmitting||!i.objective.trim()||!a.hasChanges},[i.isSubmitting?(n(),r("span",$,K)):h("",!0),e("span",null,c(i.isSubmitting?"Updating...":"Update"),1)],8,R),e("button",{type:"button",class:"btn red-btn me-2",onClick:t[2]||(t[2]=o=>s.$router.go(-1)),disabled:i.isSubmitting}," Cancel ",8,Q)])],32)])])])]))])],64)}const ee=u(w,[["render",W],["__scopeId","data-v-8fb6c907"]]);export{ee as default};
