import{u as H}from"./AnalyticsStore-f23797b5.js";import{_ as A,f as L,A as B,r as S,o as g,c as _,q as U,a as t,w as h,O as u,s as l,F as x,z as k,b as C,g as D,l as f,t as w,k as M,p as E,d as T}from"./main-eea2ebf6.js";import"./transform-4d0f7c8f.js";import{u as O,l as N}from"./line-d122782f.js";import{e as R}from"./time-3c9385c3.js";import{l as W,c as j,b as q}from"./linear-d9b6cbf2.js";import{m as z}from"./continuous-93813e6c.js";import{o as F}from"./ordinal-c7f57ebc.js";import{s as y}from"./string-c67ea49d.js";import{c as Y}from"./category10-63f9141e.js";import"./point-ea70dc51.js";import"./colors-98f238a0.js";const G={name:"SchoolProgressChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(n){y("svg").remove(),n.school.length>0?this.axisData=n.school:this.axisData=[];const s=Object.entries(n).map(([a,V])=>({name:a,values:V}));y("#progress-chart-container");const c=document.getElementById("progress-chart-container").clientWidth,i=document.getElementById("progress-chart-container").clientHeight,o=0,r=0,d=0,b=0,e=O(R(this.axisData,a=>a.date),[b,c-r]),m=W([0,z(this.axisData,a=>a.quantity)],[i-d,o]),I=F().domain(s.map(a=>a.name)).range(Y),P=N().x(a=>e(a.date)).y(a=>m(a.quantity)),v=y("#progress-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(c,i),+Math.min(c,i)]).attr("preserveAspectRatio","xMinYMin");v.append("g").attr("transform",`translate(0,${i-d})`).call(j(e).ticks(this.axisData.length).tickSizeOuter(0)),v.append("g").attr("transform",`translate(${b},0)`).call(q(m).ticks(i/80)).call(a=>a.selectAll(".tick line").clone().attr("x2",c-b-r).attr("stroke-opacity",.1)),v.selectAll(".line").data(s).join("path").attr("fill","none").attr("stroke",a=>I(a.name)).attr("stroke-width",3).attr("d",a=>P(a.values))},updateChart(n){}}};function J(n,s,c,i,o,r){return null}const K=A(G,[["render",J]]);const Q={name:"School-Admin-Dashboard",setup(){const n=L(),s=H(),c=B();return{userDetailsStore:n,analyticsStore:s,usersStore:c}},data(){return{showSidebar:!0,screenWidth:screen.width,isEveryone:!0,isSchoolData:!1,isLanguageData:!1,isMathData:!1,isHistoryData:!1,isLifeData:!1,isCSData:!1,isSAndIData:!1,isDIData:!1,progressData:{school:[]},isAboveTheCurve:!1}},components:{SchoolProgressChart:K},async created(){await this.analyticsStore.getSchoolProgress(this.userDetailsStore.tenantId),await this.usersStore.getInstructorsByTenant(this.userDetailsStore.tenantId),await this.usersStore.getStudentsPerTenant(this.userDetailsStore.tenantId),await this.HandleProgressData()},methods:{async HandleProgressData(){this.progressData.school=[];for(let n=0;n<this.analyticsStore.progress.tenant.length;n++)this.progressData.school.push(this.analyticsStore.progress.tenant[n]);this.$nextTick(()=>{this.$refs.progressChart&&this.$refs.progressChart.createChart(this.progressData)})},toggleSidebar(){this.showSidebar=!this.showSidebar}}},p=n=>(E("data-v-08c4ccb0"),n=n(),T(),n),X={class:"dashboard"},Z=p(()=>t("h1",{class:"h2"},"Who",-1)),$={class:"control control-checkbox mb-2"},tt={class:"accordion accordion-flush",id:"classesAccordion"},st={class:"accordion-item"},et=p(()=>t("h2",{class:"accordion-header",id:"headingOne"},[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#classes","aria-expanded":"false","aria-controls":"classes"},[t("strong",null,"Classes")])],-1)),ot={id:"classes",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#classesAccordion"},at={class:"accordion-body"},nt={class:"control control-checkbox"},rt={class:"accordion accordion-flush",id:"studentAccordion"},lt={class:"accordion-item"},it=p(()=>t("h2",{class:"accordion-header",id:"headingOne"},[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#students","aria-expanded":"false","aria-controls":"students"},[t("strong",null,"Students")])],-1)),ct={id:"students",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#studentAccordion"},dt={class:"accordion-body"},ht={class:"control control-checkbox"},ut=p(()=>t("h1",{class:"h2 mt-3"},"Subjects",-1)),pt={class:"control control-checkbox"},gt={class:"control control-checkbox"},mt={class:"control control-checkbox"},_t={class:"control control-checkbox"},bt={class:"control control-checkbox"},Dt={class:"control control-checkbox"},ft={class:"control control-checkbox"},vt={class:"main"},yt={class:"content container-fluid"},St={class:"dash-row row"},xt=p(()=>t("h2",{class:"position-absolute chart-heading h5"}," Academics (Skills mastered) ",-1)),kt=p(()=>t("div",{class:"col-md chart-container p-0 position-relative"},[t("h2",{class:"position-absolute chart-heading h5"}," Notifications ")],-1)),Ct={class:"dash-row row"},wt=p(()=>t("h2",{class:"position-absolute chart-heading h5"}," Engagement ",-1)),At=p(()=>t("h2",{class:"position-absolute chart-heading h5"},"Cost",-1));function It(n,s,c,i,o,r){const d=S("RouterLink"),b=S("SchoolProgressChart");return g(),_("div",X,[o.screenWidth>768?(g(),_("div",{key:0,class:U(["sidebar",{hidden:!o.showSidebar}])},[Z,t("label",$,[h(t("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=e=>o.isEveryone=e),onChange:s[1]||(s[1]=(...e)=>r.HandleProgressData&&r.HandleProgressData(...e))},null,544),[[u,o.isEveryone]]),l(" Everyone ")]),t("div",tt,[t("div",st,[et,t("div",ot,[t("div",at,[t("p",null,[(g(!0),_(x,null,k(i.usersStore.instructors,e=>(g(),_("label",nt,[t("input",{type:"checkbox",onChange:s[2]||(s[2]=(...m)=>r.HandleProgressData&&r.HandleProgressData(...m))},null,32),D(d,{target:"_blank",to:`/reports/class/${e.id}`},{default:f(()=>[l(w(e.username)+"'s class",1)]),_:2},1032,["to"])]))),256))])])])])]),t("div",rt,[t("div",lt,[it,t("div",ct,[t("div",dt,[t("p",null,[(g(!0),_(x,null,k(i.usersStore.studentsPerTenant,e=>(g(),_("label",ht,[t("input",{type:"checkbox",onChange:s[3]||(s[3]=(...m)=>r.HandleProgressData&&r.HandleProgressData(...m))},null,32),D(d,{target:"_blank",to:`/reports/student/${e.id}`},{default:f(()=>[l(w(e.username),1)]),_:2},1032,["to"])]))),256))])])])])]),ut,t("ul",null,[t("li",null,[t("label",pt,[h(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":s[4]||(s[4]=e=>o.isLanguageData=e)},null,512),[[u,o.isLanguageData]]),l(" Language ")])]),t("li",null,[t("label",gt,[h(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":s[5]||(s[5]=e=>o.isMathData=e)},null,512),[[u,o.isMathData]]),l(" Math ")])]),t("li",null,[t("label",mt,[h(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":s[6]||(s[6]=e=>o.isHistoryData=e)},null,512),[[u,o.isHistoryData]]),l(" History ")])]),t("li",null,[t("label",_t,[h(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":s[7]||(s[7]=e=>o.isLifeData=e)},null,512),[[u,o.isLifeData]]),l(" Life ")])]),t("li",null,[t("label",bt,[h(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":s[8]||(s[8]=e=>o.isCSData=e)},null,512),[[u,o.isCSData]]),l(" Computer Science ")])]),t("li",null,[t("label",Dt,[h(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":s[9]||(s[9]=e=>o.isSAndIData=e)},null,512),[[u,o.isSAndIData]]),l(" Science & Invention ")])]),t("li",null,[t("label",ft,[h(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":s[10]||(s[10]=e=>o.isDIData=e)},null,512),[[u,o.isDIData]]),l(" Dangerous Ideas ")])])])],2)):C("",!0),t("div",vt,[t("div",yt,[t("div",St,[D(d,{to:"/reports/academics",id:"progress-chart-container",class:"col-md chart-container p-0 position-relative"},{default:f(()=>[xt,o.progressData.school.length>0?(g(),M(b,{key:0,ref:"progressChart"},null,512)):C("",!0)]),_:1}),kt]),t("div",Ct,[D(d,{to:"/reports/engagement",class:"col-md chart-container p-0 position-relative"},{default:f(()=>[wt]),_:1}),D(d,{to:"/reports/cost",class:"col-md chart-container p-0 position-relative"},{default:f(()=>[At]),_:1})])])])])}const Wt=A(Q,[["render",It],["__scopeId","data-v-08c4ccb0"]]);export{Wt as default};
