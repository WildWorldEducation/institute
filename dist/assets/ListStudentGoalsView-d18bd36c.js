import{_ as p,H as w,q as m,a as v,o as l,c as i,d as t,t as d,F as _,z as g,b as u,m as f,l as S}from"./main-3091fc77.js";const y={setup(){const s=w(),e=m(),o=v();return{userSkillsStore:s,usersStore:e,userDetailsStore:o}},data(){return{studentId:this.$route.params.studentId,studentName:"",goals:[],isTutorialComplete:!1,showTutorialTip1:!1}},async created(){this.usersStore.users.length==0&&await this.usersStore.getUsers();for(let s=0;s<this.usersStore.users.length;s++)if(this.usersStore.users[s].id==this.studentId){this.studentName=this.usersStore.users[s].username;break}await this.userSkillsStore.getFilteredUnnestedList(this.studentId),await this.getGoals(),this.checkIfTutorialComplete()},methods:{async getGoals(){const s=await fetch("/goals/"+this.studentId+"/list");this.goals=await s.json();for(let e=0;e<this.goals.length;e++)await this.getGoalSteps(this.goals[e]);this.prepareGoals()},async getGoalSteps(s){const e=await fetch("/goals/"+s.id+"/goal-steps/list");s.steps=await e.json()},prepareGoals(){for(let s=0;s<this.goals.length;s++){let e=this.userSkillsStore.filteredUnnestedList.find(o=>o.id===this.goals[s].skill_id);this.goals[s].name=e.name,this.goals[s].level=e.level,this.goals[s].showSteps=!1;for(let o=0;o<this.goals[s].steps.length;o++){let h=this.userSkillsStore.filteredUnnestedList.find(n=>n.id==this.goals[s].steps[o].skill_id);this.goals[s].steps[o].name=h.name,this.goals[s].steps[o].level=h.level,this.goals[s].steps[o].url=h.url,this.goals[s].steps[o].isMastered=h.is_mastered}}},async deleteGoal(s){if(confirm("Are you sure you want to delete this goal?")==!0){const o=await fetch("/goals/"+s,{method:"DELETE"});o.error&&console.log(o.error),await this.getGoals()}},async checkIfTutorialComplete(){const e=await(await fetch("/users/check-tutorial-progress/student-goals/"+this.userDetailsStore.userId)).json();e==0?(this.isTutorialComplete=!1,this.showTutorialTip1=!0):e==1&&(this.isTutorialComplete=!0)},progressTutorial(s){s==1&&(this.showTutorialTip1=!1,this.markTutorialComplete())},restartTutorial(){this.showTutorialTip1=!0,this.isTutorialComplete=!1},markTutorialComplete(){let s="/users/mark-tutorial-complete/student-goals/"+this.userDetailsStore.userId;fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"}})}}},k={class:"container p-3 bg-light rounded"},T={class:"d-flex justify-content-between"},L={class:"heading"},x=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",fill:"white"},[t("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1),C=[x],b=t("h2",{class:"secondary-heading"},"Goal Progress",-1),z={id:"goal-list"},M={class:"d-flex"},G={class:"goal h4"},B=["onClick"],I={key:0,width:"18",height:"18",class:"primary-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},V=t("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"},null,-1),j=[V],U={key:1,width:"18",height:"18",class:"primary-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},D=t("path",{d:"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"},null,-1),N=[D],H=["onClick"],O=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"18",height:"18",class:"primary-icon"},[t("path",{d:"M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"})],-1),E=[O],q={key:0},F={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"primary-icon",width:"20",height:"20"},A=t("path",{d:"M384 80c8.8 0 16 7.2 16 16l0 320c0 8.8-7.2 16-16 16L64 432c-8.8 0-16-7.2-16-16L48 96c0-8.8 7.2-16 16-16l320 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32z"},null,-1),P=[A],J={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"primary-icon",width:"20",height:"20"},K=t("path",{d:"M64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80zM0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"},null,-1),Q=[K],R={key:0,class:"modal"},W={class:"modal-content"},X={key:0},Y=t("p",null," On this page, you can see a list of any goals that either you have set for your student, or they have set for themselves. ",-1);function Z(s,e,o,h,n,c){return l(),i("div",k,[t("div",T,[t("h1",L,d(n.studentName),1),t("button",{class:"btn primary-btn me-1",onClick:e[0]||(e[0]=(...a)=>c.restartTutorial&&c.restartTutorial(...a))},C)]),b,t("div",z,[(l(!0),i(_,null,g(n.goals,a=>(l(),i("div",null,[t("div",M,[t("h2",G,[f(d(a.name)+" ",1),t("button",{class:"btn",onClick:r=>a.showSteps=!a.showSteps},[a.showSteps?(l(),i("svg",U,N)):(l(),i("svg",I,j))],8,B),t("button",{class:"btn",onClick:r=>c.deleteGoal(a.id)},E,8,H)])]),a.showSteps?(l(),i("ul",q,[(l(!0),i(_,null,g(a.steps,r=>(l(),i("li",null,[r.isMastered!=1?(l(),i("svg",F,P)):(l(),i("svg",J,Q)),t("span",{class:S(["rounded pe-2",{"grade-school":r.level=="grade_school","middle-school":r.level=="middle_school","high-school":r.level=="high_school",college:r.level=="college",phd:r.level=="phd"}])},"Â  "+d(r.name),3)]))),256))])):u("",!0)]))),256))]),n.showTutorialTip1?(l(),i("div",R,[t("div",W,[n.showTutorialTip1?(l(),i("div",X,[Y,t("button",{class:"btn primary-btn",onClick:e[1]||(e[1]=a=>c.progressTutorial(1))}," close ")])):u("",!0)])])):u("",!0)])}const ss=p(y,[["render",Z]]);export{ss as default};
