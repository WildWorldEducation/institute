import{t as K,c as Q,d as V,e as W,f as _}from"./continuous-f92add0b.js";import{i as nn}from"./init-77b53fdd.js";function bn(n,r){let i;if(r===void 0)for(const t of n)t!=null&&(i<t||i===void 0&&t>=t)&&(i=t);else{let t=-1;for(let e of n)(e=r(e,++t,n))!=null&&(i<e||i===void 0&&e>=e)&&(i=e)}return i}function tn(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function F(n,r){if((i=(n=r?n.toExponential(r-1):n.toExponential()).indexOf("e"))<0)return null;var i,t=n.slice(0,i);return[t.length>1?t[0]+t.slice(2):t,+n.slice(i+1)]}function x(n){return n=F(Math.abs(n)),n?n[1]:NaN}function rn(n,r){return function(i,t){for(var e=i.length,o=[],f=0,h=n[0],g=0;e>0&&h>0&&(g+h+1>t&&(h=Math.max(1,t-g)),o.push(i.substring(e-=h,e+h)),!((g+=h+1)>t));)h=n[f=(f+1)%n.length];return o.reverse().join(r)}}function en(n){return function(r){return r.replace(/[0-9]/g,function(i){return n[+i]})}}var an=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function E(n){if(!(r=an.exec(n)))throw new Error("invalid format: "+n);var r;return new L({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}E.prototype=L.prototype;function L(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}L.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function on(n){n:for(var r=n.length,i=1,t=-1,e;i<r;++i)switch(n[i]){case".":t=e=i;break;case"0":t===0&&(t=i),e=i;break;default:if(!+n[i])break n;t>0&&(t=0);break}return t>0?n.slice(0,t)+n.slice(e+1):n}var Z;function fn(n,r){var i=F(n,r);if(!i)return n+"";var t=i[0],e=i[1],o=e-(Z=Math.max(-8,Math.min(8,Math.floor(e/3)))*3)+1,f=t.length;return o===f?t:o>f?t+new Array(o-f+1).join("0"):o>0?t.slice(0,o)+"."+t.slice(o):"0."+new Array(1-o).join("0")+F(n,Math.max(0,r+o-1))[0]}function G(n,r){var i=F(n,r);if(!i)return n+"";var t=i[0],e=i[1];return e<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")}const X={"%":(n,r)=>(n*100).toFixed(r),b:n=>Math.round(n).toString(2),c:n=>n+"",d:tn,e:(n,r)=>n.toExponential(r),f:(n,r)=>n.toFixed(r),g:(n,r)=>n.toPrecision(r),o:n=>Math.round(n).toString(8),p:(n,r)=>G(n*100,r),r:G,s:fn,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function O(n){return n}var U=Array.prototype.map,Y=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function un(n){var r=n.grouping===void 0||n.thousands===void 0?O:rn(U.call(n.grouping,Number),n.thousands+""),i=n.currency===void 0?"":n.currency[0]+"",t=n.currency===void 0?"":n.currency[1]+"",e=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?O:en(U.call(n.numerals,String)),f=n.percent===void 0?"%":n.percent+"",h=n.minus===void 0?"−":n.minus+"",g=n.nan===void 0?"NaN":n.nan+"";function u(m){m=E(m);var w=m.fill,k=m.align,c=m.sign,S=m.symbol,b=m.zero,N=m.width,I=m.comma,y=m.precision,T=m.trim,s=m.type;s==="n"?(I=!0,s="g"):X[s]||(y===void 0&&(y=12),T=!0,s="g"),(b||w==="0"&&k==="=")&&(b=!0,w="0",k="=");var B=S==="$"?i:S==="#"&&/[boxX]/.test(s)?"0"+s.toLowerCase():"",H=S==="$"?t:/[%p]/.test(s)?f:"",C=X[s],J=/[defgprs%]/.test(s);y=y===void 0?6:/[gprs]/.test(s)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function R(a){var M=B,d=H,p,D,P;if(s==="c")d=C(a)+d,a="";else{a=+a;var z=a<0||1/a<0;if(a=isNaN(a)?g:C(Math.abs(a),y),T&&(a=on(a)),z&&+a==0&&c!=="+"&&(z=!1),M=(z?c==="("?c:h:c==="-"||c==="("?"":c)+M,d=(s==="s"?Y[8+Z/3]:"")+d+(z&&c==="("?")":""),J){for(p=-1,D=a.length;++p<D;)if(P=a.charCodeAt(p),48>P||P>57){d=(P===46?e+a.slice(p+1):a.slice(p))+d,a=a.slice(0,p);break}}}I&&!b&&(a=r(a,1/0));var A=M.length+a.length+d.length,l=A<N?new Array(N-A+1).join(w):"";switch(I&&b&&(a=r(l+a,l.length?N-d.length:1/0),l=""),k){case"<":a=M+a+d+l;break;case"=":a=M+l+a+d;break;case"^":a=l.slice(0,A=l.length>>1)+M+a+d+l.slice(A);break;default:a=l+M+a+d;break}return o(a)}return R.toString=function(){return m+""},R}function $(m,w){var k=u((m=E(m),m.type="f",m)),c=Math.max(-8,Math.min(8,Math.floor(x(w)/3)))*3,S=Math.pow(10,-c),b=Y[8+c/3];return function(N){return k(S*N)+b}}return{format:u,formatPrefix:$}}var j,q,v;hn({thousands:",",grouping:[3],currency:["$",""]});function hn(n){return j=un(n),q=j.format,v=j.formatPrefix,j}function mn(n){return Math.max(0,-x(Math.abs(n)))}function sn(n,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(x(r)/3)))*3-x(Math.abs(n)))}function dn(n,r){return n=Math.abs(n),r=Math.abs(r)-n,Math.max(0,x(r)-x(n))+1}function cn(n,r,i,t){var e=K(n,r,i),o;switch(t=E(t??",f"),t.type){case"s":{var f=Math.max(Math.abs(n),Math.abs(r));return t.precision==null&&!isNaN(o=sn(e,f))&&(t.precision=o),v(t,f)}case"":case"e":case"g":case"p":case"r":{t.precision==null&&!isNaN(o=dn(e,Math.max(Math.abs(n),Math.abs(r))))&&(t.precision=o-(t.type==="e"));break}case"f":case"%":{t.precision==null&&!isNaN(o=mn(e))&&(t.precision=o-(t.type==="%")*2);break}}return q(t)}function ln(n){var r=n.domain;return n.ticks=function(i){var t=r();return W(t[0],t[t.length-1],i??10)},n.tickFormat=function(i,t){var e=r();return cn(e[0],e[e.length-1],i??10,t)},n.nice=function(i){i==null&&(i=10);var t=r(),e=0,o=t.length-1,f=t[e],h=t[o],g,u,$=10;for(h<f&&(u=f,f=h,h=u,u=e,e=o,o=u);$-- >0;){if(u=_(f,h,i),u===g)return t[e]=f,t[o]=h,r(t);if(u>0)f=Math.floor(f/u)*u,h=Math.ceil(h/u)*u;else if(u<0)f=Math.ceil(f*u)/u,h=Math.floor(h*u)/u;else break;g=u}return n},n}function gn(){var n=Q();return n.copy=function(){return V(n,gn())},nn.apply(n,arguments),ln(n)}export{gn as l,bn as m};
