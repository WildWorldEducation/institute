import{_ as ae,z as gn,r as mn,o as q,i as yn,j as qt,c as Z,l as vn,d as z,m as Ht,b as Ft,e as ye,x as ve,F as wn,t as xn,T as $n,p as oe,f as le,a as bn}from"./main-295fa8c4.js";const kn={setup(){},props:["skill","showSkillPanel"],data(){return{treeType:""}},mounted(){const t=gn();this.treeType=t.name},computed:{},methods:{hideInfoPanel(){this.$parent.showSkillPanel=!1,console.log(this.skill)},toggleChildNodes(){this.skill.show_children==0?this.$parent.toggleShowChildren(this.skill):this.$parent.toggleHideChildren(this.skill)},imageUrlAlternative(t){t.target.src=""}}},Dt=t=>(oe("data-v-8abe774d"),t=t(),le(),t),Tn={class:"d-flex justify-content-between p-2"},Sn={class:"d-flex"},zn={key:0},An={key:1},Cn=Dt(()=>z("svg",{width:"18",height:"18",viewBox:"0 0 20 20",class:"tertiary-icon",xmlns:"http://www.w3.org/2000/svg"},[z("path",{d:"M6.34811 20.0423L6.34811 13.6494L-0.0358702 13.6583C-0.320945 13.6579 -0.594203 13.5444 -0.795782 13.3428C-0.997361 13.1412 -1.11082 12.868 -1.11132 12.5829L-1.11729 7.41477C-1.1168 7.1297 -1.00334 6.85644 -0.801757 6.65486C-0.600179 6.45328 -0.326921 6.33982 -0.0418461 6.33933L6.3481 6.34231L6.3481 -0.0506238C6.34659 -0.193451 6.3736 -0.335145 6.42756 -0.467396C6.48152 -0.599646 6.56134 -0.719794 6.66234 -0.820794C6.76334 -0.921794 6.88349 -1.00161 7.01574 -1.05557C7.14799 -1.10953 7.28969 -1.13655 7.43251 -1.13503L12.5827 -1.12308C12.8678 -1.12259 13.141 -1.00913 13.3426 -0.807549C13.5442 -0.60597 13.6577 -0.332713 13.6582 -0.047637L13.6552 6.34231L20.0481 6.34231C20.3325 6.34248 20.6052 6.45552 20.8063 6.65661C21.0074 6.8577 21.1204 7.13039 21.1206 7.41477L21.1325 12.565C21.1324 12.8494 21.0193 13.122 20.8182 13.3231C20.6171 13.5242 20.3444 13.6373 20.0601 13.6374L13.6552 13.6494L13.6641 20.0334C13.6636 20.3184 13.5502 20.5917 13.3486 20.7933C13.147 20.9948 12.8738 21.1083 12.5887 21.1088L7.43252 21.1267C7.28969 21.1282 7.148 21.1012 7.01575 21.0473C6.88349 20.9933 6.76335 20.9135 6.66235 20.8125C6.56135 20.7115 6.48153 20.5913 6.42757 20.4591C6.37361 20.3268 6.34659 20.1851 6.34811 20.0423Z"})],-1)),Mn=Dt(()=>z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"#888",width:"20",height:"20"},[z("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})],-1)),Nn=[Mn],En=Dt(()=>z("hr",null,null,-1)),In={class:"secondary-heading h3 text-center"},Xn=["src"],Yn=["innerHTML"],Dn={key:0,class:"skill-introduction"},Ln=Dt(()=>z("h2",{class:"h4"},"Subskills",-1)),Rn={class:"list-container"};function Pn(t,e,n,i,r,s){const a=mn("router-link");return q(),yn($n,{name:"skillPanel"},{default:qt(()=>{var l,u;return[n.showSkillPanel?(q(),Z("div",{key:0,class:vn(["skill-panel-container text-center overflow-auto",r.treeType==="radial-tree"&&"radial-skill-panel"])},[z("div",null,[z("div",Tn,[z("div",Sn,[n.skill.has_children&&this.$route.name==="learning-tracks"?(q(),Z("button",{key:0,class:"primary-btn me-2 btn",onClick:e[0]||(e[0]=(...o)=>s.toggleChildNodes&&s.toggleChildNodes(...o))},[n.skill.show_children==1?(q(),Z("span",zn,"Collapse")):(q(),Z("span",An,[Ht("Expand "),Cn]))])):Ft("",!0),ye(a,{class:"btn primary-btn",target:"_blank",id:"skillLink",to:"/skills/"+n.skill.url,"b-on-hover":"",title:"Learn more"},{default:qt(()=>[Ht("Learn More ")]),_:1},8,["to"])]),z("button",{class:"closebtn",onClick:e[1]||(e[1]=(...o)=>s.hideInfoPanel&&s.hideInfoPanel(...o)),"b-on-hover":"",title:"Close Panel "},Nn)]),En,z("h1",In,ve((l=n.skill)==null?void 0:l.name),1),z("img",{src:"https://institute-skill-infobox-image-thumbnails.s3.amazonaws.com/"+n.skill.url,class:"rounded img-fluid mx-auto",onError:e[2]||(e[2]=(...o)=>s.imageUrlAlternative&&s.imageUrlAlternative(...o))},null,40,Xn),z("div",{class:"skill-introduction text-start mt-1 mb-4",innerHTML:n.skill.introduction},null,8,Yn),((u=n.skill)==null?void 0:u.type)=="super"?(q(),Z("div",Dn,[Ln,z("ul",Rn,[(q(!0),Z(wn,null,xn(n.skill.subskills,o=>(q(),Z("li",null,[ye(a,{class:"btn mb-2",to:"/skills/"+o.url},{default:qt(()=>[Ht(ve(o.name),1)]),_:2},1032,["to"])]))),256))])])):Ft("",!0)])],2)):Ft("",!0)]}),_:1})}const ho=ae(kn,[["render",Pn],["__scopeId","data-v-8abe774d"]]);const Bn={setup(){},data(){return{oldScale:0}},computed:{},async mounted(){this.oldScale=this.$parent.scale},methods:{scaleTree(t){const e=this.$parent.context.canvas.width/2,n=this.$parent.context.canvas.height/2,i=this.$parent.scale+t,r=i/this.$parent.scale;let s=e+(this.$parent.panX-e)*r,a=n+(this.$parent.panY-n)*r;this.$parent.scale=i,this.oldScale=i,this.$parent.zoomInD3(i,s,a)},zoomIn(){this.$parent.scale<2&&this.scaleTree(.1)},zoomOut(){this.$parent.scale>.3&&this.scaleTree(-.1)}}},ue=t=>(oe("data-v-d66ddf5c"),t=t(),le(),t),qn={id:"zoomcontrols"},Hn=ue(()=>z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[z("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"})],-1)),Fn=[Hn],Vn=ue(()=>z("div",{class:"divider"},null,-1)),On=ue(()=>z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[z("path",{d:"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"})],-1)),Un=[On];function Zn(t,e,n,i,r,s){return q(),Z("div",qn,[z("div",{onClick:e[0]||(e[0]=(...a)=>s.zoomIn&&s.zoomIn(...a)),class:"zoom-button"},Fn),Vn,z("div",{onClick:e[1]||(e[1]=(...a)=>s.zoomOut&&s.zoomOut(...a)),class:"zoom-button"},Un)])}const fo=ae(Bn,[["render",Zn],["__scopeId","data-v-d66ddf5c"]]);const Kn={setup(){return{userDetailsStore:bn()}},data(){return{holdTime:0,interval:null,fps:10,holdTimeInterval:null,fnZoomKey:!1,lefClick:!1,oldMY:0,oldScale:0}},computed:{},async mounted(){switch(this.userDetailsStore.theme){}this.oldScale=this.$parent.scale;const t=Math.floor(1e3/this.fps)+1;panJoystick.on("dir:up plain:up dir:left plain:left dir:down plain:down dir:right plain:right",(e,n)=>{clearInterval(this.interval),this.interval=null,this.holdTime=0;const i=this.$parent.scale>=1?this.$parent.scale*10:20/this.$parent.scale,r=this.$parent.scale>1?this.$parent.scale*15:20/this.$parent.scale;if(this.interval==null)switch(n.direction.angle){case"right":this.interval=setInterval(()=>{this.$parent.panX=this.$parent.panX-20-(this.holdTime*r+i),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break;case"left":this.interval=setInterval(()=>{this.$parent.panX=this.$parent.panX+20+(this.holdTime*r+i),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break;case"up":this.interval=setInterval(()=>{this.$parent.panY=this.$parent.panY+20+(this.holdTime*r+i),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break;case"down":this.interval=setInterval(()=>{this.$parent.panY=this.$parent.panY-20-(this.holdTime*r+i),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break}}).on("end",(e,n)=>{clearInterval(this.interval)}),panJoystick.on("start",(e,n)=>{this.holdTimeInterval=setInterval(()=>{this.holdTime+=1},300)}).on("end",(e,n)=>{clearInterval(this.holdTimeInterval),this.holdTime=0,this.interval=null}),this.$parent.$refs.canvas.addEventListener("keydown",e=>{if(this.interval==null){this.holdTimeInterval=setInterval(()=>{this.holdTime+=1},300);const n=this.$parent.scale>=1?this.$parent.scale/10:50/this.$parent.scale,i=this.$parent.scale>1?this.$parent.scale*15:10/this.$parent.scale;switch(e.code){case"ArrowRight":this.interval=setInterval(()=>{this.$parent.panX=this.$parent.panX-20-(this.holdTime*i+n),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break;case"ArrowLeft":this.interval=setInterval(()=>{this.$parent.panX=this.$parent.panX+20+(this.holdTime*i+n),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break;case"ArrowUp":this.interval=setInterval(()=>{this.$parent.panY=this.$parent.panY+20+(this.holdTime*i+n),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break;case"ArrowDown":this.interval=setInterval(()=>{this.$parent.panY=this.$parent.panY-20-(this.holdTime*i+n),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break;case"Equal":this.interval=setInterval(()=>{this.$parent.scale<2&&this.scaleTree(.03)},50);break;case"Minus":this.interval=setInterval(()=>{this.$parent.scale>.3&&this.scaleTree(-.03)},50);break}}(e.code.includes("Shift")||e.code.includes("Control"))&&(this.fnZoomKey=!0,e.preventDefault()),(e.code.includes("Arrow")||e.code.includes("Page"))&&e.preventDefault()},!1),this.$parent.$refs.canvas.addEventListener("keyup",e=>{clearInterval(this.interval),clearInterval(this.holdTimeInterval),this.interval=null,this.holdTime=0,(e.code.includes("Shift")||e.code.includes("Control"))&&(this.fnZoomKey=!1)},!1),this.$parent.$refs.canvas.addEventListener("mousemove",e=>{if(this.fnZoomKey)if(e.pageY<this.oldMY){this.$parent.scale+=.01;const n=this.oldScale/this.$parent.scale;let i=this.$parent.scale>=1?this.$parent.panX:this.$parent.panX*this.$parent.scale,r=this.$parent.scale>=1?this.$parent.panY:this.$parent.panY*this.$parent.scale;i=i*n,r=r*n,this.oldScale=this.$parent.scale,this.$parent.zoomInD3(this.$parent.scale,i,r)}else{this.$parent.scale-=.01;const n=this.oldScale/this.$parent.scale;let i=this.$parent.scale>=1?this.$parent.panX:this.$parent.panX*this.$parent.scale,r=this.$parent.scale>=1?this.$parent.panY:this.$parent.panY*this.$parent.scale;i=i*n,r=r*n,this.oldScale=this.$parent.scale,this.$parent.zoomInD3(this.$parent.scale,i,r)}this.oldMY=e.pageY})},watch:{},methods:{scaleTree(t){const e=this.$parent.context.canvas.width/2,n=this.$parent.context.canvas.height/2,i=this.$parent.scale+t,r=i/this.$parent.scale;let s=e+(this.$parent.panX-e)*r,a=n+(this.$parent.panY-n)*r;this.$parent.scale=i,this.oldScale=i,this.$parent.zoomInD3(i,s,a)}}},Gn=t=>(oe("data-v-3cac1820"),t=t(),le(),t),Jn={id:"controlsWrapper"},Wn=Gn(()=>z("div",{id:"panJoystick"},null,-1)),Qn=[Wn];function jn(t,e,n,i,r,s){return q(),Z("div",Jn,Qn)}const po=ae(Kn,[["render",jn],["__scopeId","data-v-3cac1820"]]);function _o(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}var ti={value:()=>{}};function ce(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Tt(n)}function Tt(t){this._=t}function ei(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Tt.prototype=ce.prototype={constructor:Tt,on:function(t,e){var n=this._,i=ei(t+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(t=i[s]).type)&&(r=ni(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(r=(t=i[s]).type)n[r]=we(n[r],t.name,e);else if(e==null)for(r in n)n[r]=we(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Tt(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function ni(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function we(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ti,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Gt="http://www.w3.org/1999/xhtml";const xe={svg:"http://www.w3.org/2000/svg",xhtml:Gt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),xe.hasOwnProperty(e)?{space:xe[e],local:t}:t}function ii(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Gt&&e.documentElement.namespaceURI===Gt?e.createElement(t):e.createElementNS(n,t)}}function ri(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function he(t){var e=Lt(t);return(e.local?ri:ii)(e)}function si(){}function fe(t){return t==null?si:function(){return this.querySelector(t)}}function ai(t){typeof t!="function"&&(t=fe(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,l=i[r]=new Array(a),u,o,c=0;c<a;++c)(u=s[c])&&(o=t.call(u,u.__data__,c,s))&&("__data__"in u&&(o.__data__=u.__data__),l[c]=o);return new X(i,this._parents)}function oi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function li(){return[]}function Pe(t){return t==null?li:function(){return this.querySelectorAll(t)}}function ui(t){return function(){return oi(t.apply(this,arguments))}}function ci(t){typeof t=="function"?t=ui(t):t=Pe(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a=e[s],l=a.length,u,o=0;o<l;++o)(u=a[o])&&(i.push(t.call(u,u.__data__,o,a)),r.push(u));return new X(i,r)}function Be(t){return function(){return this.matches(t)}}function qe(t){return function(e){return e.matches(t)}}var hi=Array.prototype.find;function fi(t){return function(){return hi.call(this.children,t)}}function pi(){return this.firstElementChild}function di(t){return this.select(t==null?pi:fi(typeof t=="function"?t:qe(t)))}var _i=Array.prototype.filter;function gi(){return Array.from(this.children)}function mi(t){return function(){return _i.call(this.children,t)}}function yi(t){return this.selectAll(t==null?gi:mi(typeof t=="function"?t:qe(t)))}function vi(t){typeof t!="function"&&(t=Be(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,l=i[r]=[],u,o=0;o<a;++o)(u=s[o])&&t.call(u,u.__data__,o,s)&&l.push(u);return new X(i,this._parents)}function He(t){return new Array(t.length)}function wi(){return new X(this._enter||this._groups.map(He),this._parents)}function Mt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Mt.prototype={constructor:Mt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function xi(t){return function(){return t}}function $i(t,e,n,i,r,s){for(var a=0,l,u=e.length,o=s.length;a<o;++a)(l=e[a])?(l.__data__=s[a],i[a]=l):n[a]=new Mt(t,s[a]);for(;a<u;++a)(l=e[a])&&(r[a]=l)}function bi(t,e,n,i,r,s,a){var l,u,o=new Map,c=e.length,p=s.length,f=new Array(c),_;for(l=0;l<c;++l)(u=e[l])&&(f[l]=_=a.call(u,u.__data__,l,e)+"",o.has(_)?r[l]=u:o.set(_,u));for(l=0;l<p;++l)_=a.call(t,s[l],l,s)+"",(u=o.get(_))?(i[l]=u,u.__data__=s[l],o.delete(_)):n[l]=new Mt(t,s[l]);for(l=0;l<c;++l)(u=e[l])&&o.get(f[l])===u&&(r[l]=u)}function ki(t){return t.__data__}function Ti(t,e){if(!arguments.length)return Array.from(this,ki);var n=e?bi:$i,i=this._parents,r=this._groups;typeof t!="function"&&(t=xi(t));for(var s=r.length,a=new Array(s),l=new Array(s),u=new Array(s),o=0;o<s;++o){var c=i[o],p=r[o],f=p.length,_=Si(t.call(c,c&&c.__data__,o,i)),v=_.length,x=l[o]=new Array(v),S=a[o]=new Array(v),m=u[o]=new Array(f);n(c,p,x,S,m,_,e);for(var k=0,C=0,M,E;k<v;++k)if(M=x[k]){for(k>=C&&(C=k+1);!(E=S[C])&&++C<v;);M._next=E||null}}return a=new X(a,i),a._enter=l,a._exit=u,a}function Si(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zi(){return new X(this._exit||this._groups.map(He),this._parents)}function Ai(t,e,n){var i=this.enter(),r=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function Ci(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,a=Math.min(r,s),l=new Array(r),u=0;u<a;++u)for(var o=n[u],c=i[u],p=o.length,f=l[u]=new Array(p),_,v=0;v<p;++v)(_=o[v]||c[v])&&(f[v]=_);for(;u<r;++u)l[u]=n[u];return new X(l,this._parents)}function Mi(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Ni(t){t||(t=Ei);function e(p,f){return p&&f?t(p.__data__,f.__data__):!p-!f}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],l=a.length,u=r[s]=new Array(l),o,c=0;c<l;++c)(o=a[c])&&(u[c]=o);u.sort(e)}return new X(r,this._parents).order()}function Ei(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ii(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Xi(){return Array.from(this)}function Yi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function Di(){let t=0;for(const e of this)++t;return t}function Li(){return!this.node()}function Ri(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,a=r.length,l;s<a;++s)(l=r[s])&&t.call(l,l.__data__,s,r);return this}function Pi(t){return function(){this.removeAttribute(t)}}function Bi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qi(t,e){return function(){this.setAttribute(t,e)}}function Hi(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Fi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Vi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Oi(t,e){var n=Lt(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Bi:Pi:typeof e=="function"?n.local?Vi:Fi:n.local?Hi:qi)(n,e))}function Fe(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ui(t){return function(){this.style.removeProperty(t)}}function Zi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ki(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Gi(t,e,n){return arguments.length>1?this.each((e==null?Ui:typeof e=="function"?Ki:Zi)(t,e,n??"")):st(this.node(),t)}function st(t,e){return t.style.getPropertyValue(e)||Fe(t).getComputedStyle(t,null).getPropertyValue(e)}function Ji(t){return function(){delete this[t]}}function Wi(t,e){return function(){this[t]=e}}function Qi(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ji(t,e){return arguments.length>1?this.each((e==null?Ji:typeof e=="function"?Qi:Wi)(t,e)):this.node()[t]}function Ve(t){return t.trim().split(/^|\s+/)}function pe(t){return t.classList||new Oe(t)}function Oe(t){this._node=t,this._names=Ve(t.getAttribute("class")||"")}Oe.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ue(t,e){for(var n=pe(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Ze(t,e){for(var n=pe(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function tr(t){return function(){Ue(this,t)}}function er(t){return function(){Ze(this,t)}}function nr(t,e){return function(){(e.apply(this,arguments)?Ue:Ze)(this,t)}}function ir(t,e){var n=Ve(t+"");if(arguments.length<2){for(var i=pe(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?nr:e?tr:er)(n,e))}function rr(){this.textContent=""}function sr(t){return function(){this.textContent=t}}function ar(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function or(t){return arguments.length?this.each(t==null?rr:(typeof t=="function"?ar:sr)(t)):this.node().textContent}function lr(){this.innerHTML=""}function ur(t){return function(){this.innerHTML=t}}function cr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function hr(t){return arguments.length?this.each(t==null?lr:(typeof t=="function"?cr:ur)(t)):this.node().innerHTML}function fr(){this.nextSibling&&this.parentNode.appendChild(this)}function pr(){return this.each(fr)}function dr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _r(){return this.each(dr)}function gr(t){var e=typeof t=="function"?t:he(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function mr(){return null}function yr(t,e){var n=typeof t=="function"?t:he(t),i=e==null?mr:typeof e=="function"?e:fe(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function vr(){var t=this.parentNode;t&&t.removeChild(this)}function wr(){return this.each(vr)}function xr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $r(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function br(t){return this.select(t?$r:xr)}function kr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Tr(t){return function(e){t.call(this,e,this.__data__)}}function Sr(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function zr(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function Ar(t,e,n){return function(){var i=this.__on,r,s=Tr(e);if(i){for(var a=0,l=i.length;a<l;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function Cr(t,e,n){var i=Sr(t+""),r,s=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,o=l.length,c;u<o;++u)for(r=0,c=l[u];r<s;++r)if((a=i[r]).type===c.type&&a.name===c.name)return c.value}return}for(l=e?Ar:zr,r=0;r<s;++r)this.each(l(i[r],e,n));return this}function Ke(t,e,n){var i=Fe(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Mr(t,e){return function(){return Ke(this,t,e)}}function Nr(t,e){return function(){return Ke(this,t,e.apply(this,arguments))}}function Er(t,e){return this.each((typeof e=="function"?Nr:Mr)(t,e))}function*Ir(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var Ge=[null];function X(t,e){this._groups=t,this._parents=e}function gt(){return new X([[document.documentElement]],Ge)}function Xr(){return this}X.prototype=gt.prototype={constructor:X,select:ai,selectAll:ci,selectChild:di,selectChildren:yi,filter:vi,data:Ti,enter:wi,exit:zi,join:Ai,merge:Ci,selection:Xr,order:Mi,sort:Ni,call:Ii,nodes:Xi,node:Yi,size:Di,empty:Li,each:Ri,attr:Oi,style:Gi,property:ji,classed:ir,text:or,html:hr,raise:pr,lower:_r,append:gr,insert:yr,remove:wr,clone:br,datum:kr,on:Cr,dispatch:Er,[Symbol.iterator]:Ir};function Q(t){return typeof t=="string"?new X([[document.querySelector(t)]],[document.documentElement]):new X([[t]],Ge)}function go(t){return Q(he(t).call(document.documentElement))}function Yr(t){let e;for(;e=t.sourceEvent;)t=e;return t}function j(t,e){if(t=Yr(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Jt={capture:!0,passive:!1};function Wt(t){t.preventDefault(),t.stopImmediatePropagation()}function Dr(t){var e=t.document.documentElement,n=Q(t).on("dragstart.drag",Wt,Jt);"onselectstart"in e?n.on("selectstart.drag",Wt,Jt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Lr(t,e){var n=t.document.documentElement,i=Q(t).on("dragstart.drag",null);e&&(i.on("click.drag",Wt,Jt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function de(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Je(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function mt(){}var ht=.7,Nt=1/ht,rt="\\s*([+-]?\\d+)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",H="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rr=/^#([0-9a-f]{3,8})$/,Pr=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),Br=new RegExp(`^rgb\\(${H},${H},${H}\\)$`),qr=new RegExp(`^rgba\\(${rt},${rt},${rt},${ft}\\)$`),Hr=new RegExp(`^rgba\\(${H},${H},${H},${ft}\\)$`),Fr=new RegExp(`^hsl\\(${ft},${H},${H}\\)$`),Vr=new RegExp(`^hsla\\(${ft},${H},${H},${ft}\\)$`),$e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};de(mt,pt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:be,formatHex:be,formatHex8:Or,formatHsl:Ur,formatRgb:ke,toString:ke});function be(){return this.rgb().formatHex()}function Or(){return this.rgb().formatHex8()}function Ur(){return We(this).formatHsl()}function ke(){return this.rgb().formatRgb()}function pt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Rr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Te(e):n===3?new I(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?xt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?xt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Pr.exec(t))?new I(e[1],e[2],e[3],1):(e=Br.exec(t))?new I(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=qr.exec(t))?xt(e[1],e[2],e[3],e[4]):(e=Hr.exec(t))?xt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Fr.exec(t))?Ae(e[1],e[2]/100,e[3]/100,1):(e=Vr.exec(t))?Ae(e[1],e[2]/100,e[3]/100,e[4]):$e.hasOwnProperty(t)?Te($e[t]):t==="transparent"?new I(NaN,NaN,NaN,0):null}function Te(t){return new I(t>>16&255,t>>8&255,t&255,1)}function xt(t,e,n,i){return i<=0&&(t=e=n=NaN),new I(t,e,n,i)}function Zr(t){return t instanceof mt||(t=pt(t)),t?(t=t.rgb(),new I(t.r,t.g,t.b,t.opacity)):new I}function Qt(t,e,n,i){return arguments.length===1?Zr(t):new I(t,e,n,i??1)}function I(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}de(I,Qt,Je(mt,{brighter(t){return t=t==null?Nt:Math.pow(Nt,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ht:Math.pow(ht,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new I(nt(this.r),nt(this.g),nt(this.b),Et(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Se,formatHex:Se,formatHex8:Kr,formatRgb:ze,toString:ze}));function Se(){return`#${et(this.r)}${et(this.g)}${et(this.b)}`}function Kr(){return`#${et(this.r)}${et(this.g)}${et(this.b)}${et((isNaN(this.opacity)?1:this.opacity)*255)}`}function ze(){const t=Et(this.opacity);return`${t===1?"rgb(":"rgba("}${nt(this.r)}, ${nt(this.g)}, ${nt(this.b)}${t===1?")":`, ${t})`}`}function Et(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function nt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function et(t){return t=nt(t),(t<16?"0":"")+t.toString(16)}function Ae(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new R(t,e,n,i)}function We(t){if(t instanceof R)return new R(t.h,t.s,t.l,t.opacity);if(t instanceof mt||(t=pt(t)),!t)return new R;if(t instanceof R)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,l=s-r,u=(s+r)/2;return l?(e===s?a=(n-i)/l+(n<i)*6:n===s?a=(i-e)/l+2:a=(e-n)/l+4,l/=u<.5?s+r:2-s-r,a*=60):l=u>0&&u<1?0:a,new R(a,l,u,t.opacity)}function Gr(t,e,n,i){return arguments.length===1?We(t):new R(t,e,n,i??1)}function R(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}de(R,Gr,Je(mt,{brighter(t){return t=t==null?Nt:Math.pow(Nt,t),new R(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ht:Math.pow(ht,t),new R(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new I(Vt(t>=240?t-240:t+120,r,i),Vt(t,r,i),Vt(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new R(Ce(this.h),$t(this.s),$t(this.l),Et(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Et(this.opacity);return`${t===1?"hsl(":"hsla("}${Ce(this.h)}, ${$t(this.s)*100}%, ${$t(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ce(t){return t=(t||0)%360,t<0?t+360:t}function $t(t){return Math.max(0,Math.min(1,t||0))}function Vt(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Qe=t=>()=>t;function Jr(t,e){return function(n){return t+n*e}}function Wr(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Qr(t){return(t=+t)==1?je:function(e,n){return n-e?Wr(e,n,t):Qe(isNaN(e)?n:e)}}function je(t,e){var n=e-t;return n?Jr(t,n):Qe(isNaN(t)?e:t)}const Me=function t(e){var n=Qr(e);function i(r,s){var a=n((r=Qt(r)).r,(s=Qt(s)).r),l=n(r.g,s.g),u=n(r.b,s.b),o=je(r.opacity,s.opacity);return function(c){return r.r=a(c),r.g=l(c),r.b=u(c),r.opacity=o(c),r+""}}return i.gamma=t,i}(1);function W(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var jt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ot=new RegExp(jt.source,"g");function jr(t){return function(){return t}}function ts(t){return function(e){return t(e)+""}}function es(t,e){var n=jt.lastIndex=Ot.lastIndex=0,i,r,s,a=-1,l=[],u=[];for(t=t+"",e=e+"";(i=jt.exec(t))&&(r=Ot.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,u.push({i:a,x:W(i,r)})),n=Ot.lastIndex;return n<e.length&&(s=e.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?ts(u[0].x):jr(e):(e=u.length,function(o){for(var c=0,p;c<e;++c)l[(p=u[c]).i]=p.x(o);return l.join("")})}var Ne=180/Math.PI,te={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tn(t,e,n,i,r,s){var a,l,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,u/=l),t*i<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*Ne,skewX:Math.atan(u)*Ne,scaleX:a,scaleY:l}}var bt;function ns(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?te:tn(e.a,e.b,e.c,e.d,e.e,e.f)}function is(t){return t==null||(bt||(bt=document.createElementNS("http://www.w3.org/2000/svg","g")),bt.setAttribute("transform",t),!(t=bt.transform.baseVal.consolidate()))?te:(t=t.matrix,tn(t.a,t.b,t.c,t.d,t.e,t.f))}function en(t,e,n,i){function r(o){return o.length?o.pop()+" ":""}function s(o,c,p,f,_,v){if(o!==p||c!==f){var x=_.push("translate(",null,e,null,n);v.push({i:x-4,x:W(o,p)},{i:x-2,x:W(c,f)})}else(p||f)&&_.push("translate("+p+e+f+n)}function a(o,c,p,f){o!==c?(o-c>180?c+=360:c-o>180&&(o+=360),f.push({i:p.push(r(p)+"rotate(",null,i)-2,x:W(o,c)})):c&&p.push(r(p)+"rotate("+c+i)}function l(o,c,p,f){o!==c?f.push({i:p.push(r(p)+"skewX(",null,i)-2,x:W(o,c)}):c&&p.push(r(p)+"skewX("+c+i)}function u(o,c,p,f,_,v){if(o!==p||c!==f){var x=_.push(r(_)+"scale(",null,",",null,")");v.push({i:x-4,x:W(o,p)},{i:x-2,x:W(c,f)})}else(p!==1||f!==1)&&_.push(r(_)+"scale("+p+","+f+")")}return function(o,c){var p=[],f=[];return o=t(o),c=t(c),s(o.translateX,o.translateY,c.translateX,c.translateY,p,f),a(o.rotate,c.rotate,p,f),l(o.skewX,c.skewX,p,f),u(o.scaleX,o.scaleY,c.scaleX,c.scaleY,p,f),o=c=null,function(_){for(var v=-1,x=f.length,S;++v<x;)p[(S=f[v]).i]=S.x(_);return p.join("")}}}var rs=en(ns,"px, ","px)","deg)"),ss=en(is,", ",")",")"),as=1e-12;function Ee(t){return((t=Math.exp(t))+1/t)/2}function os(t){return((t=Math.exp(t))-1/t)/2}function ls(t){return((t=Math.exp(2*t))-1)/(t+1)}const us=function t(e,n,i){function r(s,a){var l=s[0],u=s[1],o=s[2],c=a[0],p=a[1],f=a[2],_=c-l,v=p-u,x=_*_+v*v,S,m;if(x<as)m=Math.log(f/o)/e,S=function(J){return[l+J*_,u+J*v,o*Math.exp(e*J*m)]};else{var k=Math.sqrt(x),C=(f*f-o*o+i*x)/(2*o*n*k),M=(f*f-o*o-i*x)/(2*f*n*k),E=Math.log(Math.sqrt(C*C+1)-C),Y=Math.log(Math.sqrt(M*M+1)-M);m=(Y-E)/e,S=function(J){var yt=J*m,vt=Ee(E),wt=o/(n*k)*(vt*ls(e*yt+E)-os(E));return[l+wt*_,u+wt*v,o*vt/Ee(e*yt+E)]}}return S.duration=m*1e3*e/Math.SQRT2,S}return r.rho=function(s){var a=Math.max(.001,+s),l=a*a,u=l*l;return t(a,l,u)},r}(Math.SQRT2,2,4);var at=0,ut=0,ot=0,nn=1e3,It,ct,Xt=0,it=0,Rt=0,dt=typeof performance=="object"&&performance.now?performance:Date,rn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function _e(){return it||(rn(cs),it=dt.now()+Rt)}function cs(){it=0}function Yt(){this._call=this._time=this._next=null}Yt.prototype=sn.prototype={constructor:Yt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?_e():+n)+(e==null?0:+e),!this._next&&ct!==this&&(ct?ct._next=this:It=this,ct=this),this._call=t,this._time=n,ee()},stop:function(){this._call&&(this._call=null,this._time=1/0,ee())}};function sn(t,e,n){var i=new Yt;return i.restart(t,e,n),i}function hs(){_e(),++at;for(var t=It,e;t;)(e=it-t._time)>=0&&t._call.call(void 0,e),t=t._next;--at}function Ie(){it=(Xt=dt.now())+Rt,at=ut=0;try{hs()}finally{at=0,ps(),it=0}}function fs(){var t=dt.now(),e=t-Xt;e>nn&&(Rt-=e,Xt=t)}function ps(){for(var t,e=It,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:It=n);ct=t,ee(i)}function ee(t){if(!at){ut&&(ut=clearTimeout(ut));var e=t-it;e>24?(t<1/0&&(ut=setTimeout(Ie,t-dt.now()-Rt)),ot&&(ot=clearInterval(ot))):(ot||(Xt=dt.now(),ot=setInterval(fs,nn)),at=1,rn(Ie))}}function Xe(t,e,n){var i=new Yt;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var ds=ce("start","end","cancel","interrupt"),_s=[],an=0,Ye=1,ne=2,St=3,De=4,ie=5,zt=6;function Pt(t,e,n,i,r,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;gs(t,n,{name:e,index:i,group:r,on:ds,tween:_s,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:an})}function ge(t,e){var n=P(t,e);if(n.state>an)throw new Error("too late; already scheduled");return n}function F(t,e){var n=P(t,e);if(n.state>St)throw new Error("too late; already running");return n}function P(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function gs(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=sn(s,0,n.time);function s(o){n.state=Ye,n.timer.restart(a,n.delay,n.time),n.delay<=o&&a(o-n.delay)}function a(o){var c,p,f,_;if(n.state!==Ye)return u();for(c in i)if(_=i[c],_.name===n.name){if(_.state===St)return Xe(a);_.state===De?(_.state=zt,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete i[c]):+c<e&&(_.state=zt,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete i[c])}if(Xe(function(){n.state===St&&(n.state=De,n.timer.restart(l,n.delay,n.time),l(o))}),n.state=ne,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ne){for(n.state=St,r=new Array(f=n.tween.length),c=0,p=-1;c<f;++c)(_=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++p]=_);r.length=p+1}}function l(o){for(var c=o<n.duration?n.ease.call(null,o/n.duration):(n.timer.restart(u),n.state=ie,1),p=-1,f=r.length;++p<f;)r[p].call(t,c);n.state===ie&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=zt,n.timer.stop(),delete i[e];for(var o in i)return;delete t.__transition}}function At(t,e){var n=t.__transition,i,r,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){s=!1;continue}r=i.state>ne&&i.state<ie,i.state=zt,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}s&&delete t.__transition}}function ms(t){return this.each(function(){At(this,t)})}function ys(t,e){var n,i;return function(){var r=F(this,t),s=r.tween;if(s!==n){i=n=s;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function vs(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=F(this,t),a=s.tween;if(a!==i){r=(i=a).slice();for(var l={name:e,value:n},u=0,o=r.length;u<o;++u)if(r[u].name===e){r[u]=l;break}u===o&&r.push(l)}s.tween=r}}function ws(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=P(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?ys:vs)(n,t,e))}function me(t,e,n){var i=t._id;return t.each(function(){var r=F(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return P(r,i).value[e]}}function on(t,e){var n;return(typeof e=="number"?W:e instanceof pt?Me:(n=pt(e))?(e=n,Me):es)(t,e)}function xs(t){return function(){this.removeAttribute(t)}}function $s(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bs(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttribute(t);return a===r?null:a===i?s:s=e(i=a,n)}}function ks(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?s:s=e(i=a,n)}}function Ts(t,e,n){var i,r,s;return function(){var a,l=n(this),u;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=l+"",a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,l)))}}function Ss(t,e,n){var i,r,s;return function(){var a,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=l+"",a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,l)))}}function zs(t,e){var n=Lt(t),i=n==="transform"?ss:on;return this.attrTween(t,typeof e=="function"?(n.local?Ss:Ts)(n,i,me(this,"attr."+t,e)):e==null?(n.local?$s:xs)(n):(n.local?ks:bs)(n,i,e))}function As(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Cs(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ms(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&Cs(t,s)),n}return r._value=e,r}function Ns(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&As(t,s)),n}return r._value=e,r}function Es(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Lt(t);return this.tween(n,(i.local?Ms:Ns)(i,e))}function Is(t,e){return function(){ge(this,t).delay=+e.apply(this,arguments)}}function Xs(t,e){return e=+e,function(){ge(this,t).delay=e}}function Ys(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Is:Xs)(e,t)):P(this.node(),e).delay}function Ds(t,e){return function(){F(this,t).duration=+e.apply(this,arguments)}}function Ls(t,e){return e=+e,function(){F(this,t).duration=e}}function Rs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ds:Ls)(e,t)):P(this.node(),e).duration}function Ps(t,e){if(typeof e!="function")throw new Error;return function(){F(this,t).ease=e}}function Bs(t){var e=this._id;return arguments.length?this.each(Ps(e,t)):P(this.node(),e).ease}function qs(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;F(this,t).ease=n}}function Hs(t){if(typeof t!="function")throw new Error;return this.each(qs(this._id,t))}function Fs(t){typeof t!="function"&&(t=Be(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,l=i[r]=[],u,o=0;o<a;++o)(u=s[o])&&t.call(u,u.__data__,o,s)&&l.push(u);return new G(i,this._parents,this._name,this._id)}function Vs(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),l=0;l<s;++l)for(var u=e[l],o=n[l],c=u.length,p=a[l]=new Array(c),f,_=0;_<c;++_)(f=u[_]||o[_])&&(p[_]=f);for(;l<i;++l)a[l]=e[l];return new G(a,this._parents,this._name,this._id)}function Os(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Us(t,e,n){var i,r,s=Os(e)?ge:F;return function(){var a=s(this,t),l=a.on;l!==i&&(r=(i=l).copy()).on(e,n),a.on=r}}function Zs(t,e){var n=this._id;return arguments.length<2?P(this.node(),n).on.on(t):this.each(Us(n,t,e))}function Ks(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Gs(){return this.on("end.remove",Ks(this._id))}function Js(t){var e=this._name,n=this._id;typeof t!="function"&&(t=fe(t));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var l=i[a],u=l.length,o=s[a]=new Array(u),c,p,f=0;f<u;++f)(c=l[f])&&(p=t.call(c,c.__data__,f,l))&&("__data__"in c&&(p.__data__=c.__data__),o[f]=p,Pt(o[f],e,n,f,o,P(c,n)));return new G(s,this._parents,e,n)}function Ws(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Pe(t));for(var i=this._groups,r=i.length,s=[],a=[],l=0;l<r;++l)for(var u=i[l],o=u.length,c,p=0;p<o;++p)if(c=u[p]){for(var f=t.call(c,c.__data__,p,u),_,v=P(c,n),x=0,S=f.length;x<S;++x)(_=f[x])&&Pt(_,e,n,x,f,v);s.push(f),a.push(c)}return new G(s,a,e,n)}var Qs=gt.prototype.constructor;function js(){return new Qs(this._groups,this._parents)}function ta(t,e){var n,i,r;return function(){var s=st(this,t),a=(this.style.removeProperty(t),st(this,t));return s===a?null:s===n&&a===i?r:r=e(n=s,i=a)}}function ln(t){return function(){this.style.removeProperty(t)}}function ea(t,e,n){var i,r=n+"",s;return function(){var a=st(this,t);return a===r?null:a===i?s:s=e(i=a,n)}}function na(t,e,n){var i,r,s;return function(){var a=st(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),st(this,t))),a===u?null:a===i&&u===r?s:(r=u,s=e(i=a,l))}}function ia(t,e){var n,i,r,s="style."+e,a="end."+s,l;return function(){var u=F(this,t),o=u.on,c=u.value[s]==null?l||(l=ln(e)):void 0;(o!==n||r!==c)&&(i=(n=o).copy()).on(a,r=c),u.on=i}}function ra(t,e,n){var i=(t+="")=="transform"?rs:on;return e==null?this.styleTween(t,ta(t,i)).on("end.style."+t,ln(t)):typeof e=="function"?this.styleTween(t,na(t,i,me(this,"style."+t,e))).each(ia(this._id,t)):this.styleTween(t,ea(t,i,e),n).on("end.style."+t,null)}function sa(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function aa(t,e,n){var i,r;function s(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&sa(t,a,n)),i}return s._value=e,s}function oa(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,aa(t,e,n??""))}function la(t){return function(){this.textContent=t}}function ua(t){return function(){var e=t(this);this.textContent=e??""}}function ca(t){return this.tween("text",typeof t=="function"?ua(me(this,"text",t)):la(t==null?"":t+""))}function ha(t){return function(e){this.textContent=t.call(this,e)}}function fa(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ha(r)),e}return i._value=t,i}function pa(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,fa(t))}function da(){for(var t=this._name,e=this._id,n=un(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],l=a.length,u,o=0;o<l;++o)if(u=a[o]){var c=P(u,e);Pt(u,t,n,o,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new G(i,this._parents,t,n)}function _a(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var l={value:a},u={value:function(){--r===0&&s()}};n.each(function(){var o=F(this,i),c=o.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),o.on=e}),r===0&&s()})}var ga=0;function G(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function un(){return++ga}var U=gt.prototype;G.prototype={constructor:G,select:Js,selectAll:Ws,selectChild:U.selectChild,selectChildren:U.selectChildren,filter:Fs,merge:Vs,selection:js,transition:da,call:U.call,nodes:U.nodes,node:U.node,size:U.size,empty:U.empty,each:U.each,on:Zs,attr:zs,attrTween:Es,style:ra,styleTween:oa,text:ca,textTween:pa,remove:Gs,tween:ws,delay:Ys,duration:Rs,ease:Bs,easeVarying:Hs,end:_a,[Symbol.iterator]:U[Symbol.iterator]};function ma(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ya={time:null,delay:0,duration:250,ease:ma};function va(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function wa(t){var e,n;t instanceof G?(e=t._id,t=t._name):(e=un(),(n=ya).time=_e(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],l=a.length,u,o=0;o<l;++o)(u=a[o])&&Pt(u,t,e,o,a,n||va(u,e));return new G(i,this._parents,t,e)}gt.prototype.interrupt=ms;gt.prototype.transition=wa;const re=Math.PI,se=2*re,tt=1e-6,xa=se-tt;function cn(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function $a(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return cn;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class ba{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?cn:$a(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,u=i-e,o=r-n,c=a-e,p=l-n,f=c*c+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>tt)if(!(Math.abs(p*u-o*c)>tt)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let _=i-a,v=r-l,x=u*u+o*o,S=_*_+v*v,m=Math.sqrt(x),k=Math.sqrt(f),C=s*Math.tan((re-Math.acos((x+f-S)/(2*m*k)))/2),M=C/k,E=C/m;Math.abs(M-1)>tt&&this._append`L${e+M*c},${n+M*p}`,this._append`A${s},${s},0,0,${+(p*_>c*v)},${this._x1=e+E*u},${this._y1=n+E*o}`}}arc(e,n,i,r,s,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),u=i*Math.sin(r),o=e+l,c=n+u,p=1^a,f=a?r-s:s-r;this._x1===null?this._append`M${o},${c}`:(Math.abs(this._x1-o)>tt||Math.abs(this._y1-c)>tt)&&this._append`L${o},${c}`,i&&(f<0&&(f=f%se+se),f>xa?this._append`A${i},${i},0,1,${p},${e-l},${n-u}A${i},${i},0,1,${p},${this._x1=o},${this._y1=c}`:f>tt&&this._append`A${i},${i},0,${+(f>=re)},${p},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function ka(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function Ta(){return this.eachAfter(ka)}function Sa(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function za(t,e){for(var n=this,i=[n],r,s,a=-1;n=i.pop();)if(t.call(e,n,++a,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function Aa(t,e){for(var n=this,i=[n],r=[],s,a,l,u=-1;n=i.pop();)if(r.push(n),s=n.children)for(a=0,l=s.length;a<l;++a)i.push(s[a]);for(;n=r.pop();)t.call(e,n,++u,this);return this}function Ca(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function Ma(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}function Na(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Ea(t){for(var e=this,n=Ia(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}function Ia(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function Xa(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Ya(){return Array.from(this)}function Da(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function La(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Ra(){var t=this,e,n=[t],i,r,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function hn(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=qa)):e===void 0&&(e=Ba);for(var n=new _t(t),i,r=[n],s,a,l,u;i=r.pop();)if((a=e(i.data))&&(u=(a=Array.from(a)).length))for(i.children=a,l=u-1;l>=0;--l)r.push(s=a[l]=new _t(a[l])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(Fa)}function Pa(){return hn(this).eachBefore(Ha)}function Ba(t){return t.children}function qa(t){return Array.isArray(t)?t[1]:null}function Ha(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Fa(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function _t(t){this.data=t,this.depth=this.height=0,this.parent=null}_t.prototype=hn.prototype={constructor:_t,count:Ta,each:Sa,eachAfter:Aa,eachBefore:za,find:Ca,sum:Ma,sort:Na,path:Ea,ancestors:Xa,descendants:Ya,leaves:Da,links:La,copy:Pa,[Symbol.iterator]:Ra};function Va(t,e){return t.parent===e.parent?1:2}function Ut(t){var e=t.children;return e?e[0]:t.t}function Zt(t){var e=t.children;return e?e[e.length-1]:t.t}function Oa(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Ua(t){for(var e=0,n=0,i=t.children,r=i.length,s;--r>=0;)s=i[r],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function Za(t,e,n){return t.a.parent===e.parent?t.a:n}function Ct(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Ct.prototype=Object.create(_t.prototype);function Ka(t){for(var e=new Ct(t,0),n,i=[e],r,s,a,l;n=i.pop();)if(s=n._.children)for(n.children=new Array(l=s.length),a=l-1;a>=0;--a)i.push(r=n.children[a]=new Ct(s[a],a)),r.parent=n;return(e.parent=new Ct(null,0)).children=[e],e}function mo(){var t=Va,e=1,n=1,i=null;function r(o){var c=Ka(o);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(a),i)o.eachBefore(u);else{var p=o,f=o,_=o;o.eachBefore(function(k){k.x<p.x&&(p=k),k.x>f.x&&(f=k),k.depth>_.depth&&(_=k)});var v=p===f?1:t(p,f)/2,x=v-p.x,S=e/(f.x+v+x),m=n/(_.depth||1);o.eachBefore(function(k){k.x=(k.x+x)*S,k.y=k.depth*m})}return o}function s(o){var c=o.children,p=o.parent.children,f=o.i?p[o.i-1]:null;if(c){Ua(o);var _=(c[0].z+c[c.length-1].z)/2;f?(o.z=f.z+t(o._,f._),o.m=o.z-_):o.z=_}else f&&(o.z=f.z+t(o._,f._));o.parent.A=l(o,f,o.parent.A||p[0])}function a(o){o._.x=o.z+o.parent.m,o.m+=o.parent.m}function l(o,c,p){if(c){for(var f=o,_=o,v=c,x=f.parent.children[0],S=f.m,m=_.m,k=v.m,C=x.m,M;v=Zt(v),f=Ut(f),v&&f;)x=Ut(x),_=Zt(_),_.a=o,M=v.z+k-f.z-S+t(v._,f._),M>0&&(Oa(Za(v,o,p),o,M),S+=M,m+=M),k+=v.m,S+=f.m,C+=x.m,m+=_.m;v&&!Zt(_)&&(_.t=v,_.m+=k-m),f&&!Ut(x)&&(x.t=f,x.m+=S-C,p=o)}return p}function u(o){o.x*=e,o.y=o.depth*n}return r.separation=function(o){return arguments.length?(t=o,r):t},r.size=function(o){return arguments.length?(i=!1,e=+o[0],n=+o[1],r):i?null:[e,n]},r.nodeSize=function(o){return arguments.length?(i=!0,e=+o[0],n=+o[1],r):i?[e,n]:null},r}function Le(t){return function(){return t}}function Ga(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new ba(e)}var Ja=Array.prototype.slice;function Wa(t){return t[0]}function Qa(t){return t[1]}class ja{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function to(t){return new ja(t,!0)}function eo(t){return t.source}function no(t){return t.target}function io(t){let e=eo,n=no,i=Wa,r=Qa,s=null,a=null,l=Ga(u);function u(){let o;const c=Ja.call(arguments),p=e.apply(this,c),f=n.apply(this,c);if(s==null&&(a=t(o=l())),a.lineStart(),c[0]=p,a.point(+i.apply(this,c),+r.apply(this,c)),c[0]=f,a.point(+i.apply(this,c),+r.apply(this,c)),a.lineEnd(),o)return a=null,o+""||null}return u.source=function(o){return arguments.length?(e=o,u):e},u.target=function(o){return arguments.length?(n=o,u):n},u.x=function(o){return arguments.length?(i=typeof o=="function"?o:Le(+o),u):i},u.y=function(o){return arguments.length?(r=typeof o=="function"?o:Le(+o),u):r},u.context=function(o){return arguments.length?(o==null?s=a=null:a=t(s=o),u):s},u}function yo(){return io(to)}const kt=t=>()=>t;function ro(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function K(t,e,n){this.k=t,this.x=e,this.y=n}K.prototype={constructor:K,scale:function(t){return t===1?this:new K(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new K(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var fn=new K(1,0,0);K.prototype;function Kt(t){t.stopImmediatePropagation()}function lt(t){t.preventDefault(),t.stopImmediatePropagation()}function so(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ao(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Re(){return this.__zoom||fn}function oo(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function lo(){return navigator.maxTouchPoints||"ontouchstart"in this}function uo(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function vo(){var t=so,e=ao,n=uo,i=oo,r=lo,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,u=us,o=ce("start","zoom","end"),c,p,f,_=500,v=150,x=0,S=10;function m(h){h.property("__zoom",Re).on("wheel.zoom",yt,{passive:!1}).on("mousedown.zoom",vt).on("dblclick.zoom",wt).filter(r).on("touchstart.zoom",pn).on("touchmove.zoom",dn).on("touchend.zoom touchcancel.zoom",_n).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(h,g,d,y){var w=h.selection?h.selection():h;w.property("__zoom",Re),h!==w?E(h,g,d,y):w.interrupt().each(function(){Y(this,arguments).event(y).start().zoom(null,typeof g=="function"?g.apply(this,arguments):g).end()})},m.scaleBy=function(h,g,d,y){m.scaleTo(h,function(){var w=this.__zoom.k,$=typeof g=="function"?g.apply(this,arguments):g;return w*$},d,y)},m.scaleTo=function(h,g,d,y){m.transform(h,function(){var w=e.apply(this,arguments),$=this.__zoom,b=d==null?M(w):typeof d=="function"?d.apply(this,arguments):d,T=$.invert(b),A=typeof g=="function"?g.apply(this,arguments):g;return n(C(k($,A),b,T),w,a)},d,y)},m.translateBy=function(h,g,d,y){m.transform(h,function(){return n(this.__zoom.translate(typeof g=="function"?g.apply(this,arguments):g,typeof d=="function"?d.apply(this,arguments):d),e.apply(this,arguments),a)},null,y)},m.translateTo=function(h,g,d,y,w){m.transform(h,function(){var $=e.apply(this,arguments),b=this.__zoom,T=y==null?M($):typeof y=="function"?y.apply(this,arguments):y;return n(fn.translate(T[0],T[1]).scale(b.k).translate(typeof g=="function"?-g.apply(this,arguments):-g,typeof d=="function"?-d.apply(this,arguments):-d),$,a)},y,w)};function k(h,g){return g=Math.max(s[0],Math.min(s[1],g)),g===h.k?h:new K(g,h.x,h.y)}function C(h,g,d){var y=g[0]-d[0]*h.k,w=g[1]-d[1]*h.k;return y===h.x&&w===h.y?h:new K(h.k,y,w)}function M(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function E(h,g,d,y){h.on("start.zoom",function(){Y(this,arguments).event(y).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(y).end()}).tween("zoom",function(){var w=this,$=arguments,b=Y(w,$).event(y),T=e.apply(w,$),A=d==null?M(T):typeof d=="function"?d.apply(w,$):d,B=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),N=w.__zoom,D=typeof g=="function"?g.apply(w,$):g,V=u(N.invert(A).concat(B/N.k),D.invert(A).concat(B/D.k));return function(L){if(L===1)L=D;else{var O=V(L),Bt=B/O[2];L=new K(Bt,A[0]-O[0]*Bt,A[1]-O[1]*Bt)}b.zoom(null,L)}})}function Y(h,g,d){return!d&&h.__zooming||new J(h,g)}function J(h,g){this.that=h,this.args=g,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,g),this.taps=0}J.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,g){return this.mouse&&h!=="mouse"&&(this.mouse[1]=g.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=g.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=g.invert(this.touch1[0])),this.that.__zoom=g,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var g=Q(this.that).datum();o.call(h,this.that,new ro(h,{sourceEvent:this.sourceEvent,target:m,type:h,transform:this.that.__zoom,dispatch:o}),g)}};function yt(h,...g){if(!t.apply(this,arguments))return;var d=Y(this,g).event(h),y=this.__zoom,w=Math.max(s[0],Math.min(s[1],y.k*Math.pow(2,i.apply(this,arguments)))),$=j(h);if(d.wheel)(d.mouse[0][0]!==$[0]||d.mouse[0][1]!==$[1])&&(d.mouse[1]=y.invert(d.mouse[0]=$)),clearTimeout(d.wheel);else{if(y.k===w)return;d.mouse=[$,y.invert($)],At(this),d.start()}lt(h),d.wheel=setTimeout(b,v),d.zoom("mouse",n(C(k(y,w),d.mouse[0],d.mouse[1]),d.extent,a));function b(){d.wheel=null,d.end()}}function vt(h,...g){if(f||!t.apply(this,arguments))return;var d=h.currentTarget,y=Y(this,g,!0).event(h),w=Q(h.view).on("mousemove.zoom",A,!0).on("mouseup.zoom",B,!0),$=j(h,d),b=h.clientX,T=h.clientY;Dr(h.view),Kt(h),y.mouse=[$,this.__zoom.invert($)],At(this),y.start();function A(N){if(lt(N),!y.moved){var D=N.clientX-b,V=N.clientY-T;y.moved=D*D+V*V>x}y.event(N).zoom("mouse",n(C(y.that.__zoom,y.mouse[0]=j(N,d),y.mouse[1]),y.extent,a))}function B(N){w.on("mousemove.zoom mouseup.zoom",null),Lr(N.view,y.moved),lt(N),y.event(N).end()}}function wt(h,...g){if(t.apply(this,arguments)){var d=this.__zoom,y=j(h.changedTouches?h.changedTouches[0]:h,this),w=d.invert(y),$=d.k*(h.shiftKey?.5:2),b=n(C(k(d,$),y,w),e.apply(this,g),a);lt(h),l>0?Q(this).transition().duration(l).call(E,b,y,h):Q(this).call(m.transform,b,y,h)}}function pn(h,...g){if(t.apply(this,arguments)){var d=h.touches,y=d.length,w=Y(this,g,h.changedTouches.length===y).event(h),$,b,T,A;for(Kt(h),b=0;b<y;++b)T=d[b],A=j(T,this),A=[A,this.__zoom.invert(A),T.identifier],w.touch0?!w.touch1&&w.touch0[2]!==A[2]&&(w.touch1=A,w.taps=0):(w.touch0=A,$=!0,w.taps=1+!!c);c&&(c=clearTimeout(c)),$&&(w.taps<2&&(p=A[0],c=setTimeout(function(){c=null},_)),At(this),w.start())}}function dn(h,...g){if(this.__zooming){var d=Y(this,g).event(h),y=h.changedTouches,w=y.length,$,b,T,A;for(lt(h),$=0;$<w;++$)b=y[$],T=j(b,this),d.touch0&&d.touch0[2]===b.identifier?d.touch0[0]=T:d.touch1&&d.touch1[2]===b.identifier&&(d.touch1[0]=T);if(b=d.that.__zoom,d.touch1){var B=d.touch0[0],N=d.touch0[1],D=d.touch1[0],V=d.touch1[1],L=(L=D[0]-B[0])*L+(L=D[1]-B[1])*L,O=(O=V[0]-N[0])*O+(O=V[1]-N[1])*O;b=k(b,Math.sqrt(L/O)),T=[(B[0]+D[0])/2,(B[1]+D[1])/2],A=[(N[0]+V[0])/2,(N[1]+V[1])/2]}else if(d.touch0)T=d.touch0[0],A=d.touch0[1];else return;d.zoom("touch",n(C(b,T,A),d.extent,a))}}function _n(h,...g){if(this.__zooming){var d=Y(this,g).event(h),y=h.changedTouches,w=y.length,$,b;for(Kt(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},_),$=0;$<w;++$)b=y[$],d.touch0&&d.touch0[2]===b.identifier?delete d.touch0:d.touch1&&d.touch1[2]===b.identifier&&delete d.touch1;if(d.touch1&&!d.touch0&&(d.touch0=d.touch1,delete d.touch1),d.touch0)d.touch0[1]=this.__zoom.invert(d.touch0[0]);else if(d.end(),d.taps===2&&(b=j(b,this),Math.hypot(p[0]-b[0],p[1]-b[1])<S)){var T=Q(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return m.wheelDelta=function(h){return arguments.length?(i=typeof h=="function"?h:kt(+h),m):i},m.filter=function(h){return arguments.length?(t=typeof h=="function"?h:kt(!!h),m):t},m.touchable=function(h){return arguments.length?(r=typeof h=="function"?h:kt(!!h),m):r},m.extent=function(h){return arguments.length?(e=typeof h=="function"?h:kt([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),m):e},m.scaleExtent=function(h){return arguments.length?(s[0]=+h[0],s[1]=+h[1],m):[s[0],s[1]]},m.translateExtent=function(h){return arguments.length?(a[0][0]=+h[0][0],a[1][0]=+h[1][0],a[0][1]=+h[0][1],a[1][1]=+h[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(h){return arguments.length?(n=h,m):n},m.duration=function(h){return arguments.length?(l=+h,m):l},m.interpolate=function(h){return arguments.length?(u=h,m):u},m.on=function(){var h=o.on.apply(o,arguments);return h===o?m:h},m.clickDistance=function(h){return arguments.length?(x=(h=+h)*h,m):Math.sqrt(x)},m.tapDistance=function(h){return arguments.length?(S=+h,m):S},m}export{po as J,ho as S,fo as Z,_o as a,go as c,hn as h,fn as i,yo as l,Q as s,mo as t,vo as z};
