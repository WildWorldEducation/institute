import{_ as i,o as a,c,d as s,i as d}from"./main-f1292033.js";const u={setup(){},data(){return{resourceId:this.$route.params.id,newContent:"",originalContent:""}},async created(){const e=await(await fetch("/resources/show/"+this.resourceId)).json();$("#summernote").summernote({maximumImageFileSize:2048*1024,callbacks:{onImageUploadError:function(t){alert("Max image size is 2MB.")},onChange:t=>{this.newContent=t}}}).summernote("code",e.content),$(".note-editor .note-editable").css("background-color","#ffffff"),this.originalContent=e.content},methods:{Submit(){var o="/resources/edit/"+this.resourceId,e=$("#summernote").summernote("code");const t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({editordata:e})};fetch(o,t).then(()=>{let n=this.$route.query.dismissFlagId;n?fetch("/content-flags/"+n,{method:"DELETE"}).finally(()=>{this.$router.back()}):this.$router.back()})}},computed:{isFormChanged(){return this.originalContent!==this.newContent}}},m={class:"container mt-3"},l=s("h1",null,"Edit Learning Resource",-1),h={class:"row"},_=s("div",{class:"mb-3"},[s("textarea",{id:"summernote",name:"editordata"})],-1),f=["disabled"];function p(o,e,t,n,b,r){return a(),c("div",m,[l,s("div",h,[_,s("button",{class:"btn btn-dark",disabled:!r.isFormChanged,onClick:e[0]||(e[0]=C=>r.Submit())}," Submit ",8,f)])])}const g=i(u,[["render",p]]),w={__name:"EditResourceView",setup(o){return(e,t)=>(a(),d(g))}};export{w as default};
