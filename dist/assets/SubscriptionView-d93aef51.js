import{_ as u,e as h,L as m,o as l,c,a as t,t as i,s as n,b as p}from"./main-59c8b715.js";const d={setup(){const s=h(),e=m();return{userDetailsStore:s,settingsStore:e}},data(){return{monthlyTokenUsage:null,year:0,month:"",isAITokenLimitReached:!1,tokenLimit:0}},async mounted(){this.settingsStore.freePlanTokenLimit==0&&await this.settingsStore.getSettings(),await this.userDetailsStore.getUserDetails(),this.userDetailsStore.subscriptionTier=="free"?(this.settingsStore.freePlanTokenLimit<=this.userDetailsStore.monthlyTokenUsage&&(this.isAITokenLimitReached=!0),this.tokenLimit=this.settingsStore.freePlanTokenLimit.toLocaleString()):this.userDetailsStore.subscriptionTier=="capped"&&(this.settingsStore.cappedPlanTokenLimit<=this.userDetailsStore.monthlyTokenUsage&&(this.isAITokenLimitReached=!0),this.tokenLimit=this.settingsStore.cappedPlanTokenLimit.toLocaleString()),this.year=new Date().getFullYear();const s=["January","February","March","April","May","June","July","August","September","October","November","December"],e=new Date;this.month=s[e.getMonth()],this.userDetailsStore.subscriptionTier=="free"||(this.userDetailsStore.subscriptionTier=="capped"?this.tokenLimit=this.settingsStore.cappedPlanTokenLimit:this.userDetailsStore.subscriptionTier=="infinite")},methods:{checkout(s){fetch("/subscriptions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,planType:s})}).then(e=>e.ok?e.json():e.json().then(r=>Promise.reject(r))).then(({url:e})=>{console.log("add tokens"),window.location=e}).catch(e=>{console.error(e.error)})}}},g={class:"container"},S=t("h1",{class:"heading"},"Subscription",-1),k={class:"secondary-heading h4 mb-4"},f=t("strong",null,"Your subscription tier:",-1),T=t("strong",null,"Plan token limit:",-1),_=t("strong",null,"Current usage:",-1),y={key:0,class:"alert alert-warning",role:"alert"};function L(s,e,r,a,o,b){return l(),c("div",g,[S,t("h2",k," Monthly AI usage: "+i(o.month)+", "+i(o.year),1),t("ul",null,[t("li",null,[t("p",null,[f,n(" "+i(a.userDetailsStore.subscriptionTier.toLocaleString()),1)])]),t("li",null,[t("p",null,[T,n(" "+i(o.tokenLimit),1)])]),t("li",null,[t("p",null,[_,n(" "+i(a.userDetailsStore.monthlyTokenUsage.toLocaleString()),1)])])]),o.isAITokenLimitReached?(l(),c("div",y," You are over the monthly free limit. You can't use the AI features until next month. ")):p("",!0)])}const P=u(d,[["render",L]]);export{P as default};
