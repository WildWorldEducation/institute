import{u as M}from"./AnalyticsStore-ba0e01a9.js";import{u as j}from"./TeacherAnalyticsStore-3914186d.js";import{_ as x,o as m,c as p,e as q,r as v,a as s,f as S,l as _,k as C,b as w,F as P,x as R,j as D,t as H}from"./main-c88d736d.js";import"./transform-4d0f7c8f.js";import{u as $,l as A}from"./line-d122782f.js";import{e as T}from"./time-3c9385c3.js";import{l as b,a as L,b as F}from"./linear-d9b6cbf2.js";import{m as k}from"./continuous-93813e6c.js";import{o as B,b as V}from"./band-2263c9e7.js";import{s as f}from"./string-c67ea49d.js";import{c as I}from"./category10-63f9141e.js";import{s as E}from"./sort-fcaf8f38.js";import"./point-ea70dc51.js";import"./colors-98f238a0.js";const N={name:"SchoolProgressChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(a){a.student.length>0?this.axisData=a.student:a.average.length>0?this.axisData=a.average:this.axisData=[];const e=Object.entries(a).map(([t,y])=>({name:t,values:y}));f("#progress-chart-container");const r=document.getElementById("progress-chart-container").clientWidth,n=document.getElementById("progress-chart-container").clientHeight,l=0,d=0,o=0,h=0,i=$(T(this.axisData,t=>t.date),[h,r-d]),c=b([0,k(this.axisData,t=>t.quantity)],[n-o,l]);B().domain(e.map(t=>t.name)).range(I);const u=A().x(t=>i(t.date)).y(t=>c(t.quantity));f("#progress-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(r,n),+Math.min(r,n)]).attr("preserveAspectRatio","xMinYMin").selectAll(".line").data(e).join("path").attr("fill","none").attr("stroke",t=>t.name=="student"?"green":"#ff7f0e").attr("stroke-width",3).attr("d",t=>u(t.values))}}};function Y(a,e,r,n,l,d){return null}const O=x(N,[["render",Y]]),W={name:"SchoolTimeChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(a){a.student.length>0?this.axisData=a.student:a.average.length>0?this.axisData=a.average:this.axisData=[];const e=Object.entries(a).map(([t,y])=>({name:t,values:y}));f("#time-chart-container");const r=document.getElementById("time-chart-container").clientWidth,n=document.getElementById("time-chart-container").clientHeight,l=0,d=0,o=0,h=0,i=$(T(this.axisData,t=>t.date),[h,r-d]),c=b([0,k(this.axisData,t=>t.quantity)],[n-o,l]);B().domain(e.map(t=>t.name)).range(I);const u=A().x(t=>i(t.date)).y(t=>c(t.quantity));f("#time-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(r,n),+Math.min(r,n)]).attr("preserveAspectRatio","xMinYMin").selectAll(".line").data(e).join("path").attr("fill","none").attr("stroke",t=>t.name=="student"?"RoyalBlue":"#ff7f0e").attr("stroke-width",3).attr("d",t=>u(t.values))}}};function z(a,e,r,n,l,d){return null}const U=x(W,[["render",z]]),G={name:"StudentComparisonChart",props:["data","colour"],data(){return{}},mounted(){},methods:{createChart(a){f("#student-comparison-container");const e=25,r=0,n=0,l=10,d=200,o=700,h=Math.ceil((a.length+.1)*e)+r+l,i=b().domain([0,k(a,t=>t.quantity)]).range([d,o-n]),c=V().domain(E(a,t=>-t.quantity).map(t=>t.name)).rangeRound([r,h-l]).padding(.1),u=i.tickFormat(20),g=f("#student-comparison-container").append("svg").attr("width",o).attr("height",h).attr("viewBox",[0,0,o,h]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");g.append("g").selectAll().data(a).join("rect").attr("x",i(0)).attr("y",t=>c(t.name)).attr("width",t=>i(t.quantity)-i(0)).attr("height",c.bandwidth()).attr("fill",function(t){return t.name=="Language"?"green":t.name=="Mathematics"?"blue":t.name=="Science & Invention"?"purple":t.name=="Computer Science"?"pink":t.name=="Dangerous Ideas"?"brown":t.name=="History"?"cyan":t.name=="Life"?"magenta":"#ff7f0e"}),g.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(a).join("text").attr("x",t=>i(t.quantity)).attr("y",t=>c(t.name)+c.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>u(t.quantity)).call(t=>t.filter(y=>i(y.quantity)-i(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),g.append("g").attr("transform",`translate(0,${r})`).call(L(i).ticks(0)).call(t=>t.select(".domain").remove()),g.append("g").attr("transform",`translate(${d},0)`).attr("style","font-size: 16px").call(F(c).tickSizeOuter(0))}}},J={id:"student-comparison-container"};function K(a,e,r,n,l,d){return m(),p("div",J)}const Q=x(G,[["render",K]]);const X={name:"Student-Dashboard",setup(){const a=q(),e=M(),r=j();return{userDetailsStore:a,analyticsStore:e,teacherAnalyticsStore:r}},data(){return{showSidebar:!0,screenWidth:screen.width,isStudentData:!0,isSchoolData:!0,isLanguageData:!1,isMathData:!1,isHistoryData:!1,isLifeData:!1,isCSData:!1,isSAndIData:!1,isDIData:!1,progressData:{student:[],average:[]},isAboveTheCurve:!1}},components:{StudentProgressChart:O,StudentComparisonChart:Q,StudentTimeChart:U},async created(){await this.analyticsStore.getStudentProgress(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userDetailsStore.userId),await this.analyticsStore.getStudentTime(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.teacherAnalyticsStore.getStudentMultipleFails(this.userDetailsStore.userId),this.analyticsStore.progress.student[this.analyticsStore.progress.student.length-1].quantity>this.analyticsStore.progress.tenant[this.analyticsStore.progress.tenant.length-1].quantity&&(this.isAboveTheCurve=!0),await this.HandleProgressData(),await this.HandleComparisonData(),await this.HandleTimeData()},methods:{async HandleProgressData(){if(this.isStudentData){this.progressData.student=[];for(let a=0;a<this.analyticsStore.progress.student.length;a++)this.progressData.student.push(this.analyticsStore.progress.student[a])}else this.progressData.student=[];if(this.isSchoolData){this.progressData.average=[];for(let a=0;a<this.analyticsStore.progress.tenant.length;a++)this.progressData.average.push(this.analyticsStore.progress.tenant[a])}else this.progressData.average=[];this.$nextTick(()=>{this.$refs.progressChart&&this.$refs.progressChart.createChart(this.progressData)})},async HandleComparisonData(){this.$nextTick(()=>{this.$refs.comparisonChart&&this.$refs.comparisonChart.createChart(this.analyticsStore.studentRootSubjectsPassedAssessments)})},async HandleTimeData(){this.$nextTick(()=>{this.$refs.timeChart&&this.$refs.timeChart.createChart(this.analyticsStore.time)})},toggleSidebar(){this.showSidebar=!this.showSidebar}}},Z={class:"dashboard"},tt={class:"main"},et={class:"content container"},st={class:"dash-row row"},at={class:"col-md-6 h-100 position-relative"},nt={id:"progress-chart-container"},rt={class:"position-absolute chart-heading"},it={class:"col-md-6"},ot={id:"comparison-chart-container"},lt={class:"dash-row row"},ct={class:"col-md h-100 position-relative"},dt={id:"time-chart-container"},ht={class:"position-absolute chart-heading"},ut={class:"col-md position-relative"},mt={class:"row"},gt={class:"col-md"},pt={key:0},ft={key:1},yt={class:"col-md"};function St(a,e,r,n,l,d){const o=v("RouterLink"),h=v("StudentProgressChart"),i=v("StudentComparisonChart"),c=v("StudentTimeChart");return m(),p("div",Z,[s("div",tt,[s("div",et,[s("div",st,[s("div",at,[s("div",nt,[s("div",rt,[S(o,{to:"/my-progress/skills",class:""},{default:_(()=>e[0]||(e[0]=[s("h2",{class:"heading h5"}," Progress over time ",-1)])),_:1,__:[0]}),e[1]||(e[1]=s("span",{style:{color:"#5f31dd"}},[s("strong",null,"You")],-1)),e[2]||(e[2]=s("br",null,null,-1)),e[3]||(e[3]=s("span",{style:{color:"#ff7f0e"}},[s("strong",null,"School average")],-1))]),l.progressData.student.length>0||l.progressData.average.length>0?(m(),C(h,{key:0,ref:"progressChart"},null,512)):w("",!0)])]),s("div",it,[s("div",ot,[e[4]||(e[4]=s("h2",{class:"heading h5 mt-1"},"Subject comparison",-1)),n.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(m(),C(i,{key:0,ref:"comparisonChart",data:n.analyticsStore.studentRootSubjectsPassedAssessments,colour:"#5f31dd"},null,8,["data"])):w("",!0)])])]),s("div",lt,[s("div",ct,[s("div",dt,[s("div",ht,[S(o,{to:"/my-progress/time"},{default:_(()=>e[5]||(e[5]=[s("h2",{class:"heading h5"},"Study time",-1)])),_:1,__:[5]}),e[6]||(e[6]=s("span",{style:{color:"#5f31dd"}},[s("strong",null,"You")],-1)),e[7]||(e[7]=s("br",null,null,-1)),e[8]||(e[8]=s("span",{style:{color:"#ff7f0e"}},[s("strong",null,"School average")],-1)),n.analyticsStore.time.student.length>0||n.analyticsStore.time.tenant.length>0?(m(),C(c,{key:0,ref:"timeChart"},null,512)):w("",!0)])])]),s("div",ut,[s("div",mt,[s("div",gt,[S(o,{to:"/my-progress/super-challenging",class:"col"},{default:_(()=>e[9]||(e[9]=[s("h2",{class:"h5 heading"}," Super challenging skills ",-1)])),_:1,__:[9]}),n.teacherAnalyticsStore.studentMultipleFails.length>0?(m(),p("ul",pt,[(m(!0),p(P,null,R(n.teacherAnalyticsStore.studentMultipleFails,u=>(m(),p("li",{class:"failed-skills",key:u.id},[S(o,{to:"/skills/"+u.url,target:"_blank"},{default:_(()=>[D(H(u.name),1)]),_:2},1032,["to"])]))),128))])):(m(),p("p",ft,"Nothing to worry about yet"))]),s("div",yt,[e[13]||(e[13]=s("h2",{class:"h5 heading"},"Stats",-1)),s("ul",null,[e[11]||(e[11]=s("li",null,[s("strong",null,"Skills passed:"),D(" 25")],-1)),e[12]||(e[12]=s("li",null,[s("strong",null,"Total time spent:"),D(" 5:00 ")],-1)),s("li",null,[S(o,{to:"/my-progress/tokens"},{default:_(()=>e[10]||(e[10]=[s("strong",null,"Tokens used:",-1),D(" 10,000",-1)])),_:1,__:[10]})])])])])])])])])])}const jt=x(X,[["render",St],["__scopeId","data-v-59e70412"]]);export{jt as default};
