import{_ as y,f as $,r as u,o as h,c as p,a as c,b as B,k as g,p as C,d as L,g as T,F as P}from"./main-ec9f55d1.js";import{u as D}from"./AnalyticsStore-975cd556.js";import"./transform-af9a74a2.js";import{l as _,c as w,b as A}from"./linear-5b188edc.js";import{m as b,b as S}from"./continuous-7328829e.js";import{s as v}from"./sort-ed61f96d.js";import{s as k}from"./string-dd82ab4a.js";import{u as z}from"./CohortsStore-62f250d3.js";import{C as R}from"./CohortProgressLineChart-69189b8b.js";import{D as q}from"./downloadCSVBtn-64ac23b3.js";import"./line-85f04100.js";import"./time-0457d93b.js";import"./point-ea70dc51.js";import"./extent-4cf1c809.js";const H={name:"TenantPassedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const o=document.getElementById("passed-subjects-chart").clientWidth,r=document.getElementById("passed-subjects-chart").clientHeight,a=_().domain([0,b(this.data,t=>t.quantity)]).range([200,o-0]),i=S().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,r-10]).padding(.1),d=k("#passed-subjects-chart").append("svg").attr("width",o).attr("height",r).attr("viewBox",[0,0,+Math.min(o,r),+Math.min(o,r)]).attr("preserveAspectRatio","xMinYMin");d.append("g").selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",t=>i(t.name)).attr("width",t=>a(t.quantity)-a(0)).attr("height",i.bandwidth()).attr("fill",function(t){return t.name=="Language"?"DarkMagenta":t.name=="Mathematics"?"blue":t.name=="Science & Invention"?"purple":t.name=="Computer Science"?"deeppink":t.name=="Dangerous Ideas"?"brown":t.name=="History"?"cyan":t.name=="Life"?"magenta":"#ff7f0e"}),d.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>a(t.quantity)).attr("y",t=>i(t.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(s=>a(s.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),d.append("g").attr("transform","translate(0,0)").call(w(a).ticks(0)).call(t=>t.select(".domain").remove()),d.append("g").attr("transform","translate(200,0)").call(A(i).tickSizeOuter(0))},computed:{}};function M(e,n,m,l,o,r){return null}const I=y(H,[["render",M]]),E={name:"TenantPassedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const o=document.getElementById("passed-skills-chart").clientWidth,r=document.getElementById("passed-skills-chart").clientHeight,a=_().domain([0,b(this.data,t=>t.quantity)]).range([200,o-0]),i=S().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,r-10]).padding(.1),d=k("#passed-skills-chart").append("svg").attr("width",o).attr("height",r).attr("viewBox",[0,0,+Math.min(o,r),+Math.min(o,r)]).attr("preserveAspectRatio","xMinYMin");d.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",t=>i(t.name)).attr("width",t=>a(t.quantity)-a(0)).attr("height",i.bandwidth()),d.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>a(t.quantity)).attr("y",t=>i(t.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(s=>a(s.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),d.append("g").attr("transform","translate(0,0)").call(w(a).ticks(0)).call(t=>t.select(".domain").remove()),d.append("g").attr("transform","translate(200,0)").call(A(i).tickSizeOuter(0))},computed:{}};function N(e,n,m,l,o,r){return null}const Q=y(E,[["render",N]]),O={name:"TenantAssessmentsAttemptedHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const o=document.getElementById("attempted-skills-chart").clientWidth,r=document.getElementById("attempted-skills-chart").clientHeight,a=_().domain([0,b(this.data,s=>s.quantity)]).range([200,o-0]),i=S().domain(v(this.data,s=>-s.quantity).map(s=>s.name)).rangeRound([0,r-10]).padding(.1),d=a.tickFormat(20),t=k("#attempted-skills-chart").append("svg").attr("width",o).attr("height",r).attr("viewBox",[0,0,+Math.min(o,r),+Math.min(o,r)]).attr("preserveAspectRatio","xMinYMin");t.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",s=>i(s.name)).attr("width",s=>a(s.quantity)-a(0)).attr("height",i.bandwidth()),t.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",s=>a(s.quantity)).attr("y",s=>i(s.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(s=>d(s.quantity)).call(s=>s.filter(x=>a(x.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),t.append("g").attr("transform","translate(0,0)").call(w(a).ticks(0)).call(s=>s.select(".domain").remove()),t.append("g").attr("transform","translate(200,0)").call(A(i).tickSizeOuter(0))},computed:{}};function W(e,n,m,l,o,r){return null}const V=y(O,[["render",W]]),F={name:"TenantAttemptedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const o=document.getElementById("attempted-subjects-chart").clientWidth,r=document.getElementById("attempted-subjects-chart").clientHeight,a=_().domain([0,b(this.data,s=>s.quantity)]).range([200,o-20]),i=S().domain(v(this.data,s=>-s.quantity).map(s=>s.name)).rangeRound([0,r-20]).padding(.1),d=a.tickFormat(20),t=k("#attempted-subjects-chart").append("svg").attr("width",o).attr("height",r).attr("viewBox",[0,0,+Math.min(o,r),+Math.min(o,r)]).attr("preserveAspectRatio","xMinYMin");t.append("g").selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",s=>i(s.name)).attr("width",s=>a(s.quantity)-a(0)).attr("height",i.bandwidth()).attr("fill",function(s){return s.name=="Language"?"DarkMagenta":s.name=="Mathematics"?"blue":s.name=="Science & Invention"?"purple":s.name=="Computer Science"?"deeppink":s.name=="Dangerous Ideas"?"brown":s.name=="History"?"cyan":s.name=="Life"?"magenta":"#ff7f0e"}),t.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",s=>a(s.quantity)).attr("y",s=>i(s.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(s=>d(s.quantity)).call(s=>s.filter(x=>a(x.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),t.append("g").attr("transform","translate(0,0)").call(w(a).ticks(0)).call(s=>s.select(".domain").remove()),t.append("g").attr("transform","translate(200,0)").call(A(i).tickSizeOuter(0))},computed:{}};function U(e,n,m,l,o,r){return null}const Y=y(F,[["render",U]]);const G={setup(){const e=$(),n=D();return{userDetailsStore:e,analyticsStore:n}},components:{TenantPassedAssessmentsHorizontalBarChart:Q,TenantAssessmentsAttemptedHorizontalBarChart:V,TenantPassedAssessmentsByRootSubjectHorizontalBarChart:I,TenantAttemptedAssessmentsByRootSubjectHorizontalBarChart:Y},data(){return{tenantId:this.userDetailsStore.tenantId,isDataWeekly:!1,isTutorialComplete:!1,showTutorialTip1:!1,dataMode:"total"}},async created(){await this.checkIfTutorialComplete(),this.analyticsStore.passedAssessments.length==0&&await this.getPassedAssessments(),this.analyticsStore.rootSubjectsPassedAssessments.length==0&&await this.getPassedAssessmentsBySubject(),this.analyticsStore.rootSubjectsAttemptedAssessments.length==0&&await this.getAttemptedAssessmentsBySubject(),this.analyticsStore.attemptedAssessments.length==0&&await this.getTenantAssessmentsAttempted()},methods:{async checkIfTutorialComplete(){const n=await(await fetch(`/users/check-tutorial-progress/school-report/${this.userDetailsStore.userId}`)).json();n==0?(this.isTutorialComplete=!1,this.showTutorialTip1=!0):n==1&&(this.isTutorialComplete=!0)},progressTutorial(e){e==1&&(this.showTutorialTip1=!1,this.markTutorialComplete())},restartTutorial(){this.isTutorialComplete=!1,this.showTutorialTip1=!0},markTutorialComplete(){let e="/users/mark-tutorial-complete/school-report/"+this.userDetailsStore.userId;fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"}})},async getPassedAssessments(){try{const e=await fetch(`/student-analytics/passed-assessments/tenant/${this.tenantId}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);this.analyticsStore.passedAssessments=await e.json()}catch(e){console.error("Error fetching cohort mastered assessments:",e),this.analyticsStore.passedAssessments=[]}},async getTenantAssessmentsAttempted(){try{const e=await fetch(`/student-analytics/attempted-assessments/tenant/${this.tenantId}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);this.analyticsStore.attemptedAssessments=await e.json()}catch(e){console.error("Error fetching cohort mastered assessments:",e),this.analyticsStore.attemptedAssessments=[]}},async getPassedAssessmentsBySubject(){try{const e=await fetch(`/student-analytics/passed-assessments-by-subject/tenant/${this.tenantId}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);this.analyticsStore.rootSubjectsPassedAssessments=await e.json()}catch(e){console.error("Error fetching cohort mastered assessments:",e),this.analyticsStore.rootSubjectsPassedAssessments=[]}},async getAttemptedAssessmentsBySubject(){try{const e=await fetch(`/student-analytics/attempted-assessments-by-subject/tenant/${this.tenantId}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);this.analyticsStore.rootSubjectsAttemptedAssessments=await e.json()}catch(e){console.error("Error fetching cohort mastered assessments:",e),this.analyticsStore.rootSubjectsAttemptedAssessments=[]}},downloadData(e,n){const m=Object.keys(e[0]),l=[];l.push(m.join(","));for(const i of e){const d=m.map(t=>{const s=i[t];return`"${String(s).replace(/"/g,'""')}"`});l.push(d.join(","))}const o=l.join(`
`),r=new Blob([o],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(r),a.download=n+".csv",a.click()},async toggleWeeklyCumulativeData(){this.dataMode=="total"?this.dataMode="weekly":this.dataMode="total"}}},f=e=>(C("data-v-5c85e823"),e=e(),L(),e),J={class:"container-fluid chart-page"},K={class:"d-flex justify-content-between w-100"},X=f(()=>c("h1",{class:"heading h4"},"Progress Report",-1)),Z=f(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"23",class:"primary-icon"},[c("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),tt=[Z],et={key:0,class:"modal"},st={class:"modal-content"},at=f(()=>c("p",{class:"modal-text"}," The report shows data on passed and attempted assessments, by subject and specific skill. ",-1)),nt={class:"d-flex justify-content-between"},ot={class:"row chart-row"},rt=f(()=>c("h2",{class:"heading h5"},"Passed",-1)),it={class:"col-md chart-col position-relative"},ct={id:"passed-subjects-chart"},lt=f(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[c("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)),dt=[lt],mt={key:1},ht={class:"col-md chart-col position-relative"},pt={id:"passed-skills-chart"},ut=f(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[c("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)),gt=[ut],yt={key:1},ft={class:"row chart-row"},_t=f(()=>c("h2",{class:"heading h5"},"Attempted",-1)),wt={class:"col-md chart-col position-relative"},At={id:"attempted-subjects-chart"},bt=f(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[c("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)),St=[bt],vt={key:1},kt={class:"col-md chart-col position-relative"},xt={id:"attempted-skills-chart"},Tt=f(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[c("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)),Bt=[Tt],$t={key:1};function jt(e,n,m,l,o,r){const a=u("TenantPassedAssessmentsByRootSubjectHorizontalBarChart"),i=u("TenantPassedAssessmentsHorizontalBarChart"),d=u("TenantAttemptedAssessmentsByRootSubjectHorizontalBarChart"),t=u("TenantAssessmentsAttemptedHorizontalBarChart");return h(),p("div",J,[c("span",K,[X,c("button",{class:"btn me-1",onClick:n[0]||(n[0]=(...s)=>r.restartTutorial&&r.restartTutorial(...s)),"aria-label":"info"},tt)]),o.showTutorialTip1?(h(),p("div",et,[c("div",st,[at,c("div",nt,[c("button",{class:"btn primary-btn",onClick:n[1]||(n[1]=s=>r.progressTutorial(1))}," close ")])])])):B("",!0),c("div",ot,[rt,c("div",it,[c("div",ct,[c("button",{class:"btn position-absolute download-btn",onClick:n[2]||(n[2]=s=>r.downloadData(l.analyticsStore.rootSubjectsPassedAssessments,"Subjects-passed"))},dt),l.analyticsStore.rootSubjectsPassedAssessments.length>0?(h(),g(a,{key:0,data:l.analyticsStore.rootSubjectsPassedAssessments,colour:"darkgreen",class:""},null,8,["data"])):(h(),p("p",mt,"No data yet"))])]),c("div",ht,[c("div",pt,[c("button",{class:"btn position-absolute download-btn",onClick:n[3]||(n[3]=s=>r.downloadData(l.analyticsStore.passedAssessments,"Assessments-passed"))},gt),l.analyticsStore.passedAssessments.length>0?(h(),g(i,{key:0,data:l.analyticsStore.passedAssessments,colour:"darkgreen",class:""},null,8,["data"])):(h(),p("p",yt,"No data yet"))])])]),c("div",ft,[_t,c("div",wt,[c("div",At,[c("button",{class:"btn position-absolute download-btn",onClick:n[4]||(n[4]=s=>r.downloadData(l.analyticsStore.rootSubjectsAttemptedAssessments,"Subjects-attempted"))},St),l.analyticsStore.rootSubjectsAttemptedAssessments.length>0?(h(),g(d,{key:0,data:l.analyticsStore.rootSubjectsAttemptedAssessments,colour:"darkblue",class:""},null,8,["data"])):(h(),p("p",vt,"No data yet"))])]),c("div",kt,[c("div",xt,[c("button",{class:"btn position-absolute download-btn",onClick:n[5]||(n[5]=s=>r.downloadData(l.analyticsStore.attemptedAssessments,"Assessments-attempted"))},Bt),l.analyticsStore.attemptedAssessments.length>0?(h(),g(t,{key:0,data:l.analyticsStore.attemptedAssessments,colour:"#5f31dd",class:""},null,8,["data"])):(h(),p("p",$t,"No data yet"))])])])])}const Ct=y(G,[["render",jt],["__scopeId","data-v-5c85e823"]]),Lt={name:"CohortPassedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){const o=document.getElementById("progress-bar-chart-container").clientWidth,r=document.getElementById("progress-bar-chart-container").clientHeight,a=_().domain([0,b(this.data,t=>t.quantity)]).range([200,o-0]),i=S().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,r-10]).padding(.1);a.tickFormat(20);const d=k("#progress-bar-chart-container").append("svg").attr("width",o).attr("height",r).attr("viewBox",[0,0,o,r]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");d.append("g").attr("fill","green").selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",t=>i(t.name)).attr("width",t=>a(t.quantity)-a(0)).attr("height",i.bandwidth()),d.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>a(t.quantity)).attr("y",t=>i(t.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(s=>a(s.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),d.append("g").attr("transform","translate(0,0)").call(w(a).ticks(0)).call(t=>t.select(".domain").remove()),d.append("g").attr("transform","translate(200,0)").call(A(i).tickSizeOuter(0))},computed:{}};function Pt(e,n,m,l,o,r){return null}const Dt=y(Lt,[["render",Pt]]),zt={name:"CohortAttemptedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const o=document.getElementById("attempted-bar-chart-container").clientWidth,r=document.getElementById("attempted-bar-chart-container").clientHeight,a=_().domain([0,b(this.data,t=>t.quantity)]).range([200,o-0]),i=S().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,r-10]).padding(.1);a.tickFormat(20);const d=k("#attempted-bar-chart-container").append("svg").attr("width",o).attr("height",r).attr("viewBox",[0,0,o,r]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");d.append("g").attr("fill","blue").selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",t=>i(t.name)).attr("width",t=>a(t.quantity)-a(0)).attr("height",i.bandwidth()),d.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>a(t.quantity)).attr("y",t=>i(t.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(s=>a(s.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),d.append("g").attr("transform","translate(0,0)").call(w(a).ticks(0)).call(t=>t.select(".domain").remove()),d.append("g").attr("transform","translate(200,0)").call(A(i).tickSizeOuter(0))},computed:{}};function Rt(e,n,m,l,o,r){return null}const qt=y(zt,[["render",Rt]]);const Ht={setup(){const e=z(),n=$();return{cohortsStore:e,userDetailsStore:n}},components:{CohortProgressLineChart:R,CohortPassedAssessmentsHorizontalBarChart:Dt,CohortAttemptedAssessmentsHorizontalChart:qt,DownloadCSVBtn:q},data(){return{cohortProgress:[],cohortProgressDownloadData:[],masteredSkillQuantities:[],attemptedAssessmentQuantities:[],masteredSkillQuantitiesDownloadData:[],attemptedAssessmentQuantitiesDownloadData:[]}},async created(){this.getAllStudentsMasteredAssessments(),this.getAllStudentsAttemptedAssessments(),await this.getAllStudentsProgress()},methods:{async getAllStudentsProgress(){fetch(`/student-analytics/all-students-progress/${this.userDetailsStore.userId}`).then(e=>e.json()).then(e=>{for(let n=0;n<e.length;n++)e[n].date=new Date(e[n].date);e.sort((n,m)=>n.date-m.date),this.cohortProgress=e,this.cohortProgressDownloadData=e.map(n=>({date:n.date,skillsMastered:n.quantity}))}).catch(e=>{console.error("Error fetching student progress:",e)})},async getAllStudentsMasteredAssessments(){try{const e=await fetch(`/student-analytics/mastered-skills/all-students/${this.userDetailsStore.userId}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();this.masteredSkillQuantities=Array.isArray(n)?n:[],this.masteredSkillQuantitiesDownloadData=n.map(m=>({student:m.name,quantity:m.quantity}))}catch(e){console.error("Error fetching all students mastered assessments:",e),this.masteredSkillQuantities=[]}},async getAllStudentsAttemptedAssessments(){try{const e=await fetch(`/student-analytics/attempted-assessments/all-students/${this.userDetailsStore.userId}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();this.attemptedAssessmentQuantities=Array.isArray(n)?n:[]}catch(e){console.error("Error fetching cohort mastered assessments:",e),this.attemptedAssessmentQuantities=[]}},assessmentDate(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}}},j=e=>(C("data-v-02be3071"),e=e(),L(),e),Mt={class:"container-fluid chart-page"},It=j(()=>c("h1",{class:"heading h4"},"Progress Report",-1)),Et={class:"row chart-row position-relative"},Nt={id:"progress-chart-container"},Qt={key:1},Ot={class:"row chart-row"},Wt={class:"col-md chart-col position-relative position-relative"},Vt={id:"progress-bar-chart-container"},Ft={key:1},Ut=j(()=>c("figcaption",null,"Passed",-1)),Yt={class:"col-md chart-col position-relative position-relative"},Gt={id:"attempted-bar-chart-container"},Jt={key:1},Kt=j(()=>c("figcaption",null,"Attempted",-1));function Xt(e,n,m,l,o,r){const a=u("DownloadCSVBtn"),i=u("CohortProgressLineChart"),d=u("CohortPassedAssessmentsHorizontalBarChart"),t=u("CohortAttemptedAssessmentsHorizontalChart");return h(),p("div",Mt,[It,c("div",Et,[c("div",Nt,[T(a,{data:o.cohortProgressDownloadData,fileName:`${e.cohortName?e.cohortName:"All Students"}-progress.csv`,class:"download-btn position-absolute btn"},null,8,["data","fileName"]),o.cohortProgress.length>0?(h(),g(i,{key:0,data:o.cohortProgress},null,8,["data"])):(h(),p("p",Qt,"There is no data to show yet."))])]),c("div",Ot,[c("div",Wt,[c("div",Vt,[T(a,{data:o.masteredSkillQuantitiesDownloadData,fileName:`${e.cohortName}-passed-assessments.csv`,class:"download-btn position-absolute btn"},null,8,["data","fileName"]),o.masteredSkillQuantities.length>0?(h(),g(d,{key:0,data:o.masteredSkillQuantities,colour:"darkgreen"},null,8,["data"])):(h(),p("p",Ft,"There is no data to show yet."))]),Ut]),c("div",Yt,[c("div",Gt,[T(a,{data:o.attemptedAssessmentQuantitiesDownloadData,fileName:`${e.cohortName}-attempted-assessments.csv`,class:"download-btn position-absolute btn"},null,8,["data","fileName"]),o.attemptedAssessmentQuantities.length>0?(h(),g(t,{key:0,data:o.attemptedAssessmentQuantities,colour:"darkblue"},null,8,["data"])):(h(),p("p",Jt,"There is no data to show yet."))]),Kt])])])}const Zt=y(Ht,[["render",Xt],["__scopeId","data-v-02be3071"]]),te={name:"Dashboard",setup(){return{userDetailsStore:$()}},data(){return{}},components:{SchoolAdminProgressReport:Ct,TeacherProgressReport:Zt},async created(){}};function ee(e,n,m,l,o,r){const a=u("SchoolAdminProgressReport"),i=u("TeacherProgressReport");return h(),p(P,null,[l.userDetailsStore.role=="school_admin"?(h(),g(a,{key:0})):B("",!0),l.userDetailsStore.role=="instructor"||l.userDetailsStore.role=="partner"?(h(),g(i,{key:1})):B("",!0)],64)}const ye=y(te,[["render",ee]]);export{ye as default};
