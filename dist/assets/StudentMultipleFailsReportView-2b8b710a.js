import{_,A as g,r as h,o as l,c as m,a,t as S,k as f,g as b,p as B,d as w}from"./main-506f87fd.js";import{u as A}from"./TeacherAnalyticsStore-f7e24e3e.js";import{u as x}from"./AnalyticsStore-167729f6.js";import"./transform-af9a74a2.js";import{l as F,c as v,b as j}from"./linear-5b188edc.js";import{m as k,b as C}from"./continuous-7328829e.js";import{s as I}from"./sort-ed61f96d.js";import{s as R}from"./string-dd82ab4a.js";import{F as M}from"./FailedAssessmentsHorizontalBarChart-c7db6504.js";import{D as z}from"./downloadCSVBtn-f3058beb.js";const H={name:"StudentFailedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const c=document.getElementById("fails-by-subject-chart-container").clientWidth,u=document.getElementById("fails-by-subject-chart-container").clientHeight,s=F().domain([0,k(this.data,t=>t.quantity)]).range([200,c-0]),o=C().domain(I(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,u-0]).padding(.2);s.tickFormat(20);const r=R("#fails-by-subject-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,"100%","100%"]).attr("preserveAspectRatio","xMinYMin");r.append("g").selectAll().data(this.data).join("rect").attr("x",s(0)).attr("y",t=>o(t.name)).attr("width",t=>s(t.quantity)-s(0)).attr("height",o.bandwidth()).attr("fill",function(t){return t.name=="Language"?"DarkMagenta":t.name=="Mathematics"?"blue":t.name=="Science & Invention"?"purple":t.name=="Computer Science"?"deeppink":t.name=="Dangerous Ideas"?"brown":t.name=="History"?"cyan":t.name=="Life"?"magenta":"#ff7f0e"}),r.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>s(t.quantity)).attr("y",t=>o(t.name)+o.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(y=>s(y.quantity)-s(0)<20).attr("dx",4).attr("fill","white").attr("text-anchor","start")),r.append("g").attr("transform","translate(0,0)").call(v(s).ticks(0)).call(t=>t.select(".domain").remove()),r.append("g").attr("transform","translate(200,0)").attr("style","font-size: 16px").call(j(o).tickSizeOuter(0))}};function N(e,i,d,n,c,u){return null}const D=_(H,[["render",N]]);const V={setup(){const e=g(),i=A(),d=x();return{usersStore:e,teacherAnalyticsStore:i,analyticsStore:d}},components:{FailedAssessmentsHorizontalBarChart:M,StudentFailedAssessmentsByRootSubjectHorizontalBarChart:D,DownloadCSVBtn:z},data(){return{studentId:this.$route.params.studentId,studentName:null}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const e=this.usersStore.users.find(i=>i.id===this.studentId);e&&(this.studentName=e.username),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),await this.analyticsStore.getStudentFailedAssessmentsBySubject(this.studentId),this.isLoaded=!0},methods:{}},p=e=>(B("data-v-6191698f"),e=e(),w(),e),L={class:"container chart-page"},T={class:"d-flex justify-content-between w-100"},$=p(()=>a("h1",{class:"heading h4"},"Multiple fails",-1)),q={class:"tertiary-heading h4"},E={class:"row h-100"},O={class:"col-md"},U=p(()=>a("h3",{class:"secondary-heading h5"},"By subject",-1)),W={id:"fails-by-subject-chart-container"},Y={key:1},G={class:"col-md position-relative"},J=p(()=>a("h3",{class:"secondary-heading h5"},"By skill",-1)),K={id:"fails-by-skill-chart-container"},P={key:1};function Q(e,i,d,n,c,u){const s=h("StudentFailedAssessmentsByRootSubjectHorizontalBarChart"),o=h("DownloadCSVBtn"),r=h("FailedAssessmentsHorizontalBarChart");return l(),m("div",L,[a("span",T,[$,a("h2",q,S(c.studentName),1)]),a("div",E,[a("div",O,[U,a("div",W,[n.analyticsStore.studentRootSubjectsFailedAssessments.length>0?(l(),f(s,{key:0,data:n.analyticsStore.studentRootSubjectsFailedAssessments},null,8,["data"])):(l(),m("p",Y,"No data yet"))])]),a("div",G,[J,a("div",K,[b(o,{data:n.teacherAnalyticsStore.studentMultipleFails,fileName:`Assessment Status Report - ${c.studentName}`,toolTip:"Download failed assessments data as CSV",class:"position-absolute download-btn"},null,8,["data","fileName"]),n.teacherAnalyticsStore.studentMultipleFails.length>0?(l(),f(r,{key:0,data:n.teacherAnalyticsStore.studentMultipleFails,colour:"darkred"},null,8,["data"])):(l(),m("p",P," This student has not failed any assessments more than once yet. "))])])])])}const ct=_(V,[["render",Q],["__scopeId","data-v-6191698f"]]);export{ct as default};
