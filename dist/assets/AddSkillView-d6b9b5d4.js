import{_ as E}from"./general-banner-1c13aca4.js";import{o as r,l as b,H as f,e as c,I as p,w as g,v as L,F as w,k as S,t as v,J as k,b as m,T as B,m as T,s as y,_ as H,g as N,r as F,c as u,d as s,G as R,K as D,j as C,i as G,L as V,p as K,f as z,q as x}from"./main-13cbbd08.js";import{_ as U}from"./recurso-69-12793b41.js";function O(e){return e===0?!1:Array.isArray(e)&&e.length===0?!0:!e}function j(e){return(...t)=>!e(...t)}function q(e,t){return e===void 0&&(e="undefined"),e===null&&(e="null"),e===!1&&(e="false"),e.toString().toLowerCase().indexOf(t.trim())!==-1}function M(e,t,n,d){return t?e.filter(i=>q(d(i,n),t)).sort((i,a)=>d(i,n).length-d(a,n).length):e}function J(e){return e.filter(t=>!t.$isLabel)}function I(e,t){return n=>n.reduce((d,i)=>i[e]&&i[e].length?(d.push({$groupLabel:i[t],$isLabel:!0}),d.concat(i[e])):d,[])}function Z(e,t,n,d,i){return a=>a.map(o=>{if(!o[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const l=M(o[n],e,t,i);return l.length?{[d]:o[d],[n]:l}:[]})}const P=(...e)=>t=>e.reduce((n,d)=>d(n),t);var Q={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(e,t){return O(e)?"":t?e[t]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const e=this.search||"",t=e.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,t,this.label):M(n,t,this.label,this.customLabel):n=this.groupValues?I(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(j(this.isSelected)):n,this.taggable&&t.length&&!this.isExistingOption(t)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:e}):n.unshift({isTag:!0,label:e})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(e=>e[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(t=>this.customLabel(t,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(e,t,n){return P(Z(t,n,this.groupValues,this.groupLabel,this.customLabel),I(this.groupValues,this.groupLabel))(e)},flatAndStrip(e){return P(I(this.groupValues,this.groupLabel),J)(e)},updateSearch(e){this.search=e},isExistingOption(e){return this.options?this.optionKeys.indexOf(e)>-1:!1},isSelected(e){const t=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(t)>-1},isOptionDisabled(e){return!!e.$isDisabled},getOptionLabel(e){if(O(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;const t=this.customLabel(e,this.label);return O(t)?"":t},select(e,t){if(e.$isLabel&&this.groupSelect){this.selectGroup(e);return}if(!(this.blockKeys.indexOf(t)!==-1||this.disabled||e.$isDisabled||e.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(t==="Tab"&&!this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e)){t!=="Tab"&&this.removeElement(e);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([e])):this.$emit("update:modelValue",e),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(e){const t=this.options.find(n=>n[this.groupLabel]===e.$groupLabel);if(t){if(this.wholeGroupSelected(t)){this.$emit("remove",t[this.groupValues],this.id);const n=this.internalValue.filter(d=>t[this.groupValues].indexOf(d)===-1);this.$emit("update:modelValue",n)}else{let n=t[this.groupValues].filter(d=>!(this.isOptionDisabled(d)||this.isSelected(d)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(e){return e[this.groupValues].every(t=>this.isSelected(t)||this.isOptionDisabled(t))},wholeGroupDisabled(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement(e,t=!0){if(this.disabled||e.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof e=="object"?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){const d=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",d)}else this.$emit("update:modelValue",null);this.$emit("remove",e,this.id),this.closeOnSelect&&t&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const e=this.$el.getBoundingClientRect().top,t=window.innerHeight-this.$el.getBoundingClientRect().bottom;t>this.maxHeight||t>e||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(t-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}},W={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(e,t){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(t)}},groupHighlight(e,t){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":t.$isLabel}];const n=this.options.find(d=>d[this.groupLabel]===t.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:e}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(e){this.pointer=e,this.pointerDirty=!0}}},A={name:"vue-multiselect",mixins:[Q,W],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:e=>`and ${e} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const X={ref:"tags",class:"multiselect__tags"},Y={class:"multiselect__tags-wrap"},ee={class:"multiselect__spinner"},te={key:0},se={class:"multiselect__option"},ie={class:"multiselect__option"},le=y("No elements found. Consider changing the search query."),ne={class:"multiselect__option"},oe=y("List is empty.");function re(e,t,n,d,i,a){return r(),b("div",{tabindex:e.searchable?-1:n.tabindex,class:[{"multiselect--active":e.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":a.isAbove,"multiselect--has-options-group":a.hasOptionGroup},"multiselect"],onFocus:t[14]||(t[14]=o=>e.activate()),onBlur:t[15]||(t[15]=o=>e.searchable?!1:e.deactivate()),onKeydown:[t[16]||(t[16]=k(p(o=>e.pointerForward(),["self","prevent"]),["down"])),t[17]||(t[17]=k(p(o=>e.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:t[18]||(t[18]=k(p(o=>e.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:t[19]||(t[19]=k(o=>e.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+e.id},[f(e.$slots,"caret",{toggle:e.toggle},()=>[c("div",{onMousedown:t[1]||(t[1]=p(o=>e.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),f(e.$slots,"clear",{search:e.search}),c("div",X,[f(e.$slots,"selection",{search:e.search,remove:e.removeElement,values:a.visibleValues,isOpen:e.isOpen},()=>[g(c("div",Y,[(r(!0),b(w,null,S(a.visibleValues,(o,l)=>f(e.$slots,"tag",{option:o,search:e.search,remove:e.removeElement},()=>[(r(),b("span",{class:"multiselect__tag",key:l},[c("span",{textContent:v(e.getOptionLabel(o))},null,8,["textContent"]),c("i",{tabindex:"1",onKeypress:k(p(_=>e.removeElement(o),["prevent"]),["enter"]),onMousedown:p(_=>e.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[L,a.visibleValues.length>0]]),e.internalValue&&e.internalValue.length>n.limit?f(e.$slots,"limit",{key:0},()=>[c("strong",{class:"multiselect__strong",textContent:v(n.limitText(e.internalValue.length-n.limit))},null,8,["textContent"])]):m("v-if",!0)]),c(B,{name:"multiselect__loading"},{default:T(()=>[f(e.$slots,"loading",{},()=>[g(c("div",ee,null,512),[[L,n.loading]])])]),_:3}),e.searchable?(r(),b("input",{key:0,ref:"search",name:n.name,id:e.id,type:"text",autocomplete:"off",spellcheck:!1,placeholder:e.placeholder,style:a.inputStyle,value:e.search,disabled:n.disabled,tabindex:n.tabindex,onInput:t[2]||(t[2]=o=>e.updateSearch(o.target.value)),onFocus:t[3]||(t[3]=p(o=>e.activate(),["prevent"])),onBlur:t[4]||(t[4]=p(o=>e.deactivate(),["prevent"])),onKeyup:t[5]||(t[5]=k(o=>e.deactivate(),["esc"])),onKeydown:[t[6]||(t[6]=k(p(o=>e.pointerForward(),["prevent"]),["down"])),t[7]||(t[7]=k(p(o=>e.pointerBackward(),["prevent"]),["up"])),t[9]||(t[9]=k(p(o=>e.removeLastElement(),["stop"]),["delete"]))],onKeypress:t[8]||(t[8]=k(p(o=>e.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+e.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):m("v-if",!0),a.isSingleLabelVisible?(r(),b("span",{key:1,class:"multiselect__single",onMousedown:t[10]||(t[10]=p((...o)=>e.toggle&&e.toggle(...o),["prevent"]))},[f(e.$slots,"singleLabel",{option:a.singleValue},()=>[y(v(e.currentOptionLabel),1)])],32)):m("v-if",!0),a.isPlaceholderVisible?(r(),b("span",{key:2,class:"multiselect__placeholder",onMousedown:t[11]||(t[11]=p((...o)=>e.toggle&&e.toggle(...o),["prevent"]))},[f(e.$slots,"placeholder",{},()=>[y(v(e.placeholder),1)])],32)):m("v-if",!0)],512),c(B,{name:"multiselect"},{default:T(()=>[g(c("div",{class:"multiselect__content-wrapper",onFocus:t[12]||(t[12]=(...o)=>e.activate&&e.activate(...o)),tabindex:"-1",onMousedown:t[13]||(t[13]=p(()=>{},["prevent"])),style:{maxHeight:e.optimizedHeight+"px"},ref:"list"},[c("ul",{class:"multiselect__content",style:a.contentStyle,role:"listbox",id:"listbox-"+e.id},[f(e.$slots,"beforeList"),e.multiple&&e.max===e.internalValue.length?(r(),b("li",te,[c("span",se,[f(e.$slots,"maxElements",{},()=>[y("Maximum of "+v(e.max)+" options selected. First remove a selected option to select another.",1)])])])):m("v-if",!0),!e.max||e.internalValue.length<e.max?(r(!0),b(w,{key:1},S(e.filteredOptions,(o,l)=>(r(),b("li",{class:"multiselect__element",key:l,id:e.id+"-"+l,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?m("v-if",!0):(r(),b("span",{key:0,class:[e.optionHighlight(l,o),"multiselect__option"],onClick:p(_=>e.select(o),["stop"]),onMouseenter:p(_=>e.pointerSet(l),["self"]),"data-select":o&&o.isTag?e.tagPlaceholder:a.selectLabelText,"data-selected":a.selectedLabelText,"data-deselect":a.deselectLabelText},[f(e.$slots,"option",{option:o,search:e.search,index:l},()=>[c("span",null,v(e.getOptionLabel(o)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),o&&(o.$isLabel||o.$isDisabled)?(r(),b("span",{key:1,"data-select":e.groupSelect&&a.selectGroupLabelText,"data-deselect":e.groupSelect&&a.deselectGroupLabelText,class:[e.groupHighlight(l,o),"multiselect__option"],onMouseenter:p(_=>e.groupSelect&&e.pointerSet(l),["self"]),onMousedown:p(_=>e.selectGroup(o),["prevent"])},[f(e.$slots,"option",{option:o,search:e.search,index:l},()=>[c("span",null,v(e.getOptionLabel(o)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):m("v-if",!0)],8,["id","role"]))),128)):m("v-if",!0),g(c("li",null,[c("span",ie,[f(e.$slots,"noResult",{search:e.search},()=>[le])])],512),[[L,n.showNoResults&&e.filteredOptions.length===0&&e.search&&!n.loading]]),g(c("li",null,[c("span",ne,[f(e.$slots,"noOptions",{},()=>[oe])])],512),[[L,n.showNoOptions&&(e.options.length===0||a.hasOptionGroup===!0&&e.filteredOptions.length===0)&&!e.search&&!n.loading]]),f(e.$slots,"afterList")],12,["id"])],36),[[L,e.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}A.render=re;const ae={setup(){return{skillsStore:N()}},components:{VueMultiselect:A},data(){return{skill:{name:"",parent:0,description:"",icon:"",icon_image:"",banner_image:"",mastery_requirements:"",type:"regular",level:"grade_school"},iconImage:"",bannerImage:"",skills:[],superSkills:[],levels:[{id:"grade_school",name:"Grade school"},{id:"middle_school",name:"Middle school"},{id:"high_school",name:"High school"},{id:"college",name:"College"},{id:"phd",name:"PhD"}],filters:[],parentInput:{inputText:"",suggestSkills:[]},clusterParentInput:{inputText:"",suggestSuperSkills:[]},showDropDown:!1,showLevel:"Grade School",validate:{violated:!1,name:!1,description:!1,orphan:!1},isAnotherInstanceOfExistingSkill:!1,skillToBeCopied:null,parentOfNewInstance:null}},computed:{skillsThatCanBeCopied(){return this.skillsStore.skillsList.filter(function(t){return t.type!=="domain"&&t.type!=="super"})}},async created(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),this.skills.length==0&&await this.getParentSkills()},async mounted(){$("#summernote").summernote({disableDragAndDrop:!0,placeholder:"",tabsize:2,height:120,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link"]],["view",["fullscreen","codeview","help"]]],maximumImageFileSize:2048*1024,callbacks:{onImageUploadError:function(e){alert("Max image size is 2MB.")}}}),$(".note-editor .note-editable").css("background-color","#ffffff")},methods:{async getParentSkills(){for(let e=0;e<this.skillsStore.skillsList.length;e++)this.skillsStore.skillsList[e].type=="super"&&this.superSkills.push(this.skillsStore.skillsList[e]),this.skillsStore.skillsList[e].id!=this.skillId&&this.skillsStore.skillsList[e].type!="sub"&&this.skills.push(this.skillsStore.skillsList[e])},onFileChange(e,t){var n=e.target.files||e.dataTransfer.files;n.length&&this.createImage(n[0],t)},createImage(e,t){new Image;var n=new FileReader,d=this;n.onload=i=>{d.image=i.target.result,t=="icon"?(this.iconImage=i.target.result,this.skill.icon_image=this.iconImage):(this.bannerImage=i.target.result,this.skill.banner_image=this.bannerImage)},n.readAsDataURL(e)},deleteImage(e){switch(e){case"icon":this.iconImage="";break;default:this.bannerImage="";break}},async Submit(){if(this.skill.type=="sub"&&this.skill.parent==0&&(alert("cluster nodes must have a parent"),this.validate.orphan=!0,this.validate.violated=!0),(this.skill.name===""||this.skill.name===null)&&(alert("please enter a skill name"),this.validate.name=!0,this.validate.description=!0),this.skill.type=="domain")this.skill.level="domain";else if(this.skill.type=="sub")for(let t=0;t<this.skillsStore.skillsList.length;t++)this.skill.parent==this.skillsStore.skillsList[t].id&&(this.skill.level=this.skillsStore.skillsList[t].level);var e="/skills/add";this.skill.mastery_requirements=$("#summernote").summernote("code"),!this.validate.violated&&await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.skill.name,parent:this.skill.parent,description:this.skill.description,icon_image:this.skill.icon_image,banner_image:this.skill.banner_image,mastery_requirements:this.skill.mastery_requirements,type:this.skill.type,level:this.skill.level,filters:this.filters})}).then(function(t){return t.json()}).then(t=>{if(t.result=="skill already exists"){alert(t.result);return}else(t.result=="skill was deleted, but has now been undeleted. Please find it and edit it."||t.result=="skill added")&&alert(t.result)}).then(()=>{this.skillsStore.getNestedSkillsList()}).then(()=>{this.$router.push("/skills")})},async CreateNewInstance(){var e="/skills/add/new-instance";await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({skillToBeCopied:this.skillToBeCopied,parentOfNewInstance:this.parentOfNewInstance})}).then(()=>{this.skillsStore.getNestedSkillsList()}).then(()=>{this.$router.push("/skills")})},getReferenceSkill(){this.parentInput.inputText.length<2?this.parentInput.suggestSkills=[]:this.parentInput.suggestSkills=this.skills.filter(e=>e.name.toLowerCase().includes(this.parentInput.inputText.toLowerCase()))},handleChooseSuggestSkill(e){this.parentInput.suggestSkills=[],this.skill.parent=e.id,this.parentInput.inputText=e.name},getSuperSkillSuggestion(){this.clusterParentInput.inputText.length<2?this.clusterParentInput.suggestSuperSkills=[]:this.clusterParentInput.suggestSuperSkills=this.superSkills.filter(e=>e.name.toLowerCase().includes(this.clusterParentInput.inputText.toLowerCase()))},handleChooseSuperSkill(e){this.clusterParentInput.suggestSuperSkills=[],this.skill.parent=e.id,this.clusterParentInput.inputText=e.name},handleChooseSkillLevel(e){this.showLevel=e.name,this.skill.level=e.id,this.showDropDown=!1},openImage(e){document.getElementById(e).click()}}},h=e=>(K("data-v-bd73992e"),e=e(),z(),e),ue={class:"container mt-4 pb-5 px-3 px-md-0"},he={class:"row mt-5"},de={class:"col-12 col-md-10 col-lg-5 d-flex align-items-baseline justify-content-center justify-content-md-start gap-3 mt-3"},ce={id:"page-tile"},pe={key:0},me={key:1},ge=h(()=>s("img",{src:U,id:"header-icon"},null,-1)),fe={class:"row"},ve={class:"col-12 col-md-8 col-lg-5 mt-2"},be={class:"row p-0 m-0"},ke={class:"form-check my-2"},ye={class:"control control-checkbox"},_e=h(()=>s("span",{class:"my-auto mx-2 me-2"},"Is this an existing skill that needs to appear again in the tree?",-1)),we=h(()=>s("div",{class:"control_indicator"},null,-1)),Se={key:0,class:"mb-3"},Le={class:"row mt-3"},Ce=h(()=>s("label",{class:"form-label"},"Original Skill",-1)),Ve=["value"],Oe={class:"row mt-3"},Ie=h(()=>s("label",{class:"form-label"},"Parent",-1)),Te=["value"],Be={key:0},De={class:"row mt-2"},Pe={class:"col-12 col-md-8 col-lg-5 mt-2"},xe={class:"mb-3"},Me=h(()=>s("label",{for:"name",class:"form-label"},"Name",-1)),Ae={key:0,class:"form-validate"},Ee={class:"row"},He={class:"col-12 col-md-8 col-lg-5 mt-2"},Ne={key:0,class:"mb-3"},Fe=h(()=>s("label",{class:"form-label"},"Parent",-1)),$e={class:"row mt-3"},Re={class:"col position-relative"},Ge={key:0,id:"suggest-skills",class:"flex flex-column position-absolute"},Ke=["onClick"],ze={key:0,class:"form-validate"},Ue={key:1,class:"mb-3"},je=h(()=>s("label",{class:"form-label"},"Cluster node center",-1)),qe={class:"row mt-3"},Je={class:"col position-relative"},Ze={key:0,id:"suggest-skills",class:"flex flex-column position-absolute"},Qe=["onClick"],We={class:"row"},Xe={key:0},Ye={class:"col col-md-8 col-lg-5 mt-2"},et=h(()=>s("label",{class:"form-label"},"Level",-1)),tt={class:"d-flex flex-column position-relative"},st=h(()=>s("span",null,[s("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M14.2929 8.70711C14.9229 8.07714 14.4767 7 13.5858 7H6.41421C5.52331 7 5.07714 8.07714 5.70711 8.70711L9.29289 12.2929C9.68342 12.6834 10.3166 12.6834 10.7071 12.2929L14.2929 8.70711Z",fill:"#344054"})])],-1)),it={key:0,class:"custom-dropdown-base"},lt=["onClick"],nt={class:"row"},ot={class:"col-12 col-md-8 col-lg-5 mt-2"},rt=h(()=>s("label",{class:"form-label"},"Node Type",-1)),at={class:"row p-0 m-0"},ut={class:"form-check col-6 col-md-5 my-2"},ht={class:"control control-checkbox"},dt=h(()=>s("span",{class:"my-auto mx-2 me-4"},"Regular",-1)),ct=h(()=>s("div",{class:"control_indicator"},null,-1)),pt={class:"form-check col-6 col-md-5 my-2"},mt={class:"control control-checkbox"},gt=h(()=>s("span",{class:"my-auto mx-2 me-4"},"Category",-1)),ft=h(()=>s("div",{class:"control_indicator"},null,-1)),vt={class:"form-check col-6 col-md-5 my-2"},bt={class:"control control-checkbox"},kt=h(()=>s("span",{class:"my-auto mx-2 me-4"},"Cluster node center",-1)),yt=h(()=>s("div",{class:"control_indicator"},null,-1)),_t={class:"form-check col-6 col-md-5 my-2"},wt={class:"control control-checkbox"},St=h(()=>s("span",{class:"my-auto mx-2 me-4"},"Cluster node outer",-1)),Lt=h(()=>s("div",{class:"control_indicator"},null,-1)),Ct={key:0,class:"form-validate"},Vt={class:"row"},Ot={class:"col-6 col-md-3 col-lg-2 mt-2"},It={class:"mb-3 row d-flex justify-content-center justify-content-md-start"},Tt=h(()=>s("label",{for:"image",class:"form-label"},"Icon",-1)),Bt={key:0},Dt={class:"default-no-img"},Pt=x('<svg width="33" height="33" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bd73992e><circle cx="26.5" cy="26.5" r="26.5" fill="#D9D9D9" data-v-bd73992e></circle><g clip-path="url(#clip0_372_11959)" data-v-bd73992e><path d="M19.7439 45.0784L19.7439 33.2515L7.93354 33.268C7.40615 33.2671 6.90063 33.0572 6.52771 32.6843C6.15479 32.3114 5.94488 31.8059 5.94396 31.2785L5.93291 21.7174C5.93382 21.1901 6.14373 20.6845 6.51665 20.3116C6.88957 19.9387 7.3951 19.7288 7.92249 19.7279L19.7439 19.7334L19.7439 7.90646C19.7411 7.64223 19.7911 7.38009 19.8909 7.13543C19.9907 6.89076 20.1384 6.66849 20.3252 6.48164C20.5121 6.29479 20.7344 6.14713 20.979 6.0473C21.2237 5.94747 21.4858 5.8975 21.75 5.9003L31.2779 5.92241C31.8053 5.92332 32.3108 6.13322 32.6838 6.50615C33.0567 6.87907 33.2666 7.38459 33.2675 7.91198L33.262 19.7334L45.0889 19.7334C45.615 19.7337 46.1195 19.9428 46.4915 20.3148C46.8635 20.6869 47.0726 21.1913 47.073 21.7174L47.0951 31.2453C47.0948 31.7714 46.8856 32.2759 46.5136 32.6479C46.1416 33.0199 45.6371 33.229 45.111 33.2294L33.262 33.2515L33.2786 45.0618C33.2776 45.5892 33.0677 46.0947 32.6948 46.4677C32.3219 46.8406 31.8164 47.0505 31.289 47.0514L21.7501 47.0846C21.4858 47.0874 21.2237 47.0374 20.979 46.9376C20.7344 46.8377 20.5121 46.6901 20.3252 46.5032C20.1384 46.3164 19.9907 46.0941 19.8909 45.8494C19.7911 45.6048 19.7411 45.3426 19.7439 45.0784Z" fill="white" data-v-bd73992e></path></g><defs data-v-bd73992e><clipPath id="clip0_372_11959" data-v-bd73992e><rect width="37" height="37" fill="white" transform="translate(8 8)" data-v-bd73992e></rect></clipPath></defs></svg>',1),xt=[Pt],Mt=h(()=>s("p",{style:{"font-size":"14px"}},[s("em",null,"Maximum file size 15mb")],-1)),At={key:1},Et=["src"],Ht=h(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"20",height:"20",fill:"white"},[s("path",{d:"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"})],-1)),Nt={class:"col-12 col-lg-10 mt-2"},Ft={class:"mb-3 row"},$t=h(()=>s("label",{for:"image",class:"form-label"},"Banner",-1)),Rt={key:0},Gt={class:"default-no-img"},Kt=x('<svg width="33" height="33" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bd73992e><circle cx="26.5" cy="26.5" r="26.5" fill="#D9D9D9" data-v-bd73992e></circle><g clip-path="url(#clip0_372_11959)" data-v-bd73992e><path d="M19.7439 45.0784L19.7439 33.2515L7.93354 33.268C7.40615 33.2671 6.90063 33.0572 6.52771 32.6843C6.15479 32.3114 5.94488 31.8059 5.94396 31.2785L5.93291 21.7174C5.93382 21.1901 6.14373 20.6845 6.51665 20.3116C6.88957 19.9387 7.3951 19.7288 7.92249 19.7279L19.7439 19.7334L19.7439 7.90646C19.7411 7.64223 19.7911 7.38009 19.8909 7.13543C19.9907 6.89076 20.1384 6.66849 20.3252 6.48164C20.5121 6.29479 20.7344 6.14713 20.979 6.0473C21.2237 5.94747 21.4858 5.8975 21.75 5.9003L31.2779 5.92241C31.8053 5.92332 32.3108 6.13322 32.6838 6.50615C33.0567 6.87907 33.2666 7.38459 33.2675 7.91198L33.262 19.7334L45.0889 19.7334C45.615 19.7337 46.1195 19.9428 46.4915 20.3148C46.8635 20.6869 47.0726 21.1913 47.073 21.7174L47.0951 31.2453C47.0948 31.7714 46.8856 32.2759 46.5136 32.6479C46.1416 33.0199 45.6371 33.229 45.111 33.2294L33.262 33.2515L33.2786 45.0618C33.2776 45.5892 33.0677 46.0947 32.6948 46.4677C32.3219 46.8406 31.8164 47.0505 31.289 47.0514L21.7501 47.0846C21.4858 47.0874 21.2237 47.0374 20.979 46.9376C20.7344 46.8377 20.5121 46.6901 20.3252 46.5032C20.1384 46.3164 19.9907 46.0941 19.8909 45.8494C19.7911 45.6048 19.7411 45.3426 19.7439 45.0784Z" fill="white" data-v-bd73992e></path></g><defs data-v-bd73992e><clipPath id="clip0_372_11959" data-v-bd73992e><rect width="37" height="37" fill="white" transform="translate(8 8)" data-v-bd73992e></rect></clipPath></defs></svg>',1),zt=[Kt],Ut=h(()=>s("p",{style:{"font-size":"14px"}},[s("em",null,"Maximum file size 15mb")],-1)),jt={key:1},qt=["src"],Jt=h(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"20",height:"20",fill:"white"},[s("path",{d:"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"})],-1)),Zt={class:"row"},Qt={class:"col"},Wt={class:"mb-3"},Xt=h(()=>s("label",{for:"description",class:"form-label"},"Description",-1)),Yt={key:0,class:"form-validate"},es={class:"row"},ts={class:"col"},ss={class:"mb-3"},is=h(()=>s("label",{for:"mastery_requirements",class:"form-label"},"Mastery Requirements",-1)),ls={class:"row"},ns={class:"col"},os={class:"d-flex justify-content-end gap-4"};function rs(e,t,n,d,i,a){const o=F("router-link");return r(),u("div",ue,[s("div",he,[s("div",de,[s("h1",ce,[i.skill.type!="domain"?(r(),u("span",pe,"Add Skill")):(r(),u("span",me,"Add Category"))]),ge])]),s("div",fe,[s("div",ve,[s("div",be,[s("div",ke,[s("label",ye,[_e,g(s("input",{type:"checkbox",value:"true","onUpdate:modelValue":t[0]||(t[0]=l=>i.isAnotherInstanceOfExistingSkill=l)},null,512),[[R,i.isAnotherInstanceOfExistingSkill]]),we])])]),i.isAnotherInstanceOfExistingSkill?(r(),u("div",Se,[s("div",Le,[Ce,g(s("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>i.skillToBeCopied=l)},[(r(!0),u(w,null,S(a.skillsThatCanBeCopied,l=>(r(),u("option",{value:l},v(l.name),9,Ve))),256))],512),[[D,i.skillToBeCopied]])]),s("div",Oe,[Ie,g(s("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>i.parentOfNewInstance=l)},[(r(!0),u(w,null,S(i.skills,l=>(r(),u("option",{value:l},v(l.name),9,Te))),256))],512),[[D,i.parentOfNewInstance]])])])):m("",!0)])]),i.isAnotherInstanceOfExistingSkill?m("",!0):(r(),u("div",Be,[s("div",De,[s("div",Pe,[s("div",xe,[Me,g(s("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>i.skill.name=l),class:"form-control",type:"text",placeholder:"name"},null,512),[[C,i.skill.name]]),i.validate.name&&(i.skill.name==""||i.skill.name==null)?(r(),u("div",Ae," please enter a skill name ")):m("",!0)])])]),s("div",Ee,[s("div",He,[i.skill.type!="sub"?(r(),u("div",Ne,[Fe,s("div",$e,[s("div",Re,[g(s("input",{id:"skill-input","onUpdate:modelValue":t[4]||(t[4]=l=>i.parentInput.inputText=l),onInput:t[5]||(t[5]=(...l)=>a.getReferenceSkill&&a.getReferenceSkill(...l)),placeholder:"type skill name"},null,544),[[C,i.parentInput.inputText]]),i.parentInput.suggestSkills.length>0?(r(),u("div",Ge,[(r(!0),u(w,null,S(i.parentInput.suggestSkills,l=>(r(),u("div",{class:"suggest-option",onClick:_=>a.handleChooseSuggestSkill(l)},v(l.name),9,Ke))),256))])):m("",!0)])]),i.validate.orphan&&(i.skill.parent==""||i.skill.parent==null)?(r(),u("div",ze," cluster nodes must have a parent ")):m("",!0)])):(r(),u("div",Ue,[je,s("div",qe,[s("div",Je,[g(s("input",{id:"skill-input","onUpdate:modelValue":t[6]||(t[6]=l=>i.clusterParentInput.inputText=l),onInput:t[7]||(t[7]=(...l)=>a.getSuperSkillSuggestion&&a.getSuperSkillSuggestion(...l)),placeholder:"type skill name"},null,544),[[C,i.clusterParentInput.inputText]]),i.clusterParentInput.suggestSuperSkills.length>0?(r(),u("div",Ze,[(r(!0),u(w,null,S(i.clusterParentInput.suggestSuperSkills,l=>(r(),u("div",{class:"suggest-option",onClick:_=>a.handleChooseSuggestSkill(l)},v(l.name),9,Qe))),256))])):m("",!0)])])]))])]),s("div",We,[i.skill.type!="domain"&&i.skill.type!="sub"?(r(),u("div",Xe,[s("div",Ye,[et,s("div",tt,[s("div",{class:G([i.showDropDown?"custom-select-button-focus ":"custom-select-button "]),onClick:t[8]||(t[8]=l=>i.showDropDown=!i.showDropDown)},[y(v(i.showLevel)+" ",1),st],2),i.showDropDown?(r(),u("div",it,[(r(!0),u(w,null,S(i.levels,l=>(r(),u("div",{class:"custom-dropdown-option",onClick:_=>a.handleChooseSkillLevel(l)},v(l.name),9,lt))),256))])):m("",!0)])])])):m("",!0)]),s("div",nt,[s("div",ot,[rt,s("div",at,[s("div",ut,[s("label",ht,[dt,g(s("input",{type:"radio",name:"nodeType",id:"regularSkillRadio",value:"regular","onUpdate:modelValue":t[9]||(t[9]=l=>i.skill.type=l)},null,512),[[V,i.skill.type]]),ct])]),s("div",pt,[s("label",mt,[gt,g(s("input",{type:"radio",name:"nodeType",id:"domainSkillRadio",value:"domain","onUpdate:modelValue":t[10]||(t[10]=l=>i.skill.type=l)},null,512),[[V,i.skill.type]]),ft])]),s("div",vt,[s("label",bt,[kt,g(s("input",{type:"radio",name:"nodeType",id:"superSkillRadio",value:"super","onUpdate:modelValue":t[11]||(t[11]=l=>i.skill.type=l)},null,512),[[V,i.skill.type]]),yt])]),s("div",_t,[s("label",wt,[St,g(s("input",{type:"radio",name:"nodeType",id:"regularSkillRadio",value:"sub","onUpdate:modelValue":t[12]||(t[12]=l=>i.skill.type=l)},null,512),[[V,i.skill.type]]),Lt])])])]),i.validate.orphan&&this.skill.type=="sub"&&this.skill.parent==0?(r(),u("div",Ct," please choose a parent for this skill ")):m("",!0)]),s("div",Vt,[s("div",Ot,[s("div",It,[Tt,i.iconImage?(r(),u("div",At,[s("p",null,[s("img",{src:i.iconImage,height:"158",width:"158",style:{"background-color":"lightgrey"}},null,8,Et)]),s("p",null,[s("button",{class:"btn red-btn",onClick:t[15]||(t[15]=l=>a.deleteImage("icon"))},[y(" Remove    "),Ht])])])):(r(),u("div",Bt,[s("input",{class:"form-control d-none",type:"file",accept:"image/*",onChange:t[13]||(t[13]=l=>a.onFileChange(l,"icon")),id:"iconFileChoose"},null,32),s("div",Dt,[s("div",{class:"plus-svg",onClick:t[14]||(t[14]=l=>a.openImage("iconFileChoose"))},xt)]),Mt]))])]),s("div",Nt,[s("div",Ft,[$t,i.bannerImage?(r(),u("div",jt,[s("p",null,[s("img",{src:i.bannerImage,height:"158",width:"1175",style:{"background-color":"lightgrey"}},null,8,qt)]),s("p",null,[s("button",{class:"btn red-btn",onClick:t[18]||(t[18]=l=>a.deleteImage("banner"))},[y(" Remove    "),Jt])])])):(r(),u("div",Rt,[s("input",{class:"form-control d-none",type:"file",accept:"image/*",onChange:t[16]||(t[16]=l=>a.onFileChange(l,"banner")),id:"bannerFileChoose"},null,32),s("div",Gt,[s("div",{class:"plus-svg",onClick:t[17]||(t[17]=l=>a.openImage("bannerFileChoose"))},zt)]),Ut]))])])]),s("div",Zt,[s("div",Qt,[s("div",Wt,[Xt,g(s("textarea",{"onUpdate:modelValue":t[19]||(t[19]=l=>i.skill.description=l),class:"form-control",placeholder:"description",rows:"2"},null,512),[[C,i.skill.description]])]),s("div",null,[i.validate.description?(r(),u("div",Yt," please enter description for skill ")):m("",!0)])])]),s("div",es,[s("div",ts,[s("div",ss,[is,g(s("textarea",{"onUpdate:modelValue":t[20]||(t[20]=l=>i.skill.mastery_requirements=l),class:"form-control",id:"summernote",rows:"3"},null,512),[[C,i.skill.mastery_requirements]])])])])])),s("div",ls,[s("div",ns,[s("div",os,[c(o,{class:"btn red-btn",to:"/skills"},{default:T(()=>[y(" Cancel ")]),_:1}),i.isAnotherInstanceOfExistingSkill?(r(),u("button",{key:1,class:"btn purple-btn",onClick:t[22]||(t[22]=l=>a.CreateNewInstance())}," Create New Instance ")):(r(),u("button",{key:0,class:"btn purple-btn",onClick:t[21]||(t[21]=l=>a.Submit())}," Submit "))])])])])}const as=H(ae,[["render",rs],["__scopeId","data-v-bd73992e"]]);const us=s("div",{id:"banner"},[s("img",{src:E,class:"image-fluid"})],-1),ps={__name:"AddSkillView",setup(e){return(t,n)=>(r(),u(w,null,[us,c(as)],64))}};export{ps as default};
