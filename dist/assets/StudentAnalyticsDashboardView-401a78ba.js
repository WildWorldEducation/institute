import{u as V}from"./AnalyticsStore-15c86f6e.js";import{_ as k,f as A,r as y,o as p,c as D,q as L,a as t,w as n,O as i,s as l,b as x,g as _,l as v,k as H,p as P,d as U}from"./main-2476cd24.js";import{s as S}from"./transform-62bed377.js";import{u as B,l as M}from"./line-69ff8f5e.js";import{e as T}from"./time-bec744cd.js";import{l as q,m as N,c as R,b as W}from"./linear-de29b0e6.js";import{o as j}from"./ordinal-ed23e132.js";import{c as E}from"./category10-63f9141e.js";import"./point-ea70dc51.js";import"./colors-98f238a0.js";const O={name:"SchoolProgressChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(o){S("svg").remove(),o.student.length>0?this.axisData=o.student:o.average.length>0?this.axisData=o.average:this.axisData=[];const e=Object.entries(o).map(([r,I])=>({name:r,values:I}));S("#progress-chart-container");const d=document.getElementById("progress-chart-container").clientWidth,h=document.getElementById("progress-chart-container").clientHeight,s=0,c=0,m=0,u=0,a=B(T(this.axisData,r=>r.date),[u,d-c]),f=q([0,N(this.axisData,r=>r.quantity)],[h-m,s]),C=j().domain(e.map(r=>r.name)).range(E),w=M().x(r=>a(r.date)).y(r=>f(r.quantity)),b=S("#progress-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(d,h),+Math.min(d,h)]).attr("preserveAspectRatio","xMinYMin");b.append("g").attr("transform",`translate(0,${h-m})`).call(R(a).ticks(this.axisData.length).tickSizeOuter(0)),b.append("g").attr("transform",`translate(${u},0)`).call(W(f).ticks(h/80)).call(r=>r.selectAll(".tick line").clone().attr("x2",d-u-c).attr("stroke-opacity",.1)),b.selectAll(".line").data(e).join("path").attr("fill","none").attr("stroke",r=>C(r.name)).attr("stroke-width",3).attr("d",r=>w(r.values))},updateChart(o){}}};function Y(o,e,d,h,s,c){return null}const z=k(O,[["render",Y]]);const F={name:"Student-Dashboard",setup(){const o=A(),e=V();return{userDetailsStore:o,analyticsStore:e}},data(){return{showSidebar:!0,screenWidth:screen.width,isStudentData:!0,isSchoolData:!1,isLanguageData:!1,isMathData:!1,isHistoryData:!1,isLifeData:!1,isCSData:!1,isSAndIData:!1,isDIData:!1,progressData:{student:[],average:[]},isAboveTheCurve:!1}},components:{StudentProgressChart:z},async created(){await this.analyticsStore.getStudentProgress(this.userDetailsStore.userId,this.userDetailsStore.tenantId),this.analyticsStore.progress.student[this.analyticsStore.progress.student.length-1].quantity>this.analyticsStore.progress.tenant[this.analyticsStore.progress.tenant.length-1].quantity&&(this.isAboveTheCurve=!0),await this.HandleProgressData()},methods:{async HandleProgressData(){if(this.isStudentData){this.progressData.student=[];for(let o=0;o<this.analyticsStore.progress.student.length;o++)this.progressData.student.push(this.analyticsStore.progress.student[o])}else this.progressData.student=[];if(this.isSchoolData){this.progressData.average=[];for(let o=0;o<this.analyticsStore.progress.tenant.length;o++)this.progressData.average.push(this.analyticsStore.progress.tenant[o])}else this.progressData.average=[];this.$nextTick(()=>{this.$refs.progressChart&&this.$refs.progressChart.createChart(this.progressData)})},toggleSidebar(){this.showSidebar=!this.showSidebar}}},g=o=>(P("data-v-1b25b4ab"),o=o(),U(),o),G={class:"dashboard"},J=g(()=>t("h1",{class:"h2"},"Who",-1)),K={class:"control control-checkbox"},Q={class:"control control-checkbox"},X=g(()=>t("h1",{class:"h2"},"Subjects",-1)),Z={class:"control control-checkbox"},$={class:"control control-checkbox"},tt={class:"control control-checkbox"},et={class:"control control-checkbox"},st={class:"control control-checkbox"},at={class:"control control-checkbox"},ot={class:"control control-checkbox"},rt={class:"main"},nt={class:"content container-fluid"},it={class:"dash-row row"},lt=g(()=>t("h2",{class:"position-absolute chart-heading h5"}," Skills mastered ",-1)),ct={class:"col-md chart-container p-0"},ht={key:0,class:"alert alert-success",role:"alert"},ut={key:1,class:"alert alert-warning",role:"alert"},dt={class:"dash-row row"},pt=g(()=>t("h2",{class:"position-absolute chart-heading h5"}," Time spent ",-1)),gt=g(()=>t("h2",{class:"position-absolute chart-heading h5"}," Tokens used ",-1));function mt(o,e,d,h,s,c){const m=y("StudentProgressChart"),u=y("RouterLink");return p(),D("div",G,[s.screenWidth>768?(p(),D("div",{key:0,class:L(["sidebar",{hidden:!s.showSidebar}])},[J,t("p",null,[t("label",K,[n(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=a=>s.isStudentData=a),onChange:e[1]||(e[1]=(...a)=>c.HandleProgressData&&c.HandleProgressData(...a))},null,544),[[i,s.isStudentData]]),l(" You ")])]),t("p",null,[t("label",Q,[n(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>s.isSchoolData=a),onChange:e[3]||(e[3]=(...a)=>c.HandleProgressData&&c.HandleProgressData(...a))},null,544),[[i,s.isSchoolData]]),l(" School average ")])]),X,t("ul",null,[t("li",null,[t("label",Z,[n(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":e[4]||(e[4]=a=>s.isLanguageData=a)},null,512),[[i,s.isLanguageData]]),l(" Language ")])]),t("li",null,[t("label",$,[n(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":e[5]||(e[5]=a=>s.isMathData=a)},null,512),[[i,s.isMathData]]),l(" Math ")])]),t("li",null,[t("label",tt,[n(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":e[6]||(e[6]=a=>s.isHistoryData=a)},null,512),[[i,s.isHistoryData]]),l(" History ")])]),t("li",null,[t("label",et,[n(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":e[7]||(e[7]=a=>s.isLifeData=a)},null,512),[[i,s.isLifeData]]),l(" Life ")])]),t("li",null,[t("label",st,[n(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":e[8]||(e[8]=a=>s.isCSData=a)},null,512),[[i,s.isCSData]]),l(" Computer Science ")])]),t("li",null,[t("label",at,[n(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":e[9]||(e[9]=a=>s.isSAndIData=a)},null,512),[[i,s.isSAndIData]]),l(" Science & Invention ")])]),t("li",null,[t("label",ot,[n(t("input",{type:"checkbox",value:"true","onUpdate:modelValue":e[10]||(e[10]=a=>s.isDIData=a)},null,512),[[i,s.isDIData]]),l(" Dangerous Ideas ")])])])],2)):x("",!0),t("div",rt,[t("div",nt,[t("div",it,[_(u,{to:"/my-progress/skills",id:"progress-chart-container",class:"col-md chart-container p-0 position-relative"},{default:v(()=>[lt,s.progressData.student.length>0||s.progressData.average.length>0?(p(),H(m,{key:0,ref:"progressChart"},null,512)):x("",!0)]),_:1}),t("div",ct,[s.isAboveTheCurve?(p(),D("div",ht," Nice going, you're above the curve! ")):(p(),D("div",ut," You're below the curve, keep trying! "))])]),t("div",dt,[_(u,{to:"/my-progress/time",class:"col-md chart-container p-0 position-relative"},{default:v(()=>[pt]),_:1}),_(u,{to:"/my-progress/tokens",class:"col-md chart-container p-0 position-relative"},{default:v(()=>[gt]),_:1})])])])])}const wt=k(F,[["render",mt],["__scopeId","data-v-1b25b4ab"]]);export{wt as default};
