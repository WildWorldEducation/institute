import{u as g}from"./CohortsStore-6029311d.js";import{_ as A,e as b,r as i,o,c as n,a as s,t as k,b as P,k as l,f}from"./main-f29d17c4.js";import{u as w}from"./AnalyticsStore-1d3b0289.js";import{C as B}from"./CohortProgressLineChart-9e2647f3.js";import{C as j,a as v,b as D,c as R}from"./CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart-44977b79.js";import{C as L}from"./CohortDurationPerDayLineChart-ee94b9d5.js";import{C as M}from"./CohortSkillActivityChart-6d1aa6ac.js";import"./transform-4d0f7c8f.js";import"./string-c67ea49d.js";import"./line-bfb1ca50.js";import"./time-ce17bce2.js";import"./continuous-e5db47ab.js";import"./point-ea70dc51.js";import"./linear-841004c4.js";import"./colors-98f238a0.js";import"./sort-fcaf8f38.js";const T={setup(){const e=g(),t=b(),r=w();return{cohortsStore:e,userDetailsStore:t,analyticsStore:r}},data(){return{teacherId:this.$route.params.teacherId,isMobileCheck:window.innerWidth,percentageStudentsMasteredOneSkill:[],isLoaded:!1,classProgress:[],durationsPerDay:[]}},async created(){await this.getTenantClassProgress(),await this.getInstructorPercentageStudentsMasteredAtLeastOneSkill(),await this.getTenantClassDurationPerDay(),await this.analyticsStore.getTeacherClassSkillActivityReport(this.teacherId),await this.analyticsStore.getTeacherClassFailedAssessmentsBySubject(this.teacherId),await this.analyticsStore.getTeacherClassPassedAssessmentsBySubject(this.teacherId),await this.analyticsStore.getTeacherClassAttemptedAssessmentsBySubject(this.teacherId)},components:{CohortPercentageStudentsMasteredAtLeastOneSkillPieChart:j,CohortProgressLineChart:B,CohortDurationPerDayLineChart:L,CohortSkillActivityChart:M,CohortFailedAssessmentsByRootSubjectHorizontalBarChart:v,CohortPassedAssessmentsByRootSubjectHorizontalBarChart:D,CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart:R},methods:{async getTenantClassProgress(){fetch(`/student-analytics/all-students-progress/${this.teacherId}`).then(e=>e.json()).then(e=>{for(let t=0;t<e.length;t++)e[t].date=new Date(e[t].date);e.sort((t,r)=>t.date-r.date),this.classProgress=e}).catch(e=>{console.error("Error fetching student progress:",e)})},async getInstructorPercentageStudentsMasteredAtLeastOneSkill(){try{const e=await fetch(`/student-analytics/percentage-students-mastered-one-skill/instructor/${this.teacherId}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();this.percentageStudentsMasteredOneSkill=Array.isArray(t)?t:[],this.isLoaded=!0,await this.$refs.cohortPercentageStudentsMasteredAtLeastOneSkillPieChart.generateChart()}catch(e){console.error("Error fetching all students failed assessments:",e),this.percentageStudentsMasteredOneSkill=[]}},async getTenantClassDurationPerDay(){fetch(`/student-analytics/all-students-duration-per-day/${this.teacherId}`).then(e=>e.json()).then(e=>{for(let t=0;t<e.length;t++)e[t].formattedQuantity=e[t].quantity/(1e3*60),e[t].date=new Date(e[t].date);e.sort((t,r)=>t.date-r.date),this.durationsPerDay=e}).catch(e=>{console.error("Error fetching student duration per day:",e)})},millisToMinutesAndSeconds(e){var t=Math.floor(e/6e4),r=(e%6e4/1e3).toFixed(0);return t+":"+(r<10?"0":"")+r}}},_={class:"container bg-light"},I={key:0,class:"row"},z={class:"secondary-heading h3"},H={class:"d-flex justify-content-between"},O={key:2},N={key:4},F={key:6},x={key:8},E={key:10},V={key:12};function q(e,t,r,a,d,Q){const c=i("CohortDurationPerDayLineChart"),h=i("CohortSkillActivityChart"),m=i("CohortProgressLineChart"),u=i("CohortPercentageStudentsMasteredAtLeastOneSkillPieChart"),y=i("CohortFailedAssessmentsByRootSubjectHorizontalBarChart"),S=i("CohortPassedAssessmentsByRootSubjectHorizontalBarChart"),C=i("CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart");return o(),n("div",_,[d.isMobileCheck<576?(o(),n("div",I,[s("h1",z,k(this.cohortsStore.selectedCohort.name),1)])):P("",!0),s("div",H,[t[2]||(t[2]=s("h1",{class:"heading"},"Teacher Report",-1)),s("button",{class:"btn me-1",onClick:t[0]||(t[0]=(...p)=>e.$parent.restartTutorial&&e.$parent.restartTutorial(...p))},t[1]||(t[1]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[s("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)]))]),t[3]||(t[3]=s("h2",{class:"secondary-heading"},"Engagement",-1)),t[4]||(t[4]=s("h4",null,"Time on platform",-1)),d.durationsPerDay.length>0?(o(),l(c,{key:1,data:d.durationsPerDay,colour:"#5f31dd",ref:"cohortDurationPerDayLineChart"},null,8,["data"])):(o(),n("p",O,"No data available")),t[5]||(t[5]=s("hr",{class:"mt-5 mb-5"},null,-1)),t[6]||(t[6]=s("h4",{class:"mt-4"},"Skills visited",-1)),a.analyticsStore.cohortSkillActivities.length>0?(o(),l(h,{key:3,data:a.analyticsStore.cohortSkillActivities},null,8,["data"])):(o(),n("p",N,"No skills visited by this student.")),t[7]||(t[7]=s("hr",{class:"mt-5 mb-5"},null,-1)),t[8]||(t[8]=s("h2",{class:"secondary-heading mt-5"},"Academics",-1)),t[9]||(t[9]=s("h4",null,"Skill mastery progress",-1)),d.classProgress.length>0?(o(),l(m,{key:5,data:d.classProgress,colour:"#5f31dd",ref:"cohortProgressLineChart"},null,8,["data"])):(o(),n("p",F,"No data available")),t[10]||(t[10]=s("hr",{class:"mt-5 mb-5"},null,-1)),t[11]||(t[11]=s("h4",{class:"mt-4"}," Percentage of students who completed at least one skill ",-1)),f(u,{ref:"cohortPercentageStudentsMasteredAtLeastOneSkillPieChart",class:"mb-5"},null,512),t[12]||(t[12]=s("hr",{class:"mt-5 mb-5"},null,-1)),t[13]||(t[13]=s("h3",{class:"secondary-heading"},"By subject",-1)),t[14]||(t[14]=s("h4",{class:""},"Failed more than once",-1)),a.analyticsStore.cohortRootSubjectsFailedAssessments.length>0?(o(),l(y,{key:7,data:a.analyticsStore.cohortRootSubjectsFailedAssessments,colour:"darkred",class:"mb-5"},null,8,["data"])):(o(),n("p",x,"No data yet")),t[15]||(t[15]=s("hr",{class:"mt-5 mb-5"},null,-1)),t[16]||(t[16]=s("h4",{class:""},"Passed",-1)),a.analyticsStore.cohortRootSubjectsPassedAssessments.length>0?(o(),l(S,{key:9,data:a.analyticsStore.cohortRootSubjectsPassedAssessments,colour:"darkgreen",class:"mb-5"},null,8,["data"])):(o(),n("p",E,"No data yet")),t[17]||(t[17]=s("hr",{class:"mt-5 mb-5"},null,-1)),t[18]||(t[18]=s("h4",{class:""},"Attempted",-1)),a.analyticsStore.cohortRootSubjectsAttemptedAssessments.length>0?(o(),l(C,{key:11,data:a.analyticsStore.cohortRootSubjectsAttemptedAssessments,colour:"darkblue",class:"mb-5"},null,8,["data"])):(o(),n("p",V,"No data yet"))])}const it=A(T,[["render",q],["__scopeId","data-v-ebaba9d7"]]);export{it as default};
