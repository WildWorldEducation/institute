import{_ as f,o as c,c as p,A as R,f as $,K as z,r as y,a as n,k as _,p as T,d as q}from"./main-eea2ebf6.js";import{u as F}from"./TeacherAnalyticsStore-e30f3534.js";import{u as D}from"./AnalyticsStore-f23797b5.js";import{S as H}from"./StudentProgressLineChart-c15e3c15.js";import{S as M}from"./StudentSkillActivityChart-5660b308.js";import{P as L,A as I}from"./AttemptedAssessmentsTimelineChart-3320e5b6.js";import{F as N}from"./FailedAssessmentsHorizontalBarChart-9bbe104c.js";import{S as E}from"./StudentDurationPerDayLineChart-5e39105c.js";import"./transform-4d0f7c8f.js";import{l as b,a as k,b as w}from"./linear-d9b6cbf2.js";import{m as x}from"./continuous-93813e6c.js";import{b as B}from"./band-cf12560e.js";import{s as j}from"./sort-fcaf8f38.js";import{s as A}from"./string-c67ea49d.js";import"./line-d122782f.js";import"./time-3c9385c3.js";import"./point-ea70dc51.js";import"./ordinal-c7f57ebc.js";const U={name:"StudentAttemptedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){A("#student-attempted-assessments-by-root-subject-chart-container");const s=25,e=0,l=0,o=10,i=300,m=700,u=Math.ceil((this.data.length+.1)*s)+e+o,a=b().domain([0,x(this.data,t=>t.quantity)]).range([i,m-l]),d=B().domain(j(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([e,u-o]).padding(.1),g=a.tickFormat(20),h=A("#student-attempted-assessments-by-root-subject-chart-container").append("svg").attr("width",m).attr("height",u).attr("viewBox",[0,0,m,u]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");h.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",t=>d(t.name)).attr("width",t=>a(t.quantity)-a(0)).attr("height",d.bandwidth()),h.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>a(t.quantity)).attr("y",t=>d(t.name)+d.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>g(t.quantity)).call(t=>t.filter(S=>a(S.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),h.append("g").attr("transform",`translate(0,${e})`).call(k(a).ticks(0)).call(t=>t.select(".domain").remove()),h.append("g").attr("transform",`translate(${i},0)`).attr("style","font-size: 16px").call(w(d).tickSizeOuter(0))},computed:{}},O={id:"student-attempted-assessments-by-root-subject-chart-container"};function V(s,e,l,o,i,m){return c(),p("div",O)}const Q=f(U,[["render",V]]),K={name:"StudentFailedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){A("#student-failed-assessments-by-root-subject-chart-container");const s=25,e=0,l=0,o=10,i=300,m=700,u=Math.ceil((this.data.length+.1)*s)+e+o,a=b().domain([0,x(this.data,t=>t.quantity)]).range([i,m-l]),d=B().domain(j(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([e,u-o]).padding(.1),g=a.tickFormat(20),h=A("#student-failed-assessments-by-root-subject-chart-container").append("svg").attr("width",m).attr("height",u).attr("viewBox",[0,0,m,u]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");h.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",t=>d(t.name)).attr("width",t=>a(t.quantity)-a(0)).attr("height",d.bandwidth()),h.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>a(t.quantity)).attr("y",t=>d(t.name)+d.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>g(t.quantity)).call(t=>t.filter(S=>a(S.quantity)-a(0)<20).attr("dx",4).attr("fill","white").attr("text-anchor","start")),h.append("g").attr("transform",`translate(0,${e})`).call(k(a).ticks(0)).call(t=>t.select(".domain").remove()),h.append("g").attr("transform",`translate(${i},0)`).attr("style","font-size: 16px").call(w(d).tickSizeOuter(0))}},W={id:"student-failed-assessments-by-root-subject-chart-container"};function G(s,e,l,o,i,m){return c(),p("div",W)}const J=f(K,[["render",G]]),X={name:"StudentPassedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){A("#student-passed-assessments-by-root-subject-chart-container");const s=25,e=0,l=0,o=10,i=300,m=700,u=Math.ceil((this.data.length+.1)*s)+e+o,a=b().domain([0,x(this.data,t=>t.quantity)]).range([i,m-l]),d=B().domain(j(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([e,u-o]).padding(.1),g=a.tickFormat(20),h=A("#student-passed-assessments-by-root-subject-chart-container").append("svg").attr("width",m).attr("height",u).attr("viewBox",[0,0,m,u]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");h.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",t=>d(t.name)).attr("width",t=>a(t.quantity)-a(0)).attr("height",d.bandwidth()),h.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>a(t.quantity)).attr("y",t=>d(t.name)+d.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>g(t.quantity)).call(t=>t.filter(S=>a(S.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),h.append("g").attr("transform",`translate(0,${e})`).call(k(a).ticks(0)).call(t=>t.select(".domain").remove()),h.append("g").attr("transform",`translate(${i},0)`).attr("style","font-size: 16px").call(w(d).tickSizeOuter(0))},computed:{}},Y={id:"student-passed-assessments-by-root-subject-chart-container"};function Z(s,e,l,o,i,m){return c(),p("div",Y)}const tt=f(X,[["render",Z]]);const st={components:{StudentProgressLineChart:H,StudentSkillActivityChart:M,PassedAssessmentsTimelineChart:L,AttemptedAssessmentsTimelineChart:I,FailedAssessmentsHorizontalBarChart:N,StudentDurationPerDayLineChart:E,StudentAttemptedAssessmentsByRootSubjectHorizontalBarChart:Q,StudentFailedAssessmentsByRootSubjectHorizontalBarChart:J,StudentPassedAssessmentsByRootSubjectHorizontalBarChart:tt},setup(){const s=R(),e=$(),l=F(),o=z(),i=D();return s.users.length<1&&s.getUsers(),{usersStore:s,userDetailsStore:e,teacherAnalyticsStore:l,userSkillsStore:o,analyticsStore:i}},data(){return{userId:this.$route.params.studentId,isMobileCheck:window.innerWidth,studentProgress:[],assessmentPasses:[],assessmentAttempts:[],skillDurations:[],durationsPerDay:[],visitedSkills:[]}},async created(){await this.getStudentDurationPerDay(),await this.getTenantStudentProgress(),await this.getAssessmentPasses(),await this.getAssessmentAttempts(),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.userid),this.teacherAnalyticsStore.skillActivities.length==0&&await this.teacherAnalyticsStore.getSkillActivityReport(this.userid),this.teacherAnalyticsStore.skillActivities=this.teacherAnalyticsStore.skillActivities.map(s=>({...s,formattedQuantity:this.millisToMinutesAndSeconds(s.quantity)})),await this.analyticsStore.getStudentFailedAssessmentsBySubject(this.userid),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userid),await this.analyticsStore.getStudentAttemptedAssessmentsBySubject(this.userid)},computed:{studentName(){return`${this.$parent.user.username}`.trim()}},methods:{async getTenantStudentProgress(){fetch(`/student-analytics/student-progress/${this.userId}`).then(s=>s.json()).then(s=>{for(let e=0;e<s.length;e++)s[e].date=new Date(s[e].date);s.sort((e,l)=>e.date-l.date),this.studentProgress=s}).catch(s=>{console.error("Error fetching student progress:",s)})},async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.userId}`).then(s=>s.json()).then(s=>{this.assessmentAttempts=s.map(e=>({...e,url:`/skills/${e.url}`,labelName:`${e.name}`}))}).catch(s=>{console.error("Error fetching last visited skills:",s)})},async getAssessmentPasses(){await this.userSkillsStore.getMasteredSkills(this.userId),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`}))},async getStudentDurationPerDay(){fetch(`/student-analytics/student-duration-per-day/${this.userId}`).then(s=>s.json()).then(s=>{for(let e=0;e<s.length;e++)s[e].formattedQuantity=s[e].quantity/(1e3*60),s[e].date=new Date(s[e].date);s.sort((e,l)=>e.date-l.date),this.durationsPerDay=s}).catch(s=>{console.error("Error fetching student duration per day:",s)})},millisToMinutesAndSeconds(s){var e=Math.floor(s/6e4),l=(s%6e4/1e3).toFixed(0);return e+":"+(l<10?"0":"")+l}}},r=s=>(T("data-v-14aef477"),s=s(),q(),s),et={class:"container bg-light"},at={class:"d-flex justify-content-between"},nt=r(()=>n("h1",{class:"heading"},"Student Report",-1)),ot=r(()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[n("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),rt=[ot],it=r(()=>n("h2",{class:"secondary-heading"},"Engagement",-1)),ct=r(()=>n("h4",null,"Total time on platform",-1)),dt={key:1},lt=r(()=>n("hr",{class:"mt-5 mb-5"},null,-1)),ht=r(()=>n("h4",{class:"mt-4"},"Skills visited",-1)),mt={key:3},ut=r(()=>n("hr",{class:"mt-5 mb-5"},null,-1)),pt=r(()=>n("h2",{class:"secondary-heading mt-5"},"Academics",-1)),yt=r(()=>n("h4",null,"Skill mastery progress",-1)),_t={key:5},gt=r(()=>n("hr",{class:"mt-5 mb-5"},null,-1)),St=r(()=>n("h3",{class:"secondary-heading mt-4"},"By subject",-1)),At=r(()=>n("h4",{class:""},"Failed more than once",-1)),ft={key:7},bt=r(()=>n("hr",{class:"mt-5 mb-5"},null,-1)),kt=r(()=>n("h4",{class:""},"Passed",-1)),wt={key:9},xt=r(()=>n("hr",{class:"mt-5 mb-5"},null,-1)),Bt=r(()=>n("h4",{class:""},"Attempted",-1)),jt={key:11},vt=r(()=>n("hr",{class:"mt-5 mb-5"},null,-1)),Pt=r(()=>n("h3",{class:"secondary-heading mt-4"},"By skill",-1)),Ct=r(()=>n("h4",null,"Assessments failed",-1)),Rt={key:13},$t=r(()=>n("hr",{class:"mt-5 mb-5"},null,-1)),zt=r(()=>n("h4",{class:"mt-4"},"Assessments passed",-1)),Tt={key:15},qt=r(()=>n("hr",{class:"mt-5 mb-5"},null,-1)),Ft=r(()=>n("h4",{class:"mt-4"},"Assessments attempted",-1)),Dt={key:17,class:"mb-5"};function Ht(s,e,l,o,i,m){const u=y("StudentDurationPerDayLineChart"),a=y("StudentSkillActivityChart"),d=y("StudentProgressLineChart"),g=y("StudentFailedAssessmentsByRootSubjectHorizontalBarChart"),h=y("StudentPassedAssessmentsByRootSubjectHorizontalBarChart"),t=y("StudentAttemptedAssessmentsByRootSubjectHorizontalBarChart"),S=y("FailedAssessmentsHorizontalBarChart"),v=y("PassedAssessmentsTimelineChart"),P=y("AttemptedAssessmentsTimelineChart");return c(),p("div",et,[n("div",at,[nt,n("button",{class:"btn me-1",onClick:e[0]||(e[0]=(...C)=>s.$parent.restartTutorial&&s.$parent.restartTutorial(...C))},rt)]),it,ct,i.durationsPerDay.length>1?(c(),_(u,{key:0,data:i.durationsPerDay},null,8,["data"])):(c(),p("p",dt,"There is no data to show yet.")),lt,ht,o.teacherAnalyticsStore.skillActivities.length>0?(c(),_(a,{key:2,data:o.teacherAnalyticsStore.skillActivities},null,8,["data"])):(c(),p("p",mt,"No skills visited by this student.")),ut,pt,yt,i.studentProgress.length>0?(c(),_(d,{key:4,data:i.studentProgress,colour:"#5f31dd"},null,8,["data"])):(c(),p("p",_t,"No data to show yet.")),gt,St,At,o.analyticsStore.studentRootSubjectsFailedAssessments.length>0?(c(),_(g,{key:6,data:o.analyticsStore.studentRootSubjectsFailedAssessments,colour:"darkred",class:"mb-5"},null,8,["data"])):(c(),p("p",ft,"No data yet")),bt,kt,o.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(c(),_(h,{key:8,data:o.analyticsStore.studentRootSubjectsPassedAssessments,colour:"darkgreen",class:"mb-5"},null,8,["data"])):(c(),p("p",wt,"No data yet")),xt,Bt,o.analyticsStore.studentRootSubjectsAttemptedAssessments.length>0?(c(),_(t,{key:10,data:o.analyticsStore.studentRootSubjectsAttemptedAssessments,colour:"darkblue",class:"mb-5"},null,8,["data"])):(c(),p("p",jt,"No data yet")),vt,Pt,Ct,o.teacherAnalyticsStore.studentMultipleFails.length>0?(c(),_(S,{key:12,data:o.teacherAnalyticsStore.studentMultipleFails,colour:"darkred"},null,8,["data"])):(c(),p("p",Rt," This student has not failed any assessments more than once yet. ")),$t,zt,i.assessmentPasses.length>0?(c(),_(v,{key:14,data:i.assessmentPasses},null,8,["data"])):(c(),p("p",Tt,"This student has not completed any assessments yet.")),qt,Ft,i.assessmentAttempts.length>0?(c(),_(P,{key:16,class:"mb-5",data:i.assessmentAttempts},null,8,["data"])):(c(),p("p",Dt," This student has attempted any assessments yet. "))])}const es=f(st,[["render",Ht],["__scopeId","data-v-14aef477"]]);export{es as default};
