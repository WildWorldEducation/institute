import{_ as Ke,f as pt,J as Je,o as te,c as _e,A as Ct,r as Ue,a as de,t as St,k as Ye}from"./main-be847948.js";import{u as xt}from"./TeacherAnalyticsStore-270cbaf8.js";import{S as it,r as At,e as It}from"./transform-23c7b39f.js";import{u as Et,a as Dt,t as ot,b as at,c as Mt}from"./time-31058c61.js";import{a as Tt}from"./ascending-3ff63084.js";import{m as je,p as Lt}from"./linear-5b5f98b2.js";import{s as F}from"./select-03d56b88.js";import{F as wt}from"./FailedAssessmentsHorizontalBarChart-9007049e.js";import"./continuous-dd31f971.js";import"./init-77b53fdd.js";import"./ordinal-ba9b4969.js";function zt(e,t){let s,i;if(t===void 0)for(const a of e)a!=null&&(s===void 0?a>=a&&(s=i=a):(s>a&&(s=a),i<a&&(i=a)));else{let a=-1;for(let n of e)(n=t(n,++a,e))!=null&&(s===void 0?n>=n&&(s=i=n):(s>n&&(s=n),i<n&&(i=n)))}return[s,i]}function ie(e){return typeof e=="string"?new it([document.querySelectorAll(e)],[document.documentElement]):new it([It(e)],At)}var gt="%Y-%m-%dT%H:%M:%S.%LZ";function Ot(e){return e.toISOString()}Date.prototype.toISOString||Et(gt);function Bt(e){var t=new Date(e);return isNaN(t)?null:t}var Nt=+new Date("2000-01-01T00:00:00.000Z")?Bt:Dt(gt);const Wt=Nt,ue={second:"%Y-%m-%d %H:%M:%S",minute:"%Y-%m-%d %H:%M",hour:"%Y-%m-%d %H:00",day:"%Y-%m-%d",week:"%Y week %W",month:"%Y-%m",quarter:"%Y-Q%Q",year:"%Y"};function Pt(e){function t(s,i){return a=>(i(a),s)}return Object.keys(e).reduce((s,i)=>(s[i]=t(s,e[i]),s),{})}const be="milestones",rt=be+"__category_label",Ft=be+"__horizontal_line",Rt=be+"__vertical_line",We=be+"__group",Ht=We+"__bullet",ke=We+"__label",Be=ke+"-last",qe=ke+"-above",Pe=ke+"__text",lt=Pe+"__title",yt=Pe+"__event",ct=yt+"--hover",j={DISTRIBUTION:"top-bottom",OPTIMIZE:!1,ORIENTATION:"horizontal",SCALE_TYPE:"time",MAPPING:{category:void 0,entries:void 0,timestamp:"timestamp",value:"value",text:"text",url:"url",id:"id",textStyle:"textStyle",titleStyle:"titleStyle"},LABEL_FORMAT:"%Y-%m-%d %H:%M",USE_LABELS:!0,AGGREGATE_BY:"minute",AUTO_RESIZE:!0,URL_TARGET:"_self"};function Fe(e,t){let s=e%2;return t==="top"?s=!0:t==="bottom"&&(s=!1),s>0}var R="$";function Re(){}Re.prototype=He.prototype={constructor:Re,has:function(e){return R+e in this},get:function(e){return this[R+e]},set:function(e,t){return this[R+e]=t,this},remove:function(e){var t=R+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===R&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===R&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===R&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===R&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===R&&++e;return e},empty:function(){for(var e in this)if(e[0]===R)return!1;return!0},each:function(e){for(var t in this)t[0]===R&&e(this[t],t.slice(1),this)}};function He(e,t){var s=new Re;if(e instanceof Re)e.each(function(o,c){s.set(c,o)});else if(Array.isArray(e)){var i=-1,a=e.length,n;if(t==null)for(;++i<a;)s.set(i,e[i]);else for(;++i<a;)s.set(t(n=e[i],i,e),n)}else if(e)for(var u in e)s.set(u,e[u]);return s}function Qe(){var e=[],t=[],s,i,a;function n(o,c,p,m){if(c>=e.length)return s!=null&&o.sort(s),i!=null?i(o):o;for(var l=-1,g=o.length,T=e[c++],L,_,N=He(),x,H=p();++l<g;)(x=N.get(L=T(_=o[l])+""))?x.push(_):N.set(L,[_]);return N.each(function(h,C){m(H,C,n(h,c,p,m))}),H}function u(o,c){if(++c>e.length)return o;var p,m=t[c-1];return i!=null&&c>=e.length?p=o.entries():(p=[],o.each(function(l,g){p.push({key:g,values:u(l,c)})})),m!=null?p.sort(function(l,g){return m(l.key,g.key)}):p}return a={object:function(o){return n(o,0,$t,Gt)},map:function(o){return n(o,0,ut,dt)},entries:function(o){return u(n(o,0,ut,dt),0)},key:function(o){return e.push(o),a},sortKeys:function(o){return t[e.length-1]=o,a},sortValues:function(o){return s=o,a},rollup:function(o){return i=o,a}}}function $t(){return{}}function Gt(e,t,s){e[t]=s}function ut(){return He()}function dt(e,t,s){e.set(t,s)}function mt(){}var ce=He.prototype;mt.prototype={constructor:mt,has:ce.has,add:function(e){return e+="",this[R+e]=e,this},remove:ce.remove,clear:ce.clear,values:ce.keys,size:ce.size,empty:ce.empty,each:ce.each};function vt(e,t){return parseInt(e.style[t].replace("px",""),10)}const ve=6,Ut=(e,t,s,i,a,n,u,o,c,p,m,l,g,T,L,_=!0,N="time")=>{let x=l==="horizontal"&&_?s+u:s-u,H;do if(l==="horizontal"&&_?x+=u:x-=u,H=g._groups[x],typeof H>"u")break;while(o>=H[0][m]);let h;typeof i.category>"u"?h=a[n.timelineIndex][x]:h=a[n.timelineIndex].entries[x];let C=vt(t,p);if(typeof h<"u"){const W=N==="ordinal"?h.key:e(h.key),J=L(W);l==="horizontal"&_?C=J-c-ve:l==="horizontal"&!_?C=J-ve:C=c-J-ve}else l==="horizontal"&_?C=T-c-ve:(l==="horizontal"&!_,C=c-ve);return u<0?Math.min(c,C):C},Yt=(e,t,s,i)=>e==="horizontal"?t[s+i]:t[s-i],ht=(e,t,s,i,a)=>{const u=Yt(a,s,e,t);let o=0;return typeof u<"u"&&(o=u[0][i]+3),o},ft=20,oe=(e,t)=>parseInt(e.style(t).replace("px",""),10),Ne=e=>e.select(function(){return this.parentNode}),jt=(e,t,s)=>{const i=e%t;return(s+i)%t!==0},qt=(e,t,s,i,a,n,u,o,c,p,m="time")=>{const l=Qe().key(N=>ie(N).data()[0].timelineIndex).entries(u._groups),g=t==="top-bottom"?2:1,T=N=>{let x=0;return l.forEach(H=>{const h=H.values;h.forEach(C=>{const W=ie(C).data()[0],J=n==="horizontal"?60:20,w=n==="horizontal"?h.length-W.index-1:W.index,se=ie(h[w]).data()[0],$e=m==="ordinal"?se.key:e(se.key),$=p($e),q=h[w][0];let X=w===h.length-1;!X&&t==="top-bottom"&&(X=w===h.length-2&&o-$<60);const De=n==="horizontal"?"offsetWidth":"offsetHeight",me=n==="horizontal"?"width":"height",he=vt(q,me),b=ie(h[w]);let y=X?!0:Ne(b).classed(Be);const fe=n==="horizontal"?"offsetHeight":"offsetWidth",Ce=n==="horizontal"?"padding-bottom":"padding-right",Me=n==="horizontal"?"padding-top":"padding-left",ee=Fe(w,t)?Ce:Me,Te=y?$-he<0:$+he>o;if(N===0&&(y=X?!0:Te,b.style(ee,"0px"),Ne(b).classed(Be,y)),q[De]>he||he<J||y||Te){let A=null,r=0,ne=n==="horizontal"?g-1:g+1;do if(n==="horizontal"?ne++:ne--,r++,ne>0){const V=ht(w,g,h,fe,n),Z=n==="horizontal"?ht(w,g*-1,h,fe,n):V;let I=V<=Z&&!X;!I&&!X&&(I=$<J);let v=I?V:Z;X&&(v=0);const E=I?g:g*-1;b.style(ee,v+"px"),Ne(b).classed(Be,!I),A=Ut(e,q,w,i,a,W,E,v,$,me,fe,n,u,o,p,I,m)}while(A<q[De]&&r<ft);n==="horizontal"&&(A=Math.min(s,A)),b.style(c,A+"px");const Se=oe(b.select(".wrapper"),"width");if(Se<A&&(A=Se+6,b.style(c,A+"px")),N>0&&n==="horizontal"){const V=oe(b,"width"),Z=y?$-V:$+V;h.forEach((v,E)=>{const G=ie(v).data()[0];if(G.key===se.key||jt(w,g,E))return;const pe=m==="ordinal"?G.key:e(G.key);let D=p(pe)-5;const z=D,ge=ie(h[E]),ae=Ne(ge).classed(Be);if(y&&!ae){const M=oe(ge,"width");D=D+M+5}if(!y&&ae){const M=oe(ge,"width");D=D-M-5}const xe=y?D>Z:Z>z,Le=y?z<$:z>$;if(xe&&Le){const M=v[0][fe];if(oe(b,ee)<M){const Xe=y?D-Z:Z-z,Ae=oe(b,c)-Xe-6;Ae>J?(A=Math.min(A,Ae),b.style(c,`${A}px`)):b.style(ee,`${M+5}px`),x++}}});let I=Number.POSITIVE_INFINITY;h.forEach((v,E)=>{if((Fe(E,t)?Ce:Me)!==ee)return;const pe=ie(h[E]),D=oe(pe,ee);I=Math.min(I,D)}),I>0&&h.forEach((v,E)=>{const G=w%g;if((E+G)%g!==0)return;const D=ie(h[E]),z=oe(D,ee);D.style(ee,`${z-I}px`)})}}})}),x};let L=0,_=0;do _=T(L),L++,L===1&&(_=1);while(L<ft&&_>0)};function Ve(e){if(e==="%Y-Q%Q"){const t=ot(ue.month);return s=>{const i=t(s),a=i.split("-")[1],n=Math.ceil(parseInt(a)/3);return i.split("-")[0]+"-Q"+n}}return ot(e)}function Ze(e){if(e==="%Y-Q%Q"){const t=at(ue.month);return s=>{if(s.search("-Q")===-1){const a=Math.ceil(parseInt(s.split("-")[1])/3)*3-2+"",n=a.length<2?"0"+a:a;return t(s.split("-")[0]+"-"+n)}else{const i=parseInt(s.split("-")[1][1])*3+"",a=i.length<2?"0"+i:i;return t(s.split("-")[0]+"-"+a)}}}return at(e)}function Vt(e,t,s,i,a="time"){const n=function(o){return a==="ordinal"?o[s.value]:e(i(o[s.timestamp]))};if(typeof s.category<"u"&&typeof s.entries<"u")return t=t.map((o,c)=>({category:o[s.category],entries:u(o[s.entries],c)})),t;typeof t<"u"&&!Array.isArray(t[0])&&(t=[t]);function u(o,c){const p=a==="ordinal"?Qe().key(n).entries(o):Qe().key(n).sortKeys(Tt).entries(o);if(a==="ordinal"){const m={};o.forEach((l,g)=>{const T=n(l);!m[T]&&m[T]!==0&&(m[T]=g)}),p.sort((l,g)=>(m[l.key]||0)-(m[g.key]||0))}return p.map((m,l)=>(m.index=l,m.timelineIndex=c,m.scaleType=a,m))}return t.map((o,c)=>u(o,c))}function _t(e){let t=j.DISTRIBUTION;function s(r){t=r}let i=j.OPTIMIZE;function a(r){i=r}let n=j.ORIENTATION;function u(r){n=r,F(e).html("")}let o=j.SCALE_TYPE;function c(r){(r==="time"||r==="ordinal")&&(o=r,F(e).html(""))}let p=Wt;function m(r){p=Ze(r)}let l=Object.assign({},j.MAPPING);function g(r){l=Object.assign({},l,r)}let T;function L(r){T=Ve(r)}L(j.LABEL_FORMAT);let _;function N(r){Array.isArray(r)&&r.length==2&&(_=r)}let x;function H(r){x=r}H(j.USE_LABELS);let h;function C(r){typeof r=="string"&&["_blank","_self","_parent","_top"].includes(r.toLowerCase())&&(h=r)}C(j.URL_TARGET);let W;function J(r){W=r}function w(r){return typeof W=="function"&&(F(this).classed(ct,!0),W(r)),r}let se;function $e(r){se=r}function $(r){return typeof W=="function"&&(F(this).classed(ct,!1),se(r)),r}let q;function X(r){q=r}function De(r){return typeof q=="function"&&q(r),r}let me;function he(r){me=r}let b=Ve(ue[j.AGGREGATE_BY]),y=Ze(ue[j.AGGREGATE_BY]);function fe(r){b=Ve(ue[r]),y=Ze(ue[r]),L(ue[r])}const Ce={current:j.AUTO_RESIZE},Me=()=>{F(e).node()!==null&&window.requestAnimationFrame(()=>{Ce.current&&A()})};new ResizeObserver(Me).observe(typeof e=="string"?document.querySelector(e):e);function Te(r){Ce.current=r}function A(r){const ne=n==="horizontal"?"width":"height",Se=n==="horizontal"?"margin-left":"margin-top",V=n==="horizontal"?Ft:Rt,Z=n==="horizontal"?180:100,I=F(e).selectAll("."+be),v=typeof r<"u"?Vt(b,r,l,p,o):I.data(),E=I.data(v),G=E.enter().append("div").attr("class",be);E.exit().remove();const pe=11,D=parseFloat(F(e).style(ne))-pe;typeof l.category<"u"?(G.append("div").attr("class",rt).text(k=>k.category),G.append("div").attr("class","data-js-timeline").append("div").attr("class",V)):G.append("div").attr("class",V);const z=E.merge(G),ge=[],ae=z.selectAll("."+rt);ae.each((k,O,U)=>{ge.push(U[O].offsetWidth)});const xe=Math.round(je(ge)||0),Le=10,M=D-xe-Le;ae.style("width",xe+"px"),n==="vertical"&&(ae.style("margin-left","-50%"),ae.style("text-align","center")),z.selectAll(".data-js-timeline").style(Se,xe+Le+"px"),z.selectAll("."+V).style(ne,M+"px");const we=(typeof l.category>"u"?z:z.selectAll(".data-js-timeline")).selectAll("."+We).data(k=>typeof l.category>"u"?k:k.entries),Ae=v.reduce((k,O)=>((typeof l.category>"u"?O:O.entries).map(ze=>k.push(ze.key)),k),[]),bt=typeof _<"u"?_.map(y):zt(Ae,k=>y(k)),Ie=o==="ordinal"?Lt().range([0,M]).domain(Ae):Mt().rangeRound([0,M]).domain(bt),et=we.enter().append("div").attr("class",We);we.exit().remove(),et.append("div").attr("class",Ht);const tt=et.merge(we).style(Se,k=>{k.scaleType=o;const O=o==="ordinal"?k.key:y(k.key);return Ie(O)+"px"});if(x){const k=tt.selectAll("."+ke+"-"+n).data(d=>[d]),U=k.enter().append("div").attr("class",ke+"-"+n).merge(k).classed(qe+"-"+n,d=>Fe(d.index,t)).selectAll("."+Pe+"-"+n).data(d=>[d]),ze=U.enter().append("div").attr("class",Pe+"-"+n).merge(U).style(ne,d=>{d.scaleType=o;const Q=o==="ordinal"?d.key:y(d.key),re=Ie(Q);let le,B,f;const P=d.index+1,K=t==="top-bottom"?2:1;typeof l.category>"u"?(le=v[d.timelineIndex][d.index+K],B=v[d.timelineIndex][d.index-K],f=v[d.timelineIndex].length):(le=v[d.timelineIndex].entries[d.index+K],B=v[d.timelineIndex].entries[d.index-K],f=v[d.timelineIndex].entries.length);let Y;const S=n==="horizontal"?le:B,ye=n==="horizontal"?B:le;if(typeof S<"u"){S.scaleType=o;const Ge=o==="ordinal"?S.key:y(S.key),Ee=Ie(Ge);Y=n==="horizontal"?Ee-re:re-Ee,f-P===2&&(Y/=2)}else if(f-P===1)Y=n==="horizontal"?M-re:re;else if(f-P===0)if(typeof ye<"u"){ye.scaleType=o;const Ge=o==="ordinal"?ye.key:y(ye.key),Ee=Ie(Ge);Y=n==="horizontal"?(M-Ee)/2:Ee/2}else Y=M;const nt=Math.max(0,Y-6);return Math.min(n==="horizontal"?Z:nt,nt)+"px"}).each(function(d){const Q=Fe(d.index,t),re=F(this);re.html(null);const le=d.values.reduce((f,P)=>P[l.titleStyle]!==void 0?Object.assign(f,P[l.titleStyle]):f,{}),B=re.append("div").classed("wrapper",!0);if(!Q||n==="vertical"){const f=B.append("span").classed(lt,!0);o==="ordinal"?f.text(d.key):f.text(T(y(d.key))),Object.entries(le).forEach(([P,K])=>f.style(P,K)),B.append("br")}if(d.values.map((f,P)=>{P>0&&B.append("br");const K=Object.assign({},f[l.textStyle]),Y=f[l.text];let S;["jpg","jpeg","gif","png","webp"].indexOf(Y.split(".").pop())>-1?S=B.append("img").classed("milestones-label",!0).classed("milestones-image-label",!0).attr("height","100").attr("src",Y):f[l.url]?S=B.append("a").classed("milestones-label",!0).classed("milestones-link-label",!0).attr("href",f[l.url]).attr("target",h).text(Y):S=B.append("span").classed("milestones-label",!0).classed("milestones-text-label",!0).text(Y),f[l.id]&&S.attr("id",f[l.id]),S.datum({text:f[l.text],timestamp:f[l.timestamp],attributes:f}),(typeof q=="function"||typeof se=="function"||typeof W=="function")&&S.classed(yt,!0),typeof q=="function"&&S.on("click",De),typeof se=="function"&&S.on("mouseleave",$),typeof W=="function"&&S.on("mouseover",w),Object.entries(K).forEach(([ye,st])=>S.style(ye,st))}),Q&&n==="horizontal"){B.append("br");const f=B.append("span").classed(lt,!0);o==="ordinal"?f.text(d.key):f.text(T(y(d.key))),Object.entries(le).forEach(([P,K])=>f.style(P,K))}}),Oe=U.merge(ze);Oe.style("padding-top","0px").style("padding-bottom","0px"),i&&qt(y,t,Z,l,v,n,Oe,M,ne,Ie,o)}else tt.selectAll("."+ke+"-"+n).remove();z.each((k,O,U)=>{const Oe=je(F(U[O]).selectAll("* ."+qe+"-"+n)._groups[0],Q=>Q.offsetHeight),d=je(F(U[O]).selectAll("* :not(."+qe+"-"+n+")")._groups[0],Q=>Q.offsetHeight);if(n==="horizontal")F(U[O]).style("margin-top",10+(Oe||0)+"px").style("height",10+(d||0)+"px");else{const Q=typeof l.category<"u"?Math.round(100/(v.length+1))*(O+1):"50";F(U[O]).style("margin-top","50px").style("margin-left",Q+"%").style("position","absolute")}}),typeof me=="function"&&me()}return Pt({aggregateBy:fe,mapping:g,optimize:a,autoResize:Te,orientation:u,distribution:s,scaleType:c,parseTime:m,labelFormat:L,urlTarget:C,useLabels:H,range:N,render:A,renderCallback:he,onEventClick:X,onEventMouseLeave:$e,onEventMouseOver:J})}const Zt={setup(){const e=pt(),t=Je();return{userDetailsStore:e,userSkillsStore:t}},props:["data"],data(){return{chartOrientation:"horizontal"}},async mounted(){this.drawTimeLineChartWithMilesStone(),this.calculateChartLength(this.data)},methods:{drawTimeLineChartWithMilesStone(){_t("#passed-assessments-timeline").mapping({timestamp:"mastered_date",text:"labelName"}).aggregateBy("week").labelFormat("%d-%m-%Y").optimize(!0).orientation(this.chartOrientation).renderCallback(()=>{if(this.changeLabelColor(),this.chartOrientation==="vertical"){const t=document.getElementsByClassName("milestones")[0];t.style.marginLeft="30%"}}).render(this.data),this.changeBulletColor(),this.changeLabelColor()},calculateChartLength(e){const t=e[0].date,s=e[e.length-1].date,i=this.getDaysBetweenDates(t,s),a=e.length;this.chartWidth=i*3+a*50+"px"},getDaysBetweenDates(e,t){const s=new Date(e),i=new Date(t),a=s.getTime(),n=i.getTime(),u=Math.abs(n-a),o=1e3*60*60*24;return Math.round(u/o)},changeBulletColor(){const t=document.getElementsByClassName("milestones")[0].getElementsByClassName("milestones__group");for(let s=0;s<t.length;s++){const i=t[s],n=i.getElementsByClassName("milestones-link-label")[0].id,u=this.data.find(m=>m.id===parseInt(n)),c=i.getElementsByClassName("milestones__group__bullet")[0],p=this.mapSkillLevelWithColor(u.level);c.style.backgroundColor=p}},changeLabelColor(){this.data.forEach(e=>{const t=document.getElementById(e.id),s=this.data.find(a=>parseInt(t.id)===a.id),i=this.mapSkillLevelWithColor(s.level);t.style.color=i})},mapSkillLevelWithColor(e){switch(e){case"grade_school":return"#116b62";case"middle_school":return"#168216";case"high_school":return"#7d6a02";case"college":return"#ffa500";case"phd":return"#9e0000"}},handleOrientationBtnClick(e){this.chartOrientation=e,this.drawTimeLineChartWithMilesStone()}}},Qt={id:"passed-assessments-timeline"};function Kt(e,t,s,i,a,n){return te(),_e("div",Qt)}const Jt=Ke(Zt,[["render",Kt]]);const Xt={setup(){const e=pt(),t=Je();return{userDetailsStore:e,userSkillsStore:t}},props:["data"],data(){return{chartOrientation:"horizontal"}},async mounted(){this.drawTimeLineChartWithMilesStone(),this.calculateChartLength(this.data)},methods:{drawTimeLineChartWithMilesStone(){_t("#attempted-assessments-timeline").mapping({timestamp:"date",text:"labelName"}).aggregateBy("week").labelFormat("%d-%m-%Y").optimize(!0).orientation(this.chartOrientation).renderCallback(()=>{if(this.changeLabelColor(),this.chartOrientation==="vertical"){const t=document.getElementsByClassName("milestones")[0];t.style.marginLeft="30%"}}).render(this.data),this.changeBulletColor(),this.changeLabelColor()},calculateChartLength(e){const t=e[0].date,s=e[e.length-1].date,i=this.getDaysBetweenDates(t,s),a=e.length;this.chartWidth=i*3+a*50+"px"},getDaysBetweenDates(e,t){const s=new Date(e),i=new Date(t),a=s.getTime(),n=i.getTime(),u=Math.abs(n-a),o=1e3*60*60*24;return Math.round(u/o)},changeBulletColor(){const t=document.getElementsByClassName("milestones")[0].getElementsByClassName("milestones__group");for(let s=0;s<t.length;s++){const i=t[s],n=i.getElementsByClassName("milestones-link-label")[0].id,u=this.data.find(m=>m.id===parseInt(n)),c=i.getElementsByClassName("milestones__group__bullet")[0],p=this.mapSkillLevelWithColor(u.level);c.style.backgroundColor=p}},changeLabelColor(){this.data.forEach(e=>{const t=document.getElementById(e.id),s=this.data.find(a=>parseInt(t.id)===a.id),i=this.mapSkillLevelWithColor(s.level);t.style.color=i})},mapSkillLevelWithColor(e){switch(e){case"grade_school":return"#116b62";case"middle_school":return"#168216";case"high_school":return"#7d6a02";case"college":return"#ffa500";case"phd":return"#9e0000"}},handleOrientationBtnClick(e){this.chartOrientation=e,this.drawTimeLineChartWithMilesStone()}}},es={id:"attempted-assessments-timeline"};function ts(e,t,s,i,a,n){return te(),_e("div",es)}const ss=Ke(Xt,[["render",ts]]),ns={setup(){const e=Ct(),t=Je(),s=xt();return{usersStore:e,userSkillsStore:t,teacherAnalyticsStore:s}},components:{FailedAssessmentsHorizontalBarChart:wt,PassedAssessmentsTimelineChart:Jt,AttemptedAssessmentsTimelineChart:ss},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentPasses:[],assessmentAttempts:[],multipleFails:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const e=this.usersStore.users.find(t=>t.id===this.studentId);e&&(this.studentName=e.username),await this.getUserSkillMasteredHistory(this.studentId),await this.getAssessmentAttempts(),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),this.isLoaded=!0},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(e=>e.json()).then(e=>{this.assessmentAttempts=e.map(t=>({...t,url:`/skills/${t.url}`,labelName:`${t.name}`}))}).catch(e=>{console.error("Error fetching last visited skills:",e)})},assessmentDate(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async getUserSkillMasteredHistory(e){await this.userSkillsStore.getMasteredSkills(e),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(t=>({...t,url:`/skills/${t.url}`,labelName:`${t.name}`}))}}},is={class:"container"},os={class:"d-flex justify-content-between w-100"},as=de("h1",{class:"heading"},"Assessment Status Report",-1),rs={class:"secondary-heading h3"},ls=de("h2",{class:"secondary-heading"},"Passed",-1),cs={key:1},us=de("h2",{class:"secondary-heading"},"Attempted",-1),ds={key:3},ms=de("p",null,null,-1),hs=de("h2",{class:"secondary-heading"},"Failed multiple times",-1),fs={key:5};function ps(e,t,s,i,a,n){const u=Ue("PassedAssessmentsTimelineChart"),o=Ue("AttemptedAssessmentsTimelineChart"),c=Ue("FailedAssessmentsHorizontalBarChart");return te(),_e("div",is,[de("span",os,[as,de("h2",rs,St(a.studentName),1)]),ls,a.assessmentPasses.length>0?(te(),Ye(u,{key:0,class:"mb-5",data:a.assessmentPasses},null,8,["data"])):(te(),_e("p",cs,"This student has not completed any assessments yet.")),us,a.assessmentAttempts.length>0?(te(),Ye(o,{key:2,class:"mb-5",data:a.assessmentAttempts},null,8,["data"])):(te(),_e("p",ds,"This student has attempted any assessments yet.")),ms,hs,i.teacherAnalyticsStore.studentMultipleFails.length>0?(te(),Ye(c,{key:4,data:i.teacherAnalyticsStore.studentMultipleFails,colour:"darkred"},null,8,["data"])):(te(),_e("p",fs," This student has not failed any assessments more than once yet. "))])}const Ds=Ke(ns,[["render",ps]]);export{Ds as default};
