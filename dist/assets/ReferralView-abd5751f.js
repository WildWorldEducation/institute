import{_ as f,A as p,f as g,o as s,c as r,a as e,t as c,b as l,s as h,F as m,z as y,p as b,d as S}from"./main-7e4bfab2.js";const k={setup(){const t=p(),n=g();return{usersStore:t,usersDetailsStore:n}},data(){return{referredUserId:this.$route.params.referredUserId,receipts:[],student:null,loading:!0}},async created(){await this.getStudentInfo(),await this.getReferral()},methods:{async getStudentInfo(){try{await this.usersStore.getUsers(),this.student=this.usersStore.users.find(t=>t.id==this.referredUserId),this.student||console.error("Student not found")}catch(t){console.error("Error fetching student info:",t)}},async getReferral(){fetch(`/referrals/get-receipts/${this.referredUserId}`).then(function(t){return t.json()}).then(async t=>{this.receipts=t,console.log(this.receipts),this.loading=!1})},formattedStripeReceiptAmount(t){return(t/100).toLocaleString("en-US",{style:"currency",currency:"USD"})},formattedStripeReceiptDate(t){let n=new Date(t);const u=n.getUTCMonth()+1,_=n.getUTCDate();return n.getUTCFullYear()+"/"+u+"/"+_},getTotalPayments(){return this.receipts.filter(t=>t.status==="completed"||!t.status).reduce((t,n)=>t+parseFloat(n.amount||0),0)},goBack(){this.$router.push("/referrals")}}},i=t=>(b("data-v-804fc04f"),t=t(),S(),t),v={class:"container bg-light rounded"},w={class:"d-flex justify-content-between flex-wrap"},D={key:0,class:"heading"},I={key:1,class:"heading"},U={key:0,class:"text-center py-4"},x=i(()=>e("div",{class:"spinner-border",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)),R=[x],T={key:1,class:"row mb-4"},A={class:"col-md-6"},B={class:"card"},C={class:"card-body"},V={class:"card-text"},N=i(()=>e("strong",null,"Total Payments:",-1)),P=i(()=>e("br",null,null,-1)),F=i(()=>e("strong",null,"Number of Transactions:",-1)),j={key:2},L={key:0,class:"alert alert-info"},E={key:1,class:"table-responsive"},z={class:"table table-striped table-hover"},M=i(()=>e("thead",{class:"table-dark"},[e("tr",null,[e("th",null,"Date"),e("th",null,"Amount"),e("th",null,"Transaction ID"),e("th",null,"Compensation Status")])],-1)),O={class:"fw-bold"},Y={class:"font-monospace small"},q=["href"],G={key:0,class:"badge badge-success"},H={key:1,class:"badge badge-warning"};function J(t,n,u,_,o,a){return s(),r("div",v,[e("div",w,[o.student?(s(),r("h1",D,c(o.student.username),1)):(s(),r("h1",I,"Student ID: "+c(o.referredUserId),1)),e("button",{onClick:n[0]||(n[0]=(...d)=>a.goBack&&a.goBack(...d)),class:"btn btn-outline-secondary primary-btn"}," ← Back ")]),o.loading?(s(),r("div",U,R)):l("",!0),!o.loading&&o.student?(s(),r("div",T,[e("div",A,[e("div",B,[e("div",C,[e("p",V,[N,h(" "+c(a.formattedStripeReceiptAmount(a.getTotalPayments())),1),P,F,h(" "+c(o.receipts.length),1)])])])])])):l("",!0),o.loading?l("",!0):(s(),r("div",j,[o.receipts.length===0?(s(),r("div",L," No payments found for this student. ")):(s(),r("div",E,[e("table",z,[M,e("tbody",null,[(s(!0),r(m,null,y(o.receipts,d=>(s(),r("tr",{key:d.id},[e("td",null,c(a.formattedStripeReceiptDate(d.date)),1),e("td",O,c(a.formattedStripeReceiptAmount(d.amount)),1),e("td",Y,[e("a",{href:d.url,target:"_blank"},"View",8,q)]),e("td",null,[d.is_partner_compensated==1?(s(),r("span",G,"Paid")):(s(),r("span",H,"Pending"))])]))),128))])])]))]))])}const Q=f(k,[["render",J],["__scopeId","data-v-804fc04f"]]);export{Q as default};
