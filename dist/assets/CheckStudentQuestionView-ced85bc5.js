import{_,y as k,g as b,e as S,i as m,o,c as n,a as e,t as h,w as a,A as f,b as l,F as v,x as q,N as g,v as y,Q as x}from"./main-85cacb2a.js";import{u as M}from"./StudentMCQuestionsStore-9d0edfaa.js";const C={setup(){const r=M(),s=k(),p=b(),c=S();return{studentMCQuestionsStore:r,usersStore:s,skillsStore:p,userDetailsStore:c}},data(){return{studentQuestionId:this.$route.params.id,question:{},answers:[{text:"",show:!0},{text:"",show:!0},{text:"",show:!0},{text:"",show:!0},{text:"",show:!0}],validate:{validated:!1,name:!1,question:!1,answer:!1,explanation:!1},isEditMode:!1,studentName:null,studentReputation:null,studentId:null,skillName:null,skillId:null,isMobileCheck:window.innerWidth,showReputationModal:!1}},async created(){this.usersStore.users.length==0&&await this.usersStore.getUsers(),this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),await this.getStudentQuestion()},methods:{async getStudentQuestion(){fetch("/questions/student-mc-questions/"+this.studentQuestionId).then(function(r){return r.json()}).then(r=>{this.question=r.question,this.answers=r.answers;for(let s=0;s<this.usersStore.users.length;s++)this.question.student_id==this.usersStore.users[s].id&&(this.studentName=this.usersStore.users[s].username,this.studentReputation=this.usersStore.users[s].reputation_score,this.studentId=this.usersStore.users[s].id);for(let s=0;s<this.skillsStore.skillsList.length;s++)this.question.skill_id==this.skillsStore.skillsList[s].id&&(this.skillName=this.skillsStore.skillsList[s].name)})},deleteStudentQuestion(){confirm("Delete this question?")&&(this.studentMCQuestionsStore.deleteStudentMCQuestion(this.studentQuestionId),m.go(-1))},saveToQuestionBank(){this.showReputationModal=!1,this.question.name="User: "+this.question.student_id;const r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:this.question,answers:this.answers,skill_id:this.question.skill_id})};var s="/questions/mc-questions/add";fetch(s,r).then(()=>{this.studentMCQuestionsStore.deleteStudentMCQuestion(this.studentQuestionId),m.go(-1)})},editMode(){this.isEditMode=!0},addAnswer(){this.answers[2].show==!1?this.answers[2].show=!0:this.answers[3].show==!1?this.answers[3].show=!0:this.answers[4].show==!1&&(this.answers[4].show=!0)},removeAnswer(){this.answers[4].show==!0?(this.answers[4].show=!1,this.question.correct_answer==5&&(this.question.correct_answer=4)):this.answers[3].show==!0?(this.answers[3].show=!1,this.question.correct_answer==4&&(this.question.correct_answer=3)):this.answers[2].show==!0&&(this.answers[2].show=!1,this.question.correct_answer==3&&(this.question.correct_answer=2))},increaseUserReputation(){this.showReputationModal=!1;const r={method:"PUT",headers:{"Content-Type":"application/json"}};var s="/users/increase-reputation/"+this.userDetailsStore.userId+"/"+this.studentId;fetch(s,r).then(()=>{this.usersStore.getUsers(),this.saveToQuestionBank()})}}},Q={class:"container p-3 bg-light rounded"},V={class:"main-content-container container-fluid"},U={class:"row p-0"},E={id:"form-container",class:"col p-4"},R={class:"mb-3"},A=["disabled"],N={key:0,class:"form-validate"},I={class:"secondary-heading h4"},D={class:"d-flex answer-option"},L=["disabled","onUpdate:modelValue","id"],B={key:0,class:"form-validate"},T={class:"form-check"},z=["disabled","id","value"],H=["for"],O={class:"d-flex"},j=["disabled"],F={key:0},P=["disabled"],G={key:0},J={class:"mt-2 mb-3 form-check"},W=["disabled"],K={class:"mb-3"},X=["disabled"],Y={key:0,class:"form-validate"},Z={key:0,class:"d-flex justify-content-end gap-2"},$={key:0,class:"modal"},ss={class:"modal-content"},es={class:"d-flex justify-content-between"};function ts(r,s,p,c,t,d){return o(),n(v,null,[e("div",Q,[s[16]||(s[16]=e("h1",{class:"heading"},"Review Suggested Question",-1)),e("p",null,h(t.studentName)+" (reputation score: "+h(t.studentReputation)+") suggested the following question, for the skill "+h(t.skillName),1),e("div",V,[e("div",U,[e("div",E,[e("div",R,[s[11]||(s[11]=e("h2",{class:"secondary-heading h4"},"Question",-1)),a(e("textarea",{disabled:!t.isEditMode,rows:"1","onUpdate:modelValue":s[0]||(s[0]=i=>t.question.text=i),class:"form-control"},"                        ",8,A),[[f,t.question.text]]),t.validate.question&&(t.question.text===""||t.question.text===null)?(o(),n("div",N," please enter a question ! ")):l("",!0)]),(o(!0),n(v,null,q(t.answers,(i,u)=>a((o(),n("div",{key:u,class:"mb-3"},[e("h2",I," Answer "+h(u+1),1),e("div",D,[a(e("input",{disabled:!t.isEditMode,"onUpdate:modelValue":w=>i.text=w,id:"answer"+(u+1),placeholder:"Enter answer option",type:"text",class:"form-control"},null,8,L),[[f,i.text]])]),t.validate.validated&&i.text===""?(o(),n("div",B," please enter a correct answer ! ")):l("",!0),e("div",T,[a(e("input",{disabled:!t.isEditMode,class:"form-check-input",type:"radio",id:"correct"+(u+1),name:"correctAnswer",value:u+1,"onUpdate:modelValue":s[1]||(s[1]=w=>t.question.correct_answer=w)},null,8,z),[[x,t.question.correct_answer]]),e("label",{for:"correct"+(u+1),class:""},"Set as correct",8,H)])])),[[y,i.show]])),128)),e("div",O,[t.answers[2].show==!0?(o(),n("button",{key:0,onClick:s[2]||(s[2]=i=>d.removeAnswer()),"data-v-ea3cd1bf":"",type:"button",class:"btn red-btn me-2",title:"Delete answer",disabled:!t.isEditMode},[s[12]||(s[12]=e("svg",{"data-v-ea3cd1bf":"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"15",height:"15",fill:"white"},[e("path",{"data-v-ea3cd1bf":"",d:"M170.5 51.6L151.5 80h145l-19-28.4c-1.5-2.2-4-3.6-6.7-3.6H177.1c-2.7 0-5.2 1.3-6.7 3.6zm147-26.6L354.2 80H368h48 8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-8V432c0 44.2-35.8 80-80 80H112c-44.2 0-80-35.8-80-80V128H24c-13.3 0-24-10.7-24-24S10.7 80 24 80h8H80 93.8l36.7-55.1C140.9 9.4 158.4 0 177.1 0h93.7c18.7 0 36.2 9.4 46.6 24.9zM80 128V432c0 17.7 14.3 32 32 32H336c17.7 0 32-14.3 32-32V128H80zm80 64V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0V400c0 8.8-7.2 16-16 16s-16-7.2-16-16V192c0-8.8 7.2-16 16-16s16 7.2 16 16z"})],-1)),t.isMobileCheck>576?(o(),n("span",F,"Â Remove Answer")):l("",!0)],8,j)):l("",!0),t.answers[4].show==!1?(o(),n("button",{key:1,onClick:s[3]||(s[3]=(...i)=>d.addAnswer&&d.addAnswer(...i)),class:"btn primary-btn",disabled:!t.isEditMode},[s[13]||(s[13]=e("svg",{width:"20",height:"20",fill:"#ffffff",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[e("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"})],-1)),t.isMobileCheck>576?(o(),n("span",G,"Add Answer")):l("",!0)],8,P)):l("",!0)]),e("div",J,[a(e("input",{disabled:!t.isEditMode,type:"checkbox",id:"randomOrder","onUpdate:modelValue":s[4]||(s[4]=i=>t.question.is_random=i),class:"form-check-input"},null,8,W),[[g,t.question.is_random]]),s[14]||(s[14]=e("label",{for:"randomOrder",class:"form-check-label"},"Show answers in random order",-1))]),e("div",K,[s[15]||(s[15]=e("h2",{class:"secondary-heading h4"},"Explanation",-1)),a(e("textarea",{disabled:!t.isEditMode,"onUpdate:modelValue":s[5]||(s[5]=i=>t.question.explanation=i),class:"form-control",rows:"3"},null,8,X),[[f,t.question.explanation]]),t.validate.explanation&&(t.question.explanation===""||t.question.explanation===null)?(o(),n("div",Y," please enter an explanation ! ")):l("",!0)]),c.userDetailsStore.role!="student"?(o(),n("div",Z,[e("a",{class:"btn primary-btn",onClick:s[6]||(s[6]=i=>d.editMode())},"Edit"),e("button",{class:"btn primary-btn",onClick:s[7]||(s[7]=i=>this.showReputationModal=!0)}," Save "),e("a",{class:"btn red-btn",onClick:s[8]||(s[8]=i=>d.deleteStudentQuestion())},"Delete")])):l("",!0)])])])]),t.showReputationModal?(o(),n("div",$,[e("div",ss,[e("div",null,[e("p",null,"Give "+h(t.studentName)+" a reputation point?",1),e("div",es,[e("button",{class:"btn primary-btn",onClick:s[9]||(s[9]=i=>d.increaseUserReputation())}," yes "),e("button",{class:"btn primary-btn",onClick:s[10]||(s[10]=i=>d.saveToQuestionBank())}," no ")])])])])):l("",!0)],64)}const ns=_(C,[["render",ts],["__scopeId","data-v-3578959d"]]);export{ns as default};
