import{_ as x,o as n,c as l,A as v,J as A,r as S,a as t,t as h,F as p,z as g,k as B,b as D,g as y,l as k,s as f}from"./main-41bfc795.js";import{s as b}from"./transform-7263f110.js";import{l as $,m as j,b as q,s as C}from"./linear-78f05e13.js";import{a as N,b as T}from"./continuous-5681c0ba.js";const z={name:"FailedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){b("#failed-assessments-chart-container");const s=25,r=0,_=0,u=10,o=200,d=1e3,c=Math.ceil((this.data.length+.1)*s)+r+u,i=$().domain([0,j(this.data,a=>a.quantity)]).range([o,d-_]),e=q().domain(C(this.data,a=>-a.quantity).map(a=>a.name)).rangeRound([r,c-u]).padding(.1),w=i.tickFormat(20),m=b("#failed-assessments-chart-container").append("svg").attr("width",d).attr("height",c).attr("viewBox",[0,0,d,c]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");m.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",i(0)).attr("y",a=>e(a.name)).attr("width",a=>i(a.quantity)-i(0)).attr("height",e.bandwidth()),m.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",a=>i(a.quantity)).attr("y",a=>e(a.name)+e.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(a=>w(a.quantity)).call(a=>a.filter(F=>i(F.quantity)-i(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),m.append("g").attr("transform",`translate(0,${r})`).call(N(i).ticks(0)).call(a=>a.select(".domain").remove()),m.append("g").attr("transform",`translate(${o},0)`).call(T(e).tickSizeOuter(0))},computed:{}},I={id:"failed-assessments-chart-container"};function H(s,r,_,u,o,d){return n(),l("div",I)}const V=x(z,[["render",H]]),L={setup(){const s=v(),r=A();return{usersStore:s,userSkillsStore:r}},components:{FailedAssessmentsHorizontalBarChart:V},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentAttempts:[],multipleFails:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const s=this.usersStore.users.find(r=>r.id===this.studentId);s&&(this.studentName=s.username),await this.userSkillsStore.getMasteredSkills(this.studentId),await this.getAssessmentAttempts(),await this.getMultipleFails()},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(s=>s.json()).then(s=>{this.assessmentAttempts=s}).catch(s=>{console.error("Error fetching last visited skills:",s)})},assessmentDate(s){return new Date(s).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async getMultipleFails(){fetch(`/student-analytics/multiple-fails/${this.studentId}`).then(s=>s.json()).then(s=>{this.multipleFails=s}).catch(s=>{console.error("Error fetching last visited skills:",s)})}}},M={class:"container"},R={class:"heading"},U=t("h2",{class:"secondary-heading"},"Passed",-1),E={key:0,class:"mb-4"},O={class:"table"},J=t("tr",null,[t("th",null,"Skill"),t("th",null,"Date")],-1),P={key:1},G=t("h2",{class:"secondary-heading"},"Attempted",-1),K={key:2,class:"mb-4"},Q={class:"table"},W=t("tr",null,[t("th",null,"Skill"),t("th",null,"Date")],-1),X={key:3},Y=t("p",null,null,-1),Z=t("h2",{class:"secondary-heading"},"Failed multiple times",-1),tt={key:5,class:"mb-4"},st={class:"table"},et=t("tr",null,[t("th",null,"Skill"),t("th",null,"Times")],-1),at={key:6};function nt(s,r,_,u,o,d){const c=S("router-link"),i=S("FailedAssessmentsHorizontalBarChart");return n(),l("div",M,[t("h1",R,"Assessment Status Report: "+h(o.studentName),1),U,this.userSkillsStore.masteredSkills.length>0?(n(),l("div",E,[t("table",O,[J,(n(!0),l(p,null,g(u.userSkillsStore.masteredSkills,e=>(n(),l("tr",{key:e.id,class:"table-rows"},[t("td",null,[y(c,{target:"_blank",to:"/skills/"+e.url},{default:k(()=>[f(h(e.name),1)]),_:2},1032,["to"])]),t("td",null,h(d.assessmentDate(e.date)),1)]))),128))])])):(n(),l("p",P,"This student has not completed any assessments yet.")),G,this.assessmentAttempts.length>0?(n(),l("div",K,[t("table",Q,[W,(n(!0),l(p,null,g(o.assessmentAttempts,e=>(n(),l("tr",{key:e.id,class:"table-rows"},[t("td",null,[y(c,{target:"_blank",to:"/skills/"+e.url},{default:k(()=>[f(h(e.name),1)]),_:2},1032,["to"])]),t("td",null,h(d.assessmentDate(e.date)),1)]))),128))])])):(n(),l("p",X,"This student has attempted any assessments yet.")),Y,Z,o.multipleFails.length>0?(n(),B(i,{key:4,data:o.multipleFails,colour:"darkred"},null,8,["data"])):D("",!0),this.multipleFails.length>0?(n(),l("div",tt,[t("table",st,[et,(n(!0),l(p,null,g(o.multipleFails,e=>(n(),l("tr",{key:e.id,class:"table-rows"},[t("td",null,[y(c,{target:"_blank",to:"/skills/"+e.url},{default:k(()=>[f(h(e.name),1)]),_:2},1032,["to"])]),t("td",null,h(e.quantity),1)]))),128))])])):(n(),l("p",at," This student has not failed any assessments more than once yet. "))])}const dt=x(L,[["render",nt]]);export{dt as default};
