import{w as cn,c as T,a as ln}from"./point-ea70dc51.js";import"./transform-4d0f7c8f.js";import{_ as fn,o as gn,c as pn}from"./main-e10ce0af.js";import{u as hn,l as mn}from"./line-bfb1ca50.js";import{e as dn}from"./time-ce17bce2.js";import{l as yn,c as xn,b as vn}from"./linear-841004c4.js";import{m as An}from"./continuous-e5db47ab.js";import{s as on}from"./string-c67ea49d.js";const sn=Math.abs,M=Math.atan2,Q=Math.cos,Mn=Math.max,en=Math.min,L=Math.sin,j=Math.sqrt,$=1e-12,z=Math.PI,X=z/2,W=2*z;function Rn(e){return e>1?0:e<-1?z:Math.acos(e)}function un(e){return e>=1?X:e<=-1?-X:Math.asin(e)}function Tn(e){return e.innerRadius}function wn(e){return e.outerRadius}function kn(e){return e.startAngle}function $n(e){return e.endAngle}function Pn(e){return e&&e.padAngle}function Cn(e,u,p,v,m,d,l,n){var g=p-e,i=v-u,t=l-m,c=n-d,a=c*g-t*i;if(!(a*a<$))return a=(t*(u-d)-c*(e-m))/a,[e+a*g,u+a*i]}function U(e,u,p,v,m,d,l){var n=e-p,g=u-v,i=(l?d:-d)/j(n*n+g*g),t=i*g,c=-i*n,a=e+t,o=u+c,h=p+t,y=v+c,D=(a+h)/2,f=(o+y)/2,R=h-a,A=y-o,x=R*R+A*A,w=m-d,k=a*y-h*o,E=(A<0?-1:1)*j(Mn(0,w*w*x-k*k)),I=(k*A-R*E)/x,N=(-k*R-A*E)/x,B=(k*A+R*E)/x,P=(-k*R+A*E)/x,C=I-D,r=N-f,s=B-D,O=P-f;return C*C+r*r>s*s+O*O&&(I=B,N=P),{cx:I,cy:N,x01:-t,y01:-c,x11:I*(m/w-1),y11:N*(m/w-1)}}function Fn(){var e=Tn,u=wn,p=T(0),v=null,m=kn,d=$n,l=Pn,n=null,g=cn(i);function i(){var t,c,a=+e.apply(this,arguments),o=+u.apply(this,arguments),h=m.apply(this,arguments)-X,y=d.apply(this,arguments)-X,D=sn(y-h),f=y>h;if(n||(n=t=g()),o<a&&(c=o,o=a,a=c),!(o>$))n.moveTo(0,0);else if(D>W-$)n.moveTo(o*Q(h),o*L(h)),n.arc(0,0,o,h,y,!f),a>$&&(n.moveTo(a*Q(y),a*L(y)),n.arc(0,0,a,y,h,f));else{var R=h,A=y,x=h,w=y,k=D,E=D,I=l.apply(this,arguments)/2,N=I>$&&(v?+v.apply(this,arguments):j(a*a+o*o)),B=en(sn(o-a)/2,+p.apply(this,arguments)),P=B,C=B,r,s;if(N>$){var O=un(N/a*L(I)),F=un(N/o*L(I));(k-=O*2)>$?(O*=f?1:-1,x+=O,w-=O):(k=0,x=w=(h+y)/2),(E-=F*2)>$?(F*=f?1:-1,R+=F,A-=F):(E=0,R=A=(h+y)/2)}var S=o*Q(R),V=o*L(R),G=a*Q(w),H=a*L(w);if(B>$){var J=o*Q(A),K=o*L(A),Y=a*Q(x),Z=a*L(x),q;if(D<z)if(q=Cn(S,V,Y,Z,J,K,G,H)){var b=S-q[0],_=V-q[1],nn=J-q[0],tn=K-q[1],rn=1/L(Rn((b*nn+_*tn)/(j(b*b+_*_)*j(nn*nn+tn*tn)))/2),an=j(q[0]*q[0]+q[1]*q[1]);P=en(B,(a-an)/(rn-1)),C=en(B,(o-an)/(rn+1))}else P=C=0}E>$?C>$?(r=U(Y,Z,S,V,o,C,f),s=U(J,K,G,H,o,C,f),n.moveTo(r.cx+r.x01,r.cy+r.y01),C<B?n.arc(r.cx,r.cy,C,M(r.y01,r.x01),M(s.y01,s.x01),!f):(n.arc(r.cx,r.cy,C,M(r.y01,r.x01),M(r.y11,r.x11),!f),n.arc(0,0,o,M(r.cy+r.y11,r.cx+r.x11),M(s.cy+s.y11,s.cx+s.x11),!f),n.arc(s.cx,s.cy,C,M(s.y11,s.x11),M(s.y01,s.x01),!f))):(n.moveTo(S,V),n.arc(0,0,o,R,A,!f)):n.moveTo(S,V),!(a>$)||!(k>$)?n.lineTo(G,H):P>$?(r=U(G,H,J,K,a,-P,f),s=U(S,V,Y,Z,a,-P,f),n.lineTo(r.cx+r.x01,r.cy+r.y01),P<B?n.arc(r.cx,r.cy,P,M(r.y01,r.x01),M(s.y01,s.x01),!f):(n.arc(r.cx,r.cy,P,M(r.y01,r.x01),M(r.y11,r.x11),!f),n.arc(0,0,a,M(r.cy+r.y11,r.cx+r.x11),M(s.cy+s.y11,s.cx+s.x11),f),n.arc(s.cx,s.cy,P,M(s.y11,s.x11),M(s.y01,s.x01),!f))):n.arc(0,0,a,w,x,f)}if(n.closePath(),t)return n=null,t+""||null}return i.centroid=function(){var t=(+e.apply(this,arguments)+ +u.apply(this,arguments))/2,c=(+m.apply(this,arguments)+ +d.apply(this,arguments))/2-z/2;return[Q(c)*t,L(c)*t]},i.innerRadius=function(t){return arguments.length?(e=typeof t=="function"?t:T(+t),i):e},i.outerRadius=function(t){return arguments.length?(u=typeof t=="function"?t:T(+t),i):u},i.cornerRadius=function(t){return arguments.length?(p=typeof t=="function"?t:T(+t),i):p},i.padRadius=function(t){return arguments.length?(v=t==null?null:typeof t=="function"?t:T(+t),i):v},i.startAngle=function(t){return arguments.length?(m=typeof t=="function"?t:T(+t),i):m},i.endAngle=function(t){return arguments.length?(d=typeof t=="function"?t:T(+t),i):d},i.padAngle=function(t){return arguments.length?(l=typeof t=="function"?t:T(+t),i):l},i.context=function(t){return arguments.length?(n=t??null,i):n},i}function Dn(e,u){return u<e?-1:u>e?1:u>=e?0:NaN}function Bn(e){return e}function Gn(){var e=Bn,u=Dn,p=null,v=T(0),m=T(W),d=T(0);function l(n){var g,i=(n=ln(n)).length,t,c,a=0,o=new Array(i),h=new Array(i),y=+v.apply(this,arguments),D=Math.min(W,Math.max(-W,m.apply(this,arguments)-y)),f,R=Math.min(Math.abs(D)/i,d.apply(this,arguments)),A=R*(D<0?-1:1),x;for(g=0;g<i;++g)(x=h[o[g]=g]=+e(n[g],g,n))>0&&(a+=x);for(u!=null?o.sort(function(w,k){return u(h[w],h[k])}):p!=null&&o.sort(function(w,k){return p(n[w],n[k])}),g=0,c=a?(D-i*A)/a:0;g<i;++g,y=f)t=o[g],x=h[t],f=y+(x>0?x*c:0)+A,h[t]={data:n[t],index:g,value:x,startAngle:y,endAngle:f,padAngle:R};return h}return l.value=function(n){return arguments.length?(e=typeof n=="function"?n:T(+n),l):e},l.sortValues=function(n){return arguments.length?(u=n,p=null,l):u},l.sort=function(n){return arguments.length?(p=n,u=null,l):p},l.startAngle=function(n){return arguments.length?(v=typeof n=="function"?n:T(+n),l):v},l.endAngle=function(n){return arguments.length?(m=typeof n=="function"?n:T(+n),l):m},l.padAngle=function(n){return arguments.length?(d=typeof n=="function"?n:T(+n),l):d},l}const Ln={name:"CohortDurationPerDayLineChart",props:["data","colour"],data(){return{}},mounted(){const e=this.data;on("#cohort-duration-per-day-chart-container");const u=928,p=500,v=20,m=30,d=30,l=40,n=hn(dn(e,c=>c.date),[l,u-m]),g=yn([0,An(e,c=>c.formattedQuantity)],[p-d,v]),i=mn().x(c=>n(c.date)).y(c=>g(c.formattedQuantity)),t=on("#cohort-duration-per-day-chart-container").append("svg").attr("width",u).attr("height",p).attr("viewBox",[0,0,u,p]).attr("style","max-width: 100%; height: auto; height: intrinsic;");t.append("g").attr("transform",`translate(0,${p-d})`).call(xn(n).ticks(e.length).tickSizeOuter(0)),t.append("g").attr("transform",`translate(${l},0)`).call(vn(g).ticks(p/80)).call(c=>c.selectAll(".tick line").clone().attr("x2",u-l-m).attr("stroke-opacity",.1)).call(c=>c.append("text").attr("x",-l).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text("â†‘ Duration in minutes")),t.append("path").attr("fill","none").attr("stroke","#5f31dd").attr("stroke-width",1.5).attr("d",i(e))}},qn={id:"cohort-duration-per-day-chart-container"};function En(e,u,p,v,m,d){return gn(),pn("div",qn)}const Hn=fn(Ln,[["render",En]]);export{Hn as C,Fn as a,Gn as p};
