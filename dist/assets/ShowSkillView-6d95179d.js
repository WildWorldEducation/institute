import{u as Wt,a as Kt}from"./TagsStore-3da5e4fd.js";import{_ as O,i as pt,r as _,o as l,c as a,a as o,t as b,b as h,m as v,f as E,k as x,j as w,T as ot,q as S,F as A,y as V,H as Yt,w as $,v as Gt,p as z,g as H,e as Q,I as Jt,J as St,d as xt,B as nt,K as rt,h as Zt,L as Qt,M as Xt}from"./main-62657515.js";import{u as te}from"./ShowSkillStore-a018c53a.js";import{u as ee}from"./SettingsStore-d2efd8a0.js";import{F as Lt}from"./FlagModals-8726a3c9.js";import{T as At}from"./tutorLoadingSymbol-1211d92d.js";import{T as se}from"./TooltipBtn-ab2178bf.js";const ie="/images/source-avatars/source-default-avatar.png";const oe={setup(){return{sessionDetailsStore:pt()}},props:["post","user"],data(){return{showActionBtns:!1,currentClickId:0}},mounted(){},computed:{},methods:{handleClickActionBtns(e){this.showActionBtns=!this.showActionBtns,this.currentClickId=e},showWarningModal(e){this.$parent.showWarningModal(e,"resource")},voteUp(e,t){t?fetch("/user-votes/"+this.user.userId+"/"+e+"/edit/cancel",{method:"PUT",headers:{"Content-Type":"content/type"},body:{}}).then(()=>this.$parent.getSourceVotes(e)):fetch("/user-votes/"+this.user.userId+"/"+e+"/edit/up",{method:"PUT",headers:{"Content-Type":"content/type"},body:{}}).then(()=>this.$parent.getSourceVotes(e))},voteDown(e,t){t?fetch("/user-votes/"+this.user.userId+"/"+e+"/edit/cancel",{method:"PUT",headers:{"Content-Type":"content/type"},body:{}}).then(()=>{this.$parent.getSourceVotes(e,this.post.type)}):fetch("/user-votes/"+this.user.userId+"/"+e+"/edit/down",{method:"PUT",headers:{"Content-Type":"content/type"},body:{}}).then(()=>{this.$parent.getSourceVotes(e,this.post.type)})},handleOpenFlagModal(e){this.$parent.handleOpenFlagModal(e,"resource")}}},ne={class:"row mt-4 forum-container source"},re={class:"d-flex align-items-center justify-content-between mb-2"},le={class:"w-100"},ae={class:"col post-user-row"},ce={class:"user-avatar"},he=["src"],ue={key:1,src:ie,class:"user-avatar-img",alt:"user avatar"},de={class:"user-name-div d-flex justify-content-between w-100"},pe={class:"user-name-text"},fe={key:0,"b-tooltip.hover":"",title:"This source was created or edited by a human",class:"author-icon me-4",style:{height:"50px"}},ge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",height:"22",style:{opacity:"0.5"},class:"primary-icon"},me=o("path",{d:"M112 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm40 304l0 128c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-223.1L59.4 304.5c-9.1 15.1-28.8 20-43.9 10.9s-20-28.8-10.9-43.9l58.3-97c17.4-28.9 48.6-46.6 82.3-46.6l29.7 0c33.7 0 64.9 17.7 82.3 46.6l58.3 97c9.1 15.1 4.2 34.8-10.9 43.9s-34.8 4.2-43.9-10.9L232 256.9 232 480c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-128-16 0z"},null,-1),_e=[me],ye={key:1,"b-tooltip.hover":"",title:"This post was created by an AI",class:"author-icon me-4",style:{height:"50px"}},we={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",height:"22",style:{opacity:"0.5"},class:"primary-icon"},ve=o("path",{d:"M320 0c17.7 0 32 14.3 32 32l0 64 120 0c39.8 0 72 32.2 72 72l0 272c0 39.8-32.2 72-72 72l-304 0c-39.8 0-72-32.2-72-72l0-272c0-39.8 32.2-72 72-72l120 0 0-64c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224l16 0 0 192-16 0c-26.5 0-48-21.5-48-48l0-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48l0 96c0 26.5-21.5 48-48 48l-16 0 0-192 16 0z"},null,-1),ke=[ve],be={class:"source"},Te=["innerHTML"],Ce={class:"d-flex align-items-center justify-content-end mt-3"},Se={class:"first-post-row"},xe={class:"d-flex flex-row justify-content-end gap-1"},Le={key:0,width:"34",height:"27",fill:"#36c1af",class:"vote-icon upvote-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Ae=o("path",{d:"M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10M1,21H5V9H1V21Z"},null,-1),Me=[Ae],Ie={key:1,width:"34",height:"27",fill:"#36c1af",class:"vote-icon upvote-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Pe=o("path",{d:"M5,9V21H1V9H5M9,21A2,2 0 0,1 7,19V9C7,8.45 7.22,7.95 7.59,7.59L14.17,1L15.23,2.06C15.5,2.33 15.67,2.7 15.67,3.11L15.64,3.43L14.69,8H21C22.11,8 23,8.9 23,10V12C23,12.26 22.95,12.5 22.86,12.73L19.84,19.78C19.54,20.5 18.83,21 18,21H9M9,19H18.03L21,12V10H12.21L13.34,4.68L9,9.03V19Z"},null,-1),Oe=[Pe],De={key:0,width:"34",height:"27",fill:"#FC6E68",class:"vote-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Be=o("path",{d:"M19,15H23V3H19M15,3H6C5.17,3 4.46,3.5 4.16,4.22L1.14,11.27C1.05,11.5 1,11.74 1,12V14A2,2 0 0,0 3,16H9.31L8.36,20.57C8.34,20.67 8.33,20.77 8.33,20.88C8.33,21.3 8.5,21.67 8.77,21.94L9.83,23L16.41,16.41C16.78,16.05 17,15.55 17,15V5C17,3.89 16.1,3 15,3Z"},null,-1),Ee=[Be],Re={key:1,width:"34",height:"27",fill:"#FC6E68",class:"vote-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Ve=o("path",{d:"M19,15V3H23V15H19M15,3A2,2 0 0,1 17,5V15C17,15.55 16.78,16.05 16.41,16.41L9.83,23L8.77,21.94C8.5,21.67 8.33,21.3 8.33,20.88L8.36,20.57L9.31,16H3C1.89,16 1,15.1 1,14V12C1,11.74 1.05,11.5 1.14,11.27L4.16,4.22C4.46,3.5 5.17,3 6,3H15M15,5H5.97L3,12V14H11.78L10.65,19.32L15,14.97V5Z"},null,-1),Ne=[Ve],ze={key:2,class:"position-relative"},He=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"grey",class:"more-icon"},[o("path",{d:"M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"})],-1),je=[He],Fe={key:0,class:"action-btns-div"},Ue=o("svg",{width:"19",height:"20",viewBox:"0 0 19 20",class:"primary-icon",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M0.75558 19.3181C0.77635 19.5132 0.87137 19.6928 1.02096 19.8198C1.17055 19.9468 1.36325 20.0114 1.55915 20.0002L5.27701 19.8288L0.398438 15.6145L0.75558 19.3181Z"}),o("path",{d:"M11.8467 2.24484L0.801758 15.0315L5.6802 19.2454L16.7251 6.45877L11.8467 2.24484Z",fill:"#857D99"}),o("path",{d:"M18.2555 3.11796L14.934 0.260817C14.832 0.172259 14.7134 0.104756 14.5852 0.0621907C14.4569 0.0196256 14.3215 0.00283902 14.1868 0.0127967C14.052 0.0227543 13.9205 0.0592596 13.7999 0.120212C13.6793 0.181165 13.572 0.265362 13.484 0.36796L12.4805 1.50725L17.359 5.71439L18.3519 4.56082C18.5289 4.35602 18.6181 4.08969 18.6 3.81958C18.582 3.54948 18.4582 3.29738 18.2555 3.11796Z",fill:"#857D99"})],-1),qe=o("svg",{width:"18",height:"18",viewBox:"0 0 20 20",class:"primary-icon",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M0.312625 14.5205L4.83312 9.99999L0.312625 5.49218C0.111396 5.29025 -0.00159545 5.0168 -0.00159545 4.73172C-0.00159545 4.44665 0.111396 4.17319 0.312625 3.97126L3.96282 0.312625C4.16474 0.111396 4.4382 -0.00159545 4.72327 -0.00159545C5.00835 -0.00159545 5.2818 0.111396 5.48373 0.312625L9.99999 4.83312L14.5205 0.312625C14.6204 0.21056 14.7397 0.12947 14.8714 0.0741101C15.003 0.0187502 15.1444 -0.00976563 15.2873 -0.00976562C15.4301 -0.00976563 15.5715 0.0187502 15.7032 0.0741101C15.8349 0.12947 15.9541 0.21056 16.0541 0.312625L19.6874 3.96282C19.8886 4.16474 20.0016 4.4382 20.0016 4.72327C20.0016 5.00835 19.8886 5.2818 19.6874 5.48373L15.1669 9.99999L19.6874 14.5205C19.8883 14.7217 20.0012 14.9944 20.0012 15.2788C20.0012 15.5632 19.8883 15.836 19.6874 16.0372L16.0541 19.6874C15.8529 19.8883 15.5801 20.0012 15.2957 20.0012C15.0113 20.0012 14.7386 19.8883 14.5374 19.6874L9.99999 15.1669L5.49218 19.6874C5.29025 19.8886 5.0168 20.0016 4.73172 20.0016C4.44665 20.0016 4.17319 19.8886 3.97126 19.6874L0.312625 16.0541C0.21056 15.9541 0.12947 15.8349 0.0741101 15.7032C0.0187502 15.5715 -0.00976563 15.4301 -0.00976562 15.2873C-0.00976563 15.1444 0.0187502 15.003 0.0741101 14.8714C0.12947 14.7397 0.21056 14.6204 0.312625 14.5205Z"})],-1),$e=[qe],We={class:"d-flex flex-row-reverse"},Ke={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",style:{opacity:"0.5"},height:"20",width:"20",class:"primary-icon"},Ye=o("path",{d:"M64 32C64 14.3 49.7 0 32 0S0 14.3 0 32V64 368 480c0 17.7 14.3 32 32 32s32-14.3 32-32V352l64.3-16.1c41.1-10.3 84.6-5.5 122.5 13.4c44.2 22.1 95.5 24.8 141.7 7.4l34.7-13c12.5-4.7 20.8-16.6 20.8-30V66.1c0-23-24.2-38-44.8-27.7l-9.6 4.8c-46.3 23.2-100.8 23.2-147.1 0c-35.1-17.6-75.4-22-113.5-12.5L64 48V32z"},null,-1),Ge=[Ye];function Je(e,t,s,i,n,r){const c=_("router-link");return l(),a("div",ne,[o("div",re,[o("div",le,[o("div",ae,[o("div",ce,[i.sessionDetailsStore.isLoggedIn?(l(),a("img",{key:0,src:s.post.avatar,class:"user-avatar-img",alt:"user avatar"},null,8,he)):(l(),a("img",ue))]),o("div",de,[o("span",pe,b(s.post.username),1)]),s.post.is_human_edited?(l(),a("div",fe,[(l(),a("svg",ge,_e))])):(l(),a("div",ye,[(l(),a("svg",we,ke))]))])])]),o("div",be,[o("div",{class:"forum-post w-auto",innerHTML:s.post.content},null,8,Te)]),o("div",Ce,[o("div",Se,[o("div",xe,[i.sessionDetailsStore.isLoggedIn?(l(),a("button",{key:0,class:"vote-btn",onClick:t[0]||(t[0]=u=>r.voteUp(s.post.id,s.post.userUpVote)),"b-tooltip.hover":"",title:"I Like This "},[s.post.userUpVote?(l(),a("svg",Le,Me)):(l(),a("svg",Ie,Oe))])):h("",!0),o("span",{"b-on-hover":"",title:"number of votes this source received",class:v({"text-danger":s.post.voteCount<0,"primary-color":s.post.voteCount>0,"vote-count":!0})},b(s.post.voteCount),3),i.sessionDetailsStore.isLoggedIn?(l(),a("button",{key:1,class:"vote-btn","b-tooltip.hover":"",title:"I Dislike This ",onClick:t[1]||(t[1]=u=>r.voteDown(s.post.id,s.post.userDownVote))},[s.post.userDownVote?(l(),a("svg",De,Ee)):(l(),a("svg",Re,Ne))])):h("",!0),i.sessionDetailsStore.isLoggedIn?(l(),a("div",ze,[o("button",{class:"toggle-actions-bnt",onClick:t[2]||(t[2]=u=>r.handleClickActionBtns(s.post.id)),"b-tooltip.hover":"",title:"More Actions For This Source"},je),E(ot,{name:"dropdown"},{default:x(()=>[n.showActionBtns&&s.post.id==n.currentClickId?(l(),a("div",Fe,[s.post.user_id==s.user.userId||s.user.role=="admin"||s.user.role=="editor"?(l(),w(c,{key:0,to:"/resources/edit/"+s.post.id,class:"btn dropdown-btn",role:"button","b-tooltip.hover":"",title:"Edit This Source"},{default:x(()=>[Ue]),_:1},8,["to"])):h("",!0),s.post.user_id==s.user.userId||s.user.role=="admin"||s.user.role=="editor"?(l(),a("button",{key:1,"b-tooltip.hover":"",title:"Delete This Source",type:"button",class:"btn dropdown-btn",onClick:t[3]||(t[3]=u=>r.showWarningModal(s.post))},$e)):h("",!0),o("button",{"b-tooltip.hover":"",title:"Flag This Source For Review",type:"button",class:"btn dropdown-btn",onClick:t[4]||(t[4]=u=>r.handleOpenFlagModal(s.post.id,s.post.type))},[o("div",We,[(l(),a("svg",Ke,Ge))])])])):h("",!0)]),_:1})])):h("",!0)])])])])}const Mt=O(oe,[["render",Je]]);const Ze={props:["resourcePosts","user","skillId"],data(){return{showActionBtns:!1,currentClickId:0,isAlreadyTutoring:this.$parent.isAlreadyTutoring,showWarnModal:!1,currentPost:null}},components:{ResourcePostCard:Mt},mounted(){},computed:{orderedAndNamedPosts(){var e=this.resourcePosts.sort((t,s)=>s.voteCount===t.voteCount?new Date(s.created_at)-new Date(t.created_at):s.voteCount-t.voteCount);return e}},methods:{deletePost(){this.$parent.deletePost(this.currentPost),this.showWarnModal=!1},showWarningModal(e){this.currentPost=e,this.showWarnModal=!0},handleOpenFlagModal(e){this.$parent.flagPost=e,this.$parent.showFlaggingModal=!0,this.showActionBtns=!1,this.$parent.flagType="resource"},getSourceVotes(e){this.$parent.getSourceVotes(e)}}},Qe={class:"d-flex flex-column mt-4"},Xe={class:"d-flex flex-column flex-lg-row"},ts={class:"ms-0 me-auto ms-lg-auto me-lg-0"},es={class:"d-flex flex-column align-items-baseline"},ss=o("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M6.34811 20.0423L6.34811 13.6494L-0.0358702 13.6583C-0.320945 13.6579 -0.594203 13.5444 -0.795782 13.3428C-0.997361 13.1412 -1.11082 12.868 -1.11132 12.5829L-1.11729 7.41477C-1.1168 7.1297 -1.00334 6.85644 -0.801757 6.65486C-0.600179 6.45328 -0.326921 6.33982 -0.0418461 6.33933L6.3481 6.34231L6.3481 -0.0506238C6.34659 -0.193451 6.3736 -0.335145 6.42756 -0.467396C6.48152 -0.599646 6.56134 -0.719794 6.66234 -0.820794C6.76334 -0.921794 6.88349 -1.00161 7.01574 -1.05557C7.14799 -1.10953 7.28969 -1.13655 7.43251 -1.13503L12.5827 -1.12308C12.8678 -1.12259 13.141 -1.00913 13.3426 -0.807549C13.5442 -0.60597 13.6577 -0.332713 13.6582 -0.047637L13.6552 6.34231L20.0481 6.34231C20.3325 6.34248 20.6052 6.45552 20.8063 6.65661C21.0074 6.8577 21.1204 7.13039 21.1206 7.41477L21.1325 12.565C21.1324 12.8494 21.0193 13.122 20.8182 13.3231C20.6171 13.5242 20.3444 13.6373 20.0601 13.6374L13.6552 13.6494L13.6641 20.0334C13.6636 20.3184 13.5502 20.5917 13.3486 20.7933C13.147 20.9948 12.8738 21.1083 12.5887 21.1088L7.43252 21.1267C7.28969 21.1282 7.148 21.1012 7.01575 21.0473C6.88349 20.9933 6.76335 20.9135 6.66235 20.8125C6.56135 20.7115 6.48153 20.5913 6.42757 20.4591C6.37361 20.3268 6.34659 20.1851 6.34811 20.0423Z",fill:"white"})],-1),is={id:"posts-big-container"},os={key:0},ns={id:"myModal",class:"modal"},rs={class:"modal-content"},ls=o("p",null,"Are you sure you want to delete this source?",-1),as={style:{display:"flex",gap:"10px"}};function cs(e,t,s,i,n,r){const c=_("router-link"),u=_("ResourcePostCard");return l(),a(A,null,[o("div",Qe,[o("div",Xe,[o("div",ts,[o("div",es,[E(c,{to:"/resources/add/"+s.skillId,class:"btn primary-btn",role:"button"},{default:x(()=>[S("Add source   "),ss]),_:1},8,["to"])])])])]),o("div",is,[(l(!0),a(A,null,V(r.orderedAndNamedPosts,g=>(l(),w(u,{post:g,user:s.user},null,8,["post","user"]))),256))]),n.showWarnModal?(l(),a("div",os,[o("div",ns,[o("div",rs,[ls,o("div",as,[o("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=g=>r.deletePost())}," Yes "),o("button",{type:"button",class:"btn btn-dark",onClick:t[1]||(t[1]=g=>n.showWarnModal=!1)}," No ")])])])])):h("",!0)],64)}const hs=O(Ze,[["render",cs]]);const us={props:["post","user"],data(){return{showActionBtns:!1,currentClickId:0,isAlreadyTutoring:this.$parent.isAlreadyTutoring,expandPost:!1,showActionButton:!1,showContactDetails:!1}},mounted(){},computed:{},methods:{showWarningModal(e){this.$parent.showWarningModal(e,"tutorPost")},voteUp(e,t){t?fetch("/tutor-votes/"+this.user.userId+"/"+e+"/edit/cancel",{method:"PUT",headers:{"Content-Type":"content/type"},body:{}}).then(()=>this.$parent.getTutorPostVotes(e)):fetch("/tutor-votes/"+this.user.userId+"/"+e+"/edit/up",{method:"PUT",headers:{"Content-Type":"content/type"},body:{}}).then(()=>this.$parent.getTutorPostVotes(e))},voteDown(e,t){t?fetch("/tutor-votes/"+this.user.userId+"/"+e+"/edit/cancel",{method:"PUT",headers:{"Content-Type":"content/type"},body:{}}).then(()=>this.$parent.getTutorPostVotes(e)):fetch("/tutor-votes/"+this.user.userId+"/"+e+"/edit/down",{method:"PUT",headers:{"Content-Type":"content/type"},body:{}}).then(()=>this.$parent.getTutorPostVotes(e))},handleOpenFlagModal(e){this.$parent.handleOpenFlagModal(e,"tutor_post")},deleteTutorPost(e){this.$parent.deleteTutorPost(e,"tutorPost")},toPlainText(e){return e==null?void 0:e.replace(/<\/?[^>]+(>|$)/g,"")},showContactAdviceModal(){this.showContactDetails=!this.showContactDetails,document.getElementById("myModal").addEventListener("click",e=>{e.target.classList.contains("modal-content")||(this.showContactDetails=!1)}),document.getElementById("modal-content").addEventListener("click",function(e){e.stopPropagation()},!1)}}},D=e=>(z("data-v-ff392076"),e=e(),H(),e),ds={class:"d-flex justify-content-center ms-3 ms-md-0 tutor-avatar-div"},ps=["src"],fs={class:"d-flex flex-column w-100"},gs={class:"d-flex flex-row justify-content-between"},ms={class:"tutor-user-name text-capitalize"},_s=D(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",heigh:"15",width:"15",fill:"grey"},[o("path",{d:"M201.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 205.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"})],-1)),ys=[_s],ws={class:"d-flex mt-4 tutor-post"},vs=D(()=>o("span",{class:"cover-letter-word"},"cover letter - ",-1)),ks={key:0,class:"d-flex flex-column"},bs=["innerHTML"],Ts={class:"d-flex align-items-center justify-content-end mt-3"},Cs={class:"first-post-row"},Ss={class:"d-flex flex-row justify-content-end gap-1"},xs={key:0,width:"34",height:"27",fill:"#36c1af",class:"vote-icon upvote-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Ls=D(()=>o("path",{d:"M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10M1,21H5V9H1V21Z"},null,-1)),As=[Ls],Ms={key:1,width:"34",height:"27",fill:"#36c1af",class:"vote-icon upvote-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Is=D(()=>o("path",{d:"M5,9V21H1V9H5M9,21A2,2 0 0,1 7,19V9C7,8.45 7.22,7.95 7.59,7.59L14.17,1L15.23,2.06C15.5,2.33 15.67,2.7 15.67,3.11L15.64,3.43L14.69,8H21C22.11,8 23,8.9 23,10V12C23,12.26 22.95,12.5 22.86,12.73L19.84,19.78C19.54,20.5 18.83,21 18,21H9M9,19H18.03L21,12V10H12.21L13.34,4.68L9,9.03V19Z"},null,-1)),Ps=[Is],Os={key:0,width:"34",height:"27",fill:"#FC6E68",class:"vote-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Ds=D(()=>o("path",{d:"M19,15H23V3H19M15,3H6C5.17,3 4.46,3.5 4.16,4.22L1.14,11.27C1.05,11.5 1,11.74 1,12V14A2,2 0 0,0 3,16H9.31L8.36,20.57C8.34,20.67 8.33,20.77 8.33,20.88C8.33,21.3 8.5,21.67 8.77,21.94L9.83,23L16.41,16.41C16.78,16.05 17,15.55 17,15V5C17,3.89 16.1,3 15,3Z"},null,-1)),Bs=[Ds],Es={key:1,width:"34",height:"27",fill:"#FC6E68",class:"vote-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Rs=D(()=>o("path",{d:"M19,15V3H23V15H19M15,3A2,2 0 0,1 17,5V15C17,15.55 16.78,16.05 16.41,16.41L9.83,23L8.77,21.94C8.5,21.67 8.33,21.3 8.33,20.88L8.36,20.57L9.31,16H3C1.89,16 1,15.1 1,14V12C1,11.74 1.05,11.5 1.14,11.27L4.16,4.22C4.46,3.5 5.17,3 6,3H15M15,5H5.97L3,12V14H11.78L10.65,19.32L15,14.97V5Z"},null,-1)),Vs=[Rs],Ns={class:"position-relative"},zs=D(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"grey",class:"more-icon"},[o("path",{d:"M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"})],-1)),Hs=[zs],js={key:0,class:"action-btns-div"},Fs=D(()=>o("svg",{width:"19",height:"20",viewBox:"0 0 19 20",class:"primary-icon",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M0.75558 19.3181C0.77635 19.5132 0.87137 19.6928 1.02096 19.8198C1.17055 19.9468 1.36325 20.0114 1.55915 20.0002L5.27701 19.8288L0.398438 15.6145L0.75558 19.3181Z"}),o("path",{d:"M11.8467 2.24484L0.801758 15.0315L5.6802 19.2454L16.7251 6.45877L11.8467 2.24484Z",fill:"#857D99"}),o("path",{d:"M18.2555 3.11796L14.934 0.260817C14.832 0.172259 14.7134 0.104756 14.5852 0.0621907C14.4569 0.0196256 14.3215 0.00283902 14.1868 0.0127967C14.052 0.0227543 13.9205 0.0592596 13.7999 0.120212C13.6793 0.181165 13.572 0.265362 13.484 0.36796L12.4805 1.50725L17.359 5.71439L18.3519 4.56082C18.5289 4.35602 18.6181 4.08969 18.6 3.81958C18.582 3.54948 18.4582 3.29738 18.2555 3.11796Z",fill:"#857D99"})],-1)),Us=D(()=>o("svg",{width:"18",height:"18",viewBox:"0 0 20 20",class:"primary-icon",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M0.312625 14.5205L4.83312 9.99999L0.312625 5.49218C0.111396 5.29025 -0.00159545 5.0168 -0.00159545 4.73172C-0.00159545 4.44665 0.111396 4.17319 0.312625 3.97126L3.96282 0.312625C4.16474 0.111396 4.4382 -0.00159545 4.72327 -0.00159545C5.00835 -0.00159545 5.2818 0.111396 5.48373 0.312625L9.99999 4.83312L14.5205 0.312625C14.6204 0.21056 14.7397 0.12947 14.8714 0.0741101C15.003 0.0187502 15.1444 -0.00976563 15.2873 -0.00976562C15.4301 -0.00976563 15.5715 0.0187502 15.7032 0.0741101C15.8349 0.12947 15.9541 0.21056 16.0541 0.312625L19.6874 3.96282C19.8886 4.16474 20.0016 4.4382 20.0016 4.72327C20.0016 5.00835 19.8886 5.2818 19.6874 5.48373L15.1669 9.99999L19.6874 14.5205C19.8883 14.7217 20.0012 14.9944 20.0012 15.2788C20.0012 15.5632 19.8883 15.836 19.6874 16.0372L16.0541 19.6874C15.8529 19.8883 15.5801 20.0012 15.2957 20.0012C15.0113 20.0012 14.7386 19.8883 14.5374 19.6874L9.99999 15.1669L5.49218 19.6874C5.29025 19.8886 5.0168 20.0016 4.73172 20.0016C4.44665 20.0016 4.17319 19.8886 3.97126 19.6874L0.312625 16.0541C0.21056 15.9541 0.12947 15.8349 0.0741101 15.7032C0.0187502 15.5715 -0.00976563 15.4301 -0.00976562 15.2873C-0.00976563 15.1444 0.0187502 15.003 0.0741101 14.8714C0.12947 14.7397 0.21056 14.6204 0.312625 14.5205Z"})],-1)),qs=[Us],$s=["title"],Ws={class:"d-flex flex-row-reverse"},Ks={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",style:{opacity:"0.5"},height:"20",width:"20",class:"primary-icon"},Ys=D(()=>o("path",{d:"M64 32C64 14.3 49.7 0 32 0S0 14.3 0 32V64 368 480c0 17.7 14.3 32 32 32s32-14.3 32-32V352l64.3-16.1c41.1-10.3 84.6-5.5 122.5 13.4c44.2 22.1 95.5 24.8 141.7 7.4l34.7-13c12.5-4.7 20.8-16.6 20.8-30V66.1c0-23-24.2-38-44.8-27.7l-9.6 4.8c-46.3 23.2-100.8 23.2-147.1 0c-35.1-17.6-75.4-22-113.5-12.5L64 48V32z"},null,-1)),Gs=[Ys],Js={id:"myModal",class:"modal"},Zs={id:"modal-content",class:"modal-content contact-modal-content"},Qs=D(()=>o("span",{"aria-hidden":"true"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"25",height:"25"},[o("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z",fill:"black"})])],-1)),Xs=[Qs],ti=["innerHTML"];function ei(e,t,s,i,n,r){const c=_("router-link");return l(),a(A,null,[o("div",Yt(e.$attrs,{class:"tutor d-flex w-100 p-3 flex-column flex-lg-row mt-4"}),[o("div",ds,[o("img",{src:s.post.avatar,class:"tutor-img rounded",alt:"user avatar"},null,8,ps)]),o("div",fs,[o("div",gs,[o("div",ms,b(s.post.username),1),o("div",{"b-on-hover":"",title:"expand cover letter",style:{cursor:"pointer"},onClick:t[0]||(t[0]=u=>n.expandPost=!n.expandPost),class:v([n.expandPost?"arrow-up":"arrow-down"])},ys,2)]),o("div",ws,[n.expandPost?h("",!0):(l(),a("p",{key:0,class:"tutor-post-content","b-on-hover":"",title:"expand this cover letter",onClick:t[1]||(t[1]=u=>n.expandPost=!0)},[vs,S(b(r.toPlainText(s.post.description)),1)])),E(ot,{name:"dropdown"},{default:x(()=>[n.expandPost?(l(),a("div",ks,[o("p",{innerHTML:s.post.description},null,8,bs),o("button",{class:"btn green-btn mt-2 me-0 ms-auto w-auto mb-3",onClick:t[2]||(t[2]=u=>r.showContactAdviceModal())}," Contact details ")])):h("",!0)]),_:1})]),o("div",Ts,[o("div",Cs,[o("div",Ss,[s.post.user_id!=s.user.userId?(l(),a("button",{key:0,class:"vote-btn",onClick:t[3]||(t[3]=u=>r.voteUp(s.post.id,s.post.userUpVote,s.post.type)),"b-tooltip.hover":"",title:"I Vote This User "},[s.post.userUpVote?(l(),a("svg",xs,As)):(l(),a("svg",Ms,Ps))])):h("",!0),o("span",{"b-on-hover":"",title:"number of votes this tutor post received",class:v({"text-danger":s.post.voteCount<0,"primary-color":s.post.voteCount>0,"vote-count":!0})},b(s.post.voteCount),3),s.post.user_id!=s.user.userId?(l(),a("button",{key:1,class:"vote-btn","b-tooltip.hover":"",title:"I Dislike This ",onClick:t[4]||(t[4]=u=>r.voteDown(s.post.id,s.post.userDownVote,s.post.type))},[s.post.userDownVote?(l(),a("svg",Os,Bs)):(l(),a("svg",Es,Vs))])):h("",!0),o("div",Ns,[o("button",{class:"toggle-actions-bnt",onClick:t[5]||(t[5]=u=>n.showActionBtns=!n.showActionBtns),"b-tooltip.hover":"",title:"More Actions For This Tutor Offer"},Hs),E(ot,{name:"dropdown"},{default:x(()=>[n.showActionBtns?(l(),a("div",js,[s.post.user_id==s.user.userId||s.user.role=="admin"||s.user.role=="editor"?(l(),w(c,{key:0,to:"/tutor/edit/"+s.post.id,class:"btn dropdown-btn",role:"button","b-tooltip.hover":"",title:"Edit This Tutor Post"},{default:x(()=>[Fs]),_:1},8,["to"])):h("",!0),s.post.user_id==s.user.userId||s.user.role=="admin"||s.user.role=="editor"?(l(),a("button",{key:1,"b-tooltip.hover":"",title:"'Delete This Tutor Post'",type:"button",class:"btn dropdown-btn",onClick:t[6]||(t[6]=u=>r.showWarningModal(s.post))},qs)):h("",!0),o("button",{"b-tooltip.hover":"",title:s.post.type!="tutor"?"Flag This Source For Review":"Flag This Tutor Post For Review",type:"button",class:"btn dropdown-btn",onClick:t[7]||(t[7]=u=>r.handleOpenFlagModal(s.post.id,s.post.type))},[o("div",Ws,[(l(),a("svg",Ks,Gs))])],8,$s)])):h("",!0)]),_:1})])])])])])],16),$(o("div",null,[o("div",Js,[o("div",Zs,[o("button",{type:"button",class:"close closeBtn",onClick:t[8]||(t[8]=u=>r.showContactAdviceModal()),"aria-label":"Close"},Xs),o("div",{innerHTML:s.post.contact_preference},null,8,ti)])])],512),[[Gt,n.showContactDetails]])],64)}const It=O(us,[["render",ei],["__scopeId","data-v-ff392076"]]);const si={props:["tutorPosts","user","skillId"],data(){return{showWarnModal:!1,currentPost:null,isLoading:!0,isAlreadyTutoring:!1}},mounted(){},components:{TutorPostCard:It},computed:{orderedAndNamedPosts(){var e=this.tutorPosts.sort((t,s)=>s.voteCount===t.voteCount?new Date(s.created_at)-new Date(t.created_at):s.voteCount-t.voteCount);for(let t=0;t<e.length;t++)e[t].user_id==this.user.userId&&(this.isAlreadyTutoring=!0);return this.isLoading=!1,e}},methods:{showWarningModal(e){this.currentPost=e,this.showWarnModal=!0},getTutorPostVotes(e){this.$parent.getTutorPostVotes(e)},handleOpenFlagModal(e){this.$parent.flagPost=e,this.$parent.showFlaggingModal=!0,this.showActionBtns=!1,this.$parent.flagType="tutor_post"},handleExpandPost(e){this.expandPostId!==1/0?this.expandPostId=1/0:this.expandPostId=e},deleteTutorPost(e){this.$parent.deleteTutorPost(e),this.isAlreadyTutoring=!1,this.showWarnModal=!1},toPlainText(e){return e.replace(/<\/?[^>]+(>|$)/g,"")}}},ii={class:"d-flex flex-column flex-md-row justify-content-between my-4"},oi={class:"ms-0 me-auto ms-lg-auto me-lg-0"},ni={key:0,class:"d-flex flex-column align-items-baseline"},ri=o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"20"},[o("path",{d:"M32 32C32 14.3 46.3 0 64 0S96 14.3 96 32V240H32V32zM224 192c0-17.7 14.3-32 32-32s32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V192zm-64-64c17.7 0 32 14.3 32 32v48c0 17.7-14.3 32-32 32s-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm160 96c0-17.7 14.3-32 32-32s32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V224zm-96 88l0-.6c9.4 5.4 20.3 8.6 32 8.6c13.2 0 25.4-4 35.6-10.8c8.7 24.9 32.5 42.8 60.4 42.8c11.7 0 22.6-3.1 32-8.6V352c0 88.4-71.6 160-160 160H162.3c-42.4 0-83.1-16.9-113.1-46.9L37.5 453.5C13.5 429.5 0 396.9 0 363V336c0-35.3 28.7-64 64-64h88c22.1 0 40 17.9 40 40s-17.9 40-40 40H96c-8.8 0-16 7.2-16 16s7.2 16 16 16h56c39.8 0 72-32.2 72-72z",fill:"white"})],-1),li={id:""},ai={key:0},ci={id:"myModal",class:"modal"},hi={class:"modal-content"},ui=o("p",null,"Are you sure you want to remove this offer?",-1),di={style:{display:"flex",gap:"10px"}};function pi(e,t,s,i,n,r){const c=_("router-link"),u=_("TutorPostCard");return l(),a(A,null,[o("div",ii,[o("div",oi,[n.isLoading==!1?(l(),a("div",ni,[s.user.role=="student"&&n.isAlreadyTutoring==!1?(l(),w(c,{key:0,to:"/tutor/add/"+s.skillId,class:"btn primary-btn mt-2",role:"button"},{default:x(()=>[S("Offer to tutor  "),ri]),_:1},8,["to"])):h("",!0)])):h("",!0)])]),o("div",li,[(l(!0),a(A,null,V(r.orderedAndNamedPosts,g=>(l(),w(u,{post:g,user:s.user},null,8,["post","user"]))),256))]),n.showWarnModal?(l(),a("div",ai,[o("div",ci,[o("div",hi,[ui,o("div",di,[o("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=g=>r.deleteTutorPost(n.currentPost))}," Yes "),o("button",{type:"button",class:"btn btn-dark",onClick:t[1]||(t[1]=g=>n.showWarnModal=!1)}," No ")])])])])):h("",!0)],64)}const fi=O(si,[["render",pi]]);const gi={setup(){return{sessionDetailsStore:pt()}},emits:["progressTutorial"],props:["posts","user","skillId","showTutorialTip10","userRole"],data(){return{showActionBtns:!1,currentClickId:0,isAlreadyTutoring:this.$parent.isAlreadyTutoring,showWarnModal:!1,currentPost:null,warnText:"",deletePostType:"",isLoading:!0,isAlreadyTutoring:!1}},components:{TutorPostCard:It,ResourcePostCard:Mt},mounted(){this.showTutorialTip10&&this.scrollToTooltip()},watch:{showTutorialTip10(e){e&&this.$nextTick(()=>{this.scrollToTooltip()})}},computed:{orderedAndNamedPosts(){var e=this.posts.sort((t,s)=>s.voteCount===t.voteCount?new Date(s.created_at)-new Date(t.created_at):s.voteCount-t.voteCount);for(let t=0;t<this.posts.length;t++)this.posts[t].type=="tutor-post"&&e[t].user_id==this.sessionDetailsStore.userId&&(this.isAlreadyTutoring=!0);return this.isLoading=!1,e},tutorialTipContent(){return this.userRole==="editor"||this.userRole==="instructor"?"You can also share resources that you have personally used to learn about this topic. Your contributions can help others in their learning journey.":"You can also volunteer to tutor others on this subject and share resources you, personally, have used to learn about this topic"}},methods:{deletePost(e,t){switch(this.deletePostType){case"tutorPost":this.$parent.deleteTutorPost(this.currentPost),this.isAlreadyTutoring=!1;break;default:this.$parent.deletePost(this.currentPost);break}this.showWarnModal=!1},showWarningModal(e,t){switch(t){case"tutorPost":this.warnText="Are you sure you want to remove this tutor offer?",this.deletePostType="tutorPost";break;default:this.deletePostType="resource",this.warnText="Are you sure you want to delete this source?";break}this.currentPost=e,this.showWarnModal=!0},handleOpenFlagModal(e,t){this.$parent.flagPost=e,this.$parent.showFlaggingModal=!0,this.showActionBtns=!1,this.$parent.flagType=t},getSourceVotes(e){this.$parent.getSourceVotes(e)},getTutorPostVotes(e){this.$parent.getTutorPostVotes(e)},scrollToTooltip(){this.$nextTick(()=>{var e;(e=this.$refs.tutorialTip10)==null||e.scrollIntoView({behavior:"smooth",block:"center"})})}}},Pt=e=>(z("data-v-acf460da"),e=e(),H(),e),mi={key:0,class:"d-flex flex-column mt-4"},_i={class:"d-flex flex-column w-100"},yi={class:"d-flex justify-content-xl-end justify-content-between"},wi=Pt(()=>o("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M6.34811 20.0423L6.34811 13.6494L-0.0358702 13.6583C-0.320945 13.6579 -0.594203 13.5444 -0.795782 13.3428C-0.997361 13.1412 -1.11082 12.868 -1.11132 12.5829L-1.11729 7.41477C-1.1168 7.1297 -1.00334 6.85644 -0.801757 6.65486C-0.600179 6.45328 -0.326921 6.33982 -0.0418461 6.33933L6.3481 6.34231L6.3481 -0.0506238C6.34659 -0.193451 6.3736 -0.335145 6.42756 -0.467396C6.48152 -0.599646 6.56134 -0.719794 6.66234 -0.820794C6.76334 -0.921794 6.88349 -1.00161 7.01574 -1.05557C7.14799 -1.10953 7.28969 -1.13655 7.43251 -1.13503L12.5827 -1.12308C12.8678 -1.12259 13.141 -1.00913 13.3426 -0.807549C13.5442 -0.60597 13.6577 -0.332713 13.6582 -0.047637L13.6552 6.34231L20.0481 6.34231C20.3325 6.34248 20.6052 6.45552 20.8063 6.65661C21.0074 6.8577 21.1204 7.13039 21.1206 7.41477L21.1325 12.565C21.1324 12.8494 21.0193 13.122 20.8182 13.3231C20.6171 13.5242 20.3444 13.6373 20.0601 13.6374L13.6552 13.6494L13.6641 20.0334C13.6636 20.3184 13.5502 20.5917 13.3486 20.7933C13.147 20.9948 12.8738 21.1083 12.5887 21.1088L7.43252 21.1267C7.28969 21.1282 7.148 21.1012 7.01575 21.0473C6.88349 20.9933 6.76335 20.9135 6.66235 20.8125C6.56135 20.7115 6.48153 20.5913 6.42757 20.4591C6.37361 20.3268 6.34659 20.1851 6.34811 20.0423Z",fill:"white"})],-1)),vi=Pt(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"20"},[o("path",{d:"M32 32C32 14.3 46.3 0 64 0S96 14.3 96 32V240H32V32zM224 192c0-17.7 14.3-32 32-32s32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V192zm-64-64c17.7 0 32 14.3 32 32v48c0 17.7-14.3 32-32 32s-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm160 96c0-17.7 14.3-32 32-32s32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V224zm-96 88l0-.6c9.4 5.4 20.3 8.6 32 8.6c13.2 0 25.4-4 35.6-10.8c8.7 24.9 32.5 42.8 60.4 42.8c11.7 0 22.6-3.1 32-8.6V352c0 88.4-71.6 160-160 160H162.3c-42.4 0-83.1-16.9-113.1-46.9L37.5 453.5C13.5 429.5 0 396.9 0 363V336c0-35.3 28.7-64 64-64h88c22.1 0 40 17.9 40 40s-17.9 40-40 40H96c-8.8 0-16 7.2-16 16s7.2 16 16 16h56c39.8 0 72-32.2 72-72z",fill:"white"})],-1)),ki={key:0,ref:"tutorialTip10",class:"tool-tip-base d-flex justify-content-end"},bi={class:"explain-tool-tip triangle-top-right hovering-info-panel"},Ti={class:"tool-tip-text"},Ci={id:"posts-big-container"},Si={key:1},xi={id:"myModal",class:"modal"},Li={class:"modal-content"},Ai={style:{display:"flex",gap:"10px"}};function Mi(e,t,s,i,n,r){const c=_("router-link"),u=_("ResourcePostCard"),g=_("TutorPostCard");return l(),a(A,null,[i.sessionDetailsStore.isLoggedIn?(l(),a("div",mi,[o("div",_i,[o("div",yi,[E(c,{to:"/resources/add/"+s.skillId,class:"btn primary-btn me-2",role:"button"},{default:x(()=>[S("Add source   "),wi]),_:1},8,["to"]),s.user.role=="student"&&n.isAlreadyTutoring==!1?(l(),w(c,{key:0,to:"/tutor/add/"+s.skillId,class:"btn primary-btn",role:"button"},{default:x(()=>[S("Offer to tutor   "),vi]),_:1},8,["to"])):h("",!0)]),s.showTutorialTip10?(l(),a("div",ki,[o("div",bi,[o("div",Ti,[o("p",null,b(r.tutorialTipContent),1),o("button",{class:"btn primary-btn",onClick:t[0]||(t[0]=y=>e.$emit("progressTutorial",10))}," Next ")])])],512)):h("",!0)])])):h("",!0),o("div",Ci,[(l(!0),a(A,null,V(r.orderedAndNamedPosts,y=>(l(),a("div",null,[y.type==="source"?(l(),w(u,{key:0,post:y,user:s.user},null,8,["post","user"])):h("",!0),y.type==="tutor-post"?(l(),w(g,{key:1,post:y,user:s.user,class:"my-4"},null,8,["post","user"])):h("",!0)]))),256))]),n.showWarnModal?(l(),a("div",Si,[o("div",xi,[o("div",Li,[o("p",null,b(n.warnText),1),o("div",Ai,[o("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=y=>r.deletePost())}," Yes "),o("button",{type:"button",class:"btn btn-dark",onClick:t[2]||(t[2]=y=>n.showWarnModal=!1)}," No ")])])])])):h("",!0)],64)}const Ii=O(gi,[["render",Mi],["__scopeId","data-v-acf460da"]]);const Pi={setup(){return{userDetailsStore:Q()}},emits:["progressTutorial"],props:["skillId","showTutorialTip10","userRole"],data(){return{sourcePosts:[],tutorPosts:[],user:{},showModal:!1,resourceId:null,showFlaggingModal:!1,flagPost:"",flagType:"",showActionBtns:!1,currentClickId:"",source:null,activeTab:"allPost"}},components:{FlagModals:Lt,ForumResource:hs,ForumTutorPost:fi,ForumAllPost:Ii},computed:{posts(){let e=this.sourcePosts;return e=e.concat(this.tutorPosts),e}},async created(){await this.getUserId(),await this.getSourcePosts(this.skillId);for(let e=0;e<this.sourcePosts.length;e++)await this.getSourceVotes(this.sourcePosts[e].id);if(this.$parent.sessionDetailsStore.isLoggedIn==!0){await this.getTutorPosts(this.skillId);for(let e=0;e<this.tutorPosts.length;e++)await this.getTutorPostVotes(this.tutorPosts[e].id)}},methods:{async getUserId(){fetch("/get-session-details").then(function(e){return e.json()}).then(e=>this.user=e)},async getSourcePosts(e){await fetch("/skills/"+e+"/resources").then(function(t){return t.json()}).then(t=>{t.forEach(function(s){s.type="source"}),this.sourcePosts=t})},async getSourceVotes(e){await fetch("/user-votes/"+e).then(t=>t.json()).then(t=>{var s=t,i=0;let n=!1,r=!1;for(let c=0;c<s.length;c++)s[c].user_id==this.user.userId&&(s[c].vote==1?n=!0:s[c].vote==-1&&(r=!0)),i=i+s[c].vote;for(let c=0;c<this.sourcePosts.length;c++)this.sourcePosts[c].id==e&&(this.sourcePosts[c].voteCount=i,this.sourcePosts[c].userUpVote=n,this.sourcePosts[c].userDownVote=r)})},async getTutorPosts(e){await fetch("/tutor-posts/"+e+"/list").then(function(t){return t.json()}).then(t=>{t.forEach(s=>{s.type="tutor-post",s.contact_preference==null&&(s.contact_preference=s.email)});for(let s=0;s<t.length;s++)t[s].skill_id==this.skillId&&this.tutorPosts.push(t[s])})},async getTutorPostVotes(e){await fetch("/tutor-votes/"+e).then(t=>t.json()).then(t=>{var s=t,i=0;let n=!1,r=!1;for(let c=0;c<s.length;c++)s[c].user_id==this.user.userId&&(s[c].vote==1?n=!0:s[c].vote==-1&&(r=!0)),i=i+s[c].vote;for(let c=0;c<this.tutorPosts.length;c++)this.tutorPosts[c].id==e&&(this.tutorPosts[c].voteCount=i,this.tutorPosts[c].userUpVote=n,this.tutorPosts[c].userDownVote=r)})},deletePost(e){switch(this.showModal=!1,e.type){case"tutor-post":fetch("/tutor-posts/delete/"+e.id,{method:"DELETE"}).then(()=>{this.isAlreadyTutoring=!1}),this.tutorPosts=this.tutorPosts.filter(t=>t.id!==e.id);break;case"source":fetch("/resources/delete/"+e.id,{method:"DELETE"}),this.sourcePosts=this.sourcePosts.filter(t=>t.id!==e.id);break}},deleteTutorPost(e){this.showModal=!1,fetch("/tutor-posts/delete/"+e.id,{method:"DELETE"}).then(()=>{this.getS,this.isAlreadyTutoring=!1}),this.tutorPosts=this.tutorPosts.filter(t=>t.id!=e.id)},showWarningModal(e){this.source=e,this.showModal=!0},closeWarningModal(){this.showModal=!1},handleTabClick(e){switch(e){case"tutorPost":this.activeTab="tutorPost";break;case"resource":this.activeTab="resource";break;default:this.activeTab="allPost";break}}}},Oi=e=>(z("data-v-91a75c9d"),e=e(),H(),e),Di={class:"container-fluid mt-4"},Bi={class:"forum-header"},Ei=Oi(()=>o("h2",{class:"secondary-heading"},"Other Places To Learn This",-1)),Ri={key:0,class:"nav nav-tabs border-3"};function Vi(e,t,s,i,n,r){const c=_("ForumResource"),u=_("ForumTutorPost"),g=_("ForumAllPost"),y=_("FlagModals");return l(),a(A,null,[o("div",Di,[o("div",Bi,[Ei,e.$parent.sessionDetailsStore.isLoggedIn?(l(),a("ul",Ri,[o("li",{"b-on-hover":"",title:"All posts related to this skill",onClick:t[0]||(t[0]=p=>r.handleTabClick("allPost"))},[o("div",{class:v(["nav-link",n.activeTab==="allPost"&&"active"])}," All ",2)]),o("li",{"b-on-hover":"",title:"Only sources",onClick:t[1]||(t[1]=p=>r.handleTabClick("resource"))},[o("div",{class:v(["nav-link",n.activeTab==="resource"&&"active"])}," Sources ",2)]),o("li",{"b-on-hover":"",title:"Only potential tutors",onClick:t[2]||(t[2]=p=>r.handleTabClick("tutorPost"))},[o("div",{class:v(["nav-link",n.activeTab==="tutorPost"&&"active"])}," Tutors ",2)])])):h("",!0)]),n.activeTab==="resource"?(l(),w(c,{key:0,resourcePosts:n.sourcePosts,user:n.user,skillId:s.skillId},null,8,["resourcePosts","user","skillId"])):h("",!0),n.activeTab==="tutorPost"?(l(),w(u,{key:1,tutorPosts:n.tutorPosts,user:n.user,skillId:s.skillId},null,8,["tutorPosts","user","skillId"])):h("",!0),n.activeTab==="allPost"?(l(),w(g,{key:2,posts:r.posts,user:n.user,skillId:s.skillId,showTutorialTip10:s.showTutorialTip10,userRole:i.userDetailsStore.role,onProgressTutorial:t[3]||(t[3]=p=>e.$emit("progressTutorial",p))},null,8,["posts","user","skillId","showTutorialTip10","userRole"])):h("",!0)]),n.showFlaggingModal?(l(),w(y,{key:0,userId:i.userDetailsStore.userId,contentType:n.flagType,contentId:n.flagPost},null,8,["userId","contentType","contentId"])):h("",!0)],64)}const Ni=O(Pi,[["render",Vi],["__scopeId","data-v-91a75c9d"]]);const zi={setup(){},props:["tutorType","skill","skillLevel","learningObjectives","isAITokenLimitReached"],data(){return{constraints:{audio:!0},chunks:[],micAllowed:!1,mediaRecorder:{},recording:!1,isLoading:!1}},methods:{allowMic(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia(this.constraints).then(e=>{this.mediaRecorder=new MediaRecorder(e),this.micAllowed=!0})},recordSpeech(){this.recording==!1?(this.mediaRecorder.start(),this.recording=!0):(this.mediaRecorder.stop(),this.recording=!1,this.isLoading=!0,this.mediaRecorder.ondataavailable=e=>{this.chunks.push(e.data);const t=new Blob(this.chunks,{type:"audio/webm; codecs=opus"});this.chunks=[];var s=new FileReader;s.readAsDataURL(t),s.onloadend=()=>{var i=s.result;this.sendAudioDataToServer(i)}})},async sendAudioDataToServer(e){try{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({skillUrl:this.skill.url,skillName:this.skill.name,skillLevel:this.englishSkillLevel,learningObjectives:this.learningObjectives,audioData:e,tutorType:this.tutorType})};let i=await fetch("/ai-tutor/stt/convert",t);if(this.isLoading=!1,this.$parent.getChatHistory(),i.status===500){alert("The tutor can`t answer !!"),this.waitForAIresponse=!1;return}}catch(t){console.error(t)}}}},Ot=e=>(z("data-v-28841a33"),e=e(),H(),e),Hi={class:"d-flex justify-content-end"},ji=["disabled"],Fi={key:0},Ui=Ot(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18",fill:"black"},[o("path",{d:"M192 0C139 0 96 43 96 96l0 160c0 53 43 96 96 96s96-43 96-96l0-160c0-53-43-96-96-96zM64 216c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c0 89.1 66.2 162.7 152 174.4l0 33.6-48 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l72 0 72 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-48 0 0-33.6c85.8-11.7 152-85.3 152-174.4l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c0 70.7-57.3 128-128 128s-128-57.3-128-128l0-40z"})],-1)),qi=[Ui],$i={key:1},Wi={key:2,class:"d-flex"},Ki=Ot(()=>o("span",{class:"speech-loader"},null,-1)),Yi=[Ki];function Gi(e,t,s,i,n,r){return l(),a("span",Hi,[o("span",null,[n.micAllowed?(l(),a("button",{key:1,class:v(["btn",{recording:n.recording==!0,"loader-background":n.isLoading==!0}]),onClick:t[1]||(t[1]=c=>r.recordSpeech()),disabled:s.isAITokenLimitReached},[!n.recording&&!n.isLoading?(l(),a("span",Fi,qi)):n.recording?(l(),a("span",$i,"send")):n.isLoading?(l(),a("div",Wi,Yi)):h("",!0)],10,ji)):(l(),a("button",{key:0,class:"btn",onClick:t[0]||(t[0]=c=>r.allowMic())}," allow microphone "))])])}const Ji=O(zi,[["render",Gi],["__scopeId","data-v-28841a33"]]),R=Object.create(null);R.open="0";R.close="1";R.ping="2";R.pong="3";R.message="4";R.upgrade="5";R.noop="6";const Y=Object.create(null);Object.keys(R).forEach(e=>{Y[R[e]]=e});const lt={type:"error",data:"parser error"},Dt=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Bt=typeof ArrayBuffer=="function",Et=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ft=({type:e,data:t},s,i)=>Dt&&t instanceof Blob?s?i(t):vt(t,i):Bt&&(t instanceof ArrayBuffer||Et(t))?s?i(t):vt(new Blob([t]),i):i(R[e]+(t||"")),vt=(e,t)=>{const s=new FileReader;return s.onload=function(){const i=s.result.split(",")[1];t("b"+(i||""))},s.readAsDataURL(e)};function kt(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let et;function Zi(e,t){if(Dt&&e.data instanceof Blob)return e.data.arrayBuffer().then(kt).then(t);if(Bt&&(e.data instanceof ArrayBuffer||Et(e.data)))return t(kt(e.data));ft(e,!1,s=>{et||(et=new TextEncoder),t(et.encode(s))})}const bt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<bt.length;e++)q[bt.charCodeAt(e)]=e;const Qi=e=>{let t=e.length*.75,s=e.length,i,n=0,r,c,u,g;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const y=new ArrayBuffer(t),p=new Uint8Array(y);for(i=0;i<s;i+=4)r=q[e.charCodeAt(i)],c=q[e.charCodeAt(i+1)],u=q[e.charCodeAt(i+2)],g=q[e.charCodeAt(i+3)],p[n++]=r<<2|c>>4,p[n++]=(c&15)<<4|u>>2,p[n++]=(u&3)<<6|g&63;return y},Xi=typeof ArrayBuffer=="function",gt=(e,t)=>{if(typeof e!="string")return{type:"message",data:Rt(e,t)};const s=e.charAt(0);return s==="b"?{type:"message",data:to(e.substring(1),t)}:Y[s]?e.length>1?{type:Y[s],data:e.substring(1)}:{type:Y[s]}:lt},to=(e,t)=>{if(Xi){const s=Qi(e);return Rt(s,t)}else return{base64:!0,data:e}},Rt=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Vt=String.fromCharCode(30),eo=(e,t)=>{const s=e.length,i=new Array(s);let n=0;e.forEach((r,c)=>{ft(r,!1,u=>{i[c]=u,++n===s&&t(i.join(Vt))})})},so=(e,t)=>{const s=e.split(Vt),i=[];for(let n=0;n<s.length;n++){const r=gt(s[n],t);if(i.push(r),r.type==="error")break}return i};function io(){return new TransformStream({transform(e,t){Zi(e,s=>{const i=s.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const r=new DataView(n.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{n=new Uint8Array(9);const r=new DataView(n.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(s)})}})}let st;function W(e){return e.reduce((t,s)=>t+s.length,0)}function K(e,t){if(e[0].length===t)return e.shift();const s=new Uint8Array(t);let i=0;for(let n=0;n<t;n++)s[n]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),s}function oo(e,t){st||(st=new TextDecoder);const s=[];let i=0,n=-1,r=!1;return new TransformStream({transform(c,u){for(s.push(c);;){if(i===0){if(W(s)<1)break;const g=K(s,1);r=(g[0]&128)===128,n=g[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(W(s)<2)break;const g=K(s,2);n=new DataView(g.buffer,g.byteOffset,g.length).getUint16(0),i=3}else if(i===2){if(W(s)<8)break;const g=K(s,8),y=new DataView(g.buffer,g.byteOffset,g.length),p=y.getUint32(0);if(p>Math.pow(2,53-32)-1){u.enqueue(lt);break}n=p*Math.pow(2,32)+y.getUint32(4),i=3}else{if(W(s)<n)break;const g=K(s,n);u.enqueue(gt(r?g:st.decode(g),t)),i=0}if(n===0||n>e){u.enqueue(lt);break}}}})}const Nt=4;function k(e){if(e)return no(e)}function no(e){for(var t in k.prototype)e[t]=k.prototype[t];return e}k.prototype.on=k.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};k.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this};k.prototype.off=k.prototype.removeListener=k.prototype.removeAllListeners=k.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+e];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,n=0;n<s.length;n++)if(i=s[n],i===t||i.fn===t){s.splice(n,1);break}return s.length===0&&delete this._callbacks["$"+e],this};k.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(s){s=s.slice(0);for(var i=0,n=s.length;i<n;++i)s[i].apply(this,t)}return this};k.prototype.emitReserved=k.prototype.emit;k.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};k.prototype.hasListeners=function(e){return!!this.listeners(e).length};const X=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,s)=>s(t,0))(),M=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),ro="arraybuffer";function zt(e,...t){return t.reduce((s,i)=>(e.hasOwnProperty(i)&&(s[i]=e[i]),s),{})}const lo=M.setTimeout,ao=M.clearTimeout;function tt(e,t){t.useNativeTimers?(e.setTimeoutFn=lo.bind(M),e.clearTimeoutFn=ao.bind(M)):(e.setTimeoutFn=M.setTimeout.bind(M),e.clearTimeoutFn=M.clearTimeout.bind(M))}const co=1.33;function ho(e){return typeof e=="string"?uo(e):Math.ceil((e.byteLength||e.size)*co)}function uo(e){let t=0,s=0;for(let i=0,n=e.length;i<n;i++)t=e.charCodeAt(i),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(i++,s+=4);return s}function Ht(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function po(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}function fo(e){let t={},s=e.split("&");for(let i=0,n=s.length;i<n;i++){let r=s[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class go extends Error{constructor(t,s,i){super(t),this.description=s,this.context=i,this.type="TransportError"}}class mt extends k{constructor(t){super(),this.writable=!1,tt(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,s,i){return super.emitReserved("error",new go(t,s,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const s=gt(t,this.socket.binaryType);this.onPacket(s)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,s={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const s=po(t);return s.length?"?"+s:""}}class mo extends mt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const s=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||s()})),this.writable||(i++,this.once("drain",function(){--i||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const s=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};so(t,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,eo(t,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=Ht()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(t,s)}}let jt=!1;try{jt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const _o=jt;function yo(){}class wo extends mo{constructor(t){if(super(t),typeof location<"u"){const s=location.protocol==="https:";let i=location.port;i||(i=s?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,s){const i=this.request({method:"POST",data:t});i.on("success",s),i.on("error",(n,r)=>{this.onError("xhr post error",n,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(s,i)=>{this.onError("xhr poll error",s,i)}),this.pollXhr=t}}class B extends k{constructor(t,s,i){super(),this.createRequest=t,tt(this,i),this._opts=i,this._method=i.method||"GET",this._uri=s,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const s=zt(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(s);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=B.requestsCount++,B.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=yo,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete B.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}B.requestsCount=0;B.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Tt);else if(typeof addEventListener=="function"){const e="onpagehide"in M?"pagehide":"unload";addEventListener(e,Tt,!1)}}function Tt(){for(let e in B.requests)B.requests.hasOwnProperty(e)&&B.requests[e].abort()}const vo=function(){const e=Ft({xdomain:!1});return e&&e.responseType!==null}();class ko extends wo{constructor(t){super(t);const s=t&&t.forceBase64;this.supportsBinary=vo&&!s}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new B(Ft,this.uri(),t)}}function Ft(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||_o))return new XMLHttpRequest}catch{}if(!t)try{return new M[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ut=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class bo extends mt{get name(){return"websocket"}doOpen(){const t=this.uri(),s=this.opts.protocols,i=Ut?{}:zt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,s,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const i=t[s],n=s===t.length-1;ft(i,this.supportsBinary,r=>{try{this.doWrite(i,r)}catch{}n&&X(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=Ht()),this.supportsBinary||(s.b64=1),this.createUri(t,s)}}const it=M.WebSocket||M.MozWebSocket;class To extends bo{createSocket(t,s,i){return Ut?new it(t,s,i):s?new it(t,s):new it(t)}doWrite(t,s){this.ws.send(s)}}class Co extends mt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const s=oo(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(s).getReader(),n=io();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const r=()=>{i.read().then(({done:u,value:g})=>{u||(this.onPacket(g),r())}).catch(u=>{})};r();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const i=t[s],n=s===t.length-1;this._writer.write(i).then(()=>{n&&X(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const So={websocket:To,webtransport:Co,polling:ko},xo=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Lo=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function at(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),i=e.indexOf("]");s!=-1&&i!=-1&&(e=e.substring(0,s)+e.substring(s,i).replace(/:/g,";")+e.substring(i,e.length));let n=xo.exec(e||""),r={},c=14;for(;c--;)r[Lo[c]]=n[c]||"";return s!=-1&&i!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=Ao(r,r.path),r.queryKey=Mo(r,r.query),r}function Ao(e,t){const s=/\/{2,9}/g,i=t.replace(s,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Mo(e,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,r){n&&(s[n]=r)}),s}const ct=typeof addEventListener=="function"&&typeof removeEventListener=="function",G=[];ct&&addEventListener("offline",()=>{G.forEach(e=>e())},!1);class N extends k{constructor(t,s){if(super(),this.binaryType=ro,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(s=t,t=null),t){const i=at(t);s.hostname=i.host,s.secure=i.protocol==="https"||i.protocol==="wss",s.port=i.port,i.query&&(s.query=i.query)}else s.host&&(s.hostname=at(s.host).host);tt(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=fo(this.opts.query)),ct&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},G.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const s=Object.assign({},this.opts.query);s.EIO=Nt,s.transport=t,this.id&&(s.sid=this.id);const i=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&N.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(t);s.open(),this.setTransport(s)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",N.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=t.data,this._onError(s);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(s+=ho(n)),i>0&&s>this._maxPayload)return this.writeBuffer.slice(0,i);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,X(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,s,i){return this._sendPacket("message",t,s,i),this}send(t,s,i){return this._sendPacket("message",t,s,i),this}_sendPacket(t,s,i,n){if(typeof s=="function"&&(n=s,s=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:t,data:s,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),t()},i=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if(N.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ct&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=G.indexOf(this._offlineEventListener);i!==-1&&G.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,s),this.writeBuffer=[],this._prevBufferLen=0}}}N.protocol=Nt;class Io extends N{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let s=this.createTransport(t),i=!1;N.priorWebsocketSuccess=!1;const n=()=>{i||(s.send([{type:"ping",data:"probe"}]),s.once("packet",C=>{if(!i)if(C.type==="pong"&&C.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;N.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(p(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=s.name,this.emitReserved("upgradeError",d)}}))};function r(){i||(i=!0,p(),s.close(),s=null)}const c=C=>{const d=new Error("probe error: "+C);d.transport=s.name,r(),this.emitReserved("upgradeError",d)};function u(){c("transport closed")}function g(){c("socket closed")}function y(C){s&&C.name!==s.name&&r()}const p=()=>{s.removeListener("open",n),s.removeListener("error",c),s.removeListener("close",u),this.off("close",g),this.off("upgrading",y)};s.once("open",n),s.once("error",c),s.once("close",u),this.once("close",g),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||s.open()},200):s.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const s=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&s.push(t[i]);return s}}let Po=class extends Io{constructor(t,s={}){const i=typeof t=="object"?t:s;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>So[n]).filter(n=>!!n)),super(t,i)}};function Oo(e,t="",s){let i=e;s=s||typeof location<"u"&&location,e==null&&(e=s.protocol+"//"+s.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=s.protocol+e:e=s.host+e),/^(https?|wss?):\/\//.test(e)||(typeof s<"u"?e=s.protocol+"//"+e:e="https://"+e),i=at(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(s&&s.port===i.port?"":":"+i.port),i}const Do=typeof ArrayBuffer=="function",Bo=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,qt=Object.prototype.toString,Eo=typeof Blob=="function"||typeof Blob<"u"&&qt.call(Blob)==="[object BlobConstructor]",Ro=typeof File=="function"||typeof File<"u"&&qt.call(File)==="[object FileConstructor]";function _t(e){return Do&&(e instanceof ArrayBuffer||Bo(e))||Eo&&e instanceof Blob||Ro&&e instanceof File}function J(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let s=0,i=e.length;s<i;s++)if(J(e[s]))return!0;return!1}if(_t(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return J(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&J(e[s]))return!0;return!1}function Vo(e){const t=[],s=e.data,i=e;return i.data=ht(s,t),i.attachments=t.length,{packet:i,buffers:t}}function ht(e,t){if(!e)return e;if(_t(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}else if(Array.isArray(e)){const s=new Array(e.length);for(let i=0;i<e.length;i++)s[i]=ht(e[i],t);return s}else if(typeof e=="object"&&!(e instanceof Date)){const s={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=ht(e[i],t));return s}return e}function No(e,t){return e.data=ut(e.data,t),delete e.attachments,e}function ut(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=ut(e[s],t);else if(typeof e=="object")for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=ut(e[s],t));return e}const zo=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ho=5;var m;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(m||(m={}));class jo{constructor(t){this.replacer=t}encode(t){return(t.type===m.EVENT||t.type===m.ACK)&&J(t)?this.encodeAsBinary({type:t.type===m.EVENT?m.BINARY_EVENT:m.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let s=""+t.type;return(t.type===m.BINARY_EVENT||t.type===m.BINARY_ACK)&&(s+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(s+=t.nsp+","),t.id!=null&&(s+=t.id),t.data!=null&&(s+=JSON.stringify(t.data,this.replacer)),s}encodeAsBinary(t){const s=Vo(t),i=this.encodeAsString(s.packet),n=s.buffers;return n.unshift(i),n}}function Ct(e){return Object.prototype.toString.call(e)==="[object Object]"}class yt extends k{constructor(t){super(),this.reviver=t}add(t){let s;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(t);const i=s.type===m.BINARY_EVENT;i||s.type===m.BINARY_ACK?(s.type=i?m.EVENT:m.ACK,this.reconstructor=new Fo(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(_t(t)||t.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(t),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let s=0;const i={type:Number(t.charAt(0))};if(m[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===m.BINARY_EVENT||i.type===m.BINARY_ACK){const r=s+1;for(;t.charAt(++s)!=="-"&&s!=t.length;);const c=t.substring(r,s);if(c!=Number(c)||t.charAt(s)!=="-")throw new Error("Illegal attachments");i.attachments=Number(c)}if(t.charAt(s+1)==="/"){const r=s+1;for(;++s&&!(t.charAt(s)===","||s===t.length););i.nsp=t.substring(r,s)}else i.nsp="/";const n=t.charAt(s+1);if(n!==""&&Number(n)==n){const r=s+1;for(;++s;){const c=t.charAt(s);if(c==null||Number(c)!=c){--s;break}if(s===t.length)break}i.id=Number(t.substring(r,s+1))}if(t.charAt(++s)){const r=this.tryParse(t.substr(s));if(yt.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,s){switch(t){case m.CONNECT:return Ct(s);case m.DISCONNECT:return s===void 0;case m.CONNECT_ERROR:return typeof s=="string"||Ct(s);case m.EVENT:case m.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&zo.indexOf(s[0])===-1);case m.ACK:case m.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Fo{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const s=No(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Uo=Object.freeze(Object.defineProperty({__proto__:null,Decoder:yt,Encoder:jo,get PacketType(){return m},protocol:Ho},Symbol.toStringTag,{value:"Module"}));function P(e,t,s){return e.on(t,s),function(){e.off(t,s)}}const qo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class $t extends k{constructor(t,s,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=s,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[P(t,"open",this.onopen.bind(this)),P(t,"packet",this.onpacket.bind(this)),P(t,"error",this.onerror.bind(this)),P(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...s){var i,n,r;if(qo.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(s.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const c={type:m.EVENT,data:s};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const p=this.ids++,C=s.pop();this._registerAckCallback(p,C),c.id=p}const u=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,g=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!u||(g?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,s){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=s;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===t&&this.sendBuffer.splice(u,1);s.call(this,new Error("operation has timed out"))},n),c=(...u)=>{this.io.clearTimeoutFn(r),s.apply(this,u)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...s){return new Promise((i,n)=>{const r=(c,u)=>c?n(c):i(u);r.withError=!0,s.push(r),this.emit(t,...s)})}_addToQueue(t){let s;typeof t[t.length-1]=="function"&&(s=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...r)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(n)):(this._queue.shift(),s&&s(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!t||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:m.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case m.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case m.EVENT:case m.BINARY_EVENT:this.onevent(t);break;case m.ACK:case m.BINARY_ACK:this.onack(t);break;case m.DISCONNECT:this.ondisconnect();break;case m.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const s=t.data||[];t.id!=null&&s.push(this.ack(t.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const i of s)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const s=this;let i=!1;return function(...n){i||(i=!0,s.packet({type:m.ACK,id:t,data:n}))}}onack(t){const s=this.acks[t.id];typeof s=="function"&&(delete this.acks[t.id],s.withError&&t.data.unshift(null),s.apply(this,t.data))}onconnect(t,s){this.id=t,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:m.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const s=this._anyListeners;for(let i=0;i<s.length;i++)if(t===s[i])return s.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const s=this._anyOutgoingListeners;for(let i=0;i<s.length;i++)if(t===s[i])return s.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const i of s)i.apply(this,t.data)}}}function j(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}j.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+s:e-s}return Math.min(e,this.max)|0};j.prototype.reset=function(){this.attempts=0};j.prototype.setMin=function(e){this.ms=e};j.prototype.setMax=function(e){this.max=e};j.prototype.setJitter=function(e){this.jitter=e};class dt extends k{constructor(t,s){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(s=t,t=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,tt(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((i=s.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new j({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=t;const n=s.parser||Uo;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var s;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(s=this.backoff)===null||s===void 0||s.setMin(t),this)}randomizationFactor(t){var s;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(s=this.backoff)===null||s===void 0||s.setJitter(t),this)}reconnectionDelayMax(t){var s;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(s=this.backoff)===null||s===void 0||s.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Po(this.uri,this.opts);const s=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=P(s,"open",function(){i.onopen(),t&&t()}),r=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),t?t(u):this.maybeReconnectOnOpen()},c=P(s,"error",r);if(this._timeout!==!1){const u=this._timeout,g=this.setTimeoutFn(()=>{n(),r(new Error("timeout")),s.close()},u);this.opts.autoUnref&&g.unref(),this.subs.push(()=>{this.clearTimeoutFn(g)})}return this.subs.push(n),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(P(t,"ping",this.onping.bind(this)),P(t,"data",this.ondata.bind(this)),P(t,"error",this.onerror.bind(this)),P(t,"close",this.onclose.bind(this)),P(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(s){this.onclose("parse error",s)}}ondecoded(t){X(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,s){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new $t(this,t,s),this.nsps[t]=i),i}_destroy(t){const s=Object.keys(this.nsps);for(const i of s)if(this.nsps[i].active)return;this._close()}_packet(t){const s=this.encoder.encode(t);for(let i=0;i<s.length;i++)this.engine.write(s[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,s){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},s);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const U={};function Z(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const s=Oo(e,t.path||"/socket.io"),i=s.source,n=s.id,r=s.path,c=U[n]&&r in U[n].nsps,u=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let g;return u?g=new dt(i,t):(U[n]||(U[n]=new dt(i,t)),g=U[n]),s.query&&!t.query&&(t.query=s.queryKey),g.socket(s.path,t)}Object.assign(Z,{Manager:dt,Socket:$t,io:Z,connect:Z});const L=Jt({connected:!1,assistantData:[],streamingMessage:"",isStreaming:!1,isRunJustEnded:!1,isStudentMasteredSkill:!1,streamType:"aiTutor"}),$o=void 0,I=Z($o);I.on("connect",()=>{L.connected=!0,console.log("Connect to server")});I.on("disconnect",()=>{L.connected=!1,console.log("Disconnect from server")});I.on("stream-message",(...e)=>{L.isRunJustEnded=!1,L.isStreaming=!0,L.streamingMessage=L.streamingMessage+e[0].value,L.streamType=e[1]});I.on("run-end",(...e)=>{L.isStreaming=!1,L.isRunJustEnded=!0});const Wo={setup(){const e=Q(),t=St(),s=xt();return{stateOfSocket:L,userDetailsStore:e,userSkillsStore:t,skillTreeStore:s}},props:["skill","showTutorialTip7","showTutorialTip8","showTutorialTip9"],emits:["progressTutorial"],components:{TutorLoadingSymbol:At,TooltipBtn:se,SpeechRecorder:Ji},data(){return{message:"",socraticTutorChatHistory:[],assessingTutorChatHistory:[],transcriptForAssessment:[],chatHistory:[],waitForAIresponse:!1,mode:"big",englishSkillLevel:"",learningObjectives:[],tutorType:"socratic",showChat:!0,isTextToSpeech:!0,threadID:"",audio:null,isAudioPlaying:!1,isSuggestedInteraction:!1,assistantData:{assistantId:null,threadId:null}}},async created(){this.connectToSocketSever()},async mounted(){this.learningObjectives=this.skill.learningObjectives.map(e=>e.objective),this.englishSkillLevel=this.skill.level.replace("_"," "),await this.getChatHistory()},methods:{handleKeyDown(e){e.shiftKey||this.$parent.isAITokenLimitReached||(e.preventDefault(),this.sendMessage())},async changeTutorType(e){this.tutorType=e,await this.getChatHistory(),e=="socratic"?this.chatHistory=this.socraticTutorChatHistory:e=="assessing"&&(this.chatHistory=this.assessingTutorChatHistory),console.log(this.chatHistory)},async getChatHistory(){try{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,skillName:this.skill.name,skillUrl:this.skill.url,skillLevel:this.englishSkillLevel,learningObjectives:this.learningObjectives})};let t="";this.tutorType=="socratic"?t="/ai-tutor/socratic/messages-list":this.tutorType=="assessing"&&(t="/ai-tutor/assessing/messages-list");const i=await(await fetch(t,e)).json();if(this.assistantData.assistantId=i.assistantData.assistantId,this.assistantData.threadId=i.assistantData.threadId,this.tutorType=="socratic")this.socraticTutorChatHistory=i.messages,this.chatHistory=this.socraticTutorChatHistory;else if(this.tutorType=="assessing"){this.assessingTutorChatHistory=i.messages,this.chatHistory=this.assessingTutorChatHistory;let n=0;for(let r=0;r<this.chatHistory.length;r++)this.chatHistory[r].role=="assistant"&&n++;n>9&&n%10==0&&this.assessMastery()}this.chatHistory.length>0&&(this.threadID=this.chatHistory[0].thread_id),this.$parent.checkTokenUsage()}catch(e){console.error(e)}},async generateAudio(e,t){for(let r=0;r<this.chatHistory.length;r++)this.chatHistory[r].index==e&&(this.chatHistory[r].isAudioGenerating=!0);const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,messageNumber:e,threadID:this.threadID})};let i="";this.tutorType=="socratic"?i="/ai-tutor/socratic/generate-tts":i="/ai-tutor/assessing/generate-tts",await(await fetch(i,s)).json();for(let r=0;r<this.chatHistory.length;r++)this.chatHistory[r].index==e&&(this.chatHistory[r].isAudioGenerating=!1,this.chatHistory[r].hasAudio=!0);this.getChatHistory()},playAudio(e){if(this.isAudioPlaying==!0)this.isAudioPlaying=!1,this.audio.pause();else{let t=`https://institute-${this.tutorType}-tutor-tts-urls.s3.us-east-1.amazonaws.com/${this.threadID}-${e}.mp3`;this.audio=new Audio(t),this.isAudioPlaying=!0,this.audio.play()}},async sendMessage(){if(this.waitForAIresponse)return;function e(t){return t===null||t.match(/^ *$/)!==null}if(e(this.message)){this.askQuestion();return}this.waitForAIresponse=!0;try{let t="";this.isSuggestedInteraction==!1&&(t="Please keep all responses succinct."),this.isSuggestedInteraction=!1;let s="new-message";const i={role:"user",content:[{text:{value:this.message}}]};typeof this.chatHistory.length>"u"?(this.chatHistory=[],this.chatHistory.push(i)):this.chatHistory.unshift(i);const n={threadId:this.assistantData.threadId,assistantId:this.assistantData.assistantId,tutorType:this.tutorType,skillName:this.skill.name,skillLevel:this.skillLevel,learningObjectives:this.learningObjectives,responseLength:t,message:this.message,userId:this.userDetailsStore.userId};this.message="",I.emit(s,n)}catch(t){console.error(t),this.waitForAIresponse=!1}},async askQuestion(){if(!this.waitForAIresponse){this.waitForAIresponse=!0;try{let e="ask-question";const t={tutorType:this.tutorType,skillLevel:this.skill.level,learningObjectives:this.learningObjectives,threadId:this.assistantData.threadId,assistantId:this.assistantData.assistantId,message:"",userId:this.userDetailsStore.userId};I.emit(e,t),this.message=""}catch(e){console.error(e),this.waitForAIresponse=!1}}},async assessMastery(){console.log("assess");for(let e=0;e<this.assessingTutorChatHistory.length;e++){let t=this.assessingTutorChatHistory[e];if(t.role=="assistant"){let i={examiner:t.content[0].text.value};this.transcriptForAssessment.push(i)}else if(t.role=="user"){let i={student:t.content[0].text.value};this.transcriptForAssessment.push(i)}}this.transcriptForAssessment=this.transcriptForAssessment.reverse();try{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,skillName:this.skill.name,skillUrl:this.skill.url,skillLevel:this.englishSkillLevel,learningObjectives:this.learningObjectives,transcriptForAssessment:this.transcriptForAssessment})},s=await fetch("/ai-tutor/assessing/assess",e);if(s.status===500)return;(await s.json()).result.result>=70&&this.makeMastered(),this.waitForAIresponse=!1}catch(e){console.error(e),this.waitForAIresponse=!1}},applyMarkDownFormatting(e){return window.markdownit({breaks:!0}).use(window.texmath,{engine:katex,delimiters:["brackets","dollars"],katexOptions:{macros:{"\\RR":"\\mathbb{R}"}}}).render(e)},scrollToMessageInput(){let e=this.$refs.messageInputDiv;e.scrollTop=e.scrollHeight},async makeMastered(){alert("Congratulations, you have mastered this skill!"),await this.userSkillsStore.MakeMastered(this.userDetailsStore.userId,this.skill)},connectToSocketSever(){I.connect()},disconnectToSocketSever(){console.log("disconnect"),I.disconnect()},createChatStream(){console.log("create-stream"),I.emit("create-stream",this.userDetailsStore.userId,this.skill.id,this.skill.name,this.skill.level,this.skill.url,e=>{})},removeStreamMessage(){L.streamType="pause",L.streamingMessage=""}},watch:{stateOfSocket:{async handler(e,t){if(e.streamType==="aiTutor"&&(e.isStreaming&&(this.waitForAIresponse=!1),!e.isStreaming&&e.isRunJustEnded)){const s={role:"assistant",content:[{text:{value:this.stateOfSocket.streamingMessage},type:"text"}]};this.removeStreamMessage(),typeof this.chatHistory.length>"u"?(this.chatHistory=[],this.chatHistory.push(s)):this.chatHistory.unshift(s);let i=this.chatHistory.reverse();for(let n=0;n<i.length;n++)i[n].index=n;this.chatHistory=i.reverse(),this.getChatHistory()}},deep:!0}}},T=e=>(z("data-v-4a59922c"),e=e(),H(),e),Ko={class:"d-flex flex-column flex-md-row gap-2 align-items-baseline mb-1"},Yo={class:"d-flex flex-row w-100 justify-content-between"},Go={class:"d-flex gap-2"},Jo=T(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",class:"primary-icon",width:"17",height:"17"},[o("path",{d:"M32 32C32 14.3 46.3 0 64 0L320 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-29.5 0 11.4 148.2c36.7 19.9 65.7 53.2 79.5 94.7l1 3c3.3 9.8 1.6 20.5-4.4 28.8s-15.7 13.3-26 13.3L32 352c-10.3 0-19.9-4.9-26-13.3s-7.7-19.1-4.4-28.8l1-3c13.8-41.5 42.8-74.8 79.5-94.7L93.5 64 64 64C46.3 64 32 49.7 32 32zM160 384l64 0 0 96c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-96z"})],-1)),Zo=[Jo],Qo=T(()=>o("h2",{class:"secondary-heading"},"AI tutor",-1)),Xo={class:"d-flex gap-2"},tn={tile:"Expand chat component","b-tooltip.hover":""},en=T(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:"25",width:"25",fill:"#5f31dd"},[o("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm11.3-395.3l112 112c4.6 4.6 5.9 11.5 3.5 17.4s-8.3 9.9-14.8 9.9l-64 0 0 96c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-96-64 0c-6.5 0-12.3-3.9-14.8-9.9s-1.1-12.9 3.5-17.4l112-112c6.2-6.2 16.4-6.2 22.6 0z"})],-1)),sn=[en],on={tile:"Hide chat component","b-tooltip.hover":""},nn=T(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"#5f31dd",height:"25",width:"25"},[o("path",{d:"M256 0a256 256 0 1 0 0 512A256 256 0 1 0 256 0zM244.7 395.3l-112-112c-4.6-4.6-5.9-11.5-3.5-17.4s8.3-9.9 14.8-9.9l64 0 0-96c0-17.7 14.3-32 32-32l32 0c17.7 0 32 14.3 32 32l0 96 64 0c6.5 0 12.3 3.9 14.8 9.9s1.1 12.9-3.5 17.4l-112 112c-6.2 6.2-16.4 6.2-22.6 0z"})],-1)),rn=[nn],ln={key:0,class:"tool-tip-base d-flex justify-content-start"},an={class:"explain-tool-tip hovering-info-panel triangle-top-left"},cn={class:"tool-tip-text"},hn=T(()=>o("p",null," The AI Tutor is here to help you master this skill through personalized assistance. You can ask questions, receive explanations, practice concepts, or get guidance at any time during your learning journey. ",-1)),un={key:1,class:"alert alert-warning mt-1",role:"alert"},dn={key:2,class:"d-flex flex-lg-row flex-column justify-content-between"},pn={class:"d-md-inline-block d-flex flex-wrap flex-md-nowrap"},fn={class:"d-inline-block"},gn={key:0},mn={class:"explain-tool-tip hovering-info-panel triangle-top-left"},_n={class:"tool-tip-text"},yn=T(()=>o("p",null," The Socratic Tutor helps you learn through guided questioning. It encourages critical thinking by asking you questions that lead you to discover answers yourself, helping build deeper understanding of concepts. ",-1)),wn={class:"d-inline-block"},vn={key:0},kn={class:"explain-tool-tip hovering-info-panel triangle-top-left"},bn={class:"tool-tip-text"},Tn=T(()=>o("p",null," The Assessment Tutor will judge whether or not you have mastered this skill. ",-1)),Cn={class:"d-inline-block"},Sn={class:"d-flex justify-content-between"},xn={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"18",height:"18"},Ln=T(()=>o("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"},null,-1)),An=[Ln],Mn={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"18",height:"18"},In=T(()=>o("path",{d:"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"},null,-1)),Pn=[In],On={key:3,class:"d-flex mt-1"},Dn={"b-tooltip.hover":"",tile:"send message",class:"d-flex flex-row-reverse"},Bn=["disabled"],En=T(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white"},[o("path",{d:"M256 448c141.4 0 256-93.1 256-208S397.4 32 256 32S0 125.1 0 240c0 45.1 17.7 86.8 47.7 120.9c-1.9 24.5-11.4 46.3-21.4 62.9c-5.5 9.2-11.1 16.6-15.2 21.6c-2.1 2.5-3.7 4.4-4.9 5.7c-.6 .6-1 1.1-1.3 1.4l-.3 .3c0 0 0 0 0 0c0 0 0 0 0 0s0 0 0 0s0 0 0 0c-4.6 4.6-5.9 11.4-3.4 17.4c2.5 6 8.3 9.9 14.8 9.9c28.7 0 57.6-8.9 81.6-19.3c22.9-10 42.4-21.9 54.3-30.6c31.8 11.5 67 17.9 104.1 17.9zM128 208a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 0a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm96 32a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1)),Rn=[En],Vn={key:4,class:"ai-tutor-processing mt-1"},Nn=T(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"18",height:"18",fill:"black"},[o("path",{d:"M320 0c17.7 0 32 14.3 32 32l0 64 120 0c39.8 0 72 32.2 72 72l0 272c0 39.8-32.2 72-72 72l-304 0c-39.8 0-72-32.2-72-72l0-272c0-39.8 32.2-72 72-72l120 0 0-64c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224l16 0 0 192-16 0c-26.5 0-48-21.5-48-48l0-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48l0 96c0 26.5-21.5 48-48 48l-16 0 0-192 16 0z"})],-1)),zn={key:5,class:"d-flex flex-row suggested-interactions-wrapper mt-1 mb-1"},Hn=["disabled"],jn=["disabled"],Fn=["disabled"],Un=["disabled"],qn=["innerHTML"],$n={key:0,class:"d-flex my-3 justify-content-end"},Wn={class:"user-conversation"},Kn={class:"tutor-conversation"},Yn=["innerHTML"],Gn={key:0,class:"d-flex"},Jn=T(()=>o("span",{class:"speech-loader"},null,-1)),Zn=[Jn],Qn=["onClick"],Xn=["onClick"],tr={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"yellow",height:"18",width:"18"},er=T(()=>o("path",{d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c7.6-4.2 16.8-4.1 24.3 .5l144 88c7.1 4.4 11.5 12.1 11.5 20.5s-4.4 16.1-11.5 20.5l-144 88c-7.4 4.5-16.7 4.7-24.3 .5s-12.3-12.2-12.3-20.9l0-176c0-8.7 4.7-16.7 12.3-20.9z"},null,-1)),sr=[er],ir={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"yellow",height:"18",width:"18"},or=T(()=>o("path",{d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm192-96l128 0c17.7 0 32 14.3 32 32l0 128c0 17.7-14.3 32-32 32l-128 0c-17.7 0-32-14.3-32-32l0-128c0-17.7 14.3-32 32-32z"},null,-1)),nr=[or],rr={key:7,class:v("mini-user-chat-div")},lr={"b-tooltip.hover":"",tile:"send message",class:"d-flex flex-row-reverse"},ar=T(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white"},[o("path",{d:"M256 448c141.4 0 256-93.1 256-208S397.4 32 256 32S0 125.1 0 240c0 45.1 17.7 86.8 47.7 120.9c-1.9 24.5-11.4 46.3-21.4 62.9c-5.5 9.2-11.1 16.6-15.2 21.6c-2.1 2.5-3.7 4.4-4.9 5.7c-.6 .6-1 1.1-1.3 1.4l-.3 .3c0 0 0 0 0 0c0 0 0 0 0 0s0 0 0 0s0 0 0 0c-4.6 4.6-5.9 11.4-3.4 17.4c2.5 6 8.3 9.9 14.8 9.9c28.7 0 57.6-8.9 81.6-19.3c22.9-10 42.4-21.9 54.3-30.6c31.8 11.5 67 17.9 104.1 17.9zM128 208a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 0a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm96 32a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1)),cr=[ar],hr=T(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"white",width:"26",height:"26"},[o("path",{d:"M256 448c141.4 0 256-93.1 256-208S397.4 32 256 32S0 125.1 0 240c0 45.1 17.7 86.8 47.7 120.9c-1.9 24.5-11.4 46.3-21.4 62.9c-5.5 9.2-11.1 16.6-15.2 21.6c-2.1 2.5-3.7 4.4-4.9 5.7c-.6 .6-1 1.1-1.3 1.4l-.3 .3c0 0 0 0 0 0c0 0 0 0 0 0s0 0 0 0s0 0 0 0c-4.6 4.6-5.9 11.4-3.4 17.4c2.5 6 8.3 9.9 14.8 9.9c28.7 0 57.6-8.9 81.6-19.3c22.9-10 42.4-21.9 54.3-30.6c31.8 11.5 67 17.9 104.1 17.9zM128 208a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 0a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm96 32a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1)),ur=[hr];function dr(e,t,s,i,n,r){const c=_("TooltipBtn"),u=_("router-link"),g=_("SpeechRecorder"),y=_("TutorLoadingSymbol");return n.mode!=="hide"?(l(),a("div",{key:0,class:v({"container mt-3":n.mode==="big","minimize-chat-container":n.mode==="mini"})},[o("div",Ko,[o("div",Yo,[o("div",Go,[n.mode==="big"?(l(),a("button",{key:0,class:"btn",title:"Minimize and pin the chat","b-tooltip.hover":"",onClick:t[0]||(t[0]=p=>n.mode="mini")},Zo)):h("",!0),Qo,n.mode==="big"?(l(),w(c,{key:1,class:"d-none d-md-block",toolTipText:"Press the 'generate audio' button to hear the tutor speak with AI generated speech.",bubbleWidth:"350px",trianglePosition:"left",absoluteTop:"37px"})):h("",!0),n.mode==="big"?(l(),w(c,{key:2,class:"d-md-none",toolTipText:"Chat with ours AI Tutor about the subjects",bubbleWidth:"100px",trianglePosition:"left",absoluteTop:"37px"})):h("",!0)]),o("div",Xo,[o("div",tn,[n.mode==="mini"?(l(),a("button",{key:0,class:"symbol-btn",onClick:t[1]||(t[1]=p=>n.mode="big")},sn)):h("",!0)]),o("div",on,[n.mode==="mini"?(l(),a("button",{key:0,class:"symbol-btn",onClick:t[2]||(t[2]=p=>n.mode="hide")},rn)):h("",!0)])])])]),i.userDetailsStore.role=="student"&&s.showTutorialTip7?(l(),a("div",ln,[o("div",an,[o("div",cn,[hn,o("button",{class:"btn primary-btn",onClick:t[3]||(t[3]=p=>e.$emit("progressTutorial",7))}," next ")])])])):h("",!0),e.$parent.isAITokenLimitReached?(l(),a("div",un," You have reached your monthly AI token limit. Please recharge your subscription to use more. ")):h("",!0),n.mode==="big"?(l(),a("div",dn,[o("div",pn,[o("div",fn,[o("button",{class:v(["btn suggested-interactions ms-1 socratic-btn",{underline:n.tutorType==="socratic"}]),onClick:t[4]||(t[4]=p=>r.changeTutorType("socratic"))}," Socratic Tutor ",2),i.userDetailsStore.role=="student"&&s.showTutorialTip8?(l(),a("div",gn,[o("div",mn,[o("div",_n,[yn,o("button",{class:"btn primary-btn",onClick:t[5]||(t[5]=p=>e.$emit("progressTutorial",8))}," next ")])])])):h("",!0)]),o("div",wn,[o("button",{class:v(["btn suggested-interactions ms-1 assessing-btn",{underline:n.tutorType==="assessing"}]),onClick:t[6]||(t[6]=p=>r.changeTutorType("assessing"))}," AI Assessor ",2),i.userDetailsStore.role=="student"&&s.showTutorialTip9?(l(),a("div",vn,[o("div",kn,[o("div",bn,[Tn,o("button",{class:"btn primary-btn",onClick:t[7]||(t[7]=p=>e.$emit("progressTutorial",9))}," next ")])])])):h("",!0)]),o("div",Cn,[i.userDetailsStore.role=="student"&&!e.$parent.isMastered&&s.skill.type!="domain"&&s.skill.id?(l(),w(u,{key:0,class:"btn suggested-interactions ms-1 assessing-btn",to:s.skill.id+"/assessment"},{default:x(()=>[S(" Multiple Choice Assessor ")]),_:1},8,["to"])):h("",!0)])]),o("div",Sn,[n.mode=="big"?(l(),w(g,{key:0,tutorType:n.tutorType,skill:s.skill,skillLevel:n.englishSkillLevel,learningObjectives:n.learningObjectives,isAITokenLimitReached:e.$parent.isAITokenLimitReached},null,8,["tutorType","skill","skillLevel","learningObjectives","isAITokenLimitReached"])):h("",!0),o("button",{class:"btn plus-btn ms-1",onClick:t[8]||(t[8]=p=>n.showChat=!n.showChat)},[n.showChat?(l(),a("svg",Mn,Pn)):(l(),a("svg",xn,An))])])])):h("",!0),n.mode==="big"?(l(),a("div",On,[$(o("textarea",{ref:"messageInput",class:"chat-text-area rounded border border-dark me-1","onUpdate:modelValue":t[9]||(t[9]=p=>n.message=p),type:"text",onKeydown:t[10]||(t[10]=rt((...p)=>r.handleKeyDown&&r.handleKeyDown(...p),["enter"]))},`
            `,544),[[nt,n.message]]),o("div",Dn,[o("button",{class:v(["btn send-btn",{"socratic-btn":n.tutorType==="socratic","assessing-btn":n.tutorType==="assessing"}]),onClick:t[11]||(t[11]=p=>r.sendMessage()),disabled:e.$parent.isAITokenLimitReached},Rn,10,Bn)])])):h("",!0),n.waitForAIresponse?(l(),a("div",Vn,[Nn,S(" Thinking "),E(y)])):h("",!0),n.tutorType==="socratic"?(l(),a("span",zn,[o("button",{class:"btn suggested-interactions ms-1 socratic-btn-dark",onClick:t[12]||(t[12]=p=>{this.message="Tell me something interesting about this subject!",this.isSuggestedInteraction=!0,r.sendMessage()}),disabled:e.$parent.isAITokenLimitReached}," Tell me something interesting about this subject! ",8,Hn),o("button",{class:"btn suggested-interactions ms-1 socratic-btn-dark",onClick:t[13]||(t[13]=p=>{this.message="Why does this subject matter?",this.isSuggestedInteraction=!0,r.sendMessage()}),disabled:e.$parent.isAITokenLimitReached}," Why does this subject matter? ",8,jn),o("button",{class:"btn suggested-interactions ms-1 socratic-btn-dark",onClick:t[14]||(t[14]=p=>{this.message="How might I use knowledge of this topic in everyday life?",this.isSuggestedInteraction=!0,r.sendMessage()}),disabled:e.$parent.isAITokenLimitReached}," How might I use knowledge of this topic in everyday life? ",8,Fn),o("button",{class:"btn suggested-interactions ms-1 socratic-btn-dark",onClick:t[15]||(t[15]=p=>{this.message="What is the most important thing for me to understand about this subject?",this.isSuggestedInteraction=!0,r.sendMessage()}),disabled:e.$parent.isAITokenLimitReached}," What is the most important thing for me to understand about this subject? ",8,Un)])):h("",!0),n.showChat?(l(),a("div",{key:6,class:v(["d-flex flex-column mx-auto chat-history",{"chat-history":n.mode==="big","mini-chat-history":n.mode==="mini","socratic-chat":n.tutorType==="socratic","assessing-chat":n.tutorType==="assessing"}]),ref:"messageInputDiv"},[i.stateOfSocket.isStreaming&&i.stateOfSocket.streamType==="aiTutor"?(l(),a("div",{key:0,class:"d-flex my-3 tutor-conversation streamed-message",innerHTML:r.applyMarkDownFormatting(i.stateOfSocket.streamingMessage)},null,8,qn)):h("",!0),(l(!0),a(A,null,V(n.chatHistory,(p,C)=>(l(),a(A,null,[p.role==="user"?(l(),a("div",$n,[o("div",Wn,[o("em",null,b(p.content[0].text.value),1)])])):p.role==="assistant"&&p.content[0].type=="text"?(l(),a("div",{key:1,class:v(["d-flex justify-content-between w-100 my-3",{"message-divider":C!==0,"first-message":C===0,"last-message":C===n.chatHistory.length-1}])},[o("div",Kn,[o("div",{innerHTML:r.applyMarkDownFormatting(p.content[0].text.value)},null,8,Yn)]),p.isAudioGenerating&&p.role==="assistant"?(l(),a("div",Gn,Zn)):!p.hasAudio&&!p.isAudioGenerating&&p.role==="assistant"?(l(),a("button",{key:1,onClick:d=>r.generateAudio(p.index,p.content[0].text.value),class:"btn speechButton"}," generate speech ",8,Qn)):!p.isAudioGenerating&&p.role==="assistant"?(l(),a("button",{key:2,onClick:d=>r.playAudio(p.index),class:"btn speechButton"},[n.isAudioPlaying==!1?(l(),a("svg",tr,sr)):(l(),a("svg",ir,nr))],8,Xn)):h("",!0)],2)):h("",!0)],64))),256))],2)):h("",!0),n.mode==="mini"?(l(),a("div",rr,[$(o("textarea",{ref:"messageInput",class:"chat-text-area","onUpdate:modelValue":t[16]||(t[16]=p=>n.message=p),type:"text",onKeydown:t[17]||(t[17]=rt((...p)=>r.handleKeyDown&&r.handleKeyDown(...p),["enter"]))},`
            `,544),[[nt,n.message]]),o("div",lr,[o("button",{class:"btn primary-btn send-btn",onClick:t[18]||(t[18]=p=>r.sendMessage())},cr)])])):h("",!0)],2)):(l(),a("div",{key:1,class:"hidden-chat-symbol",onClick:t[19]||(t[19]=p=>n.mode="mini")},ur))}const pr=O(Wo,[["render",dr],["__scopeId","data-v-4a59922c"]]);const fr={setup(){return{userDetailsStore:Q(),stateOfSocket:L}},props:["skillName","skillUrl","skillLevel","learningObjective","learningObjectiveId"],components:{TutorLoadingSymbol:At},data(){return{message:"",messageList:[],waitForAIresponse:!1,isGotMessages:!1,englishSkillLevel:"",threadID:"",isAudioPlaying:!1,assistantData:null}},async mounted(){this.englishSkillLevel=this.skillLevel.replace("_"," "),await this.getMessages()},async created(){this.connectToSocketSever()},methods:{handleKeyDown(e){e.shiftKey||(e.preventDefault(),this.sendMessage())},async getMessages(){this.message="";try{const e=`/ai-tutor/learning-objective/messages-list?userId=${encodeURIComponent(this.userDetailsStore.userId)}&learningObjectiveId=${encodeURIComponent(this.learningObjectiveId)}&learningObjective=${encodeURIComponent(this.learningObjective)}&skillLevel=${encodeURIComponent(this.englishSkillLevel)}`,s=await(await fetch(e)).json();this.messageList=s.messages,this.assistantData=s.assistantData,this.isGotMessages=!0,this.messageList.length>0&&(this.threadID=this.messageList[0].thread_id),this.$parent.checkTokenUsage()}catch(e){console.error(e)}},async generateAudio(e,t){for(let c=0;c<this.messageList.length;c++)this.messageList[c].index==e&&(this.messageList[c].isAudioGenerating=!0);const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,messageNumber:e,threadID:this.threadID})},r=await(await fetch("/ai-tutor/learning-objective/generate-tts",s)).json();console.log(r.status);for(let c=0;c<this.messageList.length;c++)this.messageList[c].index==e&&(this.messageList[c].isAudioGenerating=!1,this.messageList[c].hasAudio=!0);this.getMessages()},playAudio(e){if(this.isAudioPlaying==!0)this.isAudioPlaying=!1,this.audio.pause();else{let t=`https://institute-learning-objective-tutor-tts-urls.s3.us-east-1.amazonaws.com/${this.threadID}-${e}.mp3`;this.audio=new Audio(t),this.isAudioPlaying=!0,this.audio.play()}},async sendMessage(){if(!this.waitForAIresponse){this.waitForAIresponse=!0;try{const e={role:"user",content:[{text:{value:this.message}}]};this.messageList.unshift(e);const t={threadId:this.assistantData.threadId,assistantId:this.assistantData.assistantId,message:this.message,learningObjective:this.learningObjective,userId:this.userDetailsStore.userId,skillName:this.skillName,skillLevel:this.englishSkillLevel};I.emit("new-learning-objective-message",t),this.message=""}catch(e){console.error(e),this.waitForAIresponse=!1}}},async requestTutoring(){if(!this.waitForAIresponse){this.waitForAIresponse=!0;try{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({learningObjective:this.learningObjective,learningObjectiveId:this.learningObjectiveId,userName:this.userDetailsStore.userName,userId:this.userDetailsStore.userId,skillName:this.skillName,skillLevel:this.englishSkillLevel})};var e="/ai-tutor/learning-objective/request-tutoring";if((await fetch(e,t)).status===500){alert("The tutor can`t answer !!"),this.waitForAIresponse=!1;return}this.getMessages(),this.waitForAIresponse=!1}catch(t){console.error(t),this.waitForAIresponse=!1}}},async requestQuestion(){if(!this.waitForAIresponse){this.waitForAIresponse=!0;try{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({learningObjective:this.learningObjective,learningObjectiveId:this.learningObjectiveId,userName:this.userDetailsStore.userName,userId:this.userDetailsStore.userId,skillName:this.skillName,skillLevel:this.englishSkillLevel})};var e="/ai-tutor/learning-objective/ask-question";if((await fetch(e,t)).status===500){alert("The tutor can`t answer !!"),this.waitForAIresponse=!1;return}this.getMessages(),this.waitForAIresponse=!1}catch(t){console.error(t),this.waitForAIresponse=!1}}},applyMarkDownFormatting(e){return window.markdownit({breaks:!0}).use(window.texmath,{engine:katex,delimiters:["brackets","dollars"],katexOptions:{macros:{"\\RR":"\\mathbb{R}"}}}).render(e)},connectToSocketSever(){I.connect()},disconnectToSocketSever(){I.disconnect()},removeStreamMessage(){L.streamType="pause",L.streamingMessage=""}},watch:{stateOfSocket:{async handler(e,t){if(e.streamType==="learningObjective"&&(e.isStreaming&&(this.waitForAIresponse=!1),!e.isStreaming&&e.isRunJustEnded)){const s={role:"assistant",content:[{text:{value:this.stateOfSocket.streamingMessage},type:"text"}]};this.removeStreamMessage(),this.messageList.unshift(s);let i=this.messageList.reverse();for(let n=0;n<i.length;n++)i[n].index=n;this.messageList=i.reverse()}},deep:!0}}},F=e=>(z("data-v-b46e503f"),e=e(),H(),e),gr={key:0,class:"loading-animation d-flex justify-content-center align-items-center py-4"},mr=F(()=>o("span",{class:"spinning-loader"},null,-1)),_r=[mr],yr={key:1},wr={key:0,class:"alert alert-warning mt-1",role:"alert"},vr={class:"d-flex justify-content-end mt-2"},kr=["disabled"],br=["disabled"],Tr={class:"d-flex mt-1"},Cr=["disabled"],Sr=F(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"black"},[o("path",{d:"M256 448c141.4 0 256-93.1 256-208S397.4 32 256 32S0 125.1 0 240c0 45.1 17.7 86.8 47.7 120.9c-1.9 24.5-11.4 46.3-21.4 62.9c-5.5 9.2-11.1 16.6-15.2 21.6c-2.1 2.5-3.7 4.4-4.9 5.7c-.6 .6-1 1.1-1.3 1.4l-.3 .3c0 0 0 0 0 0c0 0 0 0 0 0s0 0 0 0s0 0 0 0c-4.6 4.6-5.9 11.4-3.4 17.4c2.5 6 8.3 9.9 14.8 9.9c28.7 0 57.6-8.9 81.6-19.3c22.9-10 42.4-21.9 54.3-30.6c31.8 11.5 67 17.9 104.1 17.9zM128 208a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 0a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm96 32a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1)),xr=[Sr],Lr={key:1,class:"ai-tutor-processing mt-2"},Ar=F(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"18",height:"18",fill:"black"},[o("path",{d:"M320 0c17.7 0 32 14.3 32 32l0 64 120 0c39.8 0 72 32.2 72 72l0 272c0 39.8-32.2 72-72 72l-304 0c-39.8 0-72-32.2-72-72l0-272c0-39.8 32.2-72 72-72l120 0 0-64c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224l16 0 0 192-16 0c-26.5 0-48-21.5-48-48l0-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48l0 96c0 26.5-21.5 48-48 48l-16 0 0-192 16 0z"})],-1)),Mr={class:"d-flex flex-column mx-auto chat-component socratic-chat"},Ir=["innerHTML"],Pr={key:0,class:"user-conversation"},Or=["innerHTML"],Dr={key:2,class:"d-flex"},Br=F(()=>o("span",{class:"speech-loader"},null,-1)),Er=[Br],Rr=["onClick"],Vr=["onClick"],Nr={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"yellow",height:"18",width:"18"},zr=F(()=>o("path",{d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c7.6-4.2 16.8-4.1 24.3 .5l144 88c7.1 4.4 11.5 12.1 11.5 20.5s-4.4 16.1-11.5 20.5l-144 88c-7.4 4.5-16.7 4.7-24.3 .5s-12.3-12.2-12.3-20.9l0-176c0-8.7 4.7-16.7 12.3-20.9z"},null,-1)),Hr=[zr],jr={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"yellow",height:"18",width:"18"},Fr=F(()=>o("path",{d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm192-96l128 0c17.7 0 32 14.3 32 32l0 128c0 17.7-14.3 32-32 32l-128 0c-17.7 0-32-14.3-32-32l0-128c0-17.7 14.3-32 32-32z"},null,-1)),Ur=[Fr];function qr(e,t,s,i,n,r){const c=_("TutorLoadingSymbol");return n.isGotMessages==!1?(l(),a("div",gr,_r)):(l(),a("div",yr,[e.$parent.isAITokenLimitReached?(l(),a("div",wr," You have reached your monthly AI token limit. Please recharge your subscription to use more. ")):h("",!0),o("span",vr,[n.isGotMessages?(l(),a("button",{key:0,class:"btn border border-dark",onClick:t[0]||(t[0]=u=>r.requestTutoring()),disabled:e.$parent.isAITokenLimitReached}," tutor me on this ",8,kr)):h("",!0),o("button",{class:"btn border border-dark ms-1",onClick:t[1]||(t[1]=u=>r.requestQuestion()),disabled:e.$parent.isAITokenLimitReached}," ask me a question ",8,br)]),o("span",Tr,[$(o("textarea",{class:"chat-input border border-dark rounded","onUpdate:modelValue":t[2]||(t[2]=u=>n.message=u),type:"text",onKeydown:t[3]||(t[3]=rt((...u)=>r.handleKeyDown&&r.handleKeyDown(...u),["enter"]))},null,544),[[nt,n.message]]),o("button",{class:"btn border border-dark ms-1 message-btn",onClick:t[4]||(t[4]=u=>r.sendMessage()),disabled:this.message==""||this.message==" "},xr,8,Cr)]),n.waitForAIresponse?(l(),a("div",Lr,[Ar,S(" Thinking "),E(c)])):h("",!0),o("div",Mr,[i.stateOfSocket.isStreaming&&i.stateOfSocket.streamType==="learningObjective"?(l(),a("div",{key:0,class:"d-flex my-3 tutor-conversation streamed-message p-2",innerHTML:r.applyMarkDownFormatting(i.stateOfSocket.streamingMessage)},null,8,Ir)):h("",!0),(l(!0),a(A,null,V(n.messageList,u=>(l(),a("div",{class:v(["d-flex my-3",{"justify-content-end":u.role==="user"}])},[u.role==="user"?(l(),a("div",Pr,[o("em",null,b(u.content[0].text.value),1)])):u.role==="assistant"&&u.content[0].type=="text"?(l(),a("div",{key:1,class:"tutor-conversation p-2",innerHTML:r.applyMarkDownFormatting(u.content[0].text.value)},null,8,Or)):h("",!0),u.isAudioGenerating&&u.role==="assistant"?(l(),a("div",Dr,Er)):!u.hasAudio&&!u.isAudioGenerating&&u.role==="assistant"?(l(),a("button",{key:3,onClick:g=>r.generateAudio(u.index,u.content[0].text.value),class:"btn speechButton"}," generate speech ",8,Rr)):!u.isAudioGenerating&&u.role==="assistant"?(l(),a("button",{key:4,onClick:g=>r.playAudio(u.index),class:"btn speechButton"},[n.isAudioPlaying==!1?(l(),a("svg",Nr,Hr)):(l(),a("svg",jr,Ur))],8,Vr)):h("",!0)],2))),256))])]))}const $r=O(fr,[["render",qr],["__scopeId","data-v-b46e503f"]]);const Wr={setup(){const e=Wt(),t=Kt(),s=Q(),i=Zt(),n=xt(),r=St(),c=pt(),u=te(),g=ee();return e.tagsList.length==0&&e.getTagsList(),{tagsStore:e,skillTagsStore:t,userDetailsStore:s,skillsStore:i,skillTreeStore:n,userSkillsStore:r,sessionDetailsStore:c,showSkillStore:u,settingsStore:g}},data(){return{skillUrl:this.$route.params.skillUrl,skillId:null,skill:{learningObjectives:[]},userSkills:[],isMastered:!1,isUnlocked:!1,isGoal:!1,filters:[],showFlaggingModal:!1,ancestor:this.$route.params.id,accessibleSkills:[],showAncestorLink:!1,isMobileCheck:window.innerWidth,showConfirmModal:!1,isSkillLoaded:!1,randomNum:0,goalSteps:[],goals:[],toggleModal:!1,selectedSkill:null,isTutorialComplete:!1,showTutorialTip1:!1,showTutorialTip2:!1,showTutorialTip3:!1,showTutorialTip4:!1,showTutorialTip5:!1,showTutorialTip6:!1,showTutorialTip7:!1,showTutorialTip8:!1,showTutorialTip9:!1,showTutorialTip10:!1,showTutorialTip11:!1,showCategoryCompletedModal:!1,nextSkillsInBranch:[],showLearningObjectives:!0,isAITokenLimitReached:!1}},components:{Forum:Ni,FlagModals:Lt,AITutor:pr,LearningObjectiveAITutor:$r},async created(){try{this.sessionDetailsStore.isLoggedIn&&await this.checkTokenUsage(),await this.getSkill(),this.isSkillLoaded=!0,this.sessionDetailsStore.isLoggedIn&&await this.getUserSkills(),this.sessionDetailsStore.isLoggedIn&&this.checkIfTutorialComplete(),this.isUnlocked||this.nearestAccessibleAncestor(this.skill)}catch(e){console.error("Error in created hook:",e),this.isSkillLoaded=!1}},mounted(){this.showTutorialTip6&&this.scrollToTooltip(),this.showTutorialTip7&&this.scrollToTooltip()},methods:{async checkTokenUsage(){try{if(await this.userDetailsStore.getUserDetails(),this.settingsStore&&typeof this.settingsStore.getSettings=="function")this.settingsStore.freeMonthlyTokens===0&&await this.settingsStore.getSettings();else{console.error("Settings store is not properly initialized"),this.isAITokenLimitReached=!0;return}this.userDetailsStore.tokens<=0&&(this.settingsStore.freeMonthlyTokens||0)<=(this.userDetailsStore.monthlyTokenUsage||0)&&(this.isAITokenLimitReached=!0)}catch(e){console.error("Error in checkTokenUsage:",e),this.isAITokenLimitReached=!0}},async getSkill(){this.randomNum=Math.random(),await this.showSkillStore.findSkill(this.skillUrl),this.skill=this.showSkillStore.skill,this.skillId=this.skill.id,this.skill.name.includes("Vocabulary Test")&&(this.showLearningObjectives=!1),this.skill.learningObjectives=[],await this.getLearningObjectives(),document.title=this.skill.name+" - The Collins Institute",this.getSkillFilters();const e=document.getElementsByTagName("svg");e.length>0&&(e[0].style.height="50px"),this.userDetailsStore.role=="student"&&this.recordSkillVisit(this.skillId)},async getLearningObjectives(){const e=await fetch("/skill-learning-objectives/"+this.skillId+"/list");if(this.skill.learningObjectives=await e.json(),this.sessionDetailsStore.isLoggedIn)for(let t=0;t<this.skill.learningObjectives.length;t++)this.skill.learningObjectives[t].showAI=!0},recordSkillVisit(e){fetch("/skills/record-visit/"+e)},async getSkillFilters(){this.skillTagsStore.skillTagsList.length==0&&await this.skillTagsStore.getSkillTagsList();for(let e=0;e<this.skillTagsStore.skillTagsList.length;e++)this.skillTagsStore.skillTagsList[e].skill_id==this.skillId&&this.filters.push(this.skillTagsStore.skillTagsList[e].tag_id)},async getUserSkills(){const t=await(await fetch("/user-skills/filtered-unnested-list/"+this.userDetailsStore.userId)).json();this.userSkills=t;for(let s=0;s<this.userSkills.length;s++)this.userSkills[s].id==this.skill.id&&(this.userSkills[s].is_mastered==1&&(this.isMastered=!0),this.userSkills[s].is_accessible==1&&(this.isUnlocked=!0),this.userSkills[s].is_goal==1&&(this.isGoal=!0)),this.userSkills[s].is_accessible==1&&this.accessibleSkills.push(this.userSkills[s])},async MakeMastered(){if(this.skill.type==="domain")try{const t=await(await fetch(`/skills/get-first-child-skill/${this.skill.id}`)).json();await this.userSkillsStore.MakeMastered(this.userDetailsStore.userId,this.skill),this.isMastered=!0,await this.getUserSkills(),t?this.$router.push(`/skills/${t.url}`):(await this.getNextSkillsInBranch(),this.showCategoryCompletedModal=!0)}catch(e){console.error("Error marking domain skill as mastered:",e)}else await this.userSkillsStore.MakeMastered(this.userDetailsStore.userId,this.skill),this.isMastered=!0,await this.getUserSkills(),await this.getNextSkillsInBranch(),this.showCategoryCompletedModal=!0},async getNextSkillsInBranch(){const e=await fetch("/user-skills/get-next-accessible-in-branch/"+this.userDetailsStore.userId+"/"+this.skillId);this.nextSkillsInBranch=await e.json()},closeFlagModal(){this.showModal=!1},nearestAccessibleAncestor(e){if(this.accessibleSkills.find(i=>i.id==e.id)){this.ancestor=e.url,this.showAncestorLink=!0;return}let s=[];if(e.type=="super")for(let i=0;i<this.accessibleSkills.length;i++)this.accessibleSkills[i].type=="sub"&&this.accessibleSkills[i].parent==e.id&&this.accessibleSkills[i].is_mastered!=1&&s.push(this.accessibleSkills[i]);if(s.length>0){this.ancestor=s[0].url,this.showAncestorLink=!0;return}fetch("/skills/show/"+e.parent).then(function(i){return i.json()}).then(i=>this.nearestAccessibleAncestor(i))},copyShareableURLToClipBoard(){navigator.clipboard.writeText(window.location.href),this.showConfirmModal=!0},imageUrlAlternative(e){e.target.src="/images/skill-avatar/recurso.png"},openModal(e){this.selectedSkill=e,this.toggleModal=!0},closeModal(){this.toggleModal=!1,this.selectedSkill=null},async confirmCreateGoal(){this.selectedSkill&&(await this.userSkillsStore.getFilteredUnnestedList(this.userDetailsStore.userId),this.createGoal(this.selectedSkill),this.closeModal())},createGoal(e){e.type!="domain"&&this.goalSteps.push(e);let t=!1;if(e.type=="super")for(let i=0;i<this.userSkillsStore.filteredUnnestedList.length;i++)this.userSkillsStore.filteredUnnestedList[i].type=="sub"&&this.userSkillsStore.filteredUnnestedList[i].parent==e.id&&this.userSkillsStore.filteredUnnestedList[i].is_mastered!=1&&(this.goalSteps.push(this.userSkillsStore.filteredUnnestedList[i]),this.userSkillsStore.filteredUnnestedList[i].is_accessible&&(t=!0));if(this.accessibleSkills.find(i=>i.id==e.id)||t){this.populateGoalSteps();return}fetch("/skills/show/"+e.parent).then(i=>i.json()).then(i=>this.createGoal(i))},populateGoalSteps(){const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goalSteps:this.goalSteps})},t="/user-skills/set-goal/"+this.userDetailsStore.userId+"/"+this.skillId;fetch(t,e).then(()=>{alert(`You've created a goal for ${this.skill.name}, you can view your goals in the drop-down menu.`),this.$router.push(`/goals/${this.userDetailsStore.userId}/${this.skillId}`)})},async checkIfTutorialComplete(){const t=await(await fetch("/users/check-tutorial-progress/skill/"+this.userDetailsStore.userId)).json();t==0?(this.isTutorialComplete=!1,this.showTutorialTip1=!0):t==1&&(this.isTutorialComplete=!0)},progressTutorial(e){e==1?(this.showTutorialTip1=!1,this.isMastered?this.showTutorialTip3=!0:this.showTutorialTip2=!0):e==2?(this.showTutorialTip2=!1,this.showTutorialTip3=!0):e==3?(this.showTutorialTip3=!1,this.showTutorialTip4=!0):e==4?(this.showTutorialTip4=!1,this.showTutorialTip5=!0):e==5?(this.showTutorialTip5=!1,this.showTutorialTip6=!0,(this.userDetailsStore.role==="editor"||this.userDetailsStore.role==="instructor")&&(this.showTutorialTip7=!0)):e==6?(this.showTutorialTip6=!1,this.showTutorialTip7=!0,(this.userDetailsStore.role==="editor"||this.userDetailsStore.role==="instructor")&&(this.showTutorialTip7=!1)):e==7?(this.showTutorialTip7=!1,this.showTutorialTip8=!0):e==8?(this.showTutorialTip8=!1,this.showTutorialTip9=!0):e==9?(this.showTutorialTip9=!1,this.showTutorialTip10=!0):e==10?(this.showTutorialTip10=!1,this.showTutorialTip11=!0):e==11&&(this.showTutorialTip11=!1,this.markTutorialComplete())},restartTutorial(){this.showTutorialTip1=!0,this.showTutorialTip2=!1,this.showTutorialTip3=!1,this.showTutorialTip4=!1,this.showTutorialTip5=!1,this.showTutorialTip6=!1,this.showTutorialTip7=!1,this.showTutorialTip8=!1,this.showTutorialTip9=!1,this.showTutorialTip10=!1,this.showTutorialTip11=!1,this.showInstructorEditorTutorialTip=!1,this.isTutorialComplete=!1},markTutorialComplete(){let e="/users/mark-tutorial-complete/skill/"+this.userDetailsStore.userId;fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"}})},scrollToTooltip(){this.$nextTick(()=>{this.showTutorialTip6&&this.$refs.learningObjectivesSection?this.$refs.learningObjectivesSection.scrollIntoView({behavior:"smooth",block:"start"}):this.showTutorialTip7&&this.$refs.aiTutorSection&&this.$refs.aiTutorSection.scrollIntoView({behavior:"smooth",block:"start"})})},scrollToAITutor(){this.$refs.aiTutorSection&&this.$refs.aiTutorSection.scrollIntoView({behavior:"smooth",block:"start"})}},watch:{async $route(e,t){this.skillUrl=e.params.skillUrl,await this.getSkill(),await this.getUserSkills()},showTutorialTip6(e){e&&this.$nextTick(()=>{this.scrollToTooltip()})},showTutorialTip7(e){e&&this.$nextTick(()=>{this.scrollToTooltip()})}}},f=e=>(z("data-v-79218bc7"),e=e(),H(),e),Kr={class:"container"},Yr={class:"d-flex justify-content-between top-row"},Gr={class:"heading"},Jr=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"20",fill:"white"},[o("path",{d:"M144 144l0 48 160 0 0-48c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192l0-48C80 64.5 144.5 0 224 0s144 64.5 144 144l0 48 16 0c35.3 0 64 28.7 64 64l0 192c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 256c0-35.3 28.7-64 64-64l16 0z"})],-1)),Zr=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"22",fill:"white"},[o("path",{d:"M288 0c-12.2 .1-23.3 7-28.6 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3L288 439.8 288 0zM429.9 512c1.1 .1 2.1 .1 3.2 0l-3.2 0z"})],-1)),Qr=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"22",fill:"white"},[o("path",{d:"m 169.24356,0 c 12.2,0.1 23.3,7 28.6,18 l 64.4,132.3 143.6,21.2 c 12,1.8 22,10.2 25.7,21.7 3.7,11.5 0.7,24.2 -7.9,32.7 l -104.2,103.1 24.6,145.7 c 2,12 -3,24.2 -12.9,31.3 -9.9,7.1 -23,8 -33.8,2.3 l -128.1,-68.5 z M 27.343555,512 c -1.1,0.1 -2.1,0.1 -3.2,0 z",id:"path17"})],-1)),Xr=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"22",fill:"white"},[o("path",{d:"M288 0c-12.2 .1-23.3 7-28.6 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3L288 439.8 288 0zM429.9 512c1.1 .1 2.1 .1 3.2 0l-3.2 0z"})],-1)),tl=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"22",fill:"white"},[o("path",{d:"m 169.24356,0 c 12.2,0.1 23.3,7 28.6,18 l 64.4,132.3 143.6,21.2 c 12,1.8 22,10.2 25.7,21.7 3.7,11.5 0.7,24.2 -7.9,32.7 l -104.2,103.1 24.6,145.7 c 2,12 -3,24.2 -12.9,31.3 -9.9,7.1 -23,8 -33.8,2.3 l -128.1,-68.5 z M 27.343555,512 c -1.1,0.1 -2.1,0.1 -3.2,0 z",id:"path17"})],-1)),el=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"22",fill:"white"},[o("path",{d:"M288 0c-12.2 .1-23.3 7-28.6 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3L288 439.8 288 0zM429.9 512c1.1 .1 2.1 .1 3.2 0l-3.2 0z"})],-1)),sl={key:0},il={key:1},ol=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"22",fill:"white"},[o("path",{d:"m 169.24356,0 c 12.2,0.1 23.3,7 28.6,18 l 64.4,132.3 143.6,21.2 c 12,1.8 22,10.2 25.7,21.7 3.7,11.5 0.7,24.2 -7.9,32.7 l -104.2,103.1 24.6,145.7 c 2,12 -3,24.2 -12.9,31.3 -9.9,7.1 -23,8 -33.8,2.3 l -128.1,-68.5 z M 27.343555,512 c -1.1,0.1 -2.1,0.1 -3.2,0 z",id:"path17"})],-1)),nl={key:0,class:"tool-tip-base d-flex justify-content-end"},rl={class:"tool-tip-text"},ll=f(()=>o("p",null," This is where you can take an assessment for this skill, if it is unlocked. ",-1)),al=f(()=>o("p",null," If it's locked, this button will instead take you to the closest unlocked skill. ",-1)),cl={key:1,class:"row pe-4 ps-4 ps-md-0 skill-description"},hl=f(()=>o("hr",{class:"border border-2 opacity-100 hr"},null,-1)),ul={class:"row mb-2"},dl={class:"col d-flex justify-content-between"},pl={key:0},fl=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"20",height:"20",fill:"white"},[o("path",{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"})],-1)),gl={key:0},ml=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"20",fill:"white"},[o("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9L0 168c0 13.3 10.7 24 24 24l110.1 0c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24l0 104c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65 0-94.1c0-13.3-10.7-24-24-24z"})],-1)),_l=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"white",width:"20",height:"20"},[o("path",{d:"M448 256A192 192 0 1 0 64 256a192 192 0 1 0 384 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 80a80 80 0 1 0 0-160 80 80 0 1 0 0 160zm0-224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zM224 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1)),yl={class:"modal-content"},wl={style:{color:"var(--primary-color)"}},vl={class:"modal-btns d-flex justify-content-between mt-3"},kl={class:"d-flex justify-content-end"},bl=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"20",heigth:"20"},[o("path",{class:"primary-icon",d:"M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-94.1 47C145.4 170.2 121.9 160 96 160c-53 0-96 43-96 96s43 96 96 96c25.9 0 49.4-10.2 66.6-26.9l94.1 47c-.5 3.9-.7 7.8-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-25.9 0-49.4 10.2-66.6 26.9l-94.1-47c.5-3.9 .7-7.8 .7-11.9s-.2-8-.7-11.9l94.1-47C302.6 213.8 326.1 224 352 224z"})],-1)),Tl=[bl],Cl=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"flag-icon"},[o("path",{class:"primary-icon",d:"M64 32C64 14.3 49.7 0 32 0S0 14.3 0 32V64 368 480c0 17.7 14.3 32 32 32s32-14.3 32-32V352l64.3-16.1c41.1-10.3 84.6-5.5 122.5 13.4c44.2 22.1 95.5 24.8 141.7 7.4l34.7-13c12.5-4.7 20.8-16.6 20.8-30V66.1c0-23-24.2-38-44.8-27.7l-9.6 4.8c-46.3 23.2-100.8 23.2-147.1 0c-35.1-17.6-75.4-22-113.5-12.5L64 48V32z"})],-1)),Sl=[Cl],xl=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",fill:"white"},[o("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),Ll=[xl],Al={key:0,class:"tool-tip-base"},Ml={class:"explain-tool-tip triangle-top-left hovering-info-panel narrow-info-panel"},Il={class:"tool-tip-text"},Pl=f(()=>o("p",null," Suggesting edits to this page or its test can increase your reputation score. ",-1)),Ol=f(()=>o("p",null," If this skill is marked as locked, you can also bookmark this skill by marking it as a goal. ",-1)),Dl={key:1,class:"tool-tip-base d-flex justify-content-end"},Bl={class:"explain-tool-tip triangle-top-right hovering-info-panel narrow-info-panel"},El={class:"tool-tip-text"},Rl=f(()=>o("p",null," Here you can share a link to this skill with a friend, or flag this page as unhelpful or incorrect. ",-1)),Vl={key:2,class:"tool-tip-base"},Nl={class:"explain-tool-tip triangle-top-left hovering-info-panel"},zl={class:"tool-tip-text"},Hl=f(()=>o("p",null,' The "Edit" button allows you to edit this skill page or its assessment. ',-1)),jl={key:3,class:"tool-tip-base d-flex justify-content-end"},Fl={class:"explain-tool-tip triangle-top-right narrow-info-panel hovering-info-panel"},Ul={class:"tool-tip-text"},ql=f(()=>o("p",null," Here you can share a link to this skill with a friend, or flag this page as unhelpful or incorrect. ",-1)),$l={key:4,class:"tool-tip-base"},Wl={class:"explain-tool-tip triangle-top-left narrow-info-panel hovering-info-panel"},Kl={class:"tool-tip-text"},Yl=f(()=>o("p",null," Here you can suggest an edit to this skill page. ",-1)),Gl={key:5,class:"tool-tip-base d-flex justify-content-end"},Jl={class:"explain-tool-tip triangle-top-right narrow-info-panel hovering-info-panel"},Zl={class:"tool-tip-text"},Ql=f(()=>o("p",null," Here you can share a link to this skill with a friend, or flag this page as unhelpful or incorrect. ",-1)),Xl=f(()=>o("hr",{class:"border border-1 opacity-100 hr mt-2"},null,-1)),ta={class:"row"},ea={class:"col-md-8 order-2 order-md-1"},sa={class:""},ia=f(()=>o("h2",{class:"h4 secondary-heading"},"Introduction",-1)),oa=["innerHTML"],na={key:0,class:"mt-4"},ra=f(()=>o("h2",{class:"h4 secondary-heading"}," Requirements for Mastery ",-1)),la=["innerHTML"],aa={class:"col-md-4 order-1 order-md-2"},ca={class:"info-box p-2 mb-2"},ha=["href"],ua=["src"],da={class:"mt-2"},pa=f(()=>o("h2",{class:"h4 secondary-heading"},"Level",-1)),fa={key:0},ga={key:1},ma={key:2},_a={key:3},ya={key:4},wa={class:"mt-2"},va=f(()=>o("h2",{class:"h4 secondary-heading"},"Author",-1)),ka={key:0,"b-tooltip.hover":"",title:"This page was written or edited by a human",style:{height:"50px"}},ba=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",height:"22"},[o("path",{d:"M112 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm40 304l0 128c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-223.1L59.4 304.5c-9.1 15.1-28.8 20-43.9 10.9s-20-28.8-10.9-43.9l58.3-97c17.4-28.9 48.6-46.6 82.3-46.6l29.7 0c33.7 0 64.9 17.7 82.3 46.6l58.3 97c9.1 15.1 4.2 34.8-10.9 43.9s-34.8 4.2-43.9-10.9L232 256.9 232 480c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-128-16 0z",fill:"black"})],-1)),Ta=[ba],Ca={key:1,"b-tooltip.hover":"",title:"This page was written by an AI",style:{height:"50px"}},Sa=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",height:"22"},[o("path",{d:"M320 0c17.7 0 32 14.3 32 32l0 64 120 0c39.8 0 72 32.2 72 72l0 272c0 39.8-32.2 72-72 72l-304 0c-39.8 0-72-32.2-72-72l0-272c0-39.8 32.2-72 72-72l120 0 0-64c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224l16 0 0 192-16 0c-26.5 0-48-21.5-48-48l0-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48l0 96c0 26.5-21.5 48-48 48l-16 0 0-192 16 0z",fill:"black"})],-1)),xa=[Sa],La={key:0,class:"mt-4",ref:"learningObjectivesSection"},Aa=f(()=>o("h2",{class:"h4 secondary-heading"},"Learning Objectives",-1)),Ma={key:0,class:"tool-tip-base d-flex justify-content-start"},Ia={class:"explain-tool-tip hovering-info-panel triangle-top-left"},Pa={class:"tool-tip-text"},Oa=f(()=>o("p",null," Learning Objectives outline the specific skills and knowledge you need to master this subject. Click the + button next to any objective to get personalized help from an AI tutor specifically focused on that objective. ",-1)),Da={class:"bg-white rounded p-2"},Ba=f(()=>o("div",null,[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"6",height:"6"},[o("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"})])],-1)),Ea={class:"ms-2 w-100"},Ra={class:"mb-0"},Va={key:0},Na=["onClick"],za={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"18",height:"18"},Ha=f(()=>o("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"},null,-1)),ja=[Ha],Fa={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"18",height:"18"},Ua=f(()=>o("path",{d:"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"},null,-1)),qa=[Ua],$a={key:1},Wa=f(()=>o("div",{class:"row"},[o("div",{class:"col col-md-8 p-4 p-md-0"},[o("hr",{class:"border border-2 opacity-100 hr"})])],-1)),Ka={class:"row mt-3"},Ya=f(()=>o("div",{class:"h1-title"},"Filter",-1)),Ga={class:"control control-checkbox"},Ja={class:"my-auto mx-2 me-4"},Za=["value"],Qa=f(()=>o("div",{class:"control_indicator"},null,-1)),Xa={key:0,class:"row mt-3 mb-3",ref:"aiTutorSection"},tc={key:1},ec=f(()=>o("h2",{class:"h2 secondary-heading"},"AI tutor",-1)),sc=f(()=>o("em",null,"You have reached your monthly AI token limit. Please recharge your subscription to use more.",-1)),ic=[ec,sc],oc={key:1},nc={class:"row mt-3 mb-3"},rc=f(()=>o("p",null," ",-1)),lc={class:"modal-content asking-modal"},ac=f(()=>o("p",null,"URL copied to clipboard",-1)),cc={class:"d-flex justify-content-end gap-2"},hc=f(()=>o("span",{class:"d-none d-md-block"}," OK ",-1)),uc=f(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[o("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1)),dc=[hc,uc],pc={key:1,class:"modal"},fc={class:"modal-content"},gc={class:"heading h5"},mc=f(()=>o("p",null,"The next skills in this branch are:",-1)),_c={key:3,class:"modal"},yc={class:"modal-content"},wc={key:0},vc=f(()=>o("p",null," Here is where you can learn about a subject, find resources for mastering it, and take a test to demonstrate your mastery. ",-1)),kc={key:1},bc=f(()=>o("p",null,' The "Requirements for Mastery" and "Learning Objectives" sections explain everything one needs to learn to master the skill. ',-1)),Tc={key:2},Cc=f(()=>o("p",null," Remember that you can master this skill in two ways: by taking the formal assessment test at the top of the page, or by successfully completing an assessment session with the Assessment Tutor. Choose the method that works best for your learning style. ",-1)),Sc={key:4,class:"modal"},xc={class:"modal-content"},Lc={key:0},Ac=f(()=>o("p",null," Here is where you can learn about a subject, find resources for mastering it, and take a test to demonstrate your mastery. ",-1)),Mc={key:1},Ic=f(()=>o("p",null,' The "Requirements for mastery" section explains everything a student needs to learn to master the skill. ',-1)),Pc={key:2},Oc=f(()=>o("p",null,' At the bottom of the page, in the "Best Places To Learn This" section, students can find various sites and resources to learn about this topic. ',-1)),Dc=f(()=>o("p",null,"You can add more, vote on these, or edit them.",-1)),Bc={key:5,class:"modal"},Ec={class:"modal-content"},Rc={key:0},Vc=f(()=>o("p",null," This page is where students can learn about, and take a test to try to master, this skill. ",-1)),Nc={key:1},zc=f(()=>o("p",null,' The "Requirements for mastery" section explains everything a student needs to learn to master the skill. ',-1)),Hc={key:2},jc=f(()=>o("p",null,' At the bottom of the page, in the "Best Places To Learn This" section, students can find various sites and resources to learn about this topic. ',-1)),Fc=f(()=>o("p",null,"You can add more and vote on these.",-1));function Uc(e,t,s,i,n,r){var C;const c=_("router-link"),u=_("LearningObjectiveAITutor"),g=_("AITutor"),y=_("Forum"),p=_("FlagModals");return l(),a(A,null,[o("div",Kr,[o("div",{id:"skill-info-container",class:v({domain:n.skill.type=="domain"})},[o("div",null,[o("div",Yr,[o("h1",Gr,b(n.skill.name),1),i.userDetailsStore.isSkillsLocked==1&&i.userDetailsStore.role=="student"&&!n.isUnlocked&&!n.isMastered&&n.showAncestorLink?(l(),w(c,{key:0,to:"/skills/"+n.ancestor,class:"btn assessment-btn me-1"},{default:x(()=>[Jr,S("   Go to Nearest Unlocked Skill ")]),_:1},8,["to"])):h("",!0),i.userDetailsStore.role=="student"&&!n.isMastered&&n.skill.type!="domain"&&n.skill.id?(l(),a("button",{key:1,class:"btn me-1 assessment-btn",onClick:t[0]||(t[0]=d=>r.scrollToAITutor())},[Zr,S(" Take the Test "),Qr])):i.userDetailsStore.role=="student"&&!n.isMastered&&n.skill.type=="domain"?(l(),a("button",{key:2,onClick:t[1]||(t[1]=d=>r.MakeMastered()),class:"btn me-1 assessment-btn"},[Xr,S(" Go To Child Skill "),tl])):i.sessionDetailsStore.isLoggedIn?h("",!0):(l(),w(c,{key:3,class:"btn me-1 assessment-btn",to:"/login"},{default:x(()=>[el,n.skill.type!="domain"?(l(),a("span",sl,"Take the Test")):(l(),a("span",il,"Mark Complete")),ol]),_:1}))]),i.userDetailsStore.role=="student"&&n.showTutorialTip2?(l(),a("div",nl,[o("div",{class:v(["explain-tool-tip hovering-info-panel",n.isMobileCheck>576?"triangle-top-right":"triangle-top-left"])},[o("div",rl,[ll,al,o("button",{class:"btn primary-btn",onClick:t[2]||(t[2]=d=>r.progressTutorial(2))}," next ")])],2)])):h("",!0),i.userDetailsStore.role=="admin"?(l(),a("div",cl,[o("p",null,b(n.skill.description),1)])):h("",!0),hl]),o("div",ul,[o("div",dl,[o("div",{class:v(["d-flex",{"justify-content-center":n.isMobileCheck<576}])},[i.sessionDetailsStore.isLoggedIn?(l(),w(c,{key:0,to:"/skills/edit/"+n.skillUrl,class:"edit-btn btn primary-btn me-1"},{default:x(()=>[n.isMobileCheck>576?(l(),a("span",pl,"Edit  ")):h("",!0),fl]),_:1},8,["to"])):h("",!0),i.userDetailsStore.role=="admin"||i.userDetailsStore.role=="editor"?(l(),w(c,{key:1,to:"/skills/history/"+this.skillUrl,class:"btn primary-btn me-1"},{default:x(()=>[n.isMobileCheck>576?(l(),a("span",gl,"History ")):h("",!0),ml]),_:1},8,["to"])):h("",!0),n.skill.type!="domain"&&i.sessionDetailsStore.isLoggedIn&&n.isMastered==!1&&n.isUnlocked==!1&&n.isGoal==!1&&i.userDetailsStore.role=="student"?(l(),a("button",{key:2,class:"btn primary-btn",onClick:t[3]||(t[3]=d=>r.openModal(n.skill))},[S(" Create goal  "),_l])):h("",!0),n.toggleModal?(l(),a("div",{key:3,onClick:t[6]||(t[6]=Qt((...d)=>r.closeModal&&r.closeModal(...d),["self"])),class:"modal"},[o("div",yl,[o("p",null,[S(" Are you sure you want to create a goal for "),o("span",wl,b((C=n.selectedSkill)==null?void 0:C.name),1),S("? ")]),o("div",vl,[o("button",{class:"btn red-btn",onClick:t[4]||(t[4]=(...d)=>r.closeModal&&r.closeModal(...d))}," No "),o("button",{class:"btn primary-btn",onClick:t[5]||(t[5]=(...d)=>r.confirmCreateGoal&&r.confirmCreateGoal(...d))}," Yes ")])])])):h("",!0)],2),o("div",kl,[o("button",{onClick:t[7]||(t[7]=(...d)=>r.copyShareableURLToClipBoard&&r.copyShareableURLToClipBoard(...d)),class:"btn me-1"},Tl),i.sessionDetailsStore.isLoggedIn?(l(),a("button",{key:0,onClick:t[8]||(t[8]=d=>n.showFlaggingModal=!0),class:"btn","b-tooltip.hover":"",title:"Report this skill to the admin if it has errors"},Sl)):h("",!0),o("button",{class:"btn primary-btn me-1",onClick:t[9]||(t[9]=(...d)=>r.restartTutorial&&r.restartTutorial(...d))},Ll)])]),i.userDetailsStore.role=="student"&&n.showTutorialTip3?(l(),a("div",Al,[o("div",Ml,[o("div",Il,[Pl,Ol,o("button",{class:"btn primary-btn",onClick:t[10]||(t[10]=d=>r.progressTutorial(3))}," next ")])])])):h("",!0),i.userDetailsStore.role=="student"&&n.showTutorialTip4?(l(),a("div",Dl,[o("div",Bl,[o("div",El,[Rl,o("button",{class:"btn primary-btn",onClick:t[11]||(t[11]=d=>r.progressTutorial(4))}," next ")])])])):h("",!0),i.userDetailsStore.role=="editor"&&n.showTutorialTip2?(l(),a("div",Vl,[o("div",Nl,[o("div",zl,[Hl,o("button",{class:"btn primary-btn",onClick:t[12]||(t[12]=d=>r.progressTutorial(2))}," next ")])])])):h("",!0),i.userDetailsStore.role=="editor"&&n.showTutorialTip3?(l(),a("div",jl,[o("div",Fl,[o("div",Ul,[ql,o("button",{class:"btn primary-btn",onClick:t[13]||(t[13]=d=>r.progressTutorial(3))}," next ")])])])):h("",!0),i.userDetailsStore.role=="instructor"&&n.showTutorialTip2?(l(),a("div",$l,[o("div",Wl,[o("div",Kl,[Yl,o("button",{class:"btn primary-btn",onClick:t[14]||(t[14]=d=>r.progressTutorial(2))}," next ")])])])):h("",!0),i.userDetailsStore.role=="instructor"&&n.showTutorialTip3?(l(),a("div",Gl,[o("div",Jl,[o("div",Zl,[Ql,o("button",{class:"btn primary-btn",onClick:t[15]||(t[15]=d=>r.progressTutorial(3))}," next ")])])])):h("",!0),Xl]),o("div",ta,[o("div",ea,[o("div",sa,[ia,o("div",{class:"bg-white rounded p-2",innerHTML:n.skill.introduction},null,8,oa)]),n.skill.type!="domain"?(l(),a("div",na,[ra,o("div",{class:"bg-white rounded p-2 mastery-requirements-section",innerHTML:n.skill.mastery_requirements},null,8,la)])):h("",!0)]),o("div",aa,[o("div",ca,[o("a",{href:n.skill.image_url},[o("img",{src:n.skill.image_thumbnail_url,onError:t[16]||(t[16]=(...d)=>r.imageUrlAlternative&&r.imageUrlAlternative(...d)),class:"rounded img-fluid"},null,40,ua)],8,ha),o("div",da,[pa,n.skill.level=="grade_school"?(l(),a("span",fa,"Grade School")):n.skill.level=="middle_school"?(l(),a("span",ga,"Middle School")):n.skill.level=="high_school"?(l(),a("span",ma,"High School")):n.skill.level=="college"?(l(),a("span",_a,"College")):n.skill.level=="phd"?(l(),a("span",ya,"PHD")):h("",!0)]),o("div",wa,[va,n.skill.is_human_edited?(l(),a("div",ka,Ta)):(l(),a("div",Ca,xa))])])])]),n.skill.type!="domain"&&n.showLearningObjectives?(l(),a("div",La,[Aa,i.userDetailsStore.role=="student"&&n.showTutorialTip6?(l(),a("div",Ma,[o("div",Ia,[o("div",Pa,[Oa,o("button",{class:"btn primary-btn",onClick:t[17]||(t[17]=d=>r.progressTutorial(6))}," next ")])])])):h("",!0),o("div",Da,[(l(!0),a(A,null,V(n.skill.learningObjectives,d=>(l(),a("div",{class:v(["d-flex mb-3 justify-content-between",{"mb-4":d.showAI}])},[Ba,o("div",Ea,[o("p",Ra,b(d.objective),1),d.showAI?(l(),a("div",Va,[E(u,{learningObjective:d.objective,learningObjectiveId:d.id,skillName:n.skill.name,skillUrl:n.skill.url,skillLevel:n.skill.level},null,8,["learningObjective","learningObjectiveId","skillName","skillUrl","skillLevel"])])):h("",!0)]),i.sessionDetailsStore.isLoggedIn?(l(),a("button",{key:0,class:"btn plus-btn",onClick:wt=>d.showAI=!d.showAI},[d.showAI?(l(),a("svg",Fa,qa)):(l(),a("svg",za,ja))],8,Na)):h("",!0)],2))),256))])],512)):h("",!0),i.userDetailsStore.role=="admin"?(l(),a("div",$a,[Wa,o("div",Ka,[Ya,(l(!0),a(A,null,V(i.tagsStore.tagsList,d=>(l(),a("label",Ga,[o("span",Ja,b(d.name),1),$(o("input",{type:"checkbox",value:d.id,"onUpdate:modelValue":t[18]||(t[18]=wt=>n.filters=wt),disabled:""},null,8,Za),[[Xt,n.filters]]),Qa]))),256))])])):h("",!0)],2),i.sessionDetailsStore.isLoggedIn?(l(),a("div",Xa,[n.isSkillLoaded&&i.userDetailsStore.role==="student"&&n.skill.type!=="domain"?(l(),w(g,{key:0,skill:n.skill,showTutorialTip7:n.showTutorialTip7,showTutorialTip8:n.showTutorialTip8,showTutorialTip9:n.showTutorialTip9,onProgressTutorial:r.progressTutorial},null,8,["skill","showTutorialTip7","showTutorialTip8","showTutorialTip9","onProgressTutorial"])):n.isSkillLoaded&&i.userDetailsStore.role==="student"&&n.skill.type!=="domain"?(l(),a("div",tc,ic)):h("",!0)],512)):h("",!0),n.skill.type!="domain"?(l(),a("div",oc,[o("div",nc,[n.isSkillLoaded?(l(),w(y,{key:0,skillId:n.skill.id,showTutorialTip10:n.showTutorialTip10,userRole:i.userDetailsStore.role,onProgressTutorial:r.progressTutorial},null,8,["skillId","showTutorialTip10","userRole","onProgressTutorial"])):h("",!0)])])):h("",!0),rc]),n.showConfirmModal?(l(),a("div",{key:0,onClick:t[20]||(t[20]=d=>n.showConfirmModal=!1),class:"modal"},[o("div",lc,[ac,o("div",cc,[o("button",{type:"button",class:"btn primary-btn modal-btn",onClick:t[19]||(t[19]=d=>n.showConfirmModal=!1)},dc)])])])):h("",!0),n.showCategoryCompletedModal?(l(),a("div",pc,[o("div",fc,[o("h1",gc,"You have completed "+b(n.skill.name)+"!",1),mc,(l(!0),a(A,null,V(n.nextSkillsInBranch,d=>(l(),a("div",null,[E(c,{class:v([{"grade-school":d.level=="grade_school","middle-school":d.level=="middle_school","high-school":d.level=="high_school",college:d.level=="college",phd:d.level=="phd"},"skill-link btn mb-1"]),to:`/skills/${d.url}`,target:"_blank"},{default:x(()=>[S(b(d.name),1)]),_:2},1032,["class","to"])]))),256)),o("button",{class:"btn primary-btn ms-auto me-0",onClick:t[21]||(t[21]=d=>n.showCategoryCompletedModal=!1)}," Close ")])])):h("",!0),n.showFlaggingModal?(l(),w(p,{key:2,userId:i.userDetailsStore.userId,contentType:"skill",contentId:n.skillId},null,8,["userId","contentId"])):h("",!0),i.userDetailsStore.role=="student"&&(n.showTutorialTip1||n.showTutorialTip5||n.showTutorialTip11)?(l(),a("div",_c,[o("div",yc,[n.showTutorialTip1?(l(),a("div",wc,[vc,o("button",{class:"btn primary-btn",onClick:t[22]||(t[22]=d=>r.progressTutorial(1))}," next ")])):n.showTutorialTip5?(l(),a("div",kc,[bc,o("button",{class:"btn primary-btn",onClick:t[23]||(t[23]=d=>r.progressTutorial(5))}," next ")])):n.showTutorialTip11?(l(),a("div",Tc,[Cc,o("button",{class:"btn primary-btn",onClick:t[24]||(t[24]=d=>r.progressTutorial(11))}," close ")])):h("",!0)])])):h("",!0),i.userDetailsStore.role=="editor"&&(n.showTutorialTip1||n.showTutorialTip4||n.showTutorialTip5)?(l(),a("div",Sc,[o("div",xc,[n.showTutorialTip1?(l(),a("div",Lc,[Ac,o("button",{class:"btn primary-btn",onClick:t[25]||(t[25]=d=>r.progressTutorial(1))}," next ")])):n.showTutorialTip4?(l(),a("div",Mc,[Ic,o("button",{class:"btn primary-btn",onClick:t[26]||(t[26]=d=>r.progressTutorial(4))}," next ")])):n.showTutorialTip5?(l(),a("div",Pc,[Oc,Dc,o("button",{class:"btn primary-btn",onClick:t[27]||(t[27]=d=>r.progressTutorial(5))}," next ")])):h("",!0)])])):h("",!0),i.userDetailsStore.role=="instructor"&&(n.showTutorialTip1||n.showTutorialTip4||n.showTutorialTip5)?(l(),a("div",Bc,[o("div",Ec,[n.showTutorialTip1?(l(),a("div",Rc,[Vc,o("button",{class:"btn primary-btn",onClick:t[28]||(t[28]=d=>r.progressTutorial(1))}," next ")])):n.showTutorialTip4?(l(),a("div",Nc,[zc,o("button",{class:"btn primary-btn",onClick:t[29]||(t[29]=d=>r.progressTutorial(4))}," next ")])):n.showTutorialTip5?(l(),a("div",Hc,[jc,Fc,o("button",{class:"btn primary-btn",onClick:t[30]||(t[30]=d=>r.progressTutorial(5))}," next ")])):h("",!0)])])):h("",!0)],64)}const qc=O(Wr,[["render",Uc],["__scopeId","data-v-79218bc7"]]),$c={data(){return{skillId:this.$route.params.skillId}},components:{ShowSkill:qc}},Wc={class:"position-relative d-flex"},Kc={class:"container"};function Yc(e,t,s,i,n,r){const c=_("ShowSkill");return l(),a("div",Wc,[o("div",Kc,[E(c)])])}const i1=O($c,[["render",Yc]]);export{i1 as default};
