import{_ as v,r as _,o as i,c as n,d as e,F as p,z as D,e as k,j as C,m as w,t as h,l as b,b as d,p as S,f as g,a as x,g as L,w as y,y as T,q as j,i as I}from"./main-cb77aeaa.js";import{u as A}from"./AssessmentsStore-3cd59d0a.js";import{u as O}from"./InstructorStudentsStore-03c2d05e.js";const M={data(){return{userSkills:[],noSkills:!0}},props:["userId"],async created(){const s=await fetch("/user-skills/unnested-list/"+this.userId);this.userSkills=await s.json()},computed:{availableSkills(){const s=[];for(let t=0;t<this.userSkills.length;t++)this.userSkills[t].is_accessible==1&this.userSkills[t].is_mastered!=1&this.userSkills[t].type!="domain"&&s.push({name:this.userSkills[t].name,id:this.userSkills[t].id,url:this.userSkills[t].url,level:this.userSkills[t].level});return s.length>0&&(this.noSkills=!1),s}},methods:{}},G=s=>(S("data-v-09f96c5d"),s=s(),g(),s),P=G(()=>e("h2",{class:"secondary-heading h4"},"Available Skills",-1)),Q={id:"skill-list"},H={key:0,id:"no-skill-cell"};function z(s,t,c,l,o,u){const a=_("router-link");return i(),n(p,null,[P,e("div",Q,[(i(!0),n(p,null,D(u.availableSkills,r=>(i(),n("div",null,[k(a,{class:b([{"grade-school":r.level=="grade_school","middle-school":r.level=="middle_school","high-school":r.level=="high_school",college:r.level=="college",phd:r.level=="phd"},"skill-link btn"]),to:`/skills/${r.url}`,target:"_blank"},{default:C(()=>[w(h(r.name),1)]),_:2},1032,["class","to"])]))),256)),o.noSkills?(i(),n("div",H)):d("",!0)])],64)}const B=v(M,[["render",z],["__scopeId","data-v-09f96c5d"]]);const R={data(){return{visitedSkills:[],noSkills:!0}},props:["userId"],async created(){const s=await fetch("/skills/last-visited/");this.visitedSkills=await s.json(),this.visitedSkills.length>0&&(this.noSkills=!1)},computed:{}},F=s=>(S("data-v-0ce1127d"),s=s(),g(),s),J=F(()=>e("h2",{class:"secondary-heading h4"},"Last visited Skills",-1)),W={id:"skill-list"},E={key:0,id:"no-skill-cell"};function Y(s,t,c,l,o,u){const a=_("router-link");return i(),n(p,null,[J,e("div",W,[(i(!0),n(p,null,D(o.visitedSkills,r=>(i(),n("div",null,[k(a,{class:b([{"grade-school":r.level=="grade_school","middle-school":r.level=="middle_school","high-school":r.level=="high_school",college:r.level=="college",phd:r.level=="phd"},"skill-link btn"]),to:`/skills/${r.url}`,target:"_blank"},{default:C(()=>[w(h(r.name),1)]),_:2},1032,["class","to"])]))),256)),o.noSkills?(i(),n("div",E)):d("",!0)])],64)}const Z=v(R,[["render",Y],["__scopeId","data-v-0ce1127d"]]);const K={setup(){const s=x(),t=L();return{userDetailsStore:s,skillsStore:t}},data(){return{goals:[]}},async created(){await this.getGoals(),this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let s=0;s<this.goals.length;s++){let t=this.skillsStore.skillsList.find(c=>c.id===this.goals[s].skill_id);this.goals[s].name=t.name,this.goals[s].level=t.level}},methods:{async getGoals(){const s=await fetch("/goals/"+this.userDetailsStore.userId+"/list");this.goals=await s.json()}}},X=s=>(S("data-v-9637b5b4"),s=s(),g(),s),ss=X(()=>e("h2",{class:"secondary-heading h4"},"Goals",-1)),ts={id:"goal-list"};function es(s,t,c,l,o,u){const a=_("router-link");return i(),n(p,null,[ss,e("div",ts,[(i(!0),n(p,null,D(o.goals,r=>(i(),n("div",null,[k(a,{class:b([{"grade-school":r.level=="grade_school","middle-school":r.level=="middle_school","high-school":r.level=="high_school",college:r.level=="college",phd:r.level=="phd"},"goal-link btn"]),to:`/goals/${r.id}`,target:"_blank"},{default:C(()=>[w(h(r.name),1)]),_:2},1032,["class","to"])]))),256))])],64)}const os=v(K,[["render",es],["__scopeId","data-v-9637b5b4"]]);const is={setup(){const s=x();return s.getUserDetails(),{userDetailsStore:s}},data(){return{notifications:[]}},computed:{},async created(){await this.getNotifications()},methods:{getNotifications(){fetch("/notifications/list").then(function(s){return s.json()}).then(s=>this.notifications=s)},SaveChange(){const s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({notification1:this.notifications.notification_1,notification2:this.notifications.notification_2})};var t="/notifications/edit";fetch(t,s)}}},ns=s=>(S("data-v-a441cf73"),s=s(),g(),s),ls=ns(()=>e("h2",{class:"secondary-heading h4"},"Notifications",-1)),rs={class:"table-div"},as={key:0,class:"border-bottom p-2"},us={key:1},cs={key:2,class:"p-2"},ds={key:3};function hs(s,t,c,l,o,u){return i(),n(p,null,[ls,e("div",rs,[l.userDetailsStore.role!="admin"?(i(),n("div",as,h(o.notifications.notification_1),1)):(i(),n("div",us,[y(e("textarea",{onChange:t[0]||(t[0]=a=>u.SaveChange()),"onUpdate:modelValue":t[1]||(t[1]=a=>o.notifications.notification_1=a),class:"form-control border-bottom p-2",rows:"3"},null,544),[[T,o.notifications.notification_1]])])),l.userDetailsStore.role!="admin"?(i(),n("div",cs,h(o.notifications.notification_2),1)):(i(),n("div",ds,[y(e("textarea",{onChange:t[2]||(t[2]=a=>u.SaveChange()),"onUpdate:modelValue":t[3]||(t[3]=a=>o.notifications.notification_2=a),class:"form-control p-2",rows:"3"},null,544),[[T,o.notifications.notification_2]])]))])],64)}const _s=v(is,[["render",hs],["__scopeId","data-v-a441cf73"]]);const ms={setup(){const s=x();return s.getUserDetails(),{userDetailsStore:s}},data(){return{news:[]}},computed:{},async created(){await this.getNews()},methods:{getNews(){fetch("/news/list").then(function(s){return s.json()}).then(s=>this.news=s)},SaveChange(){const s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({news1:this.news.news_1,news2:this.news.news_2,news3:this.news.news_3,news4:this.news.news_4})};var t="/news/edit";fetch(t,s)}}},ps=s=>(S("data-v-7cea90d3"),s=s(),g(),s),fs=ps(()=>e("h2",{class:"secondary-heading h4"},"News",-1)),ks={class:"table-div row rounded mb-3"},vs={class:"p-2 col-lg-3 col-md-6"},Ss={key:0},gs={class:"p-2 col-lg-3 col-md-6"},ws={key:0},ys={class:"p-2 col-lg-3 col-md-6"},Ts={key:0},bs={class:"p-2 col-lg-3 col-md-6"},Ds={key:0};function Cs(s,t,c,l,o,u){return i(),n(p,null,[fs,e("div",ks,[e("div",vs,[l.userDetailsStore.role!="admin"?(i(),n("p",Ss,h(o.news.news_1),1)):y((i(),n("textarea",{key:1,onChange:t[0]||(t[0]=a=>u.SaveChange()),"onUpdate:modelValue":t[1]||(t[1]=a=>o.news.news_1=a),class:"form-control",rows:"3"},null,544)),[[T,o.news.news_1]])]),e("div",gs,[l.userDetailsStore.role!="admin"?(i(),n("p",ws,h(o.news.news_2),1)):y((i(),n("textarea",{key:1,onChange:t[2]||(t[2]=a=>u.SaveChange()),"onUpdate:modelValue":t[3]||(t[3]=a=>o.news.news_2=a),class:"form-control",rows:"3"},null,544)),[[T,o.news.news_2]])]),e("div",ys,[l.userDetailsStore.role!="admin"?(i(),n("p",Ts,h(o.news.news_3),1)):y((i(),n("textarea",{key:1,onChange:t[4]||(t[4]=a=>u.SaveChange()),"onUpdate:modelValue":t[5]||(t[5]=a=>o.news.news_3=a),class:"form-control",rows:"3"},null,544)),[[T,o.news.news_3]])]),e("div",bs,[l.userDetailsStore.role!="admin"?(i(),n("p",Ds,h(o.news.news_4),1)):y((i(),n("textarea",{key:1,onChange:t[6]||(t[6]=a=>u.SaveChange()),"onUpdate:modelValue":t[7]||(t[7]=a=>o.news.news_4=a),class:"form-control",rows:"3"},null,544)),[[T,o.news.news_4]])])])],64)}const Is=v(ms,[["render",Cs],["__scopeId","data-v-7cea90d3"]]);const xs={props:{assessments:{type:Array,required:!0}},setup(){return{}},data(){return{}},computed:{},methods:{}},Ls=s=>(S("data-v-5dc9288a"),s=s(),g(),s),Ns={class:"container-fluid"},$s=Ls(()=>e("h2",{class:"secondary-heading h4"},"Mark Assessments",-1)),qs={id:"list-body"},Us={class:"assessment"},Vs={id:"student-name"},js={id:"skill-name"},As={id:"date"};function Os(s,t,c,l,o,u){const a=_("RouterLink");return i(),n("div",Ns,[$s,e("div",qs,[(i(!0),n(p,null,D(this.assessments,r=>(i(),n("div",Us,[k(a,{class:"assessment-link",to:"/mark-assessment/"+r.id},{default:C(()=>[e("span",Vs,h(r.studentUsername)+", ",1),e("span",js,h(r.skillName)+", ",1),e("span",As,h(r.date),1)]),_:2},1032,["to"])]))),256))])])}const Ms=v(xs,[["render",Os],["__scopeId","data-v-5dc9288a"]]);const Gs={props:{questions:{type:Array,required:!0}},methods:{formatDate(s){var t=s.replace("T"," ");t=t.replace("Z"," ");let c=t.split(/[- :]/);var l=new Date(Date.UTC(c[0],c[1]-1,c[2],c[3],c[4],c[5])),o={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return l=l.toLocaleDateString("en-US",o),l}}},Ps=s=>(S("data-v-1df3f680"),s=s(),g(),s),Qs={class:"container-fluid"},Hs=Ps(()=>e("h2",{class:"secondary-heading h4"},"Check New Questions",-1)),zs={class:"list-body"},Bs={class:"question"},Rs={class:"student-name"},Fs={class:"skill-name"},Js={class:"date"};function Ws(s,t,c,l,o,u){const a=_("RouterLink");return i(),n("div",Qs,[Hs,e("div",zs,[(i(!0),n(p,null,D(c.questions,r=>(i(),n("div",Bs,[k(a,{class:"question-link",to:`/check-student-question/${r.id}`},{default:C(()=>[e("span",Rs,h(r.student)+", ",1),e("span",Fs,h(r.skillname)+", ",1),e("span",Js,h(u.formatDate(r.create_date)),1)]),_:2},1032,["to"])]))),256))])])}const Es=v(Gs,[["render",Ws],["__scopeId","data-v-1df3f680"]]);const Ys={setup(){const s=x(),t=A(),c=j(),l=L(),o=O();return s.getUserDetails(),{userDetailsStore:s,assessmentsStore:t,usersStore:c,skillsStore:l,instructorStudentsStore:o}},data(){return{assessments:[],questions:[],studentIds:[],isTutorialComplete:!1,showTutorialTip1:!1,showTutorialTip2:!1,showTutorialTip3:!1,showTutorialTip4:!1,showTutorialTip5:!1}},components:{News:Is,Notifications:_s,StudentProgress:B,MarkAssessment:Ms,LastVisitedSkills:Z,Goals:os,HubStudentQuestionList:Es},computed:{name(){return this.userDetailsStore.firstName+" "+this.userDetailsStore.lastName}},async created(){this.userDetailsStore.role=="instructor"&&(await this.fetchAssessments(),await this.getStudentMCQuestions()),await this.checkIfTutorialComplete()},methods:{async fetchAssessments(){await this.assessmentsStore.getAssessments(),this.instructorStudentsStore.instructorStudentsList.length==0&&await this.instructorStudentsStore.getInstructorStudentsList();for(let s=0;s<this.instructorStudentsStore.instructorStudentsList.length;s++)this.userDetailsStore.userId==this.instructorStudentsStore.instructorStudentsList[s].instructor_id&&this.studentIds.push(this.instructorStudentsStore.instructorStudentsList[s].student_id);for(let s=0;s<this.assessmentsStore.assessments.length;s++)for(let t=0;t<this.studentIds.length;t++)this.assessmentsStore.assessments[s].student_id==this.studentIds[t]&&this.assessments.push(this.assessmentsStore.assessments[s]);for(let s=0;s<this.assessments.length;s++){let t=new Date(this.assessments[s].date).toDateString();this.assessments[s].date=t}this.usersStore.users.length==0&&await this.usersStore.getUsers();for(let s=0;s<this.assessments.length;s++)for(let t=0;t<this.usersStore.users.length;t++)this.assessments[s].student_id==this.usersStore.users[t].id&&(this.assessments[s].studentUsername=this.usersStore.users[t].username);this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let s=0;s<this.assessments.length;s++)for(let t=0;t<this.skillsStore.skillsList.length;t++)this.assessments[s].skill_id==this.skillsStore.skillsList[t].id&&(this.assessments[s].skillName=this.skillsStore.skillsList[t].name)},async getStudentMCQuestions(){const t=await(await fetch("/questions/student-mc-questions/full-data-list")).json();this.questions=t},async checkIfTutorialComplete(){const t=await(await fetch("/users/check-tutorial-progress/hub/"+this.userDetailsStore.userId)).json();t==0?(this.isTutorialComplete=!1,this.showTutorialTip1=!0):t==1&&(this.isTutorialComplete=!0)},progressTutorial(s){if(s==1)this.showTutorialTip1=!1,this.showTutorialTip2=!0;else if(s==2){if(this.showTutorialTip2=!1,this.userDetailsStore.role=="editor"){this.markTutorialComplete();return}this.showTutorialTip3=!0}else if(s==3){if(this.showTutorialTip3=!1,this.userDetailsStore.role=="instructor"){this.markTutorialComplete();return}this.showTutorialTip4=!0}else s==4&&(this.showTutorialTip4=!1,this.markTutorialComplete())},markTutorialComplete(){let s="/users/mark-tutorial-complete/hub/"+this.userDetailsStore.userId;fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"}})}}},m=s=>(S("data-v-853df465"),s=s(),g(),s),Zs={class:"container min-vh-100"},Ks={class:"row content-row"},Xs={class:"hub-component h-100"},st={key:2,class:"info-panel bg-light rounded p-2 mb-2"},tt=m(()=>e("p",null," This section shows your available skills. These are the skills that you can try to master by taking a quiz. ",-1)),et=m(()=>e("p",null," Once you master a skill, more skills will get unlocked. ",-1)),ot={class:"hub-component h-100"},it={key:2,class:"info-panel bg-light rounded p-2 mb-2"},nt=m(()=>e("p",null," This section shows your the last 5 skill pages you visited. ",-1)),lt={key:2,class:"col-lg-4 col-md-6 mb-2"},rt={class:"hub-component h-100"},at={key:0,class:"info-panel bg-light rounded p-2 mb-2"},ut=m(()=>e("p",null,"This section shows any goals you might have made.",-1)),ct=m(()=>e("p",null," You can make a goal when there is a skill you want to master but it is not unlocked yet. ",-1)),dt={class:"row"},ht={class:"col-lg-4 col-md-6 mb-2"},_t={class:"hub-component h-100"},mt={class:"row"},pt={class:"col"},ft={class:"hub-component h-100"},kt={key:0,class:"modal"},vt={key:0,class:"modal-content"},St=m(()=>e("p",null,"This is your hub page.",-1)),gt={key:1,class:"modal"},wt={class:"modal-content"},yt={key:0},Tt=m(()=>e("p",null,"Welcome to the Collins Institute!",-1)),bt={key:1},Dt=m(()=>e("p",null,"This is your hub page.",-1)),Ct={key:2},It=m(()=>e("p",null," On this page you can read news and notifications, check if you have any quizzes to mark, or questions that your students have added to the question bank you need approve. ",-1)),xt={key:2,class:"modal"},Lt={class:"modal-content"},Nt={key:0},$t=m(()=>e("p",null,"Welcome to the Collins Institute!",-1)),qt={key:1},Ut=m(()=>e("p",null,"This is the hub page.",-1)),Vt=m(()=>e("p",null," On this page you can read any news and notifications from the institute. ",-1));function jt(s,t,c,l,o,u){const a=_("StudentProgress"),r=_("MarkAssessment"),N=_("LastVisitedSkills"),$=_("HubStudentQuestionList"),q=_("Goals"),U=_("Notifications"),V=_("News");return i(),n(p,null,[e("div",Zs,[e("div",Ks,[l.userDetailsStore.role!="editor"?(i(),n("div",{key:0,class:b(["col-lg-4 col-md-6 mb-2",{"d-none":l.userDetailsStore.role=="instructor"&&o.assessments.length===0}])},[e("div",Xs,[l.userDetailsStore.role=="student"?(i(),I(a,{key:0,userId:l.userDetailsStore.userId},null,8,["userId"])):l.userDetailsStore.role=="instructor"?(i(),I(r,{key:1,assessments:o.assessments},null,8,["assessments"])):d("",!0),o.showTutorialTip2&&l.userDetailsStore.role=="student"?(i(),n("div",st,[tt,et,e("button",{class:"btn primary-btn",onClick:t[0]||(t[0]=f=>u.progressTutorial(2))}," next ")])):d("",!0)])],2)):d("",!0),l.userDetailsStore.role!="editor"?(i(),n("div",{key:1,class:b(["col-lg-4 col-md-6 mb-2",{"d-none":l.userDetailsStore.role=="instructor"&&o.questions.length===0}])},[e("div",ot,[l.userDetailsStore.role=="student"?(i(),I(N,{key:0,userId:l.userDetailsStore.userId},null,8,["userId"])):l.userDetailsStore.role=="instructor"?(i(),I($,{key:1,questions:o.questions},null,8,["questions"])):d("",!0),o.showTutorialTip3&&l.userDetailsStore.role=="student"?(i(),n("div",it,[nt,e("button",{class:"btn primary-btn",onClick:t[1]||(t[1]=f=>u.progressTutorial(3))}," next ")])):d("",!0)])],2)):d("",!0),l.userDetailsStore.role=="student"?(i(),n("div",lt,[e("div",rt,[k(q),o.showTutorialTip4&&l.userDetailsStore.role=="student"?(i(),n("div",at,[ut,ct,e("button",{class:"btn primary-btn",onClick:t[2]||(t[2]=f=>u.progressTutorial(4))}," close ")])):d("",!0)])])):d("",!0)]),e("div",dt,[e("div",ht,[e("div",_t,[k(U)])])]),e("div",mt,[e("div",pt,[e("div",ft,[k(V)])])])]),l.userDetailsStore.role=="student"&&o.showTutorialTip1?(i(),n("div",kt,[o.showTutorialTip1&&l.userDetailsStore.role=="student"?(i(),n("div",vt,[e("div",null,[St,e("button",{class:"btn primary-btn",onClick:t[3]||(t[3]=f=>u.progressTutorial(1))}," next ")])])):d("",!0)])):d("",!0),l.userDetailsStore.role=="instructor"&&(o.showTutorialTip1||o.showTutorialTip2||o.showTutorialTip3)?(i(),n("div",gt,[e("div",wt,[o.showTutorialTip1&&l.userDetailsStore.role=="instructor"?(i(),n("div",yt,[Tt,e("p",null,[w(" Click "),e("button",{class:"btn primary-btn",onClick:t[4]||(t[4]=f=>u.progressTutorial(1))}," next "),w(" to start the tutorial. ")])])):d("",!0),o.showTutorialTip2&&l.userDetailsStore.role=="instructor"?(i(),n("div",bt,[Dt,e("button",{class:"btn primary-btn",onClick:t[5]||(t[5]=f=>u.progressTutorial(2))}," next ")])):d("",!0),o.showTutorialTip3&&l.userDetailsStore.role=="instructor"?(i(),n("div",Ct,[It,e("button",{class:"btn primary-btn",onClick:t[6]||(t[6]=f=>u.progressTutorial(3))}," close ")])):d("",!0)])])):d("",!0),l.userDetailsStore.role=="editor"&&(o.showTutorialTip1||o.showTutorialTip2)?(i(),n("div",xt,[e("div",Lt,[o.showTutorialTip1&&l.userDetailsStore.role=="editor"?(i(),n("div",Nt,[$t,e("p",null,[w(" Click "),e("button",{class:"btn primary-btn",onClick:t[7]||(t[7]=f=>u.progressTutorial(1))}," next "),w(" to start the tutorial. ")])])):d("",!0),o.showTutorialTip2&&l.userDetailsStore.role=="editor"?(i(),n("div",qt,[Ut,Vt,e("button",{class:"btn primary-btn",onClick:t[8]||(t[8]=f=>u.progressTutorial(2))}," close ")])):d("",!0)])])):d("",!0)],64)}const Gt=v(Ys,[["render",jt],["__scopeId","data-v-853df465"]]);export{Gt as default};
