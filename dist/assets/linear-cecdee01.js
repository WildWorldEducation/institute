import{a as U}from"./transform-35b9fb9e.js";import{i as $,t as on,c as an,d as un,e as fn,f as sn}from"./continuous-03958144.js";class X extends Map{constructor(t,e=cn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Y(this,t))}has(t){return super.has(Y(this,t))}set(t,e){return super.set(dn(this,t),e)}delete(t){return super.delete(hn(this,t))}}function Y({_intern:n,_key:t},e){const r=t(e);return n.has(r)?n.get(r):e}function dn({_intern:n,_key:t},e){const r=t(e);return n.has(r)?n.get(r):(n.set(r,e),e)}function hn({_intern:n,_key:t},e){const r=t(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}function cn(n){return n!==null&&typeof n=="object"?n.valueOf():n}function mn(n,t){return Array.from(t,e=>n[e])}function Tn(n,...t){if(typeof n[Symbol.iterator]!="function")throw new TypeError("values is not iterable");n=Array.from(n);let[e]=t;if(e&&e.length!==2||t.length>1){const r=Uint32Array.from(n,(i,o)=>o);return t.length>1?(t=t.map(i=>n.map(i)),r.sort((i,o)=>{for(const a of t){const f=R(a[i],a[o]);if(f)return f}})):(e=n.map(e),r.sort((i,o)=>R(e[i],e[o]))),mn(n,r)}return n.sort(gn(e))}function gn(n=U){if(n===U)return R;if(typeof n!="function")throw new TypeError("compare is not a function");return(t,e)=>{const r=n(t,e);return r||r===0?r:(n(e,e)===0)-(n(t,t)===0)}}function R(n,t){return(n==null||!(n>=n))-(t==null||!(t>=t))||(n<t?-1:n>t?1:0)}function Rn(n,t){let e;if(t===void 0)for(const r of n)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of n)(i=t(i,++r,n))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function ln(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((t-n)/e))|0,o=new Array(i);++r<i;)o[r]=n+r*e;return o}function pn(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function E(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}function P(n){return n=E(Math.abs(n)),n?n[1]:NaN}function yn(n,t){return function(e,r){for(var i=e.length,o=[],a=0,f=n[0],c=0;i>0&&f>0&&(c+f+1>r&&(f=Math.max(1,r-c)),o.push(e.substring(i-=f,i+f)),!((c+=f+1)>r));)f=n[a=(a+1)%n.length];return o.reverse().join(t)}}function Mn(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e]})}}var xn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function O(n){if(!(t=xn.exec(n)))throw new Error("invalid format: "+n);var t;return new D({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}O.prototype=D.prototype;function D(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}D.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bn(n){n:for(var t=n.length,e=1,r=-1,i;e<t;++e)switch(n[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+n[e])break n;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var K;function wn(n,t){var e=E(n,t);if(!e)return n+"";var r=e[0],i=e[1],o=i-(K=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+E(n,Math.max(0,t+o-1))[0]}function Z(n,t){var e=E(n,t);if(!e)return n+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const q={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:pn,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>Z(n*100,t),r:Z,s:wn,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function v(n){return n}var B=Array.prototype.map,H=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function kn(n){var t=n.grouping===void 0||n.thousands===void 0?v:yn(B.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?v:Mn(B.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",f=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function d(s){s=O(s);var h=s.fill,p=s.align,m=s.sign,b=s.symbol,y=s.zero,w=s.width,T=s.comma,k=s.precision,L=s.trim,g=s.type;g==="n"?(T=!0,g="g"):q[g]||(k===void 0&&(k=12),L=!0,g="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var tn=b==="$"?e:b==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",rn=b==="$"?r:/[%p]/.test(g)?a:"",C=q[g],en=/[defgprs%]/.test(g);k=k===void 0?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function F(u){var S=tn,l=rn,A,G,N;if(g==="c")l=C(u)+l,u="";else{u=+u;var I=u<0||1/u<0;if(u=isNaN(u)?c:C(Math.abs(u),k),L&&(u=bn(u)),I&&+u==0&&m!=="+"&&(I=!1),S=(I?m==="("?m:f:m==="-"||m==="("?"":m)+S,l=(g==="s"?H[8+K/3]:"")+l+(I&&m==="("?")":""),en){for(A=-1,G=u.length;++A<G;)if(N=u.charCodeAt(A),48>N||N>57){l=(N===46?i+u.slice(A+1):u.slice(A))+l,u=u.slice(0,A);break}}}T&&!y&&(u=t(u,1/0));var j=S.length+u.length+l.length,M=j<w?new Array(w-j+1).join(h):"";switch(T&&y&&(u=t(M+u,M.length?w-l.length:1/0),M=""),p){case"<":u=S+u+l+M;break;case"=":u=S+M+u+l;break;case"^":u=M.slice(0,j=M.length>>1)+S+u+l+M.slice(j);break;default:u=M+S+u+l;break}return o(u)}return F.toString=function(){return s+""},F}function x(s,h){var p=d((s=O(s),s.type="f",s)),m=Math.max(-8,Math.min(8,Math.floor(P(h)/3)))*3,b=Math.pow(10,-m),y=H[8+m/3];return function(w){return p(b*w)+y}}return{format:d,formatPrefix:x}}var z,Q,V;Sn({thousands:",",grouping:[3],currency:["$",""]});function Sn(n){return z=kn(n),Q=z.format,V=z.formatPrefix,z}function An(n){return Math.max(0,-P(Math.abs(n)))}function Pn(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(P(t)/3)))*3-P(Math.abs(n)))}function Nn(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,P(t)-P(n))+1}const J=Symbol("implicit");function W(){var n=new X,t=[],e=[],r=J;function i(o){let a=n.get(o);if(a===void 0){if(r!==J)return r;n.set(o,a=t.push(o)-1)}return e[a%e.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],n=new X;for(const a of o)n.has(a)||n.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(e=Array.from(o),i):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return W(t,e).unknown(r)},$.apply(i,arguments),i}function _(){var n=W().unknown(void 0),t=n.domain,e=n.range,r=0,i=1,o,a,f=!1,c=0,d=0,x=.5;delete n.unknown;function s(){var h=t().length,p=i<r,m=p?i:r,b=p?r:i;o=(b-m)/Math.max(1,h-c+d*2),f&&(o=Math.floor(o)),m+=(b-m-o*(h-c))*x,a=o*(1-c),f&&(m=Math.round(m),a=Math.round(a));var y=ln(h).map(function(w){return m+o*w});return e(p?y.reverse():y)}return n.domain=function(h){return arguments.length?(t(h),s()):t()},n.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,s()):[r,i]},n.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,f=!0,s()},n.bandwidth=function(){return a},n.step=function(){return o},n.round=function(h){return arguments.length?(f=!!h,s()):f},n.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),s()):c},n.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),s()):c},n.paddingOuter=function(h){return arguments.length?(d=+h,s()):d},n.align=function(h){return arguments.length?(x=Math.max(0,Math.min(1,h)),s()):x},n.copy=function(){return _(t(),[r,i]).round(f).paddingInner(c).paddingOuter(d).align(x)},$.apply(s(),arguments)}function nn(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return nn(t())},n}function $n(){return nn(_.apply(null,arguments).paddingInner(1))}function In(n,t,e,r){var i=on(n,t,e),o;switch(r=O(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(t));return r.precision==null&&!isNaN(o=Pn(i,a))&&(r.precision=o),V(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Nn(i,Math.max(Math.abs(n),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=An(i))&&(r.precision=o-(r.type==="%")*2);break}}return Q(r)}function jn(n){var t=n.domain;return n.ticks=function(e){var r=t();return fn(r[0],r[r.length-1],e??10)},n.tickFormat=function(e,r){var i=t();return In(i[0],i[i.length-1],e??10,r)},n.nice=function(e){e==null&&(e=10);var r=t(),i=0,o=r.length-1,a=r[i],f=r[o],c,d,x=10;for(f<a&&(d=a,a=f,f=d,d=i,i=o,o=d);x-- >0;){if(d=sn(a,f,e),d===c)return r[i]=a,r[o]=f,t(r);if(d>0)a=Math.floor(a/d)*d,f=Math.ceil(f/d)*d;else if(d<0)a=Math.ceil(a*d)/d,f=Math.floor(f*d)/d;else break;c=d}return n},n}function zn(){var n=an();return n.copy=function(){return un(n,zn())},$.apply(n,arguments),jn(n)}export{_ as b,zn as l,Rn as m,W as o,$n as p,Tn as s};
