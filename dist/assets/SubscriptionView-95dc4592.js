import{_ as p,f as k,L as T,i as y,o as r,c as l,a as e,q as m,t as d,s as b,b as a,p as _,d as g}from"./main-7979a8f3.js";const S={setup(){const s=k(),t=T(),c=y();return{userDetailsStore:s,settingsStore:t,sessionDetailsStore:c}},data(){return{monthlyTokenUsage:null,year:0,month:"",isAITokenLimitReached:!1,isMobileCheck:window.innerWidth,showTooltip:!1}},async mounted(){let s=document.createElement("script");s.setAttribute("src","https://js.stripe.com/v3/"),document.head.appendChild(s),this.settingsStore.freePlanTokenLimit||await this.settingsStore.getSettings(),await this.userDetailsStore.getUserDetails(),this.userDetailsStore.subscriptionTier=="free"?this.settingsStore.freePlanTokenLimit&&this.userDetailsStore.monthlyTokenUsage&&this.settingsStore.freePlanTokenLimit<=this.userDetailsStore.monthlyTokenUsage&&(this.isAITokenLimitReached=!0):this.userDetailsStore.subscriptionTier=="basic"&&this.settingsStore.basicPlanTokenLimit&&this.userDetailsStore.monthlyTokenUsage&&this.settingsStore.basicPlanTokenLimit<=this.userDetailsStore.monthlyTokenUsage&&(this.isAITokenLimitReached=!0),this.year=new Date().getFullYear();const t=["January","February","March","April","May","June","July","August","September","October","November","December"],c=new Date;this.month=t[c.getMonth()]},computed:{formattedMonthlyTokenUsage(){return this.userDetailsStore.monthlyTokenUsage?this.userDetailsStore.monthlyTokenUsage.toLocaleString():"0"},formattedFreePlanTokenLimit(){return this.settingsStore.freePlanTokenLimit?this.settingsStore.freePlanTokenLimit.toLocaleString():"0"},formattedBasicPlanTokenLimit(){return this.settingsStore.basicPlanTokenLimit?this.settingsStore.basicPlanTokenLimit.toLocaleString():"0"},subscriptionTierFormatted(){return this.userDetailsStore.subscriptionTier?this.userDetailsStore.subscriptionTier.toLocaleString():"free"}},methods:{checkout(s){fetch("/subscriptions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,planType:s})}).then(t=>t.ok?t.json():t.json().then(c=>Promise.reject(c))).then(({url:t})=>{window.location=t}).catch(t=>{console.error(t.error)})},loadPortal(){fetch("/subscriptions/create-customer-portal-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId})}).then(s=>s.ok?s.json():s.json().then(t=>Promise.reject(t))).then(({url:s})=>{window.location=s}).catch(s=>{console.error(s.error)})},openTooltip(){this.showTooltip=!0},closeTooltip(){this.showTooltip=!1}}},o=s=>(_("data-v-00bb6205"),s=s(),g(),s),f={class:"container"},D={class:"d-flex justify-content-end w-100"},w=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[e("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),v=[w],L={class:"row mt-4"},I={class:"col-md mb-3"},P=o(()=>e("strong",null,"Your subscription tier:",-1)),C=o(()=>e("strong",null,"Current token usage:",-1)),M={key:0,class:"alert alert-warning",role:"alert"},x={key:0,class:"modal"},j={class:"modal-content"},U=o(()=>e("p",null," It is against our policy to share accounts and each account is meant to only be used by one user. ",-1)),A=o(()=>e("hr",null,null,-1)),B={class:"row mt-4"},F=o(()=>e("h2",{class:"secondary-heading h4"},"Free plan",-1)),N=o(()=>e("strong",null,"Token limit:",-1)),J={key:0,disabled:"",class:"btn primary-btn mt-2"},O=o(()=>e("h2",{class:"secondary-heading h4"},"Basic plan",-1)),R=o(()=>e("p",null,"Ideal for moderate use",-1)),V=o(()=>e("p",null,"$20 / month",-1)),Y=o(()=>e("strong",null,"Token limit:",-1)),z={key:1,disabled:"",class:"btn primary-btn mt-1 mb-3"},E=o(()=>e("h2",{class:"secondary-heading h4"},"Infinite plan",-1)),q=o(()=>e("p",null,"Ideal for daily use",-1)),W=o(()=>e("p",null,"$100 / month",-1)),G=o(()=>e("p",null,[e("strong",null,"Token limit:"),b(" Infinite ")],-1)),H={key:1,disabled:"",class:"btn primary-btn mt-1 mb-3"};function K(s,t,c,u,n,i){return r(),l("div",f,[e("div",D,[e("button",{class:"btn mb-2",onClick:t[0]||(t[0]=(...h)=>i.openTooltip&&i.openTooltip(...h))},v)]),e("div",L,[e("div",I,[e("h2",{class:m(["secondary-heading h4 mb-4",{"text-center":n.isMobileCheck<576}])}," Monthly AI usage: "+d(n.month)+", "+d(n.year),3),e("ul",null,[e("li",null,[e("p",null,[P,b(" "+d(i.subscriptionTierFormatted),1)])]),e("li",null,[e("p",null,[C,b(" "+d(i.formattedMonthlyTokenUsage),1)])])]),n.isAITokenLimitReached?(r(),l("div",M," You are over the monthly free limit. You can't use the AI features until next month. ")):a("",!0)]),n.showTooltip?(r(),l("div",x,[e("div",j,[e("div",null,[U,e("button",{class:"btn primary-btn",onClick:t[1]||(t[1]=(...h)=>i.closeTooltip&&i.closeTooltip(...h))}," Close ")])])])):a("",!0),e("div",{class:m(["col-md mb-3 d-flex",n.isMobileCheck>576?"justify-content-end":"justify-content-center"])},[u.userDetailsStore.subscriptionTier!="free"?(r(),l("button",{key:0,class:"btn primary-btn",onClick:t[2]||(t[2]=h=>i.loadPortal())}," Manage billing ")):a("",!0)],2)]),A,e("div",B,[e("div",{class:m(["col-md mb-3",{"text-center":n.isMobileCheck<576}])},[F,e("p",null,[N,b(" "+d(i.formattedFreePlanTokenLimit),1)]),u.userDetailsStore.subscriptionTier=="free"?(r(),l("button",J," current plan ")):a("",!0)],2),e("div",{class:m(["col-md mb-3",{"text-center":n.isMobileCheck<576}])},[O,R,V,e("p",null,[Y,b(" "+d(i.formattedBasicPlanTokenLimit),1)]),u.userDetailsStore.subscriptionTier=="free"?(r(),l("button",{key:0,onClick:t[3]||(t[3]=h=>i.checkout("basic")),class:"btn primary-btn mt-2"}," buy ")):a("",!0),u.userDetailsStore.subscriptionTier=="basic"?(r(),l("button",z," current plan ")):a("",!0)],2),e("div",{class:m(["col-md mb-3",{"text-center":n.isMobileCheck<576}])},[E,q,W,G,u.userDetailsStore.subscriptionTier=="free"?(r(),l("button",{key:0,onClick:t[4]||(t[4]=h=>i.checkout("infinite")),class:"btn primary-btn mt-2"}," buy ")):a("",!0),u.userDetailsStore.subscriptionTier=="infinite"?(r(),l("button",H," current plan ")):a("",!0)],2)])])}const X=p(S,[["render",K],["__scopeId","data-v-00bb6205"]]);export{X as default};
