import{_ as u,e as h,L as p,o as l,c,a as t,t as i,s as n,b as d}from"./main-85acd4e9.js";const m={setup(){const s=h(),e=p();return{userDetailsStore:s,settingsStore:e}},data(){return{monthlyTokenUsage:null,year:0,month:"",isAITokenLimitReached:!1,tokenLimit:this.settingsStore.freeMonthlyTokens.toLocaleString()}},async mounted(){this.settingsStore.freeMonthlyTokens==0&&await this.settingsStore.getSettings(),await this.userDetailsStore.getUserDetails(),this.userDetailsStore.subscriptionTier=="free"?this.settingsStore.freeMonthlyTokens<=this.userDetailsStore.monthlyTokenUsage&&(this.isAITokenLimitReached=!0):this.userDetailsStore.subscriptionTier=="capped"&&this.settingsStore.cappedPlanTokenLimit<=this.userDetailsStore.monthlyTokenUsage&&(this.isAITokenLimitReached=!0),this.year=new Date().getFullYear();const s=["January","February","March","April","May","June","July","August","September","October","November","December"],e=new Date;this.month=s[e.getMonth()],this.userDetailsStore.subscriptionTier=="free"||(this.userDetailsStore.subscriptionTier=="capped"?this.tokenLimit=this.settingsStore.cappedPlanTokenLimit:this.userDetailsStore.subscriptionTier=="infinite")},methods:{checkout(s){fetch("/subscriptions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,planType:s})}).then(e=>e.ok?e.json():e.json().then(r=>Promise.reject(r))).then(({url:e})=>{console.log("add tokens"),window.location=e}).catch(e=>{console.error(e.error)})}}},g={class:"container"},S=t("h1",{class:"heading"},"Subscription",-1),f={class:"secondary-heading h4 mb-4"},k=t("strong",null,"Your subscription tier:",-1),y=t("strong",null,"Plan token limit:",-1),T=t("strong",null,"Current usage:",-1),_={key:0,class:"alert alert-warning",role:"alert"};function b(s,e,r,a,o,D){return l(),c("div",g,[S,t("h2",f," Monthly AI usage: "+i(o.month)+", "+i(o.year),1),t("ul",null,[t("li",null,[t("p",null,[k,n(" "+i(a.userDetailsStore.subscriptionTier.toLocaleString()),1)])]),t("li",null,[t("p",null,[y,n(" "+i(o.tokenLimit),1)])]),t("li",null,[t("p",null,[T,n(" "+i(a.userDetailsStore.monthlyTokenUsage.toLocaleString()),1)])])]),o.isAITokenLimitReached?(l(),c("div",_," You are over the monthly free limit. You can't use the AI features until next month. ")):d("",!0)])}const w=u(m,[["render",b]]);export{w as default};
