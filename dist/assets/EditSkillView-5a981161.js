import{_ as T,f as U,h as M,R as F,r as w,o,c as n,a as e,t as k,k as L,l as I,s as g,b as d,w as m,C as p,q as y,F as _,z as C,O as B,Q as b,g as x,p as H,d as V,E as D}from"./main-0de625b8.js";import{u as P,a as O}from"./TagsStore-5ce32691.js";import{L as R}from"./loadingModal-346cbde4.js";import{F as q}from"./FailsModal-8eecd768.js";import{T as E}from"./TooltipBtn-bf6f29d5.js";import{S as N}from"./SkillTimeTracker-df1ecde9.js";const A={setup(){const l=U(),t=M(),h=P();h.tagsList.length==0&&h.getTagsList();const a=O(),s=F();return{skillsStore:t,tagsStore:h,skillTagsStore:a,router:s,userDetailsStore:l}},data(){return{skillUrl:this.$route.params.skillUrl,skills:[],skill:{id:"",name:"",parent:"",description:"",intro_sentence:"",image_url:"",icon_url:"",mastery_requirements:"",tags:[],type:null,level:null,order:null,url:""},filterChecked:!1,image:"",icon:"",originalImageUrl:"",superSkills:[],levels:[{id:"grade_school",name:"Grade school"},{id:"middle_school",name:"Middle school"},{id:"high_school",name:"High school"},{id:"college",name:"College"},{id:"phd",name:"PhD"}],showLevelDropDown:!1,showOrderDropDown:!1,showLevel:"",parentInput:{inputText:"",suggestSkills:[]},clusterParentInput:{inputText:"",suggestSuperSkills:[]},validate:{violated:!1,name:!1,description:!1,intro_sentence:!1,orphan:!1,superValidate:!1,noChild:!1},filters:[],deleteButtonHover:!1,showModal:!1,step1Confirm:!1,skillNameConfirm:"",step2Confirm:!1,orderArray:Array.from({length:20},(l,t)=>t+1),comment:"",isAnotherInstanceOfExistingSkill:!1,randomNum:0,loadingStatus:"",showLoadingModal:!1,originalSkill:{},parentLevel:"",showIconSizeWarn:!1,iconSize:"",originalImageUrl:"",originalIconUrl:""}},async mounted(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),this.getParentSkills()},methods:{getParentSkills(){for(let l=0;l<this.skillsStore.skillsList.length;l++)this.skillsStore.skillsList[l].url!=this.skillUrl&&(this.skillsStore.skillsList[l].type=="super"&&this.superSkills.push(this.skillsStore.skillsList[l]),this.skillsStore.skillsList[l].type!="sub"&&this.skills.push(this.skillsStore.skillsList[l]));this.skills.unshift({name:"None",id:0}),this.getSkill()},getSkill(){fetch("/skills/url/"+this.skillUrl).then(function(l){return l.json()}).then(l=>{this.skill=l,this.originalSkill={...l},this.skill.is_copy_of_skill_id!=null&&(this.isAnotherInstanceOfExistingSkill=!0)}).then(()=>{$("#summernote-mastery-requirements").summernote({disableDragAndDrop:!0,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link"]],["view",["fullscreen","codeview","help"]]],callbacks:{onChange:t=>{this.skill.mastery_requirements=t}}}).summernote("code",this.skill.mastery_requirements),$(".note-editor .note-editable").css("background-color","#ffffff");const l=this.levels.find(t=>t.id===this.skill.level);if(this.showLevel=l.name,this.skill.parent!=0){const t=this.skills.find(h=>h.id===this.skill.parent);this.parentInput.inputText=t.name,this.clusterParentInput.inputText=t.name}this.originalImageUrl=this.skill.image_url,this.originalIconUrl=this.skill.icon_url,this.image=this.skill.image_thumbnail_url,this.icon=this.skill.icon_url,this.getSkillFilters()})},async getSkillFilters(){this.skillTagsStore.skillTagsList.length==0&&await this.skillTagsStore.getSkillTagsList();for(let l=0;l<this.skillTagsStore.skillTagsList.length;l++)this.skillTagsStore.skillTagsList[l].skill_id==this.skill.id&&this.filters.push(this.skillTagsStore.skillTagsList[l].tag_id)},async DeleteSkill(){!this.step1Confirm||!this.step2Confirm||(await this.skillsStore.deleteSkill(this.skill.id),this.router.push("/skills"))},onFileChange(l,t){var h=l.target.files||l.dataTransfer.files;if(h.length){if(t==="image"){this.createImage(h[0]);return}if(t==="icon"){const a=this.calculateFileSize(h[0].size);if(this.iconSize=a.size+a.unit,a.unit!=="B"&&a.unit!=="KB"){this.showIconSizeWarn=!0;return}if(a.size>100&&a.unit==="KB"){this.showIconSizeWarn=!0;return}this.createIcon(h[0]);return}}},createImage(l){new Image;var t=new FileReader,h=this;t.onload=a=>{h.image=a.target.result,this.image=a.target.result,this.skill.image_url=this.image},t.readAsDataURL(l)},createIcon(l){new Image;var t=new FileReader,h=this;t.onload=a=>{h.icon=a.target.result,this.icon=a.target.result,this.skill.icon_url=this.icon},t.readAsDataURL(l)},openImage(l){document.getElementById(l).click()},deleteImage(l){if(l=="image"){this.image="";return}if(l=="icon"){this.icon="";return}},SubmitFilters(){fetch("/skill-tags/remove/"+this.skill.id,{method:"DELETE"}).then(()=>{var l="/skill-tags/add/"+this.skill.id;fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filters:this.filters})})})},Submit(){function l(u){if(u=="grade_school")return 1;if(u=="middle_school")return 2;if(u=="high_school")return 3;if(u=="college")return 4;if(u=="phd")return 5}let t=l(this.parentLevel),h=l(this.skill.level);if(t>h){alert("Child nodes cannot have a lower grade level than parent nodes.");return}if(this.showLoadingModal=!0,this.skill.type!="super"){var a=!1;for(let u=0;u<this.skillsStore.skillsList.length;u++)this.skillsStore.skillsList[u].type=="sub"&&this.skillsStore.skillsList[u].parent==this.skill.id&&(a=!0);a&&(this.validate.superValidate=!0,this.validate.violated=!0,this.closeModal(),alert("Please delete outer cluster nodes belonging to the skill, before changing its type."))}else if(this.skill.type=="sub"){this.skill.parent==0&&(this.validate.orphan=!0,this.validate.violated=!0,this.closeModal(),alert("cluster nodes must have a parent"));for(let u=0;u<this.skillsStore.skillsList.length;u++)this.skill.parent==this.skillsStore.skillsList[u].id&&(this.skill.level=this.skillsStore.skillsList[u].level),this.skillsStore.skillsList[u].parent==this.skill.id&&(this.validate.noChild=!0,this.validate.violated=!0,this.closeModal(),alert("please delete this node's child skills, before changing it to a cluster child skill"))}if(this.skill.type!="domain"&&!this.isAnotherInstanceOfExistingSkill&&(this.skill.mastery_requirements=$("#summernote-mastery-requirements").summernote("code")),(this.skill.name===""||this.skill.name===null)&&(this.validate.name=!0,this.validate.violated=!0,alert("please enter a skill name")),this.validate.violated){this.closeModal();return}this.skill.url=this.skill.name.replace(/\//g,"or"),this.skill.url=this.skill.url.replace(/ /g,"_");let s=!1;this.skill.image_url!==this.originalImageUrl&&(s=!0);let c=!1;this.skill.icon_url!==this.originalIconUrl&&(this.skill.icon=this.skill.icon_url,c=!0);const f={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.skill.name,parent:this.skill.parent,description:this.skill.description,intro_sentence:this.skill.intro_sentence,image:this.skill.image_url,isImageUpdated:s,imageThumbnail:this.skill.image_thumbnail_url,icon_url:this.skill.icon_url,icon:this.skill.icon,isIconUpdated:c,mastery_requirements:this.skill.mastery_requirements,type:this.skill.type,level:this.skill.level,order:this.skill.order,version_number:this.skill.version_number,comment:this.comment,url:this.skill.url})};var v="/skills/"+this.skill.id+"/edit";fetch(v,f).then(u=>{u.ok?(this.loadingStatus="success",this.skillsStore.getNestedSkillsList(),this.SubmitFilters()):this.loadingStatus="fails"}).then(()=>{let u=this.$route.query.dismissFlagId;u?fetch("/content-flags/"+u,{method:"DELETE"}).finally(()=>{this.$router.back()}):this.skill.type=="domain"?this.router.push("/skills"):this.$router.push("/skills/"+this.skill.url)})},SubmitForReview(){this.skill.mastery_requirements=$("#summernote-mastery-requirements").summernote("code");const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,image:this.skill.image_url,icon:this.skill.icon_url,mastery_requirements:this.skill.mastery_requirements,intro_sentence:this.skill.intro_sentence,comment:this.comment})};var t="/skills/"+this.skill.id+"/edit-for-review";fetch(t,l).then(()=>{alert(`This edit is being submitted for review.
We do this to prevent misinformation and sloppy wording from being added. If you would like to become an editor and help with this, please reach out.`),this.$router.back()})},handleChooseSkillLevel(l){this.showLevelDropDown=!1,this.showLevel=l.name,this.skill.level=l.id},handleChooseSkillOrder(l){this.showOrderDropDown=!1,this.skill.order=l},getReferenceSkill(){this.parentInput.inputText.length<2?this.parentInput.suggestSkills=[]:this.parentInput.suggestSkills=this.skills.filter(l=>l.name.toLowerCase().includes(this.parentInput.inputText.toLowerCase()))},handleChooseSuggestSkill(l){this.parentLevel=l.level,this.skill.parent=l.id,this.skill.type!="sub"?(this.parentInput.suggestSkills=[],this.parentInput.inputText=l.name):(this.clusterParentInput.suggestSuperSkills=[],this.clusterParentInput.inputText=l.name)},getSuperSkillSuggestion(){this.clusterParentInput.inputText.length<2?this.clusterParentInput.suggestSuperSkills=[]:this.clusterParentInput.suggestSuperSkills=this.superSkills.filter(l=>l.name.toLowerCase().includes(this.clusterParentInput.inputText.toLowerCase()))},handleChooseSuperSkill(l){this.clusterParentInput.suggestSuperSkills=[],this.skill.parent=l.id,this.clusterParentInput.inputText=l.name},handleCancelDeleteSkill(){this.showModal=!1,this.step1Confirm=!1,this.step2Confirm=!1,this.skillNameConfirm=""},handleConfirmInputChange(){this.skillNameConfirm==this.skill.name?this.step2Confirm=!0:this.step2Confirm=!1},closeModal(){this.showLoadingModal=!1},closeIconSizeWarnModal(){this.showIconSizeWarn=!1},calculateFileSize(l){const t=Math.pow(1024,4),h=Math.pow(1024,3),a=Math.pow(1024,2),s=1024;return l>t?{size:Math.round(l/t),unit:"TB"}:l>h?{size:Math.round(l/h),unit:"GB"}:l>a?{size:Math.round(l/a),unit:"MB"}:l>s?{size:Math.round(l/s),unit:"KB"}:{size:l,unit:"B"}}},components:{LoadingModal:R,FailsModal:q,TooltipBtn:E},computed:{isFormChanged(){return this.skill.name!==this.originalSkill.name||this.skill.parent!==this.originalSkill.parent||this.image!==""||this.skill.type!==this.originalSkill.type||this.skill.level!==this.originalSkill.level||this.skill.mastery_requirements!==this.originalSkill.mastery_requirements||this.skill.intro_sentence!==this.originalSkill.intro_sentence}}},r=l=>(H("data-v-f1dd0335"),l=l(),V(),l),j={class:"container bg-light rounded p-3"},W={class:"d-flex justify-content-between top-row"},K={class:"heading"},Z=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"20",fill:"white"},[e("path",{d:"M192 0c-41.8 0-77.4 26.7-90.5 64L64 64C28.7 64 0 92.7 0 128L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64l-37.5 0C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM105.8 229.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L216 328.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM160 416a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1)),G={key:0},J={key:0},Q={class:"row mt-3"},Y={class:"col-12 col-md-8 col-lg-5 mt-2"},X={class:"mb-3"},ee=r(()=>e("h2",{class:"secondary-heading h4"},"Name",-1)),se={key:0,class:"form-validate"},te={class:"row"},le={key:0},ie={class:"col col-md-8 col-lg-5 mt-2"},oe=r(()=>e("h2",{class:"secondary-heading h4"},"Level",-1)),ne={class:"d-flex flex-column position-relative"},re=r(()=>e("span",null,[e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M14.2929 8.70711C14.9229 8.07714 14.4767 7 13.5858 7H6.41421C5.52331 7 5.07714 8.07714 5.70711 8.70711L9.29289 12.2929C9.68342 12.6834 10.3166 12.6834 10.7071 12.2929L14.2929 8.70711Z",fill:"#344054"})])],-1)),ae={key:0,class:"custom-dropdown-base"},de=["onClick"],ce={key:0,class:"row"},he={class:"col col-md-8 col-lg-5 mt-2"},ue={key:0},me=r(()=>e("h2",{class:"secondary-heading h4"},"Filters",-1)),ke={class:"col"},pe={class:"control control-checkbox"},ge={class:"my-auto mx-2 me-4"},_e=["value"],fe=r(()=>e("div",{class:"control_indicator"},null,-1)),ve={key:1},we={class:"row"},Se={class:"col-12 col-md-8 col-lg-5 mt-2"},ye=r(()=>e("h2",{class:"secondary-heading h4"},"Node Type",-1)),Ce={class:"row p-0 m-0"},be={class:"form-check col-6 col-md-5 my-2"},Le={class:"control control-checkbox"},xe=r(()=>e("span",{class:"my-auto mx-2 me-4 text"},"Regular",-1)),Ie=r(()=>e("div",{class:"control_indicator"},null,-1)),Te={key:0,class:"form-check col-6 col-md-5 my-2"},Me={class:"control control-checkbox"},De=r(()=>e("span",{class:"my-auto mx-2 me-4"},"Category",-1)),ze=r(()=>e("div",{class:"control_indicator"},null,-1)),Ue={key:1,class:"form-check col-6 col-md-5 my-2"},Fe={class:"control control-checkbox"},Be=r(()=>e("span",{class:"my-auto mx-2 me-4"},"Cluster node center",-1)),He=r(()=>e("div",{class:"control_indicator"},null,-1)),Ve={key:2,class:"form-check col-6 col-md-5 my-2"},Pe={class:"control control-checkbox"},Oe=r(()=>e("span",{class:"my-auto mx-2 me-4"},"Cluster node outer",-1)),Re=r(()=>e("div",{class:"control_indicator"},null,-1)),qe={key:0,class:"form-validate"},Ee={key:1,class:"form-validate"},Ne={class:"row"},Ae={class:"col-12 col-md-8 col-lg-5 mt-2"},je={key:0,class:"mb-3"},We=r(()=>e("h2",{class:"secondary-heading h4"},"Parent",-1)),Ke={class:"row mt-3"},Ze={class:"col position-relative"},Ge={key:0,id:"suggest-skills",class:"flex flex-column position-absolute"},Je=["onClick"],Qe={key:1,class:"mb-3"},Ye=r(()=>e("h2",{class:"secondary-heading h4"}," Cluster node center ",-1)),Xe={class:"row mt-3"},$e={class:"col position-relative"},es={key:0,id:"suggest-skills",class:"flex flex-column position-absolute"},ss=["onClick"],ts={key:2},ls={class:"row"},is={class:"col-8 col-md-3 col-lg-2 mt-2"},os={class:"mb-3 row d-flex justify-content-center justify-content-md-start w-100"},ns={class:"d-flex flex-row gap-2 align-items-start my-3"},rs=r(()=>e("h2",{class:"secondary-heading h4"},"Image",-1)),as={key:0},ds={class:"default-no-img"},cs=D('<svg width="33" height="33" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-f1dd0335><circle cx="26.5" cy="26.5" r="26.5" fill="#D9D9D9" data-v-f1dd0335></circle><g clip-path="url(#clip0_372_11959)" data-v-f1dd0335><path d="M19.7439 45.0784L19.7439 33.2515L7.93354 33.268C7.40615 33.2671 6.90063 33.0572 6.52771 32.6843C6.15479 32.3114 5.94488 31.8059 5.94396 31.2785L5.93291 21.7174C5.93382 21.1901 6.14373 20.6845 6.51665 20.3116C6.88957 19.9387 7.3951 19.7288 7.92249 19.7279L19.7439 19.7334L19.7439 7.90646C19.7411 7.64223 19.7911 7.38009 19.8909 7.13543C19.9907 6.89076 20.1384 6.66849 20.3252 6.48164C20.5121 6.29479 20.7344 6.14713 20.979 6.0473C21.2237 5.94747 21.4858 5.8975 21.75 5.9003L31.2779 5.92241C31.8053 5.92332 32.3108 6.13322 32.6838 6.50615C33.0567 6.87907 33.2666 7.38459 33.2675 7.91198L33.262 19.7334L45.0889 19.7334C45.615 19.7337 46.1195 19.9428 46.4915 20.3148C46.8635 20.6869 47.0726 21.1913 47.073 21.7174L47.0951 31.2453C47.0948 31.7714 46.8856 32.2759 46.5136 32.6479C46.1416 33.0199 45.6371 33.229 45.111 33.2294L33.262 33.2515L33.2786 45.0618C33.2776 45.5892 33.0677 46.0947 32.6948 46.4677C32.3219 46.8406 31.8164 47.0505 31.289 47.0514L21.7501 47.0846C21.4858 47.0874 21.2237 47.0374 20.979 46.9376C20.7344 46.8377 20.5121 46.6901 20.3252 46.5032C20.1384 46.3164 19.9907 46.0941 19.8909 45.8494C19.7911 45.6048 19.7411 45.3426 19.7439 45.0784Z" fill="white" data-v-f1dd0335></path></g><defs data-v-f1dd0335><clipPath id="clip0_372_11959" data-v-f1dd0335><rect width="37" height="37" fill="white" transform="translate(8 8)" data-v-f1dd0335></rect></clipPath></defs></svg>',1),hs=[cs],us=r(()=>e("p",{style:{"font-size":"14px"}},[e("em",{class:"text"},"Maximum file size 2mb")],-1)),ms={key:1},ks=["src"],ps=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"20",height:"20",fill:"white"},[e("path",{d:"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"})],-1)),gs=["src"],_s={class:"row"},fs={class:"col-8 col-md-3 col-lg-2 mt-2"},vs={class:"mb-3 row d-flex justify-content-center justify-content-md-start w-100"},ws={class:"d-flex flex-row gap-2 align-items-start my-3"},Ss=r(()=>e("h2",{class:"secondary-heading h4"},"Icon",-1)),ys={key:0},Cs={class:"default-no-img"},bs=D('<svg width="33" height="33" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-f1dd0335><circle cx="26.5" cy="26.5" r="26.5" fill="#D9D9D9" data-v-f1dd0335></circle><g clip-path="url(#clip0_372_11959)" data-v-f1dd0335><path d="M19.7439 45.0784L19.7439 33.2515L7.93354 33.268C7.40615 33.2671 6.90063 33.0572 6.52771 32.6843C6.15479 32.3114 5.94488 31.8059 5.94396 31.2785L5.93291 21.7174C5.93382 21.1901 6.14373 20.6845 6.51665 20.3116C6.88957 19.9387 7.3951 19.7288 7.92249 19.7279L19.7439 19.7334L19.7439 7.90646C19.7411 7.64223 19.7911 7.38009 19.8909 7.13543C19.9907 6.89076 20.1384 6.66849 20.3252 6.48164C20.5121 6.29479 20.7344 6.14713 20.979 6.0473C21.2237 5.94747 21.4858 5.8975 21.75 5.9003L31.2779 5.92241C31.8053 5.92332 32.3108 6.13322 32.6838 6.50615C33.0567 6.87907 33.2666 7.38459 33.2675 7.91198L33.262 19.7334L45.0889 19.7334C45.615 19.7337 46.1195 19.9428 46.4915 20.3148C46.8635 20.6869 47.0726 21.1913 47.073 21.7174L47.0951 31.2453C47.0948 31.7714 46.8856 32.2759 46.5136 32.6479C46.1416 33.0199 45.6371 33.229 45.111 33.2294L33.262 33.2515L33.2786 45.0618C33.2776 45.5892 33.0677 46.0947 32.6948 46.4677C32.3219 46.8406 31.8164 47.0505 31.289 47.0514L21.7501 47.0846C21.4858 47.0874 21.2237 47.0374 20.979 46.9376C20.7344 46.8377 20.5121 46.6901 20.3252 46.5032C20.1384 46.3164 19.9907 46.0941 19.8909 45.8494C19.7911 45.6048 19.7411 45.3426 19.7439 45.0784Z" fill="white" data-v-f1dd0335></path></g><defs data-v-f1dd0335><clipPath id="clip0_372_11959" data-v-f1dd0335><rect width="37" height="37" fill="white" transform="translate(8 8)" data-v-f1dd0335></rect></clipPath></defs></svg>',1),Ls=[bs],xs=r(()=>e("p",{style:{"font-size":"14px"}},[e("em",{class:"text"},"Maximum file size 100kb")],-1)),Is={key:1},Ts=["src"],Ms={class:"mb-2"},Ds=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"20",height:"20",fill:"white"},[e("path",{d:"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"})],-1)),zs={key:0,class:"row"},Us={class:"col"},Fs={class:"mb-3"},Bs=r(()=>e("h2",null,"Description",-1)),Hs={key:0,class:"form-validate"},Vs={class:"row"},Ps={class:"col"},Os={class:"mb-3"},Rs=r(()=>e("h2",{class:"secondary-heading h4"},"Introduction",-1)),qs={key:0,class:"form-validate"},Es={key:1,class:"mb-3"},Ns=r(()=>e("h2",{class:"secondary-heading h4"},"Mastery Requirements",-1)),As={key:2,class:"row"},js={class:"col col-md-8 col-lg-5 mt-2"},Ws=r(()=>e("label",{class:"form-label"},[g("Order "),e("span",{style:{"font-weight":"400"}},"(optional: 0 is default)")],-1)),Ks={class:"d-flex flex-column position-relative"},Zs=r(()=>e("span",null,[e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M14.2929 8.70711C14.9229 8.07714 14.4767 7 13.5858 7H6.41421C5.52331 7 5.07714 8.07714 5.70711 8.70711L9.29289 12.2929C9.68342 12.6834 10.3166 12.6834 10.7071 12.2929L14.2929 8.70711Z",fill:"#344054"})])],-1)),Gs={key:0,class:"custom-dropdown-base"},Js=["onClick"],Qs={class:"row"},Ys={class:"col"},Xs={class:"mb-3"},$s=r(()=>e("h2",{class:"secondary-heading h4"},"Comment",-1)),et={key:3},st={class:"row"},tt={class:"d-flex justify-content-between"},lt={key:0,class:"d-flex flex-column"},it={id:"danger-label-div"},ot=r(()=>e("span",{class:"d-none d-md-block"}," skill ",-1)),nt=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"20",height:"20",fill:"white",class:"ms-1"},[e("path",{d:"M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"})],-1)),rt={class:"d-flex justify-content-end gap-md-4 gap-1 align-items-end"},at=r(()=>e("div",{class:"d-none d-md-block"},"Cancel",-1)),dt=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"20",height:"20",fill:"white",class:"d-md-none exit-icon"},[e("path",{d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"})],-1)),ct=[at,dt],ht=["disabled"],ut=r(()=>e("div",{class:"d-none d-md-block"},"Submit",-1)),mt=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"white",height:"20",width:"20",class:"d-md-none"},[e("path",{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"})],-1)),kt=[ut,mt],pt=["disabled"],gt=r(()=>e("div",{class:"d-none d-md-block"},"Submit for review",-1)),_t=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"white",height:"20",width:"20",class:"d-md-none"},[e("path",{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"})],-1)),ft=[gt,_t],vt={key:0,id:"myModal",class:"modal"},wt={class:"modal-content d-flex flex-column"},St={class:"mb-4"},yt={key:0,id:"warning-section",class:"d-flex align-items-center"},Ct=r(()=>e("div",{class:"me-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"15",height:"15",fill:"#eed888"},[e("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})])],-1)),bt=r(()=>e("div",null," This action will delete this skill and all its nested skills, and is not reversible. ",-1)),Lt=[Ct,bt],xt={key:1},It={for:"name",class:"conform-label"},Tt={class:"mt-3 d-flex justify-content-between"};function Mt(l,t,h,a,s,c){const f=w("router-link"),v=w("TooltipBtn"),u=w("LoadingModal"),z=w("FailsModal");return o(),n(_,null,[e("div",j,[e("div",W,[e("h1",K,k(s.skill.name),1),e("span",null,[s.skill.type!="domain"&&(a.userDetailsStore.role=="platform_admin"||a.userDetailsStore.role=="editor")?(o(),L(f,{key:0,class:"btn primary-btn me-1",to:"/skills/"+s.skillUrl+"/learning-objectives"},{default:I(()=>[g("Learning Objectives  ")]),_:1},8,["to"])):d("",!0),s.skill.type!="domain"&&s.skill.type!="super"?(o(),L(f,{key:1,class:"btn primary-btn me-1",to:"/skills/"+s.skillUrl+"/question-bank"},{default:I(()=>[g("Questions  "),Z]),_:1},8,["to"])):d("",!0)])]),s.isAnotherInstanceOfExistingSkill?d("",!0):(o(),n("div",G,[a.userDetailsStore.role=="platform_admin"||a.userDetailsStore.role=="editor"?(o(),n("div",J,[e("div",Q,[e("div",Y,[e("div",X,[ee,m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>s.skill.name=i),class:"form-control",type:"text",placeholder:"name"},null,512),[[p,s.skill.name]]),s.validate.name&&(s.skill.name==""||s.skill.name==null)?(o(),n("div",se," please enter a skill name ")):d("",!0)])])]),e("div",te,[s.skill.type!="sub"?(o(),n("div",le,[e("div",ie,[oe,e("div",ne,[e("div",{class:y([s.showLevelDropDown?"custom-select-button-focus ":"custom-select-button "]),onClick:t[1]||(t[1]=i=>s.showLevelDropDown=!s.showLevelDropDown)},[g(k(s.showLevel)+" ",1),re],2),s.showLevelDropDown?(o(),n("div",ae,[(o(!0),n(_,null,C(s.levels,i=>(o(),n("div",{class:"custom-dropdown-option",onClick:S=>c.handleChooseSkillLevel(i)},k(i.name),9,de))),256))])):d("",!0)])])])):d("",!0)]),a.userDetailsStore.role=="platform_admin"?(o(),n("div",ce,[e("div",he,[s.skill.type!="sub"?(o(),n("div",ue,[me,e("div",ke,[(o(!0),n(_,null,C(a.tagsStore.tagsList,i=>(o(),n("label",pe,[e("span",ge,k(i.name),1),m(e("input",{type:"checkbox",value:i.id,"onUpdate:modelValue":t[2]||(t[2]=S=>s.filters=S)},null,8,_e),[[B,s.filters]]),fe]))),256))])])):d("",!0)])])):d("",!0)])):d("",!0)])),a.userDetailsStore.role=="platform_admin"||a.userDetailsStore.role=="editor"?(o(),n("div",ve,[e("div",we,[e("div",Se,[ye,e("div",Ce,[e("div",be,[e("label",Le,[xe,m(e("input",{type:"radio",name:"nodeType",id:"regularSkillRadio",value:"regular","onUpdate:modelValue":t[3]||(t[3]=i=>s.skill.type=i)},null,512),[[b,s.skill.type]]),Ie])]),s.isAnotherInstanceOfExistingSkill?d("",!0):(o(),n("div",Te,[e("label",Me,[De,m(e("input",{type:"radio",name:"nodeType",id:"domainSkillRadio",value:"domain","onUpdate:modelValue":t[4]||(t[4]=i=>s.skill.type=i)},null,512),[[b,s.skill.type]]),ze])])),s.isAnotherInstanceOfExistingSkill?d("",!0):(o(),n("div",Ue,[e("label",Fe,[Be,m(e("input",{type:"radio",name:"nodeType",id:"superSkillRadio",value:"super","onUpdate:modelValue":t[5]||(t[5]=i=>s.skill.type=i)},null,512),[[b,s.skill.type]]),He])])),s.skill.parent_type=="super"?(o(),n("div",Ve,[e("label",Pe,[Oe,m(e("input",{type:"radio",name:"nodeType",id:"regularSkillRadio",value:"sub","onUpdate:modelValue":t[6]||(t[6]=i=>s.skill.type=i)},null,512),[[b,s.skill.type]]),Re])])):d("",!0)]),s.validate.orphan&&this.skill.type=="sub"&&this.skill.parent==0?(o(),n("div",qe," please choose a parent for this skill ")):d("",!0),s.validate.noChild&&this.skill.type=="sub"?(o(),n("div",Ee," please delete this node's child skills, before changing it to a cluster child skill ")):d("",!0)])]),e("div",Ne,[e("div",Ae,[s.skill.type!="sub"?(o(),n("div",je,[We,e("div",Ke,[e("div",Ze,[m(e("input",{id:"skill-input","onUpdate:modelValue":t[7]||(t[7]=i=>s.parentInput.inputText=i),onInput:t[8]||(t[8]=(...i)=>c.getReferenceSkill&&c.getReferenceSkill(...i)),placeholder:"type skill name"},null,544),[[p,s.parentInput.inputText]]),s.parentInput.suggestSkills.length>0?(o(),n("div",Ge,[(o(!0),n(_,null,C(s.parentInput.suggestSkills,i=>(o(),n("div",{class:"suggest-option",onClick:S=>c.handleChooseSuggestSkill(i)},k(i.name),9,Je))),256))])):d("",!0)])])])):(o(),n("div",Qe,[Ye,e("div",Xe,[e("div",$e,[m(e("input",{id:"skill-input","onUpdate:modelValue":t[9]||(t[9]=i=>s.clusterParentInput.inputText=i),onInput:t[10]||(t[10]=(...i)=>c.getSuperSkillSuggestion&&c.getSuperSkillSuggestion(...i)),placeholder:"type skill name"},null,544),[[p,s.clusterParentInput.inputText]]),s.clusterParentInput.suggestSuperSkills.length>0?(o(),n("div",es,[(o(!0),n(_,null,C(s.clusterParentInput.suggestSuperSkills,i=>(o(),n("div",{class:"suggest-option",onClick:S=>c.handleChooseSuggestSkill(i)},k(i.name),9,ss))),256))])):d("",!0)])])]))])])])):d("",!0),s.isAnotherInstanceOfExistingSkill?(o(),n("div",et," For other edits, please edit the original instance of this skill ")):(o(),n("div",ts,[e("div",ls,[e("div",is,[e("div",os,[e("div",ns,[rs,x(v,{class:"mt-1",toolTipText:"A detailed image to use on this skill's description page.",bubbleWidth:"350px",trianglePosition:"left",absoluteTop:"37px"})]),s.image?(o(),n("div",ms,[e("p",null,[e("img",{src:s.image,height:"158",width:"158",style:{"background-color":"lightgrey"}},null,8,ks)]),e("p",null,[e("button",{class:"btn red-btn",onClick:t[13]||(t[13]=i=>c.deleteImage("image"))},[g(" Remove    "),ps])])])):(o(),n("div",as,[e("input",{class:"form-control d-none",type:"file",accept:"image/*",onChange:t[11]||(t[11]=i=>c.onFileChange(i,"image")),id:"imageFile"},null,32),e("div",ds,[e("div",{class:"plus-svg",onClick:t[12]||(t[12]=i=>c.openImage("imageFile"))},hs)]),us])),e("img",{id:"originalImage",class:"d-none",src:"https://institute-skill-infobox-image-thumbnails.s3.amazonaws.com/"+s.skillUrl},null,8,gs)])])]),e("div",_s,[e("div",fs,[e("div",vs,[e("div",ws,[Ss,x(v,{class:"mt-1",toolTipText:"A simple icon to use in the skill tree.",bubbleWidth:"350px",trianglePosition:"left",absoluteTop:"37px"})]),s.icon?(o(),n("div",Is,[e("p",null,[e("img",{src:s.icon,height:"158",width:"158",style:{"background-color":"lightgrey"}},null,8,Ts)]),e("div",Ms,"Icon size: "+k(s.iconSize),1),e("p",null,[e("button",{class:"btn red-btn",onClick:t[16]||(t[16]=i=>c.deleteImage("icon"))},[g(" Remove    "),Ds])])])):(o(),n("div",ys,[e("input",{class:"form-control d-none",type:"file",accept:"image/*",onChange:t[14]||(t[14]=i=>c.onFileChange(i,"icon")),id:"iconFile"},null,32),e("div",Cs,[e("div",{class:"plus-svg",onClick:t[15]||(t[15]=i=>c.openImage("iconFile"))},Ls)]),xs]))])])]),a.userDetailsStore.role=="platform_admin"?(o(),n("div",zs,[e("div",Us,[e("div",Fs,[Bs,m(e("textarea",{"onUpdate:modelValue":t[17]||(t[17]=i=>s.skill.description=i),class:"form-control",rows:"2"},null,512),[[p,s.skill.description]])]),e("div",null,[s.validate.description?(o(),n("div",Hs," please enter description for skill ")):d("",!0)])])])):d("",!0),e("div",Vs,[e("div",Ps,[e("div",Os,[Rs,m(e("input",{"onUpdate:modelValue":t[18]||(t[18]=i=>s.skill.intro_sentence=i),class:"form-control",type:"text",placeholder:"Enter a brief intro sentence"},null,512),[[p,s.skill.intro_sentence]])]),e("div",null,[s.validate.intro_sentence?(o(),n("div",qs," please enter an intro sentence for skill ")):d("",!0)])])]),s.skill.type!="domain"?(o(),n("div",Es,[Ns,m(e("textarea",{class:"form-control","onUpdate:modelValue":t[19]||(t[19]=i=>s.skill.mastery_requirements=i),id:"summernote-mastery-requirements",rows:"3"},null,512),[[p,s.skill.mastery_requirements]])])):d("",!0),a.userDetailsStore.role=="platform_admin"?(o(),n("div",As,[e("div",js,[Ws,e("div",Ks,[e("div",{class:y([s.showOrderDropDown?"custom-select-button-focus ":"custom-select-button "]),onClick:t[20]||(t[20]=i=>s.showOrderDropDown=!s.showOrderDropDown)},[g(k(s.skill.order)+" ",1),Zs],2),s.showOrderDropDown?(o(),n("div",Gs,[(o(!0),n(_,null,C(s.orderArray,i=>(o(),n("div",{class:"custom-dropdown-option",onClick:S=>c.handleChooseSkillOrder(i)},k(i),9,Js))),256))])):d("",!0)])])])):d("",!0),e("div",Qs,[e("div",Ys,[e("div",Xs,[$s,m(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=i=>s.comment=i),class:"form-control",rows:"2"},null,512),[[p,s.comment]])]),s.comment.length>255?(o(),n("div",{key:0,class:y([l.shake?"click-shake form-validate":"form-validate initial-shake"])}," Your comment has too many words !! ",2)):d("",!0)])])])),e("div",st,[e("div",tt,[a.userDetailsStore.role=="platform_admin"?(o(),n("div",lt,[e("div",it,[s.deleteButtonHover?(o(),n("div",{key:0,id:"danger-label",class:y({shake:s.deleteButtonHover})}," Danger !!! ",2)):d("",!0)]),e("div",null,[e("button",{class:"btn red-btn",onMouseover:t[22]||(t[22]=i=>s.deleteButtonHover=!0),onMouseleave:t[23]||(t[23]=i=>s.deleteButtonHover=!1),onClick:t[24]||(t[24]=i=>s.showModal=!0)},[g(" Delete "),ot,nt],32)])])):d("",!0),e("div",rt,[e("button",{class:"btn red-btn",onClick:t[25]||(t[25]=i=>l.$router.go(-1))},ct),a.userDetailsStore.role=="platform_admin"||a.userDetailsStore.role=="editor"?(o(),n("button",{key:0,disabled:!c.isFormChanged,class:"btn primary-btn",onClick:t[26]||(t[26]=i=>c.Submit())},kt,8,ht)):a.userDetailsStore.role=="instructor"||a.userDetailsStore.role=="student"?(o(),n("button",{key:1,class:"btn primary-btn",disabled:!c.isFormChanged,onClick:t[27]||(t[27]=i=>c.SubmitForReview())},ft,8,pt)):d("",!0)])])])]),s.showModal?(o(),n("div",vt,[e("div",wt,[e("div",St,'Delete "'+k(s.skill.name)+'"',1),s.step1Confirm?d("",!0):(o(),n("div",yt,Lt)),s.step1Confirm?(o(),n("div",xt,[e("label",It,'Enter "'+k(s.skill.name)+'" in the box below to confirm',1),m(e("input",{"onUpdate:modelValue":t[28]||(t[28]=i=>s.skillNameConfirm=i),class:"form-control",type:"text",placeholder:"name",onInput:t[29]||(t[29]=(...i)=>c.handleConfirmInputChange&&c.handleConfirmInputChange(...i))},null,544),[[p,s.skillNameConfirm]])])):d("",!0),e("div",Tt,[e("button",{class:"btn green-btn",onClick:t[30]||(t[30]=(...i)=>c.handleCancelDeleteSkill&&c.handleCancelDeleteSkill(...i))}," Cancel "),s.step1Confirm?d("",!0):(o(),n("button",{key:0,class:"btn red-btn",onClick:t[31]||(t[31]=i=>s.step1Confirm=!0)}," I still want to delete this skill ")),s.step1Confirm?(o(),n("button",{key:1,class:y([s.step2Confirm?"btn red-btn":"btn button-inactive"]),onClick:t[32]||(t[32]=i=>c.DeleteSkill(s.skill.id))}," Delete skill ",2)):d("",!0)])])])):d("",!0),x(u,{skillUrl:s.skillUrl,loadingStatus:s.loadingStatus,showLoadingModal:s.showLoadingModal,closeModal:c.closeModal},null,8,["skillUrl","loadingStatus","showLoadingModal","closeModal"]),s.showIconSizeWarn?(o(),L(z,{key:1,handleOkClick:c.closeIconSizeWarnModal,message:`Your icon is too big ! (${s.iconSize} / 100kb)`},null,8,["handleOkClick","message"])):d("",!0)],64)}const Dt=T(A,[["render",Mt],["__scopeId","data-v-f1dd0335"]]),zt={data(){return{skillUrl:this.$route.params.skillUrl,skillId:null}},setup(){return{skillsStore:M()}},components:{EditSkill:Dt,SkillTimeTracker:N},async mounted(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let l=0;l<this.skillsStore.skillsList.length;l++)this.skillUrl==this.skillsStore.skillsList[l].URL&&(this.skillId=this.skillsStore.skillsList[l].id)},beforeRouteLeave(l,t,h){this.$refs.skillTimeTracker.saveDuration(),h()}};function Ut(l,t,h,a,s,c){const f=w("EditSkill"),v=w("SkillTimeTracker");return o(),n(_,null,[x(f),s.skillId?(o(),L(v,{key:0,ref:"skillTimeTracker"},null,512)):d("",!0)],64)}const Rt=T(zt,[["render",Ut]]);export{Rt as default};
