import{S as m}from"./SkillTimeTracker-7485b74e.js";import{_ as h,r as p,o as i,c as n,a as o,b as a,k as f,F as _}from"./main-1ef5714d.js";const b={data(){return{tutorPostId:this.$route.params.tutorPostId,tutorPost:{},validateDescription:!0,validateContact:!0,skillId:null}},components:{SkillTimeTracker:m},async created(){const t=await(await fetch("/tutor-posts/show/"+this.tutorPostId)).json();this.skillId=t.skill_id,this.getTutorPost()},beforeRouteLeave(e,t,r){this.$refs.skillTimeTracker.saveDuration(),r()},methods:{async getTutorPost(){await fetch("/tutor-posts/show/"+this.tutorPostId).then(function(e){return e.json()}).then(e=>this.tutorPost=e),$("#summernote-description").summernote({disableDragAndDrop:!0,placeholder:"Describe your tutoring style and experience with the subject.",tabsize:2,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["para",["ul"]],["view",["fullscreen","codeview"]]]}).summernote("code",this.tutorPost.description),$("#summernote-contact-preference").summernote({disableDragAndDrop:!0,placeholder:"How would you like to be contacted (eg: an email address, mobile number or calendar booking link)?",tabsize:2,toolbar:[["font",["bold","underline","clear"]],["para",["ul"]],["insert",["link"]],["view",["fullscreen","codeview"]]]}).summernote("code",this.tutorPost.contact_preference),$(".note-editor .note-editable").css("background-color","#ffffff")},Submit(){let e=$("#summernote-description").summernote("code"),t=$("#summernote-contact-preference").summernote("code");if(e.length<25?this.validateDescription=!1:this.validateDescription=!0,t.length<25?this.validateContact=!1:this.validateContact=!0,!this.validateContact||!this.validateDescription)return;const r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:e,contact_preference:t})};var l="/tutor-posts/edit/"+this.tutorPostId;fetch(l,r).then(()=>{let s=this.$route.query.dismissFlagId;s?fetch("/content-flags/"+s,{method:"DELETE"}).finally(()=>{this.$router.back()}):this.$router.back()})}}},v={class:"container p-2 bg-light rounded"},k=o("h1",{class:"heading"},"Edit Tutor Post",-1),g={class:"row"},y={class:"mb-3"},P=o("textarea",{id:"summernote-description",name:"editordata"},null,-1),T={key:0,class:"form-validate"},w={class:"mb-3"},D=o("textarea",{id:"summernote-contact-preference",name:"editordata2"},null,-1),C={key:0,class:"form-validate"},I={class:"mb-3 d-flex justify-content-end gap-4"};function S(e,t,r,l,s,c){const d=p("SkillTimeTracker");return i(),n(_,null,[o("div",v,[k,o("div",g,[o("div",y,[P,s.validateDescription==!1?(i(),n("div",T," Please provide at least 25 characters. ")):a("",!0)]),o("div",w,[D,s.validateContact==!1?(i(),n("div",C," Please provide at least 25 characters. ")):a("",!0)]),o("div",I,[o("a",{class:"btn red-btn",onClick:t[0]||(t[0]=u=>e.$router.go(-1))}," Cancel "),o("button",{onClick:t[1]||(t[1]=u=>c.Submit()),class:"btn primary-btn"}," Submit ")])])]),s.skillId?(i(),f(d,{key:0,ref:"skillTimeTracker"},null,512)):a("",!0)],64)}const j=h(b,[["render",S]]);export{j as default};
