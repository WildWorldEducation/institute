import{_ as c,y as p,H as y,r,o as e,c as i,a,t as A,k as o}from"./main-5a4c8e44.js";import{u as S}from"./TeacherAnalyticsStore-ce603d68.js";import{P as g,A as k}from"./AttemptedAssessmentsTimelineChart-ef48dc8f.js";import{F as f}from"./FailedAssessmentsHorizontalBarChart-c2d48e3d.js";import"./transform-62bed377.js";import"./time-8a8f3333.js";import"./linear-c1216a03.js";import"./band-22321830.js";import"./ordinal-3694ef9e.js";import"./sort-a49d696f.js";const _={setup(){const t=p(),s=y(),l=S();return{usersStore:t,userSkillsStore:s,teacherAnalyticsStore:l}},components:{FailedAssessmentsHorizontalBarChart:f,PassedAssessmentsTimelineChart:g,AttemptedAssessmentsTimelineChart:k},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentPasses:[],assessmentAttempts:[],multipleFails:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const t=this.usersStore.users.find(s=>s.id===this.studentId);t&&(this.studentName=t.username),await this.getUserSkillMasteredHistory(this.studentId),await this.getAssessmentAttempts(),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),this.isLoaded=!0},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(t=>t.json()).then(t=>{this.assessmentAttempts=t.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`}))}).catch(t=>{console.error("Error fetching last visited skills:",t)})},assessmentDate(t){return new Date(t).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async getUserSkillMasteredHistory(t){await this.userSkillsStore.getMasteredSkills(t),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`}))}}},C={class:"container"},F={class:"d-flex justify-content-between w-100"},T={class:"secondary-heading h3"},w={key:1},P={key:3},b={key:5};function B(t,s,l,m,n,M){const d=r("FailedAssessmentsHorizontalBarChart"),u=r("PassedAssessmentsTimelineChart"),h=r("AttemptedAssessmentsTimelineChart");return e(),i("div",C,[a("span",F,[s[0]||(s[0]=a("h1",{class:"heading"},"Assessment Status Report",-1)),a("h2",T,A(n.studentName),1)]),s[1]||(s[1]=a("h4",{class:"secondary-heading"},"Failed multiple times",-1)),m.teacherAnalyticsStore.studentMultipleFails.length>0?(e(),o(d,{key:0,data:m.teacherAnalyticsStore.studentMultipleFails,colour:"darkred",class:"mb-5"},null,8,["data"])):(e(),i("p",w," This student has not failed any assessments more than once yet. ")),s[2]||(s[2]=a("h4",{class:"secondary-heading"},"Passed",-1)),n.assessmentPasses.length>0?(e(),o(u,{key:2,class:"mb-5",data:n.assessmentPasses},null,8,["data"])):(e(),i("p",P,"This student has not completed any assessments yet.")),s[3]||(s[3]=a("h4",{class:"secondary-heading"},"Attempted",-1)),n.assessmentAttempts.length>0?(e(),o(h,{key:4,class:"mb-5",data:n.assessmentAttempts},null,8,["data"])):(e(),i("p",b,"This student has attempted any assessments yet."))])}const E=c(_,[["render",B]]);export{E as default};
