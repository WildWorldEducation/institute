import{_ as S,r as p,o,c as n,d as e,F as m,z as b,e as v,j as C,m as k,t as h,l as D,b as d,p as g,f as w,a as I,g as $,w as y,y as T,q as E,i as x}from"./main-1f9e99c9.js";import{u as O}from"./AssessmentsStore-7eac4ea8.js";import{u as R}from"./InstructorStudentsStore-bcf37740.js";const M={data(){return{userSkills:[],noSkills:!0}},props:["userId"],async created(){const s=await fetch("/user-skills/unnested-list/"+this.userId);this.userSkills=await s.json()},computed:{availableSkills(){const s=[];for(let t=0;t<this.userSkills.length;t++)this.userSkills[t].is_accessible==1&this.userSkills[t].is_mastered!=1&this.userSkills[t].type!="domain"&&s.push({name:this.userSkills[t].name,id:this.userSkills[t].id,url:this.userSkills[t].url,level:this.userSkills[t].level});return s.length>0&&(this.noSkills=!1),s}},methods:{}},G=s=>(g("data-v-09f96c5d"),s=s(),w(),s),P=G(()=>e("h2",{class:"secondary-heading h4"},"Available Skills",-1)),Q={id:"skill-list"},H={key:0,id:"no-skill-cell"};function z(s,t,c,l,i,u){const a=p("router-link");return o(),n(m,null,[P,e("div",Q,[(o(!0),n(m,null,b(u.availableSkills,r=>(o(),n("div",null,[v(a,{class:D([{"grade-school":r.level=="grade_school","middle-school":r.level=="middle_school","high-school":r.level=="high_school",college:r.level=="college",phd:r.level=="phd"},"skill-link btn"]),to:`/skills/${r.url}`,target:"_blank"},{default:C(()=>[k(h(r.name),1)]),_:2},1032,["class","to"])]))),256)),i.noSkills?(o(),n("div",H)):d("",!0)])],64)}const B=S(M,[["render",z],["__scopeId","data-v-09f96c5d"]]);const F={data(){return{visitedSkills:[],noSkills:!0}},props:["userId"],async created(){const s=await fetch("/skills/last-visited/");this.visitedSkills=await s.json(),this.visitedSkills.length>0&&(this.noSkills=!1)},computed:{}},J=s=>(g("data-v-0ce1127d"),s=s(),w(),s),W=J(()=>e("h2",{class:"secondary-heading h4"},"Last visited Skills",-1)),Y={id:"skill-list"},Z={key:0,id:"no-skill-cell"};function K(s,t,c,l,i,u){const a=p("router-link");return o(),n(m,null,[W,e("div",Y,[(o(!0),n(m,null,b(i.visitedSkills,r=>(o(),n("div",null,[v(a,{class:D([{"grade-school":r.level=="grade_school","middle-school":r.level=="middle_school","high-school":r.level=="high_school",college:r.level=="college",phd:r.level=="phd"},"skill-link btn"]),to:`/skills/${r.url}`,target:"_blank"},{default:C(()=>[k(h(r.name),1)]),_:2},1032,["class","to"])]))),256)),i.noSkills?(o(),n("div",Z)):d("",!0)])],64)}const X=S(F,[["render",K],["__scopeId","data-v-0ce1127d"]]);const ss={setup(){const s=I(),t=$();return{userDetailsStore:s,skillsStore:t}},data(){return{goals:[]}},async created(){await this.getGoals(),this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let s=0;s<this.goals.length;s++){let t=this.skillsStore.skillsList.find(c=>c.id===this.goals[s].skill_id);this.goals[s].name=t.name,this.goals[s].level=t.level}},methods:{async getGoals(){const s=await fetch("/goals/"+this.userDetailsStore.userId+"/list");this.goals=await s.json()}}},ts=s=>(g("data-v-9637b5b4"),s=s(),w(),s),es=ts(()=>e("h2",{class:"secondary-heading h4"},"Goals",-1)),os={id:"goal-list"};function is(s,t,c,l,i,u){const a=p("router-link");return o(),n(m,null,[es,e("div",os,[(o(!0),n(m,null,b(i.goals,r=>(o(),n("div",null,[v(a,{class:D([{"grade-school":r.level=="grade_school","middle-school":r.level=="middle_school","high-school":r.level=="high_school",college:r.level=="college",phd:r.level=="phd"},"goal-link btn"]),to:`/goals/${r.id}`,target:"_blank"},{default:C(()=>[k(h(r.name),1)]),_:2},1032,["class","to"])]))),256))])],64)}const ns=S(ss,[["render",is],["__scopeId","data-v-9637b5b4"]]);const ls={setup(){const s=I();return s.getUserDetails(),{userDetailsStore:s}},data(){return{notifications:[]}},computed:{},async created(){await this.getNotifications()},methods:{getNotifications(){fetch("/notifications/list").then(function(s){return s.json()}).then(s=>this.notifications=s)},SaveChange(){const s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({notification1:this.notifications.notification_1,notification2:this.notifications.notification_2})};var t="/notifications/edit";fetch(t,s)}}},rs=s=>(g("data-v-a441cf73"),s=s(),w(),s),as=rs(()=>e("h2",{class:"secondary-heading h4"},"Notifications",-1)),cs={class:"table-div"},us={key:0,class:"border-bottom p-2"},ds={key:1},hs={key:2,class:"p-2"},_s={key:3};function ps(s,t,c,l,i,u){return o(),n(m,null,[as,e("div",cs,[l.userDetailsStore.role!="admin"?(o(),n("div",us,h(i.notifications.notification_1),1)):(o(),n("div",ds,[y(e("textarea",{onChange:t[0]||(t[0]=a=>u.SaveChange()),"onUpdate:modelValue":t[1]||(t[1]=a=>i.notifications.notification_1=a),class:"form-control border-bottom p-2",rows:"3"},null,544),[[T,i.notifications.notification_1]])])),l.userDetailsStore.role!="admin"?(o(),n("div",hs,h(i.notifications.notification_2),1)):(o(),n("div",_s,[y(e("textarea",{onChange:t[2]||(t[2]=a=>u.SaveChange()),"onUpdate:modelValue":t[3]||(t[3]=a=>i.notifications.notification_2=a),class:"form-control p-2",rows:"3"},null,544),[[T,i.notifications.notification_2]])]))])],64)}const ms=S(ls,[["render",ps],["__scopeId","data-v-a441cf73"]]);const fs={setup(){const s=I();return s.getUserDetails(),{userDetailsStore:s}},data(){return{news:[]}},computed:{},async created(){await this.getNews()},methods:{getNews(){fetch("/news/list").then(function(s){return s.json()}).then(s=>this.news=s)},SaveChange(){const s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({news1:this.news.news_1,news2:this.news.news_2,news3:this.news.news_3,news4:this.news.news_4})};var t="/news/edit";fetch(t,s)}}},vs=s=>(g("data-v-7cea90d3"),s=s(),w(),s),ks=vs(()=>e("h2",{class:"secondary-heading h4"},"News",-1)),Ss={class:"table-div row rounded mb-3"},gs={class:"p-2 col-lg-3 col-md-6"},ws={key:0},ys={class:"p-2 col-lg-3 col-md-6"},Ts={key:0},bs={class:"p-2 col-lg-3 col-md-6"},Ds={key:0},Cs={class:"p-2 col-lg-3 col-md-6"},Is={key:0};function xs(s,t,c,l,i,u){return o(),n(m,null,[ks,e("div",Ss,[e("div",gs,[l.userDetailsStore.role!="admin"?(o(),n("p",ws,h(i.news.news_1),1)):y((o(),n("textarea",{key:1,onChange:t[0]||(t[0]=a=>u.SaveChange()),"onUpdate:modelValue":t[1]||(t[1]=a=>i.news.news_1=a),class:"form-control",rows:"3"},null,544)),[[T,i.news.news_1]])]),e("div",ys,[l.userDetailsStore.role!="admin"?(o(),n("p",Ts,h(i.news.news_2),1)):y((o(),n("textarea",{key:1,onChange:t[2]||(t[2]=a=>u.SaveChange()),"onUpdate:modelValue":t[3]||(t[3]=a=>i.news.news_2=a),class:"form-control",rows:"3"},null,544)),[[T,i.news.news_2]])]),e("div",bs,[l.userDetailsStore.role!="admin"?(o(),n("p",Ds,h(i.news.news_3),1)):y((o(),n("textarea",{key:1,onChange:t[4]||(t[4]=a=>u.SaveChange()),"onUpdate:modelValue":t[5]||(t[5]=a=>i.news.news_3=a),class:"form-control",rows:"3"},null,544)),[[T,i.news.news_3]])]),e("div",Cs,[l.userDetailsStore.role!="admin"?(o(),n("p",Is,h(i.news.news_4),1)):y((o(),n("textarea",{key:1,onChange:t[6]||(t[6]=a=>u.SaveChange()),"onUpdate:modelValue":t[7]||(t[7]=a=>i.news.news_4=a),class:"form-control",rows:"3"},null,544)),[[T,i.news.news_4]])])])],64)}const $s=S(fs,[["render",xs],["__scopeId","data-v-7cea90d3"]]);const Ls={props:{assessments:{type:Array,required:!0}},setup(){return{}},data(){return{}},computed:{},methods:{}},Ns=s=>(g("data-v-5dc9288a"),s=s(),w(),s),qs={class:"container-fluid"},Us=Ns(()=>e("h2",{class:"secondary-heading h4"},"Mark Assessments",-1)),js={id:"list-body"},Vs={class:"assessment"},As={id:"student-name"},Es={id:"skill-name"},Os={id:"date"};function Rs(s,t,c,l,i,u){const a=p("RouterLink");return o(),n("div",qs,[Us,e("div",js,[(o(!0),n(m,null,b(this.assessments,r=>(o(),n("div",Vs,[v(a,{class:"assessment-link",to:"/mark-assessment/"+r.id},{default:C(()=>[e("span",As,h(r.studentUsername)+", ",1),e("span",Es,h(r.skillName)+", ",1),e("span",Os,h(r.date),1)]),_:2},1032,["to"])]))),256))])])}const Ms=S(Ls,[["render",Rs],["__scopeId","data-v-5dc9288a"]]);const Gs={props:{questions:{type:Array,required:!0}},methods:{formatDate(s){var t=s.replace("T"," ");t=t.replace("Z"," ");let c=t.split(/[- :]/);var l=new Date(Date.UTC(c[0],c[1]-1,c[2],c[3],c[4],c[5])),i={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return l=l.toLocaleDateString("en-US",i),l}}},Ps=s=>(g("data-v-1df3f680"),s=s(),w(),s),Qs={class:"container-fluid"},Hs=Ps(()=>e("h2",{class:"secondary-heading h4"},"Check New Questions",-1)),zs={class:"list-body"},Bs={class:"question"},Fs={class:"student-name"},Js={class:"skill-name"},Ws={class:"date"};function Ys(s,t,c,l,i,u){const a=p("RouterLink");return o(),n("div",Qs,[Hs,e("div",zs,[(o(!0),n(m,null,b(c.questions,r=>(o(),n("div",Bs,[v(a,{class:"question-link",to:`/check-student-question/${r.id}`},{default:C(()=>[e("span",Fs,h(r.student)+", ",1),e("span",Js,h(r.skillname)+", ",1),e("span",Ws,h(u.formatDate(r.create_date)),1)]),_:2},1032,["to"])]))),256))])])}const Zs=S(Gs,[["render",Ys],["__scopeId","data-v-1df3f680"]]);const Ks={setup(){return{userDetailsStore:I()}},data(){return{reputationEvents:[]}},async created(){const s=await fetch("/users/reputation-events/"+this.userDetailsStore.userId);this.reputationEvents=await s.json();for(let t=0;t<this.reputationEvents.length;t++)this.reputationEvents[t].formattedDate=this.formatDate(this.reputationEvents[t].create_date),this.reputationEvents[t].formattedContentType=this.reputationEvents[t].content_type.replace(/_/g," ");console.log(this.reputationEvents)},methods:{formatDate(s){var t=s.replace("T"," ");t=t.replace("Z"," ");let c=t.split(/[- :]/);var l=new Date(Date.UTC(c[0],c[1]-1,c[2],c[3],c[4],c[5])),i={year:"numeric",month:"numeric",day:"numeric"};return l=l.toLocaleDateString("en-US",i),l}}},L=s=>(g("data-v-f5ecb36a"),s=s(),w(),s),Xs=L(()=>e("h2",{class:"secondary-heading h4"},"Reputation Awards",-1)),st={id:"background"},tt={class:"text-white bg-success rounded"},et=L(()=>e("span",{class:"badge text-bg-light"},"+1",-1)),ot={key:0},it={key:1};function nt(s,t,c,l,i,u){return o(),n(m,null,[Xs,e("div",st,[(o(!0),n(m,null,b(i.reputationEvents,a=>(o(),n("div",null,[e("div",tt,[et,k(" "+h(a.formattedContentType)+" ",1),a.content_type!="new_skill"?(o(),n("span",ot,"improved")):(o(),n("span",it,"added")),k(" on "+h(a.formattedDate),1)])]))),256))])],64)}const lt=S(Ks,[["render",nt],["__scopeId","data-v-f5ecb36a"]]);const rt={setup(){const s=I(),t=O(),c=E(),l=$(),i=R();return s.getUserDetails(),{userDetailsStore:s,assessmentsStore:t,usersStore:c,skillsStore:l,instructorStudentsStore:i}},data(){return{assessments:[],questions:[],studentIds:[],isTutorialComplete:!1,showTutorialTip1:!1,showTutorialTip2:!1,showTutorialTip3:!1,showTutorialTip4:!1,showTutorialTip5:!1}},components:{News:$s,Notifications:ms,StudentProgress:B,MarkAssessment:Ms,LastVisitedSkills:X,Goals:ns,HubStudentQuestionList:Zs,ReputationEvents:lt},computed:{name(){return this.userDetailsStore.firstName+" "+this.userDetailsStore.lastName}},async created(){this.userDetailsStore.role=="instructor"&&(await this.fetchAssessments(),await this.getStudentMCQuestions()),await this.checkIfTutorialComplete()},methods:{async fetchAssessments(){await this.assessmentsStore.getAssessments(),this.instructorStudentsStore.instructorStudentsList.length==0&&await this.instructorStudentsStore.getInstructorStudentsList();for(let s=0;s<this.instructorStudentsStore.instructorStudentsList.length;s++)this.userDetailsStore.userId==this.instructorStudentsStore.instructorStudentsList[s].instructor_id&&this.studentIds.push(this.instructorStudentsStore.instructorStudentsList[s].student_id);for(let s=0;s<this.assessmentsStore.assessments.length;s++)for(let t=0;t<this.studentIds.length;t++)this.assessmentsStore.assessments[s].student_id==this.studentIds[t]&&this.assessments.push(this.assessmentsStore.assessments[s]);for(let s=0;s<this.assessments.length;s++){let t=new Date(this.assessments[s].date).toDateString();this.assessments[s].date=t}this.usersStore.users.length==0&&await this.usersStore.getUsers();for(let s=0;s<this.assessments.length;s++)for(let t=0;t<this.usersStore.users.length;t++)this.assessments[s].student_id==this.usersStore.users[t].id&&(this.assessments[s].studentUsername=this.usersStore.users[t].username);this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let s=0;s<this.assessments.length;s++)for(let t=0;t<this.skillsStore.skillsList.length;t++)this.assessments[s].skill_id==this.skillsStore.skillsList[t].id&&(this.assessments[s].skillName=this.skillsStore.skillsList[t].name)},async getStudentMCQuestions(){const t=await(await fetch("/questions/student-mc-questions/full-data-list")).json();this.questions=t},async checkIfTutorialComplete(){const t=await(await fetch("/users/check-tutorial-progress/hub/"+this.userDetailsStore.userId)).json();t==0?(this.isTutorialComplete=!1,this.showTutorialTip1=!0):t==1&&(this.isTutorialComplete=!0)},progressTutorial(s){if(s==1)this.showTutorialTip1=!1,this.showTutorialTip2=!0;else if(s==2){if(this.showTutorialTip2=!1,this.userDetailsStore.role=="editor"){this.markTutorialComplete();return}this.showTutorialTip3=!0}else if(s==3){if(this.showTutorialTip3=!1,this.userDetailsStore.role=="instructor"){this.markTutorialComplete();return}this.showTutorialTip4=!0}else s==4?(this.showTutorialTip4=!1,this.showTutorialTip5=!0):s==5&&(this.showTutorialTip5=!1,this.markTutorialComplete())},markTutorialComplete(){let s="/users/mark-tutorial-complete/hub/"+this.userDetailsStore.userId;fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"}})}}},_=s=>(g("data-v-dc775036"),s=s(),w(),s),at={class:"container min-vh-100"},ct={class:"row content-row"},ut={class:"hub-component h-100"},dt={key:2,class:"info-panel bg-light rounded p-2 mb-2"},ht=_(()=>e("p",null," This section shows your available skills. These are the skills that you can try to master by taking a quiz. ",-1)),_t=_(()=>e("p",null," Once you master a skill, more skills will get unlocked. ",-1)),pt={class:"hub-component h-100"},mt={key:2,class:"info-panel bg-light rounded p-2 mb-2"},ft=_(()=>e("p",null," This section shows your the last 5 skill pages you visited. ",-1)),vt={key:2,class:"col-lg-4 col-md-6 mb-2"},kt={class:"hub-component h-100"},St={key:0,class:"info-panel bg-light rounded p-2 mb-2"},gt=_(()=>e("p",null,"This section shows any goals you might have made.",-1)),wt=_(()=>e("p",null," You can make a goal when there is a skill you want to master but it is not unlocked yet. ",-1)),yt={class:"row"},Tt={class:"col-lg-4 col-md-6 mb-2"},bt={class:"hub-component h-100"},Dt={key:0,class:"col-lg-4 col-md-6 mb-2"},Ct={class:"hub-component h-100"},It={key:0,class:"info-panel bg-light rounded p-2 mb-2"},xt=_(()=>e("p",null," This section shows any increases to your repuation score. ",-1)),$t=_(()=>e("p",null," You can increase your reputation score by helping to improve the platform in a variety of ways. ",-1)),Lt={class:"row"},Nt={class:"col"},qt={class:"hub-component h-100"},Ut={key:0,class:"modal"},jt={key:0,class:"modal-content"},Vt=_(()=>e("p",null,"This is your hub page.",-1)),At={key:1,class:"modal"},Et={class:"modal-content"},Ot={key:0},Rt=_(()=>e("p",null,"Welcome to the Collins Institute!",-1)),Mt={key:1},Gt=_(()=>e("p",null,"This is your hub page.",-1)),Pt={key:2},Qt=_(()=>e("p",null," On this page you can read news and notifications, check if you have any quizzes to mark, or questions that your students have added to the question bank you need approve. ",-1)),Ht={key:2,class:"modal"},zt={class:"modal-content"},Bt={key:0},Ft=_(()=>e("p",null,"Welcome to the Collins Institute!",-1)),Jt={key:1},Wt=_(()=>e("p",null,"This is the hub page.",-1)),Yt=_(()=>e("p",null," On this page you can read any news and notifications from the institute. ",-1));function Zt(s,t,c,l,i,u){const a=p("StudentProgress"),r=p("MarkAssessment"),N=p("LastVisitedSkills"),q=p("HubStudentQuestionList"),U=p("Goals"),j=p("Notifications"),V=p("ReputationEvents"),A=p("News");return o(),n(m,null,[e("div",at,[e("div",ct,[l.userDetailsStore.role!="editor"?(o(),n("div",{key:0,class:D(["col-lg-4 col-md-6 mb-2",{"d-none":l.userDetailsStore.role=="instructor"&&i.assessments.length===0}])},[e("div",ut,[l.userDetailsStore.role=="student"?(o(),x(a,{key:0,userId:l.userDetailsStore.userId},null,8,["userId"])):l.userDetailsStore.role=="instructor"?(o(),x(r,{key:1,assessments:i.assessments},null,8,["assessments"])):d("",!0),i.showTutorialTip2&&l.userDetailsStore.role=="student"?(o(),n("div",dt,[ht,_t,e("button",{class:"btn primary-btn",onClick:t[0]||(t[0]=f=>u.progressTutorial(2))}," next ")])):d("",!0)])],2)):d("",!0),l.userDetailsStore.role!="editor"?(o(),n("div",{key:1,class:D(["col-lg-4 col-md-6 mb-2",{"d-none":l.userDetailsStore.role=="instructor"&&i.questions.length===0}])},[e("div",pt,[l.userDetailsStore.role=="student"?(o(),x(N,{key:0,userId:l.userDetailsStore.userId},null,8,["userId"])):l.userDetailsStore.role=="instructor"?(o(),x(q,{key:1,questions:i.questions},null,8,["questions"])):d("",!0),i.showTutorialTip3&&l.userDetailsStore.role=="student"?(o(),n("div",mt,[ft,e("button",{class:"btn primary-btn",onClick:t[1]||(t[1]=f=>u.progressTutorial(3))}," next ")])):d("",!0)])],2)):d("",!0),l.userDetailsStore.role=="student"?(o(),n("div",vt,[e("div",kt,[v(U),i.showTutorialTip4&&l.userDetailsStore.role=="student"?(o(),n("div",St,[gt,wt,e("button",{class:"btn primary-btn",onClick:t[2]||(t[2]=f=>u.progressTutorial(4))}," close ")])):d("",!0)])])):d("",!0)]),e("div",yt,[e("div",Tt,[e("div",bt,[v(j)])]),l.userDetailsStore.role=="student"||l.userDetailsStore.role=="instructor"?(o(),n("div",Dt,[e("div",Ct,[v(V),i.showTutorialTip5&&l.userDetailsStore.role=="student"?(o(),n("div",It,[xt,$t,e("button",{class:"btn primary-btn",onClick:t[3]||(t[3]=f=>u.progressTutorial(5))}," next ")])):d("",!0)])])):d("",!0)]),e("div",Lt,[e("div",Nt,[e("div",qt,[v(A)])])])]),l.userDetailsStore.role=="student"&&i.showTutorialTip1?(o(),n("div",Ut,[i.showTutorialTip1&&l.userDetailsStore.role=="student"?(o(),n("div",jt,[e("div",null,[Vt,e("button",{class:"btn primary-btn",onClick:t[4]||(t[4]=f=>u.progressTutorial(1))}," next ")])])):d("",!0)])):d("",!0),l.userDetailsStore.role=="instructor"&&(i.showTutorialTip1||i.showTutorialTip2||i.showTutorialTip3)?(o(),n("div",At,[e("div",Et,[i.showTutorialTip1&&l.userDetailsStore.role=="instructor"?(o(),n("div",Ot,[Rt,e("p",null,[k(" Click "),e("button",{class:"btn primary-btn",onClick:t[5]||(t[5]=f=>u.progressTutorial(1))}," next "),k(" to start the tutorial. ")])])):d("",!0),i.showTutorialTip2&&l.userDetailsStore.role=="instructor"?(o(),n("div",Mt,[Gt,e("button",{class:"btn primary-btn",onClick:t[6]||(t[6]=f=>u.progressTutorial(2))}," next ")])):d("",!0),i.showTutorialTip3&&l.userDetailsStore.role=="instructor"?(o(),n("div",Pt,[Qt,e("button",{class:"btn primary-btn",onClick:t[7]||(t[7]=f=>u.progressTutorial(3))}," close ")])):d("",!0)])])):d("",!0),l.userDetailsStore.role=="editor"&&(i.showTutorialTip1||i.showTutorialTip2)?(o(),n("div",Ht,[e("div",zt,[i.showTutorialTip1&&l.userDetailsStore.role=="editor"?(o(),n("div",Bt,[Ft,e("p",null,[k(" Click "),e("button",{class:"btn primary-btn",onClick:t[8]||(t[8]=f=>u.progressTutorial(1))}," next "),k(" to start the tutorial. ")])])):d("",!0),i.showTutorialTip2&&l.userDetailsStore.role=="editor"?(o(),n("div",Jt,[Wt,Yt,e("button",{class:"btn primary-btn",onClick:t[9]||(t[9]=f=>u.progressTutorial(2))}," close ")])):d("",!0)])])):d("",!0)],64)}const te=S(rt,[["render",Zt],["__scopeId","data-v-dc775036"]]);export{te as default};
