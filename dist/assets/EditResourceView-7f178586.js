import{_ as l,o as a,c as u,a as o,r as d,g as h,k as f,b as p,F as _}from"./main-f4a0a5cc.js";import{S as k}from"./SkillTimeTracker-7b75efb5.js";const g={setup(){},data(){return{resourceId:this.$route.params.resourceId,newContent:"",originalContent:""}},async created(){const e=await(await fetch("/resources/show/"+this.resourceId)).json();$("#summernote").summernote({maximumImageFileSize:2048*1024,callbacks:{onImageUploadError:function(t){alert("Max image size is 2MB.")},onChange:t=>{this.newContent=t}}}).summernote("code",e.content),$(".note-editor .note-editable").css("background-color","#ffffff"),this.originalContent=e.content},methods:{Submit(){var s="/resources/edit/"+this.resourceId,e=$("#summernote").summernote("code");const t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({editordata:e})};fetch(s,t).then(()=>{let r=this.$route.query.dismissFlagId;r?fetch("/content-flags/"+r,{method:"DELETE"}).finally(()=>{this.$router.back()}):this.$router.back()})}},computed:{isFormChanged(){return this.originalContent!==this.newContent}}},b={class:"container p-2 bg-light rounded"},I=o("h1",{class:"heading"},"Edit Source",-1),C=o("div",{class:"row"},[o("div",{class:"mb-3"},[o("textarea",{id:"summernote",name:"editordata"})])],-1),T=["disabled"];function w(s,e,t,r,i,n){return a(),u("div",b,[I,C,o("button",{class:"btn btn-dark",disabled:!n.isFormChanged,onClick:e[0]||(e[0]=c=>n.Submit())}," Submit ",8,T)])}const E=l(g,[["render",w]]),S={data(){return{resourceId:this.$route.params.resourceId,skillId:null}},components:{EditResource:E,SkillTimeTracker:k},async created(){const e=await(await fetch("/resources/show/"+this.resourceId)).json();this.skillId=e.skill_id},beforeRouteLeave(s,e,t){this.$refs.skillTimeTracker.saveDuration(),t()}};function v(s,e,t,r,i,n){const c=d("EditResource"),m=d("SkillTimeTracker");return a(),u(_,null,[h(c),i.skillId?(a(),f(m,{key:0,ref:"skillTimeTracker"},null,512)):p("",!0)],64)}const F=l(S,[["render",v]]);export{F as default};
