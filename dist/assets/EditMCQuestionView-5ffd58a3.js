import{_ as f,a as b,o as n,c as a,d as e,w as r,j as h,b as u,F as v,k as w,t as q,L as g,G as x,q as y,p as S,f as k,l as V}from"./main-54dbce79.js";import{_ as C}from"./edit-mastery-skill-banner-9e7c0291.js";import{_ as F}from"./recurso-69-12793b41.js";const O={setup(){return{userDetailsStore:b()}},data(){return{questionId:this.$route.params.id,question:{},answers:[],validate:{validated:!1,name:!1,question:!1,answer:!1,explanation:!1},originalQuestion:{},originalAnswers:[],comment:""}},created(){this.getQuestion()},methods:{getQuestion(){fetch("/questions/mc/show/"+this.questionId).then(function(i){return i.json()}).then(i=>{this.question=i.question,this.answers=i.answers,this.originalQuestion={...i.question},this.originalAnswers=JSON.parse(JSON.stringify(i.answers))})},Submit(){const i={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:this.question,answers:this.answers})};var t="/questions/mc/"+this.questionId+"/edit";fetch(t,i).then(()=>{let _=this.$route.query.dismissFlagId;_?fetch("/content-flags/"+_,{method:"DELETE"}).finally(()=>{alert("Question edited successfully."),this.$router.back()}):(alert("Question edited successfully."),this.$router.back())})},SubmitForReview(){const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,question:this.question,answers:this.answers,comment:this.comment})};var t="/questions/mc/"+this.questionId+"/edit-for-review";fetch(t,i).then(()=>{alert(`This edit is being submitted for review.
We do this to prevent misinformation and sloppy wording from being added. If you would like to become an editor and help with this, please reach out.`),this.$router.back()})},ValidateForm(i){this.validate.validated=!1,(this.question.name===""||this.question.name===null)&&(this.validate.name=!0,this.validate.validated=!0),(this.question.text===""||this.question.text===null)&&(this.validate.question=!0,this.validate.validated=!0),this.answers.forEach(t=>{t.text==""&&(this.validate.validated=!0)}),(this.question.explanation===""||this.question.explanation===null)&&(this.validate.explanation=!0,this.validate.validated=!0),!this.validate.validated&&(i=="submission"?this.Submit():i=="submissionForReview"&&this.SubmitForReview())},setFormUpdated(){this.formUpdated=!0},closeTab(){window.close()}},computed:{isFormChanged(){return JSON.stringify(this.originalQuestion)!=JSON.stringify(this.question)||JSON.stringify(this.originalAnswers)!=JSON.stringify(this.answers)}}},l=i=>(S("data-v-c454db14"),i=i(),k(),i),D=l(()=>e("div",{id:"banner"},[e("img",{src:C,class:"image-fluid"})],-1)),I={class:"container mt-3 pb-3"},N=y('<div class="row" data-v-c454db14><div class="col-10 d-flex align-items-end" data-v-c454db14><h2 id="header-tile" data-v-c454db14>Edit Question</h2><img src="'+F+'" id="header-icon" data-v-c454db14></div></div><p class="mt-2" data-v-c454db14><em data-v-c454db14>Note: blank questions will not display in the quiz.</em></p>',2),Q={class:"main-content-container container-fluid mt-4"},U={class:"row p-0"},E={id:"form-container",class:"col-lg-7 p-4"},M={class:"mb-3"},L=l(()=>e("label",{for:"question_name",class:"form-label"},"Question Name",-1)),J={key:0,class:"form-validate"},T={class:"mb-3"},j=l(()=>e("label",{for:"last_name",class:"form-label"},"Question",-1)),z={key:0,class:"form-validate"},A={class:"form-label"},B={class:"d-flex answer-option"},R=["onUpdate:modelValue","id"],H={key:0,class:"form-validate"},P={class:"form-check"},G=["id","value"],W=["for"],K={class:"mb-3 form-check"},X=l(()=>e("label",{for:"randomOrder",class:"form-check-label"},"Show answers in random order",-1)),Y={class:"mb-3"},Z=l(()=>e("label",{class:"form-label"},"Explanation",-1)),$={key:0,class:"form-validate"},ee={key:0,class:"mb-3"},te=l(()=>e("label",{class:"form-label"},"Optional: explain this edit",-1)),se={class:"d-flex justify-content-end gap-4"},ie=["disabled"],oe=["disabled"],ne=l(()=>e("div",{class:"d-none d-md-block"}," Submit for review ",-1)),ae=l(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"white",height:"20",width:"20",class:"d-md-none"},[e("path",{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"})],-1)),le=[ne,ae];function re(i,t,_,d,s,m){return n(),a(v,null,[D,e("div",I,[N,e("div",Q,[e("div",U,[e("div",E,[e("div",M,[L,r(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.question.name=o),type:"text",class:"form-control",id:"question_name"},null,512),[[h,s.question.name]]),s.validate.name&&(s.question.name===""||s.question.name===null)?(n(),a("div",J," please enter a question name ! ")):u("",!0)]),e("div",T,[j,r(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.question.text=o),rows:"2",class:"form-control"},`\r
                        `,512),[[h,s.question.text]]),s.validate.question&&(s.question.text===""||s.question.text===null)?(n(),a("div",z," please enter a question ! ")):u("",!0)]),(n(!0),a(v,null,w(s.answers,(o,c)=>(n(),a("div",{key:c,class:"mb-3"},[e("label",A,"Answer "+q(c+1)+":",1),e("div",B,[r(e("input",{"onUpdate:modelValue":p=>o.text=p,id:"answer"+(c+1),placeholder:"Enter answer option",type:"text",class:"form-control"},null,8,R),[[h,o.text]])]),s.validate.validated&&o.text===""?(n(),a("div",H," please enter a correct answer ! ")):u("",!0),e("div",P,[r(e("input",{class:"form-check-input",type:"radio",id:"correct"+(c+1),name:"correctAnswer",value:c+1,"onUpdate:modelValue":t[2]||(t[2]=p=>s.question.correct_answer=p)},null,8,G),[[g,s.question.correct_answer]]),e("label",{for:"correct"+(c+1),class:""},"Set as correct",8,W)])]))),128)),e("div",K,[r(e("input",{type:"checkbox",id:"randomOrder","onUpdate:modelValue":t[3]||(t[3]=o=>s.question.is_random=o),class:"form-check-input"},null,512),[[x,s.question.is_random]]),X]),e("div",Y,[Z,r(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.question.explanation=o),class:"form-control",rows:"3"},null,512),[[h,s.question.explanation]]),s.validate.explanation&&(s.question.explanation===""||s.question.explanation===null)?(n(),a("div",$," please enter an explanation ! ")):u("",!0)]),d.userDetailsStore.role=="instructor"||d.userDetailsStore.role=="student"?(n(),a("div",ee,[te,r(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.comment=o),class:"form-control",rows:"3"},null,512),[[h,s.comment]])])):u("",!0),e("div",se,[e("button",{class:"btn red-btn",onClick:t[6]||(t[6]=o=>m.closeTab())}," Cancel "),d.userDetailsStore.role=="admin"||d.userDetailsStore.role=="editor"?(n(),a("button",{key:0,class:"btn purple-btn",onClick:t[7]||(t[7]=o=>m.ValidateForm("submission")),disabled:!m.isFormChanged}," Submit ",8,ie)):d.userDetailsStore.role=="instructor"||d.userDetailsStore.role=="student"?(n(),a("button",{key:1,class:"btn purple-btn",onClick:t[8]||(t[8]=o=>m.ValidateForm("submissionForReview")),disabled:!m.isFormChanged},le,8,oe)):u("",!0)])])])])])],64)}const de=f(O,[["render",re],["__scopeId","data-v-c454db14"]]),he={__name:"EditMCQuestionView",setup(i){return(t,_)=>(n(),V(de))}};export{he as default};
