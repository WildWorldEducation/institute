import{_ as g,h as x,r as v,o as i,c as n,a as e,F as f,z as $,s as c,t as a,q as p,b as d,k as b,l as k,g as m,A as U,f as D,T as S}from"./main-1f117a14.js";import{u as T,a as I,b as A}from"./EssayQuestionsStore-2473457a.js";const j={props:["userId"],setup(){const l=x(),t=T(),u=I(),h=A();return{skillsStore:l,resourcesStore:t,mcQuestionsStore:u,essayQuestionsStore:h}},data(){return{contentFlags:[],rows:[],currentChooseSkill:"",showActionWarnModal:!1,showSkillWarnModal:!1}},components:{},async created(){},async mounted(){await this.getContentFlagLogs(),this.contentFlags.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),r={date:u.toLocaleTimeString()+` (${h})`,action:l.action,question:t.question,questionName:t.question_name,skillName:t.name,skillUrl:t.skill_url,id:l.id,skill_deleted:t.skill_deleted,is_deleted:l.is_deleted};switch(l.flag_type){case"mc_question":r.type="mc_question",r.questionId=t.question_id,r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"resource":r.type="resource",r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"skill":r.type="skill",r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"essay_question":r.type="essay_question",r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"image_question":r.type="image_question",r.questionId=t.question_id,r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;default:r.type="delete";break}this.rows.push(r)})},methods:{async getContentFlagLogs(){const l=await fetch(`/user-actions/${this.userId}/flag`);this.contentFlags=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}},handleNoneLinkClick(l,t){l==="delete"?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)}}},W={key:0,class:"container-md main-container"},L={class:"d-flex flex-column gap-3"},Q={key:0},q={key:0},O=["onClick"],B={key:3,class:"text-danger"},R={key:1},z=["onClick"],E={key:2,class:"text-danger"},K={key:2},H=["onClick"],J={key:2,class:"text-danger"},V={key:3},P=["onClick"],G={key:2,class:"text-danger"},X={key:4},Y=["onClick"],Z={key:2,class:"text-danger"},F={key:5},ss={key:0,class:"text-danger"},es={key:1,class:"shake"},ts={key:2},os={id:"myModal",class:"modal"},ls={class:"modal-content skill-modal"},is={class:"mb-4"},ns={class:"modal-label"},as={class:"skill-modal-text"},rs={class:"d-flex justify-content-center"},cs=e("div",null,"OK",-1),ds=[cs],us={key:3},_s={id:"myModal",class:"modal"},hs={class:"modal-content skill-modal"},ks={class:"mb-4"},ms={class:"modal-label"},ps={class:"skill-modal-text"},ws={class:"d-flex justify-content-center"},fs=e("div",null,"OK",-1),vs=[fs],ys={key:4},bs={id:"myModal",class:"modal"},gs={class:"modal-content"},Ss=e("div",{class:"d-flex gap-4 justify-content-center mb-4"},[e("div",{class:"modal-label"},"this flag is deleted !!")],-1),$s={class:"d-flex justify-content-center"},xs=e("div",null,"OK",-1),Cs=[xs];function Ms(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",W,[e("div",L,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.date)+" ",1),s.type==="skill"?(i(),n("span",Q,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),s.action=="delete"?(i(),n("span",q," flag with id: "+a(s.id),1)):d("",!0),c(" flag on skill: "),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:1,class:"skill-link",onClick:y=>r.handleNoneLinkClick(s.action,s.skillName)},a(s.skillName),9,O)):(i(),b(_,{key:2,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"])),s.is_deleted?(i(),n("span",B,"[Flag deleted]")):d("",!0)])):d("",!0),s.type==="resource"?(i(),n("span",R,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),c(" flag on resource of skill: "),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>r.handleNoneLinkClick(s.action,s.skillName)},a(s.skillName),9,z)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"])),s.is_deleted?(i(),n("span",E,"[Flag deleted]")):d("",!0)])):d("",!0),s.type==="mc_question"?(i(),n("span",K,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),c(" flag on mc_question "+a('"'+s.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${s.skillId}/question-bank`},{default:k(()=>[c(a(s.question),1)]),_:2},1032,["to"]),c(" on skill: "),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>r.handleNoneLinkClick(s.action,s.skillName)},a(s.skillName),9,H)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"])),s.is_deleted?(i(),n("span",J,"[Flag deleted]")):d("",!0)])):d("",!0),s.type==="essay_question"?(i(),n("span",V,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),c(" flag on essay question "+a('"'+s.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${s.skillId}/question-bank`},{default:k(()=>[c(a(s.question),1)]),_:2},1032,["to"]),c(" on skill: "),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>r.handleNoneLinkClick(s.action,s.skillName)},a(s.skillName),9,P)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"])),s.is_deleted?(i(),n("span",G,"[Flag deleted]")):d("",!0)])):d("",!0),s.type==="image_question"?(i(),n("span",X,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),c(" flag on image question "+a('"'+s.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${s.skillId}/question-bank`},{default:k(()=>[c(a(s.question),1)]),_:2},1032,["to"]),c(" on skill: "),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>r.handleNoneLinkClick(s.action,s.skillName)},a(s.skillName),9,Y)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"])),s.is_deleted?(i(),n("span",Z,"[Flag deleted]")):d("",!0)])):d("",!0),s.type==="delete"?(i(),n("span",F,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),c(" flag with id "+a(s.id)+" ",1),s.is_deleted?(i(),n("span",ss,"[Flag deleted]")):d("",!0)])):d("",!0)]))),256))])])):(i(),n("div",es,"The user has no action on flags")),o.showSkillWarnModal?(i(),n("div",ts,[e("div",os,[e("div",ls,[e("div",is,[e("div",ns,[c(" Skill "),e("span",as,a(o.currentChooseSkill),1),c(" is deleted !! ")])]),e("div",rs,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=s=>o.showSkillWarnModal=!1)},ds)])])])])):d("",!0),o.showSkillWarnModal?(i(),n("div",us,[e("div",_s,[e("div",hs,[e("div",ks,[e("div",ms,[c(" Skill "),e("span",ps,a(o.currentChooseSkill),1),c(" is deleted !! ")])]),e("div",ws,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=s=>o.showSkillWarnModal=!1)},vs)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",ys,[e("div",bs,[e("div",gs,[Ss,e("div",$s,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[2]||(t[2]=s=>o.showActionWarnModal=!1)},Cs)])])])])):d("",!0)],64)}const Ns=g(j,[["render",Ms]]),Us={props:["userId"],data(){return{resourcesData:[],rows:[],showWarnModal:!1,currentChooseSkill:"",showActionWarnModal:!1,showSkillWarnModal:!1}},components:{},async created(){await this.getResourceLogs(),this.resourcesData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,skillDeleted:t.skill_deleted,skillUrl:t.skill_url,resourceDeleted:t.resource_deleted})})},methods:{async getResourceLogs(){const l=await fetch(`/user-actions/${this.userId}/resource`);this.resourcesData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}},handleNoneLinkClick(l,t,u){l==="delete"?this.showActionWarnModal=!0:u?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)}}},Ds={key:0,class:"container-md main-container"},Ts={class:"d-flex flex-column"},Is=["onClick"],As={key:1,class:"shake"},js={key:2},Ws={id:"myModal",class:"modal"},Ls={class:"modal-content skill-modal"},Qs={class:"modal-label"},qs={class:"skill-modal-text"},Os={class:"d-flex justify-content-center"},Bs=e("div",null,"OK",-1),Rs=[Bs],zs={key:3},Es={id:"myModal",class:"modal"},Ks={class:"modal-content"},Hs=e("div",{class:"d-flex gap-4 justify-content-center mb-4"},[e("div",{class:"modal-label"},"Resource is deleted !!")],-1),Js={class:"d-flex justify-content-center"},Vs=e("div",null,"OK",-1),Ps=[Vs];function Gs(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",Ds,[e("div",Ts,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.time)+" ("+a(s.date)+") - ",1),e("span",{class:p(r.actionColor(s.action))},a(s.action),3),c("Â  "),e("span",null,[m(_,{class:"skill-link",target:"_blank",to:"/users/"+u.userId+"/activity-report/source/"+s.id},{default:k(()=>[c("source")]),_:2},1032,["to"]),c(" in forum of skill: ")]),s.action==="delete"||s.skillDeleted===1||s.resourceDeleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>r.handleNoneLinkClick(s.action,s.skillName,s.resourceDeleted)},a(s.skillName),9,Is)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",As,"The user has no action on resource")),o.showSkillWarnModal?(i(),n("div",js,[e("div",Ws,[e("div",Ls,[e("div",Qs,[c(" Skill "),e("span",qs,a(o.currentChooseSkill),1),c(" is deleted !! ")]),e("div",Os,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=s=>o.showSkillWarnModal=!1)},Rs)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",zs,[e("div",Es,[e("div",Ks,[Hs,e("div",Js,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=s=>o.showActionWarnModal=!1)},Ps)])])])])):d("",!0)],64)}const Xs=g(Us,[["render",Gs]]),Ys={props:["userId"],data(){return{questionsData:[],rows:[],showSkillWarnModal:!1,showActionWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getMcQuestionsLog(),this.questionsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({question_name:t.question_name,skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,studentName:t.student_name,studentId:t.student_id,type:l.content_type,skillDeleted:t.skill_deleted,skillUrl:t.skill_url,questionDeleted:t.question_deleted})})},methods:{async getMcQuestionsLog(){const l=await fetch(`/user-actions/${this.userId}/question`);this.questionsData=await l.json(),console.log("QUESTION ACTION: "),console.log(this.questionsData)},handleNoneLinkClick(l,t,u){l==="delete"||u?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";case"bulk-create":return"bulk-create-action";case"submit_update_for_review":return"submit_update_for_review";case"approve":return"approve-action";case"edit_and_approve":return"edit-and-approve-action";default:return"delete-action"}}}},Zs={key:0,class:"container-md main-container"},Fs={class:"d-flex flex-column"},se={key:0},ee={key:1},te={key:2},oe=["onClick"],le={key:1,class:"shake"},ie={key:2},ne={id:"myModal",class:"modal"},ae={class:"modal-content skill-modal"},re={class:"mb-4"},ce={class:"modal-label"},de={class:"skill-modal-text"},ue={class:"d-flex justify-content-center"},_e=e("div",null,"OK",-1),he=[_e],ke={key:3},me={id:"myModal",class:"modal"},pe={class:"modal-content"},we=e("div",{class:"d-flex gap-4 justify-content-center mb-4"},[e("div",{class:"modal-label"},"Question is deleted !!")],-1),fe={class:"d-flex justify-content-center"},ve=e("div",null,"OK",-1),ye=[ve];function be(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length>0?(i(),n("div",Zs,[e("div",Fs,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.time)+" ("+a(s.date)+") ",1),e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action.replace(/_/g," ")),3),s.type==="mc_question"?(i(),n("span",se,a(' "'+s.question_name+'"')+" in question bank of skill: ",1)):d("",!0),s.type==="essay_question"?(i(),n("span",ee," essay question "+a(' "'+s.question_name+'"')+" in question bank of skill: ",1)):d("",!0),s.type==="image_question"?(i(),n("span",te," image question "+a(' "'+s.question_name+'"')+" in question bank of skill: ",1)):d("",!0),s.action==="delete"||s.skillDeleted===1||s.questionDeleted===1?(i(),n("span",{key:3,class:"skill-link",onClick:y=>r.handleNoneLinkClick(s.action,s.skillName,s.questionDeleted)},a(s.skillName),9,oe)):(i(),b(_,{key:4,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",le," The user has no action on multiple-choice questions ")),o.showSkillWarnModal?(i(),n("div",ie,[e("div",ne,[e("div",ae,[e("div",re,[e("div",ce,[c(" Skill "),e("span",de,a(o.currentChooseSkill),1),c(" is deleted !! ")])]),e("div",ue,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=s=>o.showSkillWarnModal=!1)},he)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",ke,[e("div",me,[e("div",pe,[we,e("div",fe,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=s=>o.showActionWarnModal=!1)},ye)])])])])):d("",!0)],64)}const ge=g(Ys,[["render",be]]),Se={props:["userId"],data(){return{skillsData:[],rows:[],showWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getSkillLogs(),this.skillsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,skillUrl:t.skill_url,is_deleted:t.is_deleted})})},methods:{async getSkillLogs(){const l=await fetch(`/user-actions/${this.userId}/skill`);this.skillsData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},$e={key:0,class:"container-md main-container"},xe={class:"d-flex flex-column"},Ce=e("span",null," skill: ",-1),Me=["onClick"],Ne={key:1,class:"shake"},Ue={key:2},De={id:"myModal",class:"modal"},Te={class:"modal-content skill-modal"},Ie={class:"modal-label"},Ae={class:"skill-modal-text"},je={class:"d-flex justify-content-center"},We=e("div",null,"OK",-1),Le=[We];function Qe(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",$e,[e("div",xe,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.time)+" ("+a(s.date)+") - ",1),e("span",{class:p(r.actionColor(s.action))},a(s.action),3),Ce,s.action==="delete"||s.is_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>{o.showWarnModal=!0,o.currentChooseSkill=s.skillName}},a(s.skillName),9,Me)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",Ne,"The user has no recorded actions on skills")),o.showWarnModal?(i(),n("div",Ue,[e("div",De,[e("div",Te,[e("div",Ie,[c(" Skill "),e("span",Ae,a(o.currentChooseSkill),1),c(" is deleted !! ")]),e("div",je,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=s=>o.showWarnModal=!1)},Le)])])])])):d("",!0)],64)}const qe=g(Se,[["render",Qe]]),Oe={props:["userId","deleteMcQuestion"],data(){return{questionsData:[],rows:[],showWarnModal:!1}},components:{},async created(){await this.getMcQuestionsLog(),this.questionsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,skillUrl:t.skill_url,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,studentName:t.student_name,studentId:t.student_id,skill_deleted:t.skill_deleted})})},methods:{async getMcQuestionsLog(){const l=await fetch(`/user-actions/${this.userId}/student_mc_question`);this.questionsData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},Be={key:0,class:"container-md main-container"},Re={class:"d-flex flex-column"},ze={key:0},Ee={key:1},Ke={key:2},He={key:1,class:"shake"},Je={key:2},Ve={id:"myModal",class:"modal"},Pe={class:"modal-content"},Ge=e("div",{class:"d-flex gap-4 justify-content-center mb-4"},[e("div",{class:"modal-label"},"This skill is deleted !!")],-1),Xe={class:"d-flex justify-content-center"},Ye=e("div",null,"OK",-1),Ze=[Ye];function Fe(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length>0?(i(),n("div",Be,[e("div",Re,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.time)+" ("+a(s.date)+") ",1),e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),s.action==="delete"?(i(),n("span",ze," student mc_question with id "+a(s.id),1)):s.action==="create"?(i(),n("span",Ee," student mc_question for skill: ")):(i(),n("span",Ke,[c(" mc question of student "),m(_,{class:"user-link",target:"_blank",to:"/users"},{default:k(()=>[c(a(s.studentName),1)]),_:2},1024),c(" on skill: ")])),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:3,class:"skill-link",onClick:t[0]||(t[0]=y=>o.showWarnModal=!0)},a(s.skillName),1)):(i(),b(_,{key:4,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",He," The user has no recorded actions on multiple-choice questions ")),o.showWarnModal?(i(),n("div",Je,[e("div",Ve,[e("div",Pe,[Ge,e("div",Xe,[e("button",{type:"button",class:"btn green-btn w-25",onClick:t[1]||(t[1]=s=>o.showWarnModal=!1)},Ze)])])])])):d("",!0)],64)}const st=g(Oe,[["render",Fe]]);const et={props:["userId"],setup(){return{skillsStore:x()}},data(){return{skillsData:[],rows:[],showWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getSubmittedSkillLogs();const l=[];this.skillsData.forEach(t=>{t.action==="approve"?l.push(this.getApproveSkillData(t)):l.push(this.getStillAwaitingData(t))}),Promise.all(l)},methods:{async getSubmittedSkillLogs(){const l=await fetch(`/user-actions/${this.userId}/new-skill`);this.skillsData=await l.json()},async getApproveSkillData(l){const t=new Date(l.create_date),u=t.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=t.toLocaleTimeString(),o=await this.skillsStore.findSkillById(l.content_id);this.rows.push({resourceId:l.content_id,action:l.action,date:u,time:h,id:l.id,skillName:o&&o.name,skillUrl:o.url&&o.url})},async getStillAwaitingData(l){const t=new Date(l.create_date),u=t.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=t.toLocaleTimeString(),r=await(await fetch(`/new-skills-awaiting-approval/show/${l.content_id}`)).json(),_=r.name&&r.name;this.rows.push({resourceId:l.content_id,action:l.action,date:u,time:h,id:l.id,skillName:_})},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},tt={key:0,class:"container-md main-container"},ot={class:"d-flex flex-column"},lt={key:0,class:"ms-1"},it={key:1,class:"shake"},nt={key:2},at={id:"myModal",class:"modal"},rt={class:"modal-content skill-modal"},ct=e("div",{class:"modal-label"},"Skill is deleted !!",-1),dt={class:"d-flex justify-content-center"},ut=e("div",null,"OK",-1),_t=[ut];function ht(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",tt,[e("div",ot,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.time)+" ("+a(s.date)+") - ",1),e("span",{class:p(r.actionColor(s.action))},a(s.action),3),s.skillName&&s.action!=="approve"?(i(),n("span",lt," skill: "+a(s.skillName),1)):d("",!0),s.skillName&&s.action==="approve"?(i(),b(_,{key:1,class:"skill-link ms-1",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName)+".",1)]),_:2},1032,["to"])):d("",!0),s.skillName?d("",!0):(i(),n("span",{key:2,onClick:t[0]||(t[0]=y=>o.showWarnModal=!0),class:"no-skill-text ms-1"},"skill deleted."))]))),256))])])):(i(),n("div",it,"The user has no recorded actions on skills")),o.showWarnModal?(i(),n("div",nt,[e("div",at,[e("div",rt,[ct,e("div",dt,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=s=>o.showWarnModal=!1)},_t)])])])])):d("",!0)],64)}const kt=g(et,[["render",ht]]);const mt={setup(){const l=U(),t=D();return{usersStore:l,userDetailsStore:t}},data(){return{user:{id:this.$route.params.id,firstName:null,lastName:null,username:null,role:null,avatar:null},showFlags:!1,showSources:!1,showMcQuestions:!1,showStudentMcQuestions:!1,showSkills:!1,showSkillSubmittedByUsers:!1,mcQuestions:[],resources:[],flags:[],skillEdits:[],isTutorialComplete:!1,showTutorialTip1:!1}},components:{UserFlagActions:Ns,UserResourceActions:Xs,UserQuestionActions:ge,UserStudentMcQuestionActions:st,UserSkillActions:qe,UserSkillAwaitingForApprovalActions:kt},async created(){await this.getUserDetails(),this.checkIfTutorialComplete()},methods:{async getUserDetails(){this.usersStore.users.length<1&&await this.usersStore.getUsers();for(let l=0;l<this.usersStore.users.length;l++)this.usersStore.users[l].id==this.user.id&&(this.user.firstName=this.usersStore.users[l].first_name,this.user.lastName=this.usersStore.users[l].last_name,this.user.username=this.usersStore.users[l].username,this.user.role=this.usersStore.users[l].role,this.user.avatar=this.usersStore.users[l].avatar)},async checkIfTutorialComplete(){const t=await(await fetch("/users/check-tutorial-progress/user-activity-report/"+this.userDetailsStore.userId)).json();t==0?(this.isTutorialComplete=!1,this.showTutorialTip1=!0):t==1&&(this.isTutorialComplete=!0)},progressTutorial(l){l==1&&(this.showTutorialTip1=!1,this.markTutorialComplete())},restartTutorial(){this.showTutorialTip1=!0,this.isTutorialComplete=!1},markTutorialComplete(){let l="/users/mark-tutorial-complete/user-activity-report/"+this.userDetailsStore.userId;fetch(l,{method:"PUT",headers:{"Content-Type":"application/json"}})}}},pt={class:"container bg-light rounded p-3"},wt={class:"d-flex justify-content-between"},ft=e("h1",{class:"heading mb-2"},"User Activity Report",-1),vt=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",fill:"white"},[e("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1),yt=[vt],bt={class:"row"},gt={class:"d-flex flex-column flex-md-row gap-3"},St=["src"],$t={class:"d-flex flex-column"},xt={id:"user-name"},Ct={id:"role"},Mt={class:"d-flex flex-column"},Nt={class:"d-flex flex-row justify-content-between"},Ut=["title"],Dt={class:"secondary-heading h4"},Tt=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),It=[Tt],At={key:0},jt={class:"d-flex flex-column"},Wt={class:"d-flex flex-row justify-content-between"},Lt=["title"],Qt={class:"secondary-heading h4"},qt=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),Ot=[qt],Bt={key:0},Rt={key:0,class:"mt-5 mb-3"},zt={class:"d-flex flex-column"},Et={class:"d-flex flex-row justify-content-between"},Kt=["title"],Ht={class:"secondary-heading h4"},Jt=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),Vt=[Jt],Pt={key:0},Gt={class:"d-flex flex-column"},Xt={class:"d-flex flex-row justify-content-between"},Yt=["title"],Zt={class:"secondary-heading h4"},Ft=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),so=[Ft],eo={key:0},to={class:"d-flex flex-column"},oo={class:"d-flex flex-row justify-content-between"},lo=["title"],io={class:"secondary-heading h4"},no=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),ao=[no],ro={key:0},co={class:"d-flex flex-column mb-3"},uo={class:"d-flex flex-row justify-content-between"},_o=["title"],ho={class:"secondary-heading h4"},ko=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),mo=[ko],po={key:0},wo={key:0,class:"modal"},fo={class:"modal-content"},vo={key:0},yo=e("p",null,"This is the User Activity List page.",-1),bo=e("p",null,"It shows what editors have been up to on the site.",-1);function go(l,t,u,h,o,r){const _=v("UserFlagActions"),s=v("UserQuestionActions"),y=v("UserStudentMcQuestionActions"),C=v("UserResourceActions"),M=v("UserSkillActions"),N=v("UserSkillAwaitingForApprovalActions");return i(),n(f,null,[e("div",pt,[e("div",wt,[ft,e("button",{class:"btn primary-btn",onClick:t[0]||(t[0]=(...w)=>r.restartTutorial&&r.restartTutorial(...w))},yt)]),e("div",bt,[e("div",gt,[e("img",{id:"activity-report-user-avatar",src:o.user.avatar},null,8,St),e("div",$t,[e("div",xt,a(o.user.username),1),e("div",Ct,a(o.user.role),1)])])]),e("div",null,[e("div",Mt,[e("div",Nt,[e("div",{class:"log-type",onClick:t[1]||(t[1]=w=>o.showFlags=!o.showFlags),"b-on-hover":"",title:o.showFlags?"collapse":"expand"},[e("h2",Dt,[c(" Flags "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showFlags?"arrow-point-down mb-2":"arrow-point-up "])},It,2))])],8,Ut)]),m(S,{name:"dropdown"},{default:k(()=>[o.showFlags?(i(),n("div",At,[m(_,{ref:"contentFlagsPerUser",userId:o.user.id,onCloseFlagDiv:t[2]||(t[2]=w=>o.showFlags=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),e("div",jt,[e("div",Wt,[e("div",{class:"log-type",onClick:t[3]||(t[3]=w=>o.showMcQuestions=!o.showMcQuestions),"b-on-hover":"",title:o.showMcQuestions?"collapse":"expand"},[e("h2",Qt,[c(" Questions "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showMcQuestions?"arrow-point-down mb-2":"arrow-point-up"])},Ot,2))])],8,Lt)]),m(S,{name:"dropdown"},{default:k(()=>[o.showMcQuestions?(i(),n("div",Bt,[m(s,{userId:o.user.id,onCloseMcQuestionDiv:t[4]||(t[4]=w=>o.showMcQuestions=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),o.user.role==="admin"?(i(),n("hr",Rt)):d("",!0),e("div",zt,[e("div",Et,[e("div",{class:"log-type",onClick:t[5]||(t[5]=w=>o.showStudentMcQuestions=!o.showStudentMcQuestions),"b-on-hover":"",title:o.showStudentMcQuestions?"collapse":"expand"},[e("h2",Ht,[c(" Student Suggested MC Questions "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showStudentMcQuestions?"arrow-point-down mb-2":"arrow-point-up"])},Vt,2))])],8,Kt)]),m(S,{name:"dropdown"},{default:k(()=>[o.showStudentMcQuestions?(i(),n("div",Pt,[m(y,{userId:o.user.id,onCloseMcQuestionDiv:t[6]||(t[6]=w=>o.showStudentMcQuestions=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),e("div",Gt,[e("div",Xt,[e("div",{class:"log-type",onClick:t[7]||(t[7]=w=>o.showSources=!o.showSources),"b-on-hover":"",title:o.showSources?"collapse":"expand"},[e("h2",Zt,[c(" Sources "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSources?"arrow-point-down mb-2":"arrow-point-up "])},so,2))])],8,Yt)]),m(S,{name:"dropdown"},{default:k(()=>[o.showSources?(i(),n("div",eo,[m(C,{userId:o.user.id,onCloseResourceDiv:t[8]||(t[8]=w=>o.showSources=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),e("div",to,[e("div",oo,[e("div",{class:"log-type",onClick:t[9]||(t[9]=w=>o.showSkills=!o.showSkills),"b-on-hover":"",title:o.showSkills?"collapse":"expand"},[e("h2",io,[c(" Skills "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSkills?"arrow-point-down mb-2":"arrow-point-up "])},ao,2))])],8,lo)]),m(S,{name:"dropdown"},{default:k(()=>[o.showSkills?(i(),n("div",ro,[m(M,{userId:o.user.id,onCloseResourceDiv:t[10]||(t[10]=w=>o.showSkills=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),e("div",co,[e("div",uo,[e("div",{class:"log-type",onClick:t[11]||(t[11]=w=>o.showSkillSubmittedByUsers=!o.showSkillSubmittedByUsers),"b-on-hover":"",title:o.showSkillSubmittedByUsers?"collapse":"expand"},[e("h2",ho,[c(" User Suggested New Skills "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSkillSubmittedByUsers?"arrow-point-down mb-2":"arrow-point-up "])},mo,2))])],8,_o)]),m(S,{name:"dropdown"},{default:k(()=>[o.showSkillSubmittedByUsers?(i(),n("div",po,[m(N,{userId:o.user.id,onCloseResourceDiv:t[12]||(t[12]=w=>o.showSkillSubmittedByUsers=!1)},null,8,["userId"])])):d("",!0)]),_:1})])])]),o.showTutorialTip1?(i(),n("div",wo,[e("div",fo,[o.showTutorialTip1?(i(),n("div",vo,[yo,bo,e("button",{class:"btn primary-btn",onClick:t[13]||(t[13]=w=>r.progressTutorial(1))}," close ")])):d("",!0)])])):d("",!0)],64)}const xo=g(mt,[["render",go]]);export{xo as default};
