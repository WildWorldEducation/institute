import{_ as k,o,c as n,d as s,b as c,g as x,m as D,r as h,e as w,j as g,t as _,i as v,F as C,l as u,p as L,f as N}from"./main-cdd958bc.js";import{W as F}from"./WaitLoadingModal-d3aad136.js";import{S as z}from"./SuccessModal-ee8072c7.js";import{F as B}from"./FailsModal-6a890525.js";const O={props:["showApproveModal","approveSkill","closeModal"],data(){return{showModal:!1}},methods:{handleApproveSkill(){this.closeModal(),this.approveSkill()}},watch:{showApproveModal:{handler(i){this.showModal=i}}}},j={key:0,id:"myModal",class:"modal"},T={class:"modal-content"},V=s("div",{class:"d-flex gap-4"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"grey",width:"45",height:"45"},[s("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})]),s("p",null,"Approve this skill and add it to the site?")],-1),E={class:"d-flex justify-content-lg-between justify-content-md-end justify-content-between gap-2"},H=s("span",{class:"d-none d-md-block"}," No ",-1),I=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1),q=[H,I],K=s("span",{class:"d-none d-md-block"}," Yes ",-1),P=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1),U=[K,P];function W(i,e,d,p,l,t){return l.showModal?(o(),n("div",j,[s("div",T,[V,s("div",E,[s("button",{type:"button",class:"btn red-btn modal-btn",onClick:e[0]||(e[0]=(...a)=>d.closeModal&&d.closeModal(...a))},q),s("button",{type:"button",class:"btn green-btn modal-btn",onClick:e[1]||(e[1]=(...a)=>t.handleApproveSkill&&t.handleApproveSkill(...a))},U)])])])):c("",!0)}const R=k(O,[["render",W]]);const Y={props:["showDismissModal","dismissSkill","closeDismissModal"],data(){return{showModal:!1}},methods:{handleDismissClick(){this.closeDismissModal(),this.dismissSkill()}},watch:{showDismissModal:{handler(i){console.log(i),this.showModal=i}}}},G={key:0,class:"modal"},J={class:"modal-content"},Q=s("div",{class:"d-flex gap-4"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"grey",width:"45",height:"45"},[s("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})]),s("p",null,"Permanently dismiss this suggested skill?")],-1),X={class:"d-flex justify-content-lg-between justify-content-md-end justify-content-between gap-2"},Z=s("span",{class:"d-none d-md-block"}," No ",-1),$=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1),ss=[Z,$],es=s("span",{class:"d-none d-md-block"}," Yes ",-1),ls=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1),is=[es,ls];function ts(i,e,d,p,l,t){return l.showModal?(o(),n("div",G,[s("div",J,[Q,s("div",X,[s("button",{type:"button",class:"btn red-btn modal-btn",onClick:e[0]||(e[0]=a=>d.closeDismissModal())},ss),s("button",{type:"button",class:"btn green-btn modal-btn",onClick:e[1]||(e[1]=(...a)=>t.handleDismissClick&&t.handleDismissClick(...a))},is)])])])):c("",!0)}const os=k(Y,[["render",ts]]);const ns={setup(){const i=x(),e=D();return{skillsStore:i,usersStore:e}},data(){return{id:this.$route.params.id,newSkillAwaitingApproval:{},showApproveModal:!1,showDisMissModal:!1,severLoading:!1,showSuccessModal:!1,showFailsModal:!1,message:""}},async created(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),this.usersStore.users.length==0&&await this.usersStore.getUsers(),this.getNewSkillAwaitingApproval()},components:{ApproveNewSkillModal:R,DismissModal:os,WaitLoadingModal:F,SuccessModal:z,FailsModal:B},methods:{async getNewSkillAwaitingApproval(){await fetch("/new-skills-awaiting-approval/show/"+this.id).then(function(i){return i.json()}).then(i=>{this.newSkillAwaitingApproval=i,this.newSkillAwaitingApproval.type=="domain"&&(this.newSkillAwaitingApproval.type="category");for(let e=0;e<this.skillsStore.skillsList.length;e++)this.skillsStore.skillsList[e].id==this.newSkillAwaitingApproval.parent&&(this.newSkillAwaitingApproval.parentName=this.skillsStore.skillsList[e].name,this.newSkillAwaitingApproval.parentUrl=this.skillsStore.skillsList[e].url);for(let e=0;e<this.usersStore.users.length;e++)this.usersStore.users[e].id==this.newSkillAwaitingApproval.user_id&&(this.newSkillAwaitingApproval.userName=this.usersStore.users[e].username)})},dismissSkill(){if(fetch("/new-skills-awaiting-approval/"+this.id+"?action=dismiss",{method:"DELETE"}).error){this.message="Failed to dismiss suggested skill",this.showFailsModal=!0;return}this.message="Successfully dismissed suggested skill",this.showSuccessModal=!0},approveSkill(){this.severLoading=!0;const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.newSkillAwaitingApproval.name,mastery_requirements:this.newSkillAwaitingApproval.mastery_requirements,icon_image:this.newSkillAwaitingApproval.icon_image,type:this.newSkillAwaitingApproval.type,level:this.newSkillAwaitingApproval.level})};var e=`/new-skills-awaiting-approval/accept/${this.newSkillAwaitingApproval.id}`;fetch(e,i).then(d=>{console.log("Fetched"),(d.error||d.status===500)&&(this.message="Failed to add new skill",this.showFailsModal=!0);const p=fetch("/new-skills-awaiting-approval/"+this.id+"?action=approve",{method:"DELETE"});if(p.error){console.err(p.error),this.message="Failed to remove from list of suggested new skills",this.showFailsModal=!0;return}this.message="Successfully added skill",this.severLoading=!1,this.showSuccessModal=!0})},handleSaveBtnClick(){this.showApproveModal=!0},hideApproveModal(){this.showApproveModal=!1},handleDisMissBtnClick(){this.showDisMissModal=!0},hideDismissModal(){this.showDisMissModal=!1},handleSuccessOKclick(){this.$router.push("/todo?nav=newSkillsList")},handleFailsOKclick(){this.showFailsModal=!1}}},r=i=>(L("data-v-9ea46650"),i=i(),N(),i),as={class:"container mt-3"},ds={id:"user-alert","b-on-hoover":"",title:"Click on the user name to see their user details"},cs=r(()=>s("div",null,"Submitted by",-1)),rs={class:"container mt-3"},hs={id:"skill-info-container"},ps={class:"heading"},ws=r(()=>s("hr",{class:"border border-2 opacity-100 hr"},null,-1)),_s={class:"row"},ms={key:0,class:"col-md-8 order-2 order-md-1 info-box"},gs={class:"d-flex flex-column"},vs={class:"mastery-requirements"},us=["innerHTML"],ks={class:"col-md-4 order-1 order-md-2"},Ss={class:"info-box p-2 mb-2"},As=["src"],Ms={key:1,class:"d-flex flex-column align-items-center"},fs=r(()=>s("div",{class:"no-image-warn"}," This Skill Does Not Have Icon Image. ",-1)),ys=r(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"80",height:"80"},[s("path",{d:"M448 80c8.8 0 16 7.2 16 16l0 319.8-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3L48 96c0-8.8 7.2-16 16-16l384 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"})],-1)),bs=[fs,ys],xs={class:"mt-3 d-flex flex-column align-items-center"},Ds=r(()=>s("h2",{class:"h4 heading"},"Parent",-1)),Cs={class:"mt-3 d-flex flex-column align-items-center"},Ls=r(()=>s("h2",{class:"h4 heading"},"Type",-1)),Ns={key:2,class:"mt-3 d-flex flex-column align-items-center"},Fs=r(()=>s("h2",{class:"h4 heading"},"Level",-1)),zs={key:0},Bs={key:1},Os={key:2},js={key:3},Ts={key:4},Vs=r(()=>s("p",null,"Â ",-1)),Es={class:"d-flex justify-content-end gap-3"};function Hs(i,e,d,p,l,t){const a=h("RouterLink"),S=h("router-link"),A=h("ApproveNewSkillModal"),M=h("DismissModal"),f=h("WaitLoadingModal"),y=h("SuccessModal"),b=h("FailsModal");return o(),n(C,null,[s("div",as,[s("div",ds,[cs,w(a,{class:"normal-text-link",to:`/users?username=${l.newSkillAwaitingApproval.userName}`},{default:g(()=>[u(_(l.newSkillAwaitingApproval.userName),1)]),_:1},8,["to"])])]),s("div",rs,[s("div",hs,[s("div",null,[s("h1",ps,_(l.newSkillAwaitingApproval.name),1),ws]),s("div",_s,[l.newSkillAwaitingApproval.type!="category"?(o(),n("div",ms,[s("div",gs,[s("div",vs,[s("div",{innerHTML:l.newSkillAwaitingApproval.mastery_requirements},null,8,us)])])])):c("",!0),s("div",ks,[s("div",Ss,[l.newSkillAwaitingApproval.icon_image?(o(),n("img",{key:0,src:l.newSkillAwaitingApproval.icon_image,class:"rounded img-fluid"},null,8,As)):(o(),n("div",Ms,bs)),s("div",xs,[Ds,w(a,{"b-on-hoover":"",title:"Click on parent name to see it details",class:"normal-text-link",to:`/skills/${l.newSkillAwaitingApproval.parentUrl}`},{default:g(()=>[u(_(l.newSkillAwaitingApproval.parentName),1)]),_:1},8,["to"])]),s("div",Cs,[Ls,s("div",null,_(l.newSkillAwaitingApproval.type),1)]),l.newSkillAwaitingApproval.type!="category"?(o(),n("div",Ns,[Fs,l.newSkillAwaitingApproval.level=="grade_school"?(o(),n("span",zs,"Grade School")):l.newSkillAwaitingApproval.level=="middle_school"?(o(),n("span",Bs,"Middle School")):l.newSkillAwaitingApproval.level=="high_school"?(o(),n("span",Os,"High School")):l.newSkillAwaitingApproval.level=="college"?(o(),n("span",js,"College")):l.newSkillAwaitingApproval.level=="phd"?(o(),n("span",Ts,"PHD")):c("",!0)])):c("",!0)])])]),Vs,s("div",Es,[s("button",{class:"btn red-btn",onClick:e[0]||(e[0]=(...m)=>t.handleDisMissBtnClick&&t.handleDisMissBtnClick(...m))}," Dismiss "),w(S,{class:"btn primary-btn",to:"/new-skill-awaiting-approval/edit/"+l.id},{default:g(()=>[u(" Edit ")]),_:1},8,["to"]),s("button",{class:"btn secondary-btn",onClick:e[1]||(e[1]=(...m)=>t.handleSaveBtnClick&&t.handleSaveBtnClick(...m))}," Approve ")])])]),w(A,{showApproveModal:l.showApproveModal,approveSkill:t.approveSkill,closeModal:t.hideApproveModal},null,8,["showApproveModal","approveSkill","closeModal"]),w(M,{dismissSkill:t.dismissSkill,closeDismissModal:t.hideDismissModal,showDismissModal:l.showDisMissModal},null,8,["dismissSkill","closeDismissModal","showDismissModal"]),l.severLoading?(o(),v(f,{key:0})):c("",!0),l.showSuccessModal?(o(),v(y,{key:1,message:l.message,handleOkClick:t.handleSuccessOKclick},null,8,["message","handleOkClick"])):c("",!0),l.showFailsModal?(o(),v(b,{key:2,message:l.message,handleOkClick:t.handleFailsOKclick},null,8,["message","handleOkClick"])):c("",!0)],64)}const Us=k(ns,[["render",Hs],["__scopeId","data-v-9ea46650"]]);export{Us as default};
