import{_ as v,f,o as r,c as l,a as t,w as g,y as A,p as D,d as w,i as I,A as b,r as x,b as d,F as m,z as k,g as C,N as p,s as y,t as S}from"./main-e532c3f9.js";import{u as B}from"./TenantStore-27865f05.js";const T={setup(){return{userDetailsStore:f()}},data(){return{theme:this.userDetailsStore.theme}},created(){},async mounted(){await this.userDetailsStore.getUserDetails()},methods:{chooseTheme(){this.userDetailsStore.updateTheme(this.theme)}}},_=s=>(D("data-v-af51cfe5"),s=s(),w(),s),P=_(()=>t("h2",{class:"secondary-heading white-heading h4"},"Theme",-1)),E={class:"mb-3 text-start themes"},N=_(()=>t("option",{value:"original"},"Original",-1)),U=_(()=>t("option",{value:"instructor"},"Instructor",-1)),V=_(()=>t("option",{value:"editor"},"Editor",-1)),M=[N,U,V];function O(s,e,u,a,n,i){return r(),l("div",null,[P,t("div",E,[g(t("select",{class:"form-select",onChange:e[0]||(e[0]=h=>i.chooseTheme()),"onUpdate:modelValue":e[1]||(e[1]=h=>n.theme=h)},M,544),[[A,n.theme]])])])}const W=v(T,[["render",O],["__scopeId","data-v-af51cfe5"]]),z={setup(){const s=f(),e=I(),u=b(),a=B();return s.getUserDetails(),u.getInstructors(),{userDetailsStore:s,sessionDetailsStore:e,userStore:u,tenantStore:a}},data(){return{instructorID:this.userDetailsStore.instructorId,selectedInstructorName:"",showWarnModal:!1,isEditing:!1,isAudioAutoPlay:!!this.userDetailsStore.isAudioAutoPlay,canStudentsAccessBilling:null}},components:{ThemeDetails:W},async mounted(){this.isAudioAutoPlay=!!this.userDetailsStore.isAudioAutoPlay,this.userDetailsStore.role=="school_admin"&&await this.getTenantSettings()},methods:{isInstructorLocked(){return this.userDetailsStore.role==="student"&&this.userDetailsStore.instructorId&&this.userDetailsStore.instructorId.trim()!==""},async updateInstructor(s){if(!this.isInstructorLocked())try{const e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({instructor_id:s})};await fetch(`/users/${this.userDetailsStore.userId}/edit/instructor`,e),this.userDetailsStore.getUserDetails(),this.isEditing=!1,this.showWarnModal=!1}catch(e){console.error("Error updating instructor:",e)}},cancelEdit(){this.isEditing=!1},handleInstructorChange(s){this.instructorID=s.target.value,this.selectedInstructorName=s.target.options[s.target.selectedIndex].text},async toggleAutoPlay(){await this.userDetailsStore.updateAudioAutoPlay(this.isAudioAutoPlay)},async getTenantSettings(){await this.tenantStore.getTenantDetails(this.userDetailsStore.tenantId),this.tenantStore.canStudentsAccessBilling==1?this.canStudentsAccessBilling=!0:this.canStudentsAccessBilling=!1},async toggleStudentsAccessBilling(){try{let s;this.canStudentsAccessBilling==!0?s=1:s=0;const e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({can_students_access_billing:s})};await fetch(`/tenants/${this.userDetailsStore.tenantId}/edit`,e)}catch(s){console.error("Error updating instructor:",s)}}},watch:{"userDetailsStore.isAudioAutoPlay":function(s){this.isAudioAutoPlay=!!s}}};const c=s=>(D("data-v-ad8d63c2"),s=s(),w(),s),L={class:"container legend-div"},j={class:"mt-2 d-flex row gap-4 justify-content-between"},q={key:0,class:"form"},F={class:"profile-input"},J=c(()=>t("h2",{class:"secondary-heading h4 white-heading"}," Instructor ",-1)),Y={key:0},H=["value"],G={key:0,class:"mt-2"},K={key:1},Q={class:"profile-input"},R=c(()=>t("option",{value:"",selected:"",disabled:""}," Please choose an instructor ",-1)),X=["value"],Z={class:"mt-2 d-flex gap-2"},$={key:1,class:"profile-input"},tt=c(()=>t("h2",{class:"secondary-heading h4 mb-3 white-heading"}," AI Assistant Settings ",-1)),et={class:"setting-container d-flex align-items-center"},st={class:"toggle-switch-container me-3"},ot={class:"toggle-switch"},nt=c(()=>t("span",{class:"toggle-slider"},null,-1)),it=c(()=>t("div",{class:"d-flex align-items-center"},[t("span",{class:"setting-label"}," Auto-play AI tutor speech ")],-1)),rt={key:2},lt={class:"setting-container d-flex align-items-center"},at={class:"toggle-switch-container me-3"},ct={class:"toggle-switch"},dt=c(()=>t("span",{class:"toggle-slider"},null,-1)),ut=c(()=>t("div",{class:"d-flex align-items-center"},[t("span",{class:"setting-label"}," Allow students to access billing page ")],-1)),ht={key:0},gt={id:"myModal",class:"modal"},_t={class:"warn-content d-flex flex-column"},mt={class:"d-flex flex-row"},pt=c(()=>t("div",{class:"me-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"35",height:"35",fill:"#eed888"},[t("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})])],-1)),yt={id:"instructor-name-text"},St={class:"d-flex flex-row-reverse gap-2"};function vt(s,e,u,a,n,i){const h=x("ThemeDetails");return r(),l(m,null,[t("div",L,[t("div",j,[a.userDetailsStore.role==="student"?(r(),l("div",q,[t("div",F,[t("div",null,[J,n.isEditing?(r(),l("div",K,[t("div",Q,[g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.instructorID=o),class:"form-select",onChange:e[2]||(e[2]=(...o)=>i.handleInstructorChange&&i.handleInstructorChange(...o))},[R,(r(!0),l(m,null,k(a.userStore.instructors,o=>(r(),l("option",{key:o.id,value:o.id},S(o.username),9,X))),128))],544),[[A,n.instructorID]])]),t("div",Z,[t("button",{class:"btn red-btn",onClick:e[3]||(e[3]=(...o)=>i.cancelEdit&&i.cancelEdit(...o))}," Cancel "),t("button",{class:"btn primary-btn",onClick:e[4]||(e[4]=o=>n.showWarnModal=!0)}," Submit ")])])):(r(),l("div",Y,[t("input",{type:"text",class:"form-control",readonly:"",value:a.userDetailsStore.instructorUsername||"No instructor chosen"},null,8,H),i.isInstructorLocked()?d("",!0):(r(),l("div",G,[t("button",{class:"btn primary-btn",onClick:e[0]||(e[0]=o=>n.isEditing=!0)}," Edit ")]))]))])])])):d("",!0),C(h),a.userDetailsStore.role==="student"?(r(),l("div",$,[tt,t("div",et,[t("div",st,[t("label",ot,[g(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=o=>n.isAudioAutoPlay=o),onChange:e[6]||(e[6]=(...o)=>i.toggleAutoPlay&&i.toggleAutoPlay(...o)),class:"toggle-input"},null,544),[[p,n.isAudioAutoPlay]]),nt])]),it])])):d("",!0),a.userDetailsStore.role==="school_admin"?(r(),l("div",rt,[t("div",lt,[t("div",at,[t("label",ct,[g(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=o=>n.canStudentsAccessBilling=o),onChange:e[8]||(e[8]=(...o)=>i.toggleStudentsAccessBilling&&i.toggleStudentsAccessBilling(...o)),class:"toggle-input"},null,544),[[p,n.canStudentsAccessBilling]]),dt])]),ut])])):d("",!0)])]),n.showWarnModal?(r(),l("div",ht,[t("div",gt,[t("div",_t,[t("div",mt,[pt,t("div",null,[y(" You can only choose your instructor once. Are you sure you want   "),t("span",yt,S(n.selectedInstructorName),1),y("   to be your instructor. ")])]),t("div",St,[t("button",{class:"btn primary-btn",onClick:e[9]||(e[9]=o=>i.updateInstructor(n.instructorID))}," Yes "),t("button",{class:"btn red-btn",onClick:e[10]||(e[10]=o=>n.showWarnModal=!1)}," No ")])])])])):d("",!0)],64)}const Dt=v(z,[["render",vt],["__scopeId","data-v-ad8d63c2"]]);export{Dt as default};
