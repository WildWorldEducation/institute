import{u as T}from"./AnalyticsStore-4a3e4f23.js";import{u as I}from"./TeacherAnalyticsStore-185da4c8.js";import{_ as b,o as l,c as m,e as B,r as S,a as e,f as y,l as _,j as f,b as M,k,F as P,x as q,t as H}from"./main-12fc20f1.js";import{c as L,S as R}from"./StudentProgressChart-6398f5c8.js";import"./transform-af9a74a2.js";import{u as j,l as N}from"./line-85f04100.js";import{e as V}from"./extent-4cf1c809.js";import{l as w,a as F,b as A,c as z}from"./linear-5b188edc.js";import{m as $,o as E,b as O}from"./continuous-7328829e.js";import{s as C}from"./string-dd82ab4a.js";import{s as Y}from"./sort-ed61f96d.js";import"./colors-98f238a0.js";import"./time-0457d93b.js";import"./point-ea70dc51.js";const Q={name:"SchoolTimeChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(s){if(s.student.length==0)this.axisData=s.tenant;else if(s.tenant.length==0)this.axisData=s.student;else{const r=s.student.reduce((D,x)=>Math.max(D,x.quantity),-1/0),v=s.tenant.reduce((D,x)=>Math.max(D,x.quantity),-1/0);r>=v?this.axisData=s.student:this.axisData=s.tenant}const a=Object.entries(s).map(([r,v])=>({name:r,values:v})),i=document.getElementById("time-chart-container").clientWidth,n=document.getElementById("time-chart-container").clientHeight,c=5,g=0,d=25,p=25,o=j(V(this.axisData,r=>r.date),[p,i-g]),h=w([0,$(this.axisData,r=>r.formattedQuantity)],[n-d,c]);E().domain(a.map(r=>r.name)).range(L);const u=N().x(r=>o(r.date)).y(r=>h(r.formattedQuantity)),t=C("#time-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(i,n),+Math.min(i,n)]).attr("preserveAspectRatio","xMinYMin");t.append("g").attr("transform",`translate(0,${n-d})`).call(F(o).ticks(s.length).tickSizeOuter(0)),t.append("g").attr("transform",`translate(${p},0)`).call(A(h).ticks(n/40)).call(r=>r.select(".domain").remove()).call(r=>r.selectAll(".tick line").clone().attr("x2",i-p-g).attr("stroke-opacity",.2)).call(r=>r.append("text").attr("x",-p).attr("y",10).attr("fill","currentColor").attr("text-anchor","start")),t.selectAll(".line").data(a).join("path").attr("fill","none").attr("stroke",r=>r.name=="student"?"RoyalBlue":"#ff7f0e").attr("stroke-width",3).attr("d",r=>u(r.values))}}};function W(s,a,i,n,c,g){return null}const U=b(Q,[["render",W]]),G={name:"StudentComparisonChart",props:["data","colour"],data(){return{}},mounted(){},methods:{createChart(s){C("#student-comparison-container");const a=25,i=0,n=20,c=10,g=200,d=700,p=Math.ceil((s.length+.1)*a)+i+c,o=w().domain([0,$(s,t=>t.quantity)]).range([g,d-n]),h=O().domain(Y(s,t=>-t.quantity).map(t=>t.name)).rangeRound([i,p-c]).padding(.1);o.tickFormat(20);const u=C("#student-comparison-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,d,p]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");u.append("g").selectAll().data(s).join("rect").attr("x",o(0)).attr("y",t=>h(t.name)).attr("width",t=>o(t.quantity)-o(0)).attr("height",h.bandwidth()).attr("fill",function(t){return t.name=="Language"?"DarkMagenta":t.name=="Mathematics"?"blue":t.name=="Science & Invention"?"purple":t.name=="Computer Science"?"deeppink":t.name=="Dangerous Ideas"?"brown":t.name=="History"?"cyan":t.name=="Life"?"magenta":"#ff7f0e"}),u.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(s).join("text").attr("x",t=>o(t.quantity)).attr("y",t=>h(t.name)+h.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(r=>o(r.quantity)-o(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),u.append("g").attr("transform",`translate(0,${i})`).call(z(o).ticks(0)).call(t=>t.select(".domain").remove()),u.append("g").attr("transform",`translate(${g},0)`).attr("style","font-size: 16px").call(A(h).tickSizeOuter(0))}}},J={id:"student-comparison-container"};function K(s,a,i,n,c,g){return l(),m("div",J)}const X=b(G,[["render",K]]);const Z={name:"Student-Dashboard",setup(){const s=B(),a=T(),i=I();return{userDetailsStore:s,analyticsStore:a,teacherAnalyticsStore:i}},data(){return{showSidebar:!0,screenWidth:screen.width,isStudentData:!0,isSchoolData:!0,isLanguageData:!1,isMathData:!1,isHistoryData:!1,isLifeData:!1,isCSData:!1,isSAndIData:!1,isDIData:!1,progressData:{student:[],average:[]},isAboveTheCurve:!1}},components:{StudentProgressChart:R,StudentComparisonChart:X,StudentTimeChart:U},async created(){await this.analyticsStore.getStudentProgress(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userDetailsStore.userId),await this.analyticsStore.getStudentTime(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.teacherAnalyticsStore.getStudentMultipleFails(this.userDetailsStore.userId),(this.analyticsStore.progress.student.length>0||this.analyticsStore.progress.tenant.length>0)&&this.analyticsStore.progress.student[this.analyticsStore.progress.student.length-1].quantity>this.analyticsStore.progress.tenant[this.analyticsStore.progress.tenant.length-1].quantity&&(this.isAboveTheCurve=!0),await this.HandleProgressData(),await this.HandleComparisonData(),await this.HandleTimeData()},methods:{async HandleProgressData(){if(this.isStudentData){this.progressData.student=[];for(let s=0;s<this.analyticsStore.progress.student.length;s++)this.progressData.student.push(this.analyticsStore.progress.student[s])}else this.progressData.student=[];if(this.isSchoolData){this.progressData.average=[];for(let s=0;s<this.analyticsStore.progress.tenant.length;s++)this.progressData.average.push(this.analyticsStore.progress.tenant[s])}else this.progressData.average=[];this.$nextTick(()=>{this.$refs.progressChart&&this.$refs.progressChart.createChart(this.progressData)})},async HandleComparisonData(){this.$nextTick(()=>{this.$refs.comparisonChart&&this.$refs.comparisonChart.createChart(this.analyticsStore.studentRootSubjectsPassedAssessments)})},async HandleTimeData(){this.$nextTick(()=>{this.$refs.timeChart&&this.$refs.timeChart.createChart(this.analyticsStore.time)})},toggleSidebar(){this.showSidebar=!this.showSidebar}}},tt={class:"dashboard"},et={class:"main"},st={class:"content container-fluid"},at={class:"dash-row row"},rt={class:"col-md-6 h-100 position-relative"},nt={key:0,class:""},it={id:"progress-chart-container"},ot={key:1},lt={class:"col-md-6"},ct={id:"comparison-chart-container"},dt={key:1},ht={class:"dash-row row"},ut={class:"col-md h-100 position-relative"},mt={id:"time-chart-container"},pt={key:1},gt={class:"col-md position-relative"},ft={class:"row"},yt={class:"col-md"},_t={key:0},St={key:1},vt={class:"col-md"};function Dt(s,a,i,n,c,g){const d=S("RouterLink"),p=S("StudentProgressChart"),o=S("StudentComparisonChart"),h=S("StudentTimeChart");return l(),m("div",tt,[e("div",et,[e("div",st,[e("div",at,[e("div",rt,[y(d,{to:"/my-progress/skills",class:"",target:"_blank"},{default:_(()=>a[0]||(a[0]=[e("h2",{class:"heading h5"},"Progress over time",-1)])),_:1,__:[0]}),c.progressData.student.length>0||c.progressData.average.length>0?(l(),m("figcaption",nt,a[1]||(a[1]=[e("span",{style:{color:"green"}},"You",-1),f(" vs ",-1),e("span",{style:{color:"#ff7f0e"}},"school average",-1)]))):M("",!0),e("div",it,[c.progressData.student.length>0||c.progressData.average.length>0?(l(),k(p,{key:0,ref:"progressChart"},null,512)):(l(),m("p",ot,"No progress yet"))])]),e("div",lt,[e("div",ct,[a[2]||(a[2]=e("h2",{class:"heading h5 mt-1"},"Progress comparison",-1)),n.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(l(),k(o,{key:0,ref:"comparisonChart",data:n.analyticsStore.studentRootSubjectsPassedAssessments,colour:"#5f31dd"},null,8,["data"])):(l(),m("p",dt,"No progress yet"))])])]),e("div",ht,[e("div",ut,[y(d,{to:"/my-progress/time",target:"_blank"},{default:_(()=>a[3]||(a[3]=[e("h2",{class:"heading h5"},"Study time",-1)])),_:1,__:[3]}),a[4]||(a[4]=e("figcaption",{class:""},[e("span",{style:{color:"blue"}},"You"),f(" vs "),e("span",{style:{color:"#ff7f0e"}},"school average")],-1)),e("div",mt,[n.analyticsStore.time.student.length>0||n.analyticsStore.time.tenant.length>0?(l(),k(h,{key:0,ref:"timeChart"},null,512)):(l(),m("p",pt,"No data available"))])]),e("div",gt,[e("div",ft,[e("div",yt,[y(d,{to:"/my-progress/super-challenging",class:"col",target:"_blank"},{default:_(()=>a[5]||(a[5]=[e("h2",{class:"h5 heading"}," Consider asking for help ",-1)])),_:1,__:[5]}),n.teacherAnalyticsStore.studentMultipleFails.length>0?(l(),m("ul",_t,[(l(!0),m(P,null,q(n.teacherAnalyticsStore.studentMultipleFails,u=>(l(),m("li",{class:"failed-skills",key:u.id},[y(d,{to:"/skills/"+u.url,target:"_blank"},{default:_(()=>[f(H(u.name),1)]),_:2},1032,["to"])]))),128))])):(l(),m("p",St,"Nothing to worry about yet"))]),e("div",vt,[a[9]||(a[9]=e("h2",{class:"h5 heading"},"Stats",-1)),e("ul",null,[a[7]||(a[7]=e("li",null,[e("strong",null,"Skills passed:"),f(" 25")],-1)),a[8]||(a[8]=e("li",null,[e("strong",null,"Total time spent:"),f(" 5:00 ")],-1)),e("li",null,[y(d,{to:"/my-progress/tokens",target:"_blank"},{default:_(()=>a[6]||(a[6]=[e("strong",null,"AI usage:",-1),f(" 10,000",-1)])),_:1,__:[6]})])])])])])])])])])}const Lt=b(Z,[["render",Dt],["__scopeId","data-v-61890237"]]);export{Lt as default};
