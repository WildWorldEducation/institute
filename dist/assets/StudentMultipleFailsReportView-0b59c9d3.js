import{_ as y,y as _,r as h,o as i,c as p,a as s,t as S,j as f,f as b}from"./main-323bd1ce.js";import{u as B}from"./TeacherAnalyticsStore-974f18fa.js";import{u as w}from"./AnalyticsStore-b394ec96.js";import"./transform-af9a74a2.js";import{l as A,c as x,b as F}from"./linear-5b188edc.js";import{m as v,b as j}from"./continuous-7328829e.js";import{s as k}from"./sort-ed61f96d.js";import{s as C}from"./string-dd82ab4a.js";import{F as R}from"./FailedAssessmentsHorizontalBarChart-fd44e9ff.js";import{D as M}from"./downloadCSVBtn-f63a09ef.js";const H={name:"StudentFailedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const d=document.getElementById("fails-by-subject-chart-container").clientWidth,u=20*this.data.length+0+0,a=A().domain([0,v(this.data,t=>t.quantity)]).range([200,d-0]),r=j().domain(k(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,u-0]).padding(.1),m=C("#fails-by-subject-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,d,u]).attr("preserveAspectRatio","xMinYMin");m.append("g").selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",t=>r(t.name)).attr("width",t=>a(t.quantity)-a(0)).attr("height",r.bandwidth()).attr("fill",function(t){return t.name=="Language"?"DarkMagenta":t.name=="Mathematics"?"blue":t.name=="Science & Invention"?"purple":t.name=="Computer Science"?"deeppink":t.name=="Dangerous Ideas"?"brown":t.name=="History"?"cyan":t.name=="Life"?"magenta":"#ff7f0e"}),m.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>a(t.quantity)).attr("y",t=>r(t.name)+r.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(g=>a(g.quantity)-a(0)<20).attr("dx",4).attr("fill","white").attr("text-anchor","start")),m.append("g").attr("transform","translate(0,0)").call(x(a).ticks(0)).call(t=>t.select(".domain").remove()),m.append("g").attr("transform","translate(200,0)").attr("style","font-size: 16px").call(F(r).tickSizeOuter(0))}};function z(n,e,l,o,c,d){return null}const I=y(H,[["render",z]]);const T={setup(){const n=_(),e=B(),l=w();return{usersStore:n,teacherAnalyticsStore:e,analyticsStore:l}},components:{FailedAssessmentsHorizontalBarChart:R,StudentFailedAssessmentsByRootSubjectHorizontalBarChart:I,DownloadCSVBtn:M},data(){return{studentId:this.$route.params.studentId,studentName:null}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const n=this.usersStore.users.find(e=>e.id===this.studentId);n&&(this.studentName=n.username),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),await this.analyticsStore.getStudentFailedAssessmentsBySubject(this.studentId),this.isLoaded=!0},methods:{}},D={class:"container-fluid chart-page"},N={class:"d-flex justify-content-between w-100 ps-3 pe-4 pt-2"},V={class:"secondary-heading h4"},L={class:"row mb-5 p-3"},$={id:"fails-by-subject-chart-container",class:"chart-card"},q={key:1},E={class:"row position-relative overflow-auto p-3"},O={id:"fails-by-skill-chart-container",class:"chart-card"},U={key:1};function W(n,e,l,o,c,d){const u=h("StudentFailedAssessmentsByRootSubjectHorizontalBarChart"),a=h("DownloadCSVBtn"),r=h("FailedAssessmentsHorizontalBarChart");return i(),p("div",D,[s("span",N,[e[0]||(e[0]=s("h1",{class:"heading h4"},"Multiple fails",-1)),s("h2",V,S(c.studentName),1)]),s("div",L,[e[1]||(e[1]=s("h3",{class:"secondary-heading h5"},"By subject",-1)),s("div",$,[o.analyticsStore.studentRootSubjectsFailedAssessments.length>0?(i(),f(u,{key:0,data:o.analyticsStore.studentRootSubjectsFailedAssessments},null,8,["data"])):(i(),p("p",q," This student has not failed any assessments more than once yet. "))])]),s("div",E,[e[2]||(e[2]=s("h3",{class:"secondary-heading h5"},"By skill",-1)),s("div",O,[b(a,{data:o.teacherAnalyticsStore.studentMultipleFails,fileName:`Assessment Status Report - ${c.studentName}`,toolTip:"Download failed assessments data as CSV",class:"position-absolute download-btn"},null,8,["data","fileName"]),o.teacherAnalyticsStore.studentMultipleFails.length>0?(i(),f(r,{key:0,data:o.teacherAnalyticsStore.studentMultipleFails,colour:"darkred"},null,8,["data"])):(i(),p("p",U," This student has not failed any assessments more than once yet. "))])])])}const at=y(T,[["render",W],["__scopeId","data-v-ea669baf"]]);export{at as default};
