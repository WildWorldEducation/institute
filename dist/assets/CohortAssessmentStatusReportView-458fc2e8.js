import{u as b}from"./CohortsStore-4445e7c2.js";import{_,o as m,c as S,f as B,r as p,a as i,t as H,g as A,k as y,b as w}from"./main-4c3aab74.js";import"./transform-4d0f7c8f.js";import{l as k,a as x,b as C}from"./linear-d9b6cbf2.js";import{m as D}from"./continuous-93813e6c.js";import{b as Q}from"./band-2263c9e7.js";import{s as $}from"./sort-fcaf8f38.js";import{s as f}from"./string-c67ea49d.js";import{F as q}from"./FailedAssessmentsHorizontalBarChart-c27a1b8b.js";import{D as v}from"./downloadCSVBtn-1fd62d2f.js";const j={name:"CohortPassedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){f("#cohort-passed-assessments-chart-container");const t=25,e=0,r=0,h=10,a=200,c=1e3,d=Math.ceil((this.data.length+.1)*t)+e+h,n=k().domain([0,D(this.data,s=>s.quantity)]).range([a,c-r]),o=Q().domain($(this.data,s=>-s.quantity).map(s=>s.name)).rangeRound([e,d-h]).padding(.1),u=n.tickFormat(20),l=f("#cohort-passed-assessments-chart-container").append("svg").attr("width",c).attr("height",d).attr("viewBox",[0,0,c,d]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");l.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",n(0)).attr("y",s=>o(s.name)).attr("width",s=>n(s.quantity)-n(0)).attr("height",o.bandwidth()),l.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",s=>n(s.quantity)).attr("y",s=>o(s.name)+o.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(s=>u(s.quantity)).call(s=>s.filter(g=>n(g.quantity)-n(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),l.append("g").attr("transform",`translate(0,${e})`).call(x(n).ticks(0)).call(s=>s.select(".domain").remove()),l.append("g").attr("transform",`translate(${a},0)`).call(C(o).tickSizeOuter(0))},computed:{}},N={id:"cohort-passed-assessments-chart-container"};function T(t,e,r,h,a,c){return m(),S("div",N)}const z=_(j,[["render",T]]),E={name:"CohortAttemptedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){f("#cohort-attempted-assessments-chart-container");const t=25,e=0,r=0,h=10,a=200,c=1e3,d=Math.ceil((this.data.length+.1)*t)+e+h,n=k().domain([0,D(this.data,s=>s.quantity)]).range([a,c-r]),o=Q().domain($(this.data,s=>-s.quantity).map(s=>s.name)).rangeRound([e,d-h]).padding(.1),u=n.tickFormat(20),l=f("#cohort-attempted-assessments-chart-container").append("svg").attr("width",c).attr("height",d).attr("viewBox",[0,0,c,d]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");l.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",n(0)).attr("y",s=>o(s.name)).attr("width",s=>n(s.quantity)-n(0)).attr("height",o.bandwidth()),l.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",s=>n(s.quantity)).attr("y",s=>o(s.name)+o.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(s=>u(s.quantity)).call(s=>s.filter(g=>n(g.quantity)-n(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),l.append("g").attr("transform",`translate(0,${e})`).call(x(n).ticks(0)).call(s=>s.select(".domain").remove()),l.append("g").attr("transform",`translate(${a},0)`).call(C(o).tickSizeOuter(0))},computed:{}},F={id:"cohort-attempted-assessments-chart-container"};function I(t,e,r,h,a,c){return m(),S("div",F)}const P=_(E,[["render",I]]),V={setup(){const t=b(),e=B();return{cohortsStore:t,userDetailsStore:e}},components:{CohortPassedAssessmentsHorizontalBarChart:z,CohortAttemptedAssessmentsHorizontalChart:P,FailedAssessmentsHorizontalBarChart:q,DownloadCSVBtn:v},data(){return{cohortId:this.$route.params.cohortId,cohortName:"",masteredSkillQuantities:[],failedAssessmentQuantities:[],attemptedAssessmentQuantities:[],masteredSkillQuantitiesDownloadData:[],attemptedAssessmentQuantitiesDownloadData:[],failedAssessmentQuantitiesDownloadData:[]}},async created(){if(this.cohortId!="all-students"){this.getCohortMasteredAssessments(),this.getCohortAttemptedAssessments(),this.getCohortFailedAssessments(),this.cohortsStore.cohorts.length<1&&await this.cohortsStore.getCohorts(this.userDetailsStore.userId);const t=this.cohortsStore.cohorts.find(e=>e.id==this.cohortId);t&&(this.cohortName=t.name)}else this.getAllStudentsMasteredAssessments(),this.getAllStudentsAttemptedAssessments(),this.getAllStudentsFailedAssessments()},methods:{async getCohortMasteredAssessments(){try{const t=await fetch(`/student-analytics/mastered-skills/cohort/${this.cohortId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();this.masteredSkillQuantities=Array.isArray(e)?e:[],this.masteredSkillQuantitiesDownloadData=e.map(r=>({student:r.name,quantity:r.quantity}))}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.masteredSkillQuantities=[]}},async getAllStudentsMasteredAssessments(){try{const t=await fetch(`/student-analytics/mastered-skills/all-students/${this.userDetailsStore.userId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();this.masteredSkillQuantities=Array.isArray(e)?e:[],this.masteredSkillQuantitiesDownloadData=e.map(r=>({student:r.name,quantity:r.quantity}))}catch(t){console.error("Error fetching all students mastered assessments:",t),this.masteredSkillQuantities=[]}},async getCohortAttemptedAssessments(){try{const t=await fetch(`/student-analytics/attempted-assessments/cohort/${this.cohortId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();this.attemptedAssessmentQuantities=Array.isArray(e)?e:[],this.attemptedAssessmentQuantitiesDownloadData=e.map(r=>({student:r.name,quantity:r.quantity}))}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.attemptedAssessmentQuantities=[]}},async getAllStudentsAttemptedAssessments(){try{const t=await fetch(`/student-analytics/attempted-assessments/all-students/${this.userDetailsStore.userId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();this.attemptedAssessmentQuantities=Array.isArray(e)?e:[]}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.attemptedAssessmentQuantities=[]}},async getCohortFailedAssessments(){try{const t=await fetch(`/student-analytics/failed-assessments/cohort/${this.cohortId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();this.failedAssessmentQuantities=Array.isArray(e)?e:[]}catch(t){console.error("Error fetching cohort failed assessments:",t),this.failedAssessmentQuantities=[]}},async getAllStudentsFailedAssessments(){try{const t=await fetch(`/student-analytics/failed-assessments/all-students/${this.userDetailsStore.userId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();this.failedAssessmentQuantities=Array.isArray(e)?e:[]}catch(t){console.error("Error fetching all students failed assessments:",t),this.failedAssessmentQuantities=[]}},assessmentDate(t){return new Date(t).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}}},M={class:"container"},R={class:"d-flex justify-content-between w-100"},L=i("h1",{class:"heading"},"Assessment Status Report",-1),O={class:"secondary-heading h3"},U={class:"mb-4"},G={class:"secondary-heading d-flex justify-content-between mt-5 mb-2"},J=i("span",null,"Passed",-1),K={class:"mb-4"},W={class:"secondary-heading d-flex justify-content-between"},X=i("span",null,"Attempted",-1),Y={class:"mb-4"},Z={class:"secondary-heading d-flex justify-content-between"},tt=i("span",null,"Failed multiple times",-1);function st(t,e,r,h,a,c){const d=p("DownloadCSVBtn"),n=p("CohortPassedAssessmentsHorizontalBarChart"),o=p("CohortAttemptedAssessmentsHorizontalChart"),u=p("FailedAssessmentsHorizontalBarChart");return m(),S("div",M,[i("span",R,[L,i("h2",O,H(a.cohortName),1)]),i("div",U,[i("h4",G,[J,A(d,{data:a.masteredSkillQuantitiesDownloadData,fileName:`${a.cohortName}-passed-assessments.csv`},null,8,["data","fileName"])]),a.masteredSkillQuantities.length>0?(m(),y(n,{key:0,data:a.masteredSkillQuantities,colour:"darkgreen",class:"mb-4"},null,8,["data"])):w("",!0)]),i("div",K,[i("h4",W,[X,A(d,{data:a.attemptedAssessmentQuantitiesDownloadData,fileName:`${a.cohortName}-attempted-assessments.csv`},null,8,["data","fileName"])]),a.attemptedAssessmentQuantities.length>0?(m(),y(o,{key:0,data:a.attemptedAssessmentQuantities,colour:"darkblue",class:"mb-4"},null,8,["data"])):w("",!0)]),i("div",Y,[i("h4",Z,[tt,A(d,{data:a.failedAssessmentQuantities,fileName:`${a.cohortName}-failed-assessments.csv`},null,8,["data","fileName"])]),a.failedAssessmentQuantities.length>0?(m(),y(u,{key:0,data:a.failedAssessmentQuantities,colour:"darkred"},null,8,["data"])):w("",!0)])])}const mt=_(V,[["render",st]]);export{mt as default};
