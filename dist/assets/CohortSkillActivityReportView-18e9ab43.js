import{u as d}from"./CohortsStore-7385c598.js";import{_ as u,f as m,r as n,o as e,c as r,a as i,t as p,k,b as v,g as y}from"./main-e10ce0af.js";import{C as _}from"./CohortSkillActivityChart-e8aa6a52.js";import{D as S}from"./downloadCSVBtn-b6253f61.js";import"./transform-4d0f7c8f.js";import"./string-c67ea49d.js";import"./continuous-e5db47ab.js";import"./linear-841004c4.js";const f={setup(){const t=d(),o=m();return{cohortsStore:t,userDetailsStore:o}},data(){return{cohortId:this.$route.params.cohortId,cohortName:"",visitedSkills:[],skillActivities:[],skillActivitiesDownloadData:[]}},components:{CohortSkillActivityChart:_,DownloadCSVBtn:S},async created(){this.cohortsStore.cohorts.length<1&&await this.cohortsStore.getCohorts(this.userDetailsStore.userId);const t=this.cohortsStore.cohorts.find(o=>o.id==this.cohortId);t?(this.cohortName=t.name,await this.getCohortSkillActivityReport()):this.cohortId==="all-students"?(this.cohortName="All Students",await this.getAllStudentsSkillActivityReport()):console.error("Cohort not found for ID:",this.cohortId),this.skillActivities=this.skillActivities.map(o=>({...o,quantity:this.millisecondsToHours(o.quantity,2)}))},mounted(){},methods:{async getCohortSkillActivityReport(){try{const t=await fetch(`/student-analytics/cohort-skill-activity-report/${this.cohortId}`);if(!t.ok)throw new Error("Network response was not ok");this.skillActivities=await t.json(),this.skillActivitiesDownloadData=this.skillActivities.map(o=>({skill:o.name,minutesSpent:this.millisecondsToHours(o.quantity,2)}))}catch(t){console.error("Error fetching skill activity report:",t)}},async getAllStudentsSkillActivityReport(){try{const t=await fetch(`/student-analytics/all-student-cohort-activity/instructor/${this.userDetailsStore.userId}`);if(!t.ok)throw new Error("Network response was not ok");this.skillActivities=await t.json(),this.skillActivitiesDownloadData=this.skillActivities.map(o=>({skill:o.name,minutesSpent:this.millisecondsToHours(o.quantity,2)}))}catch(t){console.error("Error fetching skill activity report for all students:",t)}},visitedDate(t){return new Date(t).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},millisecondsToHours(t,o){return(t/36e5).toFixed(o)}}},A={class:"container"},w={class:"d-flex justify-content-between w-100"},D=i("h1",{class:"heading"},"Skill Activity Report",-1),g={class:"d-flex align-items-center"},C={class:"secondary-heading h3 mt-1"},N={key:0,class:"mb-4"},I={key:1},B=i("p",null,"No skills visited by this cohort.",-1),V=[B];function j(t,o,c,l,s,x){const a=n("DownloadCSVBtn"),h=n("CohortSkillActivityChart");return e(),r("div",A,[i("span",w,[D,i("div",g,[i("h2",C,p(s.cohortName),1),this.skillActivities.length>0?(e(),k(a,{key:0,data:s.skillActivitiesDownloadData,fileName:`${s.cohortName}-skill-activity.csv`},null,8,["data","fileName"])):v("",!0)])]),this.skillActivities.length>0?(e(),r("div",N,[y(h,{data:s.skillActivities,colour:"#4CAF50"},null,8,["data"])])):(e(),r("div",I,V))])}const P=u(f,[["render",j]]);export{P as default};
