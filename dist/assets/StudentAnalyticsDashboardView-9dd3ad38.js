import{u as T}from"./AnalyticsStore-bbc48615.js";import{u as B}from"./TeacherAnalyticsStore-5db01232.js";import{_ as b,o as i,c as m,f as M,r as v,a as s,g as y,l as S,s as f,b as P,k as C,F as q,z as H,t as L,p as R,d as j}from"./main-85e56c1f.js";import{c as N,S as V}from"./StudentProgressChart-0e62a4f9.js";import"./transform-af9a74a2.js";import{u as F,l as z}from"./line-85f04100.js";import{e as E}from"./extent-4cf1c809.js";import{l as A,a as O,b as $,c as Y}from"./linear-5b188edc.js";import{m as I,o as Q,b as W}from"./continuous-7328829e.js";import{s as w}from"./string-dd82ab4a.js";import{s as U}from"./sort-ed61f96d.js";import"./colors-98f238a0.js";import"./time-0457d93b.js";import"./point-ea70dc51.js";const G={name:"SchoolTimeChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(t){if(t.student.length==0)this.axisData=t.tenant;else if(t.tenant.length==0)this.axisData=t.student;else{const a=t.student.reduce((x,k)=>Math.max(x,k.quantity),-1/0),D=t.tenant.reduce((x,k)=>Math.max(x,k.quantity),-1/0);a>=D?this.axisData=t.student:this.axisData=t.tenant}const p=Object.entries(t).map(([a,D])=>({name:a,values:D})),r=document.getElementById("time-chart-container").clientWidth,n=document.getElementById("time-chart-container").clientHeight,c=5,_=0,l=25,g=25,o=F(E(this.axisData,a=>a.date),[g,r-_]),d=A([0,I(this.axisData,a=>a.formattedQuantity)],[n-l,c]);Q().domain(p.map(a=>a.name)).range(N);const u=z().x(a=>o(a.date)).y(a=>d(a.formattedQuantity)),e=w("#time-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(r,n),+Math.min(r,n)]).attr("preserveAspectRatio","xMinYMin");e.append("g").attr("transform",`translate(0,${n-l})`).call(O(o).ticks(7).tickSizeOuter(0)),e.append("g").attr("transform",`translate(${g},0)`).call($(d).ticks(n/40)).call(a=>a.select(".domain").remove()).call(a=>a.selectAll(".tick line").clone().attr("x2",r-g-_).attr("stroke-opacity",.2)).call(a=>a.append("text").attr("x",-g).attr("y",10).attr("fill","currentColor").attr("text-anchor","start")),e.selectAll(".line").data(p).join("path").attr("fill","none").attr("stroke",a=>a.name=="student"?"RoyalBlue":"#ff7f0e").attr("stroke-width",a=>a.name=="student"?3:2).attr("d",a=>u(a.values))}}};function J(t,p,r,n,c,_){return null}const K=b(G,[["render",J]]),X={name:"StudentComparisonChart",props:["data","colour"],data(){return{}},mounted(){},methods:{createChart(t){w("#student-comparison-container");const p=25,r=0,n=20,c=10,_=200,l=700,g=Math.ceil((t.length+.1)*p)+r+c,o=A().domain([0,I(t,e=>e.quantity)]).range([_,l-n]),d=W().domain(U(t,e=>-e.quantity).map(e=>e.name)).rangeRound([r,g-c]).padding(.1);o.tickFormat(20);const u=w("#student-comparison-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,l,g]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");u.append("g").selectAll().data(t).join("rect").attr("x",o(0)).attr("y",e=>d(e.name)).attr("width",e=>o(e.quantity)-o(0)).attr("height",d.bandwidth()).attr("fill",function(e){return e.name=="Language"?"DarkMagenta":e.name=="Mathematics"?"blue":e.name=="Science & Invention"?"purple":e.name=="Computer Science"?"deeppink":e.name=="Dangerous Ideas"?"brown":e.name=="History"?"cyan":e.name=="Life"?"magenta":"#ff7f0e"}),u.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(t).join("text").attr("x",e=>o(e.quantity)).attr("y",e=>d(e.name)+d.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>e.quantity).call(e=>e.filter(a=>o(a.quantity)-o(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),u.append("g").attr("transform",`translate(0,${r})`).call(Y(o).ticks(0)).call(e=>e.select(".domain").remove()),u.append("g").attr("transform",`translate(${_},0)`).attr("style","font-size: 16px").call($(d).tickSizeOuter(0))}}},Z={id:"student-comparison-container"};function tt(t,p,r,n,c,_){return i(),m("div",Z)}const et=b(X,[["render",tt]]);const st={name:"Student-Dashboard",setup(){const t=M(),p=T(),r=B();return{userDetailsStore:t,analyticsStore:p,teacherAnalyticsStore:r}},data(){return{showSidebar:!0,screenWidth:screen.width,isStudentData:!0,isSchoolData:!0,isLanguageData:!1,isMathData:!1,isHistoryData:!1,isLifeData:!1,isCSData:!1,isSAndIData:!1,isDIData:!1,progressData:{student:[],average:[]},isAboveTheCurve:!1}},components:{StudentProgressChart:V,StudentComparisonChart:et,StudentTimeChart:K},async created(){await this.analyticsStore.getStudentProgress(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userDetailsStore.userId),await this.analyticsStore.getStudentTime(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.teacherAnalyticsStore.getStudentMultipleFails(this.userDetailsStore.userId),(this.analyticsStore.progress.student.length>0||this.analyticsStore.progress.tenant.length>0)&&this.analyticsStore.progress.student[this.analyticsStore.progress.student.length-1].quantity>this.analyticsStore.progress.tenant[this.analyticsStore.progress.tenant.length-1].quantity&&(this.isAboveTheCurve=!0),await this.HandleProgressData(),await this.HandleComparisonData(),await this.HandleTimeData()},methods:{async HandleProgressData(){if(this.isStudentData){this.progressData.student=[];for(let t=0;t<this.analyticsStore.progress.student.length;t++)this.progressData.student.push(this.analyticsStore.progress.student[t])}else this.progressData.student=[];if(this.isSchoolData){this.progressData.average=[];for(let t=0;t<this.analyticsStore.progress.tenant.length;t++)this.progressData.average.push(this.analyticsStore.progress.tenant[t])}else this.progressData.average=[];this.$nextTick(()=>{this.$refs.progressChart&&this.$refs.progressChart.createChart(this.progressData)})},async HandleComparisonData(){this.$nextTick(()=>{this.$refs.comparisonChart&&this.$refs.comparisonChart.createChart(this.analyticsStore.studentRootSubjectsPassedAssessments)})},async HandleTimeData(){this.$nextTick(()=>{this.$refs.timeChart&&this.$refs.timeChart.createChart(this.analyticsStore.time)})},toggleSidebar(){this.showSidebar=!this.showSidebar}}},h=t=>(R("data-v-61890237"),t=t(),j(),t),at={class:"dashboard"},nt={class:"main"},rt={class:"content container-fluid"},ot={class:"dash-row row"},it={class:"col-md-6 h-100 position-relative"},ct=h(()=>s("h2",{class:"heading h5"},"Progress over time",-1)),lt={key:0,class:""},ht=h(()=>s("span",{style:{color:"green"}},"You",-1)),dt=h(()=>s("span",{style:{color:"#ff7f0e"}},"school average",-1)),ut={id:"progress-chart-container"},mt={key:1},pt={class:"col-md-6"},gt={id:"comparison-chart-container"},_t=h(()=>s("h2",{class:"heading h5 mt-1"},"Progress comparison",-1)),ft={key:1},yt={class:"dash-row row"},St={class:"col-md h-100 position-relative"},vt=h(()=>s("h2",{class:"heading h5"},"Study time",-1)),Dt=h(()=>s("figcaption",{class:""},[s("span",{style:{color:"blue"}},"You"),f(" vs "),s("span",{style:{color:"#ff7f0e"}},"school average")],-1)),xt={id:"time-chart-container"},kt={key:1},Ct={class:"col-md position-relative"},wt={class:"row"},bt={class:"col-md"},At=h(()=>s("h2",{class:"h5 heading"}," Consider asking for help ",-1)),$t={key:0},It={key:1},Tt={class:"col-md"},Bt=h(()=>s("h2",{class:"h5 heading"},"Stats",-1)),Mt=h(()=>s("li",null,[s("strong",null,"Skills passed:"),f(" 25")],-1)),Pt=h(()=>s("li",null,[s("strong",null,"Total time spent:"),f(" 5:00 ")],-1)),qt=h(()=>s("strong",null,"AI usage:",-1));function Ht(t,p,r,n,c,_){const l=v("RouterLink"),g=v("StudentProgressChart"),o=v("StudentComparisonChart"),d=v("StudentTimeChart");return i(),m("div",at,[s("div",nt,[s("div",rt,[s("div",ot,[s("div",it,[y(l,{to:"/my-progress/skills",class:"",target:"_blank"},{default:S(()=>[ct]),_:1}),c.progressData.student.length>0||c.progressData.average.length>0?(i(),m("figcaption",lt,[ht,f(" vs "),dt])):P("",!0),s("div",ut,[c.progressData.student.length>0||c.progressData.average.length>0?(i(),C(g,{key:0,ref:"progressChart"},null,512)):(i(),m("p",mt,"No progress yet"))])]),s("div",pt,[s("div",gt,[_t,n.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(i(),C(o,{key:0,ref:"comparisonChart",data:n.analyticsStore.studentRootSubjectsPassedAssessments,colour:"#5f31dd"},null,8,["data"])):(i(),m("p",ft,"No progress yet"))])])]),s("div",yt,[s("div",St,[y(l,{to:"/my-progress/time",target:"_blank"},{default:S(()=>[vt]),_:1}),Dt,s("div",xt,[n.analyticsStore.time.student.length>0||n.analyticsStore.time.tenant.length>0?(i(),C(d,{key:0,ref:"timeChart"},null,512)):(i(),m("p",kt,"No data available"))])]),s("div",Ct,[s("div",wt,[s("div",bt,[y(l,{to:"/my-progress/super-challenging",class:"col",target:"_blank"},{default:S(()=>[At]),_:1}),n.teacherAnalyticsStore.studentMultipleFails.length>0?(i(),m("ul",$t,[(i(!0),m(q,null,H(n.teacherAnalyticsStore.studentMultipleFails,u=>(i(),m("li",{class:"failed-skills",key:u.id},[y(l,{to:"/skills/"+u.url,target:"_blank"},{default:S(()=>[f(L(u.name),1)]),_:2},1032,["to"])]))),128))])):(i(),m("p",It,"Nothing to worry about yet"))]),s("div",Tt,[Bt,s("ul",null,[Mt,Pt,s("li",null,[y(l,{to:"/my-progress/tokens",target:"_blank"},{default:S(()=>[qt,f(" 10,000")]),_:1})])])])])])])])])])}const Jt=b(st,[["render",Ht],["__scopeId","data-v-61890237"]]);export{Jt as default};
