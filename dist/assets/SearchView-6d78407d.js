import{_ as y,r as m,o as r,c as a,a as s,F as p,x as f,k,l as T,j as g,t as w,p as _,e as S,h as v,w as x,A as I,f as b,b as u}from"./main-3fa37760.js";import{T as C}from"./tutorLoadingSymbol-5feae80b.js";import{_ as D}from"./app-logo-6a421005.js";const R={data(){return{visitedSkills:[],noSkills:!0}},props:["userId"],async created(){const t=await fetch("/user-skills/last-visited-skills/");this.visitedSkills=await t.json(),this.visitedSkills.length>0&&(this.noSkills=!1)},computed:{}},q={id:"skill-list",class:"d-flex flex-wrap"},L=["src"];function M(t,e,c,i,l,n){const h=m("router-link");return r(),a(p,null,[e[0]||(e[0]=s("h2",{class:"secondary-heading h5"},"Last Visited Skills",-1)),s("div",q,[(r(!0),a(p,null,f(l.visitedSkills,d=>(r(),k(h,{class:_([{"grade-school":d.level=="grade_school","middle-school":d.level=="middle_school","high-school":d.level=="high_school",college:d.level=="college",phd:d.level=="phd"},"skill-link btn m-2 d-flex"]),to:`/skills/${encodeURIComponent(d.url)}`,target:"_blank"},{default:T(()=>[s("img",{class:"icons",src:d.icon},null,8,L),g("  "+w(d.name),1)]),_:2},1032,["class","to"]))),256))])],64)}const B=y(R,[["render",M],["__scopeId","data-v-3d07eb00"]]);const O={setup(){const t=S(),e=v();return t.getUserDetails(),{userDetailsStore:t,sessionDetailsStore:e}},data(){return{query:"",recommendedSkillsOrderedByRelevance:[],showRecommendedSkills:!1,waitForAIresponse:!1,isMobileCheck:window.innerWidth,debounceTimer:null,isTyping:!1}},components:{TutorLoadingSymbol:C},mounted(){var t=document.getElementById("searchBar");t.addEventListener("keypress",e=>{if(e.key==="Enter"){if(this.query===""||this.query===null)return;e.preventDefault(),clearTimeout(this.debounceTimer),this.isTyping=!1,this.sessionDetailsStore.isLoggedIn?this.getRecommendedSkills():this.getRecommendedSkillsGuestMode()}}),t.addEventListener("input",()=>{this.isTyping=!0,clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.query&&this.query.length>=3&&(this.isTyping=!1,this.sessionDetailsStore.isLoggedIn?this.getRecommendedSkills():this.getRecommendedSkillsGuestMode())},700)})},methods:{async getRecommendedSkills(){if(this.query===""||this.query===null||this.query.length<3)return;this.waitForAIresponse=!0,this.showRecommendedSkills=!1;let t="/skills/get-recommended-skills";const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,cohortId:this.userDetailsStore.cohortId,query:this.query})};try{const i=await(await fetch(t,e)).json();if(this.waitForAIresponse=!1,i.length===0){alert("Can't find any result that matches your need"),this.showRecommendedSkills=!1;return}this.recommendedSkillsOrderedByRelevance=i,this.showRecommendedSkills=!0}catch(c){console.error("Error fetching recommended skills:",c),this.waitForAIresponse=!1,alert("There was an error processing your request. Please try again.")}},async getRecommendedSkillsGuestMode(){if(this.query===""||this.query===null||this.query.length<3)return;this.waitForAIresponse=!0,this.showRecommendedSkills=!1;let t="/skills/guest-user/get-recommended-skills";const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,cohortId:this.userDetailsStore.cohortId,query:this.query})};try{const i=await(await fetch(t,e)).json();if(this.waitForAIresponse=!1,!i||i.length===0){this.showRecommendedSkills=!1;return}this.recommendedSkillsOrderedByRelevance=i,this.showRecommendedSkills=!0}catch(c){console.error("Error fetching recommended skills:",c),this.waitForAIresponse=!1,alert("There was an error processing your request. Please try again.")}},async createLearningTrack(){let t="/learning-tracks/"+this.userDetailsStore.userId+"/create",e=this.recommendedSkillsOrderedByRelevance.map(i=>i.id);const c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.query,skills:e})};await fetch(t,c),alert("Learning track created. You can view it on the 'Learning Tracks' tab.")}},watch:{recommendedSkillsOrderedByRelevance:{handler(t){t.length===0&&(this.showRecommendedSkills=!1)},deep:!0}}},z={class:"search-bar"},A={class:"d-flex align-items-center p-1"},j=["placeholder"],F=["disabled"],V=["disabled"],W={key:0,class:"ai-tutor-processing mt-1"},P={key:1},E={id:"skill-list",class:"d-flex flex-wrap"},N=["src"];function G(t,e,c,i,l,n){const h=m("TutorLoadingSymbol"),d=m("router-link");return r(),a(p,null,[s("div",z,[s("div",A,[x(s("input",{id:"searchBar",type:"text",class:"recommended-skills-input",placeholder:l.isMobileCheck<576?"Search...":"Which skill or profession do you want to learn about?","onUpdate:modelValue":e[0]||(e[0]=o=>l.query=o)},null,8,j),[[I,l.query]]),i.sessionDetailsStore.isLoggedIn?(r(),a("button",{key:0,id:"searchButton",onClick:e[1]||(e[1]=(...o)=>n.getRecommendedSkills&&n.getRecommendedSkills(...o)),class:"btn primary-btn rounded p-2",disabled:l.waitForAIresponse||l.isTyping||l.query.length<3},e[3]||(e[3]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",class:"tertiary-icon"},[s("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})],-1)]),8,F)):(r(),a("button",{key:1,id:"searchButton",onClick:e[2]||(e[2]=(...o)=>n.getRecommendedSkillsGuestMode&&n.getRecommendedSkillsGuestMode(...o)),class:"btn primary-btn rounded p-2",disabled:l.waitForAIresponse||l.isTyping||l.query.length<3},e[4]||(e[4]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",class:"tertiary-icon"},[s("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})],-1)]),8,V))])]),l.waitForAIresponse?(r(),a("div",W,[e[5]||(e[5]=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"18",height:"18",fill:"black"},[s("path",{d:"M320 0c17.7 0 32 14.3 32 32l0 64 120 0c39.8 0 72 32.2 72 72l0 272c0 39.8-32.2 72-72 72l-304 0c-39.8 0-72-32.2-72-72l0-272c0-39.8 32.2-72 72-72l120 0 0-64c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224l16 0 0 192-16 0c-26.5 0-48-21.5-48-48l0-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48l0 96c0 26.5-21.5 48-48 48l-16 0 0-192 16 0z"})],-1)),e[6]||(e[6]=g(" Thinking ",-1)),b(h)])):u("",!0),l.showRecommendedSkills?(r(),a("div",P,[e[7]||(e[7]=s("h2",{class:"tertiary-heading h5 mt-3"},"Recommended Skills",-1)),s("div",E,[(r(!0),a(p,null,f(l.recommendedSkillsOrderedByRelevance,o=>(r(),k(d,{key:o.id,class:_([{"grade-school":o.level=="grade_school","middle-school":o.level=="middle_school","high-school":o.level=="high_school",college:o.level=="college",phd:o.level=="phd"},"skill-link btn m-2 d-flex"]),to:`/skills/${encodeURIComponent(o.url)}`,target:"_blank"},{default:T(()=>[o.icon_url?(r(),a("img",{key:0,src:o.icon_url,class:"icons",alt:"",loading:"lazy"},null,8,N)):u("",!0),g("  "+w(o.name),1)]),_:2},1032,["class","to"]))),128))])])):u("",!0)],64)}const U=y(O,[["render",G],["__scopeId","data-v-600ff40e"]]);const J={setup(){const t=S(),e=v();return t.getUserDetails(),{userDetailsStore:t,sessionDetailsStore:e}},data(){return{showWelcomeModal:!1,isTutorialComplete:!1,showTutorialTip1:!1,showTutorialTip2:!1,showTutorialTip3:!1}},components:{LastVisitedSkills:B,RecommendedSkillsGenerator:U},computed:{name(){return this.userDetailsStore.firstName+" "+this.userDetailsStore.lastName}},async created(){document.querySelector('meta[name="description"]').setAttribute("content","Search for a skill or profession you want to learn about."),window.innerWidth<576&&this.sessionDetailsStore.isLoggedIn&&this.checkIfTutorialComplete()},methods:{async checkIfTutorialComplete(){if(window.innerWidth<576)try{const e=await(await fetch("/users/check-tutorial-progress/hub/"+this.userDetailsStore.userId)).json();e===0&&this.userDetailsStore.role==="student"?this.showWelcomeModal=!0:e===1&&(this.isTutorialComplete=!0)}catch(t){console.error("Error checking tutorial progress:",t)}else this.isTutorialComplete=!0},progressTutorial(t){t==1?(this.showTutorialTip1=!1,this.showTutorialTip2=!0):t==2?(this.showTutorialTip2=!1,this.showTutorialTip3=!0):t==3&&(this.showTutorialTip3=!1,this.markTutorialComplete())},markTutorialComplete(){let t="/users/mark-tutorial-complete/hub/"+this.userDetailsStore.userId;fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"}})},async startTutorial(){this.showTutorialTip1=!0,this.isTutorialComplete=!1,this.showWelcomeModal=!1,await this.resetTutorialProgress()},async resetTutorialProgress(){try{await fetch(`/users/reset-all-tutorials/${this.userDetailsStore.userId}`,{method:"PUT",headers:{"Content-Type":"application/json"}})}catch(t){console.error("Error resetting tutorials:",t)}},async closeTutorial(){this.showWelcomeModal=!1,await this.markAllTutorialsComplete()},restartTutorial(){this.startTutorial()},async markAllTutorialsComplete(){try{(await fetch(`/users/mark-all-tutorials-complete/${this.userDetailsStore.userId}`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok?this.isTutorialComplete=!0:console.error("Error marking tutorials as complete.")}catch(t){console.error("API request failed:",t)}},skipTutorial(){this.showTutorialTip1=!1,this.showTutorialTip2=!1,this.showTutorialTip3=!1,this.isTutorialComplete=!0,this.markTutorialComplete()}}},Y={key:0,class:"container-fluid d-flex info-btn"},H={class:"container"},K={class:"row mb-4"},Q={class:"col"},X={key:0,class:"tool-tip-base",style:{maxWidth:"300px"}},Z={class:"explain-tool-tip triangle-top-left"},$={class:"tool-tip-text"},ee={class:"d-flex justify-content-between"},se={key:0,class:"row"},te={class:"col mb-2"},oe={class:"h-100"},ie={key:0,class:"tool-tip-base mb-3"},le={class:"explain-tool-tip triangle-bottom-left"},re={class:"tool-tip-text"},ne={key:1,class:"modal"},ae={class:"modal-content"},de={class:"d-flex justify-content-between"},ue={key:2,class:"modal"},ce={key:0,class:"modal-content"},he={class:"d-flex justify-content-between"};function me(t,e,c,i,l,n){const h=m("RecommendedSkillsGenerator"),d=m("LastVisitedSkills");return r(),a(p,null,[i.sessionDetailsStore.isLoggedIn?(r(),a("div",Y,[s("button",{class:"btn",onClick:e[0]||(e[0]=(...o)=>n.restartTutorial&&n.restartTutorial(...o))},e[8]||(e[8]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[s("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)]))])):u("",!0),e[15]||(e[15]=s("div",{class:"text-center app-logo-wrapper"},[s("img",{class:"img-fluid",src:D,alt:"icon of a skill tree"})],-1)),s("div",H,[s("div",K,[s("div",Q,[b(h),l.showTutorialTip2&&i.userDetailsStore.role=="student"?(r(),a("div",X,[s("div",Z,[s("div",$,[e[9]||(e[9]=s("p",null," Type a career or skill here to get recommendations. ",-1)),s("div",ee,[s("button",{class:"btn primary-btn",onClick:e[1]||(e[1]=o=>n.progressTutorial(2))}," next "),s("button",{class:"btn red-btn",onClick:e[2]||(e[2]=(...o)=>n.skipTutorial&&n.skipTutorial(...o))}," exit tutorial ")])])])])):u("",!0)])]),i.sessionDetailsStore.isLoggedIn?(r(),a("div",se,[s("div",te,[s("div",oe,[l.showTutorialTip3&&i.userDetailsStore.role=="student"?(r(),a("div",ie,[s("div",le,[s("div",re,[e[10]||(e[10]=s("p",null," This section shows your the last 5 skill pages you visited. ",-1)),s("button",{class:"btn primary-btn",onClick:e[3]||(e[3]=o=>n.progressTutorial(3))}," close ")])])])):u("",!0),i.userDetailsStore.role=="student"?(r(),k(d,{key:1,userId:i.userDetailsStore.userId},null,8,["userId"])):u("",!0)])])])):u("",!0)]),l.showWelcomeModal?(r(),a("div",ne,[s("div",ae,[e[11]||(e[11]=s("h1",{class:"heading h3"},"Welcome to the Collins Institute",-1)),e[12]||(e[12]=s("p",null,"Would you like to go through the tutorial?",-1)),e[13]||(e[13]=s("p",null,' You can start or restart it anytime by clicking the "i" button on any page. ',-1)),s("div",de,[s("button",{class:"btn red-btn mx-0",onClick:e[4]||(e[4]=(...o)=>n.closeTutorial&&n.closeTutorial(...o))}," No "),s("button",{class:"btn primary-btn mx-0",onClick:e[5]||(e[5]=(...o)=>n.startTutorial&&n.startTutorial(...o))}," Yes ")])])])):u("",!0),i.userDetailsStore.role=="student"&&l.showTutorialTip1?(r(),a("div",ue,[l.showTutorialTip1&&i.userDetailsStore.role=="student"?(r(),a("div",ce,[s("div",null,[e[14]||(e[14]=s("p",null,"This is the search page.",-1)),s("div",he,[s("button",{class:"btn primary-btn",onClick:e[6]||(e[6]=o=>n.progressTutorial(1))}," next "),s("button",{class:"btn red-btn",onClick:e[7]||(e[7]=(...o)=>n.skipTutorial&&n.skipTutorial(...o))}," exit tutorial ")])])])):u("",!0)])):u("",!0)],64)}const ke=y(J,[["render",me],["__scopeId","data-v-c8ee5cdb"]]);export{ke as default};
