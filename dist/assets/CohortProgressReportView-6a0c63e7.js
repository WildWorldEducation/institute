import{u as l}from"./CohortsStore-8baa574f.js";import{_ as d,f as g,r as a,o as n,c,a as r,t as p,g as m,k as u}from"./main-2f162222.js";import{C as f}from"./CohortProgressLineChart-dc32e168.js";import{D as _}from"./downloadCSVBtn-027dc6c1.js";import"./transform-4d0f7c8f.js";import"./string-c67ea49d.js";import"./line-d122782f.js";import"./time-3c9385c3.js";import"./continuous-93813e6c.js";import"./point-ea70dc51.js";import"./linear-d9b6cbf2.js";const D={setup(){const o=l(),t=g();return{cohortsStore:o,userDetailsStore:t}},components:{CohortProgressLineChart:f,DownloadCSVBtn:_},data(){return{cohortId:this.$route.params.cohortId,cohortName:"",cohortProgress:[],cohortProgressDownloadData:[]}},async created(){this.cohortsStore.cohorts.length<1&&await this.cohortsStore.getCohorts(this.userDetailsStore.userId);const o=this.cohortsStore.cohorts.find(t=>t.id==this.cohortId);o&&(this.cohortName=o.name),this.cohortId!="all-students"?await this.getCohortProgress():await this.getAllStudentsProgress()},methods:{async getCohortProgress(){fetch(`/student-analytics/cohort-progress/${this.cohortId}`).then(o=>o.json()).then(o=>{for(let t=0;t<o.length;t++)o[t].date=new Date(o[t].date);o.sort((t,s)=>t.date-s.date),this.cohortProgress=o,this.cohortProgressDownloadData=o.map(t=>({date:t.date,skillsMastered:t.quantity}))}).catch(o=>{console.error("Error fetching student progress:",o)})},async getAllStudentsProgress(){fetch(`/student-analytics/all-students-progress/${this.userDetailsStore.userId}`).then(o=>o.json()).then(o=>{for(let t=0;t<o.length;t++)o[t].date=new Date(o[t].date);o.sort((t,s)=>t.date-s.date),this.cohortProgress=o,this.cohortProgressDownloadData=o.map(t=>({date:t.date,skillsMastered:t.quantity}))}).catch(o=>{console.error("Error fetching student progress:",o)})}}},P={class:"container"},w={class:"d-flex justify-content-between w-100"},C=r("h1",{class:"heading"},"Progress Report",-1),S={class:"d-flex align-items-center"},y={class:"secondary-heading h3 mt-1"},N={key:1};function k(o,t,s,B,e,I){const h=a("DownloadCSVBtn"),i=a("CohortProgressLineChart");return n(),c("div",P,[r("span",w,[C,r("div",S,[r("h2",y,p(e.cohortName),1),m(h,{data:e.cohortProgressDownloadData,fileName:`${e.cohortName?e.cohortName:"All Students"}-progress.csv`},null,8,["data","fileName"])])]),e.cohortProgress.length>0?(n(),u(i,{key:0,data:e.cohortProgress,colour:"#5f31dd"},null,8,["data"])):(n(),c("p",N,"There is no data to show yet."))])}const $=d(D,[["render",k]]);export{$ as default};
