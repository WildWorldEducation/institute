import{_,o as l,c as a,a as e,b as u,w as I,A as N,j as m,t as c,p as D,f as v,l as U,F as b,x as B,T as j,r as h,R as A,e as $,g as S,y as L,K as q,k as F}from"./main-ba22c42c.js";import{c as P,g as E,d as R}from"./index.es6-593402c1.js";import{d as w}from"./dayjs.min-d6bc37a0.js";import{H as G}from"./htmldiff.min-310ee87f.js";const O={props:["showConfirmModal","closeModal","openCommentModal"]},Z={key:0,class:"modal"},J={class:"modal-content asking-modal"},K={class:"d-flex justify-content-lg-between justify-content-md-end justify-content-between gap-2"};function Q(o,s,n,d,t,i){return n.showConfirmModal?(l(),a("div",Z,[e("div",J,[s[4]||(s[4]=e("div",{class:"d-flex gap-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"grey",width:"45",height:"45"},[e("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})]),e("p",null," Are you sure you want to revert the skill to this version? ")],-1)),e("div",K,[e("button",{type:"button",class:"btn red-btn",onClick:s[0]||(s[0]=(...r)=>n.closeModal&&n.closeModal(...r))},s[2]||(s[2]=[e("span",{class:"d-none d-md-block"}," No ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[e("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1)])),e("button",{type:"button",class:"btn green-btn",onClick:s[1]||(s[1]=(...r)=>n.openCommentModal&&n.openCommentModal(...r))},s[3]||(s[3]=[e("span",{class:"d-none d-md-block"}," Yes ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[e("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1)]))])])])):u("",!0)}const X=_(O,[["render",Q],["__scopeId","data-v-5acda9d2"]]);const ss={props:["showCommentModal","closeModal","revert"],data(){return{revertComment:""}}},es={key:0,id:"myModal",class:"modal"},is={class:"modal-content"},ts={class:"d-flex flex-column"},os={class:"d-flex justify-content-lg-between justify-content-md-end justify-content-between gap-2 mt-2"};function ns(o,s,n,d,t,i){return n.showCommentModal?(l(),a("div",es,[e("div",is,[e("div",ts,[s[3]||(s[3]=e("div",{class:"pb-3"},"Please add a comment to explain.",-1)),I(e("textarea",{class:"revert-comment",rows:"5",cols:"33",autofocus:"","onUpdate:modelValue":s[0]||(s[0]=r=>o.$parent.revertComment=r)},"                ",512),[[N,o.$parent.revertComment]])]),e("div",os,[e("button",{type:"button",class:"btn red-btn modal-btn",onClick:s[1]||(s[1]=(...r)=>n.closeModal&&n.closeModal(...r))},s[4]||(s[4]=[e("span",{class:"d-none d-md-block"}," Cancel ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[e("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1)])),e("button",{type:"button",class:"btn green-btn modal-btn",onClick:s[2]||(s[2]=r=>n.revert(t.revertComment))},s[5]||(s[5]=[e("span",{class:"d-none d-md-block"}," Submit ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[e("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1)]))])])])):u("",!0)}const ls=_(ss,[["render",ns],["__scopeId","data-v-60cb2a70"]]);var W={exports:{}};(function(o,s){(function(n,d){o.exports=d()})(P,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(d,t,i){var r=t.prototype,f=r.format;i.en.formats=n,r.format=function(p){p===void 0&&(p="YYYY-MM-DDTHH:mm:ssZ");var g=this.$locale().formats,y=function(C,x){return C.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(si,z,k){var V=k&&k.toUpperCase();return z||x[k]||n[k]||x[V].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ei,Y,T){return Y||T.slice(1)})})}(p,g===void 0?{}:g);return f.call(this,y)}}})})(W);var rs=W.exports;const M=E(rs);const as={data(){return{showDropDown:!1}},props:["skillRevisionHistory","currentShowingVersion","updateCompareWithRevision","compareWithRevision"],methods:{formatDate(o){return w.extend(M),w(o).format("lll")},formatDatePhone(o){return w.extend(M),w(o).format("LL")}},computed:{compareWithVersion(){return this.compareWithRevision?this.compareWithRevision:!1},skillRevisionHistoryMinusCurrentRevision(){let o=[];for(let s=0;s<this.skillRevisionHistory.length;s++)this.skillRevisionHistory[s].version_number!=this.currentShowingVersion&&o.push(this.skillRevisionHistory[s]);return o}}},ds={class:"position-relative mb-4"},cs={class:"d-flex"},ms={key:0},us={key:1},hs={class:"d-flex d-none d-md-block ms-1"},vs={class:"revision-strong-text"},ps={class:"revision-strong-text"},_s={class:"revision-strong-text"},fs={class:"d-md-none"},gs={class:"revision-strong-text"},ws={key:0,class:"history-versions-dropdown"},ks=["onClick"],ys={class:"d-none d-md-block"},Ds={class:"revision-strong-text"},Ms={class:"revision-strong-text"},Cs={class:"revision-strong-text"},xs={class:"d-md-none"},Rs={class:"revision-strong-text"},bs={class:"revision-strong-text"},Ss={key:0,class:"version-badge ms-2"};function Ls(o,s,n,d,t,i){return l(),a("div",ds,[e("div",{class:D(["d-flex flex-column compare-dropdown-div",[t.showDropDown?"button-focus":"button-unfocus"]])},[e("button",{onClick:s[0]||(s[0]=r=>t.showDropDown=!t.showDropDown),class:"dropdown-btn"},[e("div",cs,[s[6]||(s[6]=m(" Compare with:  ",-1)),i.compareWithVersion?(l(),a("div",us,[e("div",hs,[s[2]||(s[2]=m(" Version ",-1)),e("span",vs,c(i.compareWithVersion.version_number),1),s[3]||(s[3]=m(", edit date: ",-1)),e("span",ps,c(i.formatDate(i.compareWithVersion.edited_date)),1),s[4]||(s[4]=m(", by ",-1)),e("span",_s,c(i.compareWithVersion.user_name),1)]),e("div",fs,[s[5]||(s[5]=m(" Version: ",-1)),e("span",gs,c(i.compareWithVersion.version_number),1)])])):(l(),a("div",ms,"none"))]),(l(),a("svg",{class:D({"expand-arrow":t.showDropDown,"minimize-arrow":!t.showDropDown}),width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s[7]||(s[7]=[e("path",{d:"M14.2929 8.70711C14.9229 8.07714 14.4767 7 13.5858 7H6.41421C5.52331 7 5.07714 8.07714 5.70711 8.70711L9.29289 12.2929C9.68342 12.6834 10.3166 12.6834 10.7071 12.2929L14.2929 8.70711Z",fill:"#344054"},null,-1)]),2))]),v(j,{name:"dropdown"},{default:U(()=>[t.showDropDown?(l(),a("div",ws,[(l(!0),a(b,null,B(i.skillRevisionHistoryMinusCurrentRevision,r=>(l(),a("div",{class:"revision-row d-flex flex-column flex-lg-row align-items-lg-center align-items-start justify-content-start",onClick:f=>{n.updateCompareWithRevision(r),t.showDropDown=!1}},[e("div",ys,[s[8]||(s[8]=m(" Version: ",-1)),e("span",Ds,c(r.version_number),1),s[9]||(s[9]=m(", edit date: ",-1)),e("span",Ms,c(i.formatDate(r.edited_date)),1),s[10]||(s[10]=m(", by ",-1)),e("span",Cs,c(r.user_name),1)]),e("div",xs,[s[11]||(s[11]=m(" Version: ",-1)),e("span",Rs,c(r.version_number),1),s[12]||(s[12]=m(" , edit date: ",-1)),e("span",bs,c(i.formatDatePhone(r.edited_date)),1)]),r.version_number===n.currentShowingVersion?(l(),a("div",Ss,s[13]||(s[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"white",width:"20",height:"20",class:"hand-icon"},[e("path",{d:"M64 128l177.6 0c-1 5.2-1.6 10.5-1.6 16l0 16-32 0L64 160c-8.8 0-16-7.2-16-16s7.2-16 16-16zm224 16c0-17.7 14.3-32 32-32c0 0 0 0 0 0l24 0c66.3 0 120 53.7 120 120l0 48c0 52.5-33.7 97.1-80.7 113.4c.5-3.1 .7-6.2 .7-9.4c0-20-9.2-37.9-23.6-49.7c4.9-9 7.6-19.4 7.6-30.3c0-15.1-5.3-29-14-40c8.8-11 14-24.9 14-40l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-40 0-40zm32-80s0 0 0 0c-18 0-34.6 6-48 16L64 80C28.7 80 0 108.7 0 144s28.7 64 64 64l82 0c-1.3 5.1-2 10.5-2 16c0 25.3 14.7 47.2 36 57.6c-2.6 7-4 14.5-4 22.4c0 20 9.2 37.9 23.6 49.7c-4.9 9-7.6 19.4-7.6 30.3c0 35.3 28.7 64 64 64l64 0 24 0c92.8 0 168-75.2 168-168l0-48c0-92.8-75.2-168-168-168l-24 0zM256 400c-8.8 0-16-7.2-16-16s7.2-16 16-16l48 0 16 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0zM240 224c0 5.5 .7 10.9 2 16l-2 0-32 0c-8.8 0-16-7.2-16-16s7.2-16 16-16l32 0 0 16zm24 64l40 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-48 0-16 0c-8.8 0-16-7.2-16-16s7.2-16 16-16l24 0z"})],-1),m(" You are in this version ",-1)]))):u("",!0)],8,ks))),256)),e("div",{class:"revision-row",onClick:s[1]||(s[1]=r=>{n.updateCompareWithRevision(null),t.showDropDown=!1})}," None ")])):u("",!0)]),_:1})],2)])}const H=_(as,[["render",Ls],["__scopeId","data-v-297d5710"]]);const Ws={setup(){},data(){return{addCount:0,removeCount:0,innerHtmlDisplay:""}},props:["diffString"],async created(){this.diffString&&(this.innerHtmlDisplay='<div class="inner-div">',this.diffString.forEach((o,s)=>{o.added&&!o.removed&&(this.innerHtmlDisplay=this.innerHtmlDisplay+`<span class="add">${o.value}</span>`),!o.added&&o.removed&&(this.innerHtmlDisplay=this.innerHtmlDisplay+`<span class="remove">${o.value}</span>`),!o.added&&!o.removed&&(this.innerHtmlDisplay=this.innerHtmlDisplay+o.value),s===this.diffString.length&&(this.innerHtmlDisplay=this.innerHtmlDisplay+"</div>")}))},methods:{}},Hs={class:"d-flex flex-row align-items-center flex-wrap"},zs=["innerHTML"];function Vs(o,s,n,d,t,i){return l(),a("div",Hs,[e("div",{innerHTML:t.innerHtmlDisplay},null,8,zs)])}const Ys=_(Ws,[["render",Vs],["__scopeId","data-v-83d7f198"]]);const Ts={props:["viewingRevision","compareWithRevision","skillRevisionHistory","updateCompareWithRevision"],components:{CompareString:Ys,CompareWithDropdown:H},computed:{compareData(){if(!this.compareWithRevision)return;const o=G.execute(this.viewingRevision.mastery_requirements,this.compareWithRevision.mastery_requirements),s=R(this.viewingRevision.introduction,this.compareWithRevision.introduction),n=R(this.viewingRevision.name,this.compareWithRevision.name);return{masteryDiff:o,nameDiff:n,introductionDiff:s,skillData:this.compareWithRevision,currentViewingRevision:this.viewingRevision}}},methods:{formatDate(o){return w.extend(M),w(o).format("lll")}}},Is={class:"container mt-3"},Ns={id:"skill-info-container"},Us={class:"d-flex justify-content-between"},Bs={class:"heading"},js={class:"revision-version"},As={class:"d-flex flex-column"},$s={class:"alert alert-warning d-flex gap-2 align-items-center",role:"alert"},qs={class:"d-flex flex-column ms-2"},Fs={class:"warning-date"},Ps={class:"warning-date"},Es={class:"d-flex flex-column-reverse flex-md-row gap-4"},Gs={class:"mastery-requirements"},Os=["innerHTML"],Zs={class:"col-md-4 order-1 order-md-2"},Js={class:"info-box p-2 mb-2"},Ks={key:0},Qs=["href"],Xs=["src"],se={key:2,class:"d-flex flex-column align-items-center"},ee={class:"no-image-warn"},ie={class:"mt-3"},te={key:0},oe={key:1},ne={key:2},le={key:3},re={key:4};function ae(o,s,n,d,t,i){var p;const r=h("CompareString"),f=h("CompareWithDropdown");return l(),a("div",Is,[e("div",Ns,[e("div",Us,[e("h1",Bs,[v(r,{diffString:i.compareData.nameDiff},null,8,["diffString"]),e("span",js,"(Ver: "+c(i.compareData.skillData.version_number)+")",1)])]),s[9]||(s[9]=e("hr",{class:"border border-2 opacity-100 hr"},null,-1)),e("div",As,[e("div",$s,[e("div",qs,[e("p",null,[s[3]||(s[3]=e("strong",null,"You are comparing:",-1)),e("span",null,[m(" Revision "+c(i.compareData.currentViewingRevision.version_number)+" edited by ",1),e("em",null,c(i.compareData.currentViewingRevision.userName),1),s[2]||(s[2]=m(" on ",-1)),e("span",Fs,c(i.formatDate(i.compareData.currentViewingRevision.edited_date)),1)])]),e("p",null,[s[5]||(s[5]=e("strong",null,"with:",-1)),e("span",null,[m(" Revision "+c(i.compareData.skillData.version_number)+" edited by ",1),e("em",null,c(i.compareData.skillData.user_name),1),s[4]||(s[4]=m(" on ",-1)),e("span",Ps,c(i.formatDate((p=i.compareData.skillData)==null?void 0:p.edited_date)),1)])])])]),v(f,{skillRevisionHistory:n.skillRevisionHistory,currentShowingVersion:i.compareData.skillData.version_number,updateCompareWithRevision:n.updateCompareWithRevision,compareWithRevision:n.compareWithRevision},null,8,["skillRevisionHistory","currentShowingVersion","updateCompareWithRevision","compareWithRevision"])]),s[10]||(s[10]=e("div",{class:"space-between"},null,-1)),s[11]||(s[11]=e("hr",{class:"border border-1 opacity-100 hr"},null,-1)),e("div",Es,[e("div",Gs,[s[6]||(s[6]=e("h2",{class:"secondary-heading"},"Mastery Requirements",-1)),e("div",{innerHTML:i.compareData.masteryDiff},null,8,Os)]),e("div",Zs,[e("div",Js,[i.compareData.skillData.icon_image?(l(),a("div",Ks," Icon Image Of Version "+c(i.compareData.skillData.version_number),1)):u("",!0),i.compareData.skillData.icon_image?(l(),a("a",{key:1,href:"https://institute-skill-infobox-images.s3.amazonaws.com/"+i.compareData.skillData.icon_image},[e("img",{src:"https://institute-skill-infobox-image-thumbnails.s3.amazonaws.com/"+i.compareData.skillData.icon_image,onError:s[0]||(s[0]=(...g)=>o.imageUrlAlternative&&o.imageUrlAlternative(...g)),class:"rounded img-fluid"},null,40,Xs)],8,Qs)):(l(),a("div",se,[e("div",ee," Version "+c(i.compareData.skillData.version_number)+" Does Not Change Icon Image. ",1),s[7]||(s[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"80",height:"80"},[e("path",{d:"M448 80c8.8 0 16 7.2 16 16l0 319.8-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3L48 96c0-8.8 7.2-16 16-16l384 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"})],-1))])),e("div",ie,[s[8]||(s[8]=e("h2",{class:"h4 heading"},"Level",-1)),i.compareData.skillData.level=="grade_school"?(l(),a("span",te,"Grade School")):i.compareData.skillData.level=="middle_school"?(l(),a("span",oe,"Middle School")):i.compareData.skillData.level=="high_school"?(l(),a("span",ne,"High School")):i.compareData.skillData.level=="college"?(l(),a("span",le,"College")):i.compareData.skillData.level=="phd"?(l(),a("span",re,"PHD")):u("",!0)])])])])]),e("button",{class:"btn primary-btn mt-4",onClick:s[1]||(s[1]=g=>n.updateCompareWithRevision(null))},[e("div",null," Go back to version "+c(i.compareData.currentViewingRevision.version_number),1)]),s[12]||(s[12]=e("p",null," ",-1))])}const de=_(Ts,[["render",ae],["__scopeId","data-v-7b5a39f4"]]);const ce={props:["loadingStatus","showLoadingModal","skillUrl","closeModal"],components:{LoadingSpinner:A},computed:{revertResult(){switch(this.loadingStatus){case"fails":return"fails";case"success":return setTimeout(()=>{this.$router.push("/skills/"+this.skillUrl)},2500),"success";default:return"waiting"}}}},me={key:0,class:"modal"},ue={key:0,class:"d-flex flex-column gap-4 align-items-center"},he={key:1,class:"d-flex flex-column"},ve={key:2,class:"d-flex flex-column"};function pe(o,s,n,d,t,i){const r=h("LoadingSpinner");return n.showLoadingModal?(l(),a("div",me,[e("div",{class:D(["modal-content loading-modal",{"success-modal":i.revertResult==="success"}])},[i.revertResult==="waiting"?(l(),a("div",ue,[v(r),s[1]||(s[1]=e("p",null,"Please wait",-1))])):u("",!0),i.revertResult==="success"?(l(),a("div",he,s[2]||(s[2]=[e("div",{class:"d-flex success-text align-items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",class:"me-1",height:"18",width:"18",fill:"#16a34a"},[e("path",{d:"M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-111 111-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L369 209z"})]),m(" Revert Success ")],-1),e("div",null,"You will go back to skill forum soon.",-1)]))):u("",!0),i.revertResult==="fails"?(l(),a("div",ve,[s[4]||(s[4]=e("div",{class:"d-flex fails-text align-items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",class:"me-1",width:"16",height:"16",fill:"#dc2626"},[e("path",{d:"M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"})]),m(" Revert Fails! ")],-1)),s[5]||(s[5]=e("div",null,"Some thing went wrong !!",-1)),e("button",{type:"button",class:"btn green-btn modal-btn mx-auto mt-2",onClick:s[0]||(s[0]=f=>n.closeModal())},s[3]||(s[3]=[e("span",{class:"d-none d-md-block"}," Ok ",-1)]))])):u("",!0)],2)])):u("",!0)}const _e=_(ce,[["render",pe],["__scopeId","data-v-49e8ab2c"]]);const fe={setup(){const o=$(),s=S(),n=L(),d=q();return{userDetailsStore:o,skillsStore:s,usersStore:n,showSkillStore:d}},data(){return{skillUrl:this.$route.params.skillUrl,versionNumber:this.$route.params.versionNumber,skillRevision:{},skillRevisionHistory:[],currentVersionNumber:null,isCurrentVersion:!1,showConfirmModal:!1,showCommentModal:!1,showLoadingModal:!1,skill:{},compareWithRevision:null,currentCompareWithRevision:null,loadingStatus:""}},components:{ConfirmModal:X,CommentModal:ls,CompareWithDropdown:H,CompareWithContent:de,LoadingModal:_e},async mounted(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),this.usersStore.usersIncludingDeleted.length==0&&await this.usersStore.getUsersIncludingDeleted(),await this.getSkill(),await this.getSkillRevisionHistory()},methods:{async getSkill(){const o=await fetch("/skills/url/"+this.skillUrl);this.skill=await o.json(),this.currentVersionNumber=this.skill.version_number,await this.getSkillVersion()},async getSkillVersion(){let o="/skill-history/"+this.skill.id+"/"+this.versionNumber;const s=await fetch(o);this.skillRevision=await s.json(),this.skillRevision.version_number==this.currentVersionNumber&&(this.isCurrentVersion=!0);for(let r=0;r<this.skillsStore.skillsList.length;r++)this.skillsStore.skillsList[r].id==this.skillRevision.parent&&(this.skillRevision.parentName=this.skillsStore.skillsList[r].name);for(let r=0;r<this.usersStore.usersIncludingDeleted.length;r++)this.usersStore.usersIncludingDeleted[r].id==this.skillRevision.user_id&&(this.skillRevision.userName=this.usersStore.usersIncludingDeleted[r].username);var n=this.skillRevision.edited_date.replace("T"," ");n=n.replace("Z"," ");let d=n.split(/[- :]/);var t=new Date(Date.UTC(d[0],d[1]-1,d[2],d[3],d[4],d[5])),i={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};this.skillRevision.date=t.toLocaleDateString("en-US",i),console.log(this.skillRevision)},async getSkillRevisionHistory(){const o="/skill-history/"+this.skill.id+"/list",n=await(await fetch(o)).json();this.skillRevisionHistory=n.map(d=>{const t=this.usersStore.usersIncludingDeleted.find(i=>i.id===d.user_id);return{...d,user_name:t.username}})},confirmRevert(){this.showConfirmModal=!0},closeModal(){this.showConfirmModal=!1,this.showCommentModal=!1},openCommentModal(){this.closeModal(),this.showCommentModal=!0},revert(o){this.showCommentModal=!1,this.showLoadingModal=!0;const s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:o})};var n="/skill-history/"+this.skill.id+"/revert-to/"+this.versionNumber;fetch(n,s).then(async d=>{if(!d.ok){this.loadingStatus="fails";return}this.loadingStatus="success",await this.showSkillStore.findSkill(this.skillUrl)})},closeModal(){this.showCommentModal=!1,this.showConfirmModal=!1,this.showLoadingModal=!1},updateCompareWithRevision(o){(o==null?void 0:o.version_number)!==this.skillRevision.version_number&&(this.compareWithRevision=o)},imageUrlAlternative(o){o.target.src="/images/skill-avatar/recurso.png"}}},ge={class:"d-flex"},we={key:0,class:"mt-3"},ke={id:"skill-info-container"},ye={class:"heading"},De={class:"revision-version"},Me={class:"d-flex flex-column"},Ce={class:"alert alert-warning d-flex",role:"alert"},xe={key:0,class:"ms-2"},Re={class:"warning-date"},be={key:1,class:"ms-2"},Se={class:"warning-date"},Le={class:"d-flex flex-column-reverse flex-md-row gap-4"},We={class:"mastery-requirements mb-3"},He=["innerHTML"],ze={class:"mastery-requirements"},Ve=["innerHTML"],Ye={class:"col-md-4 order-1 order-md-2"},Te={class:"info-box p-2 mb-2"},Ie=["href"],Ne=["src"],Ue={key:1,class:"d-flex flex-column align-items-center"},Be=["href"],je=["src"],Ae={key:3,class:"d-flex flex-column align-items-center"},$e={class:"mt-3"},qe={key:0},Fe={key:1},Pe={key:2},Ee={key:3},Ge={key:4};function Oe(o,s,n,d,t,i){const r=h("CompareWithDropdown"),f=h("CompareWithContent"),p=h("ConfirmModal"),g=h("CommentModal"),y=h("LoadingModal");return l(),a(b,null,[e("div",ge,[t.compareWithRevision?(l(),F(f,{key:1,skillRevisionHistory:t.skillRevisionHistory,viewingRevision:t.skillRevision,compareWithRevision:t.compareWithRevision,updateCompareWithRevision:i.updateCompareWithRevision},null,8,["skillRevisionHistory","viewingRevision","compareWithRevision","updateCompareWithRevision"])):(l(),a("div",we,[e("div",ke,[e("h1",ye,[m(c(t.skill.name)+" ",1),e("span",De,"(revision "+c(t.skillRevision.version_number)+")",1)]),s[12]||(s[12]=e("hr",{class:"border border-2 opacity-100 hr"},null,-1)),e("div",Me,[e("div",Ce,[s[3]||(s[3]=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"20",height:"20"},[e("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})],-1)),t.isCurrentVersion?(l(),a("span",be,[m(" This is the current revision of this skill, as edited by "+c(t.skillRevision.userName)+", at ",1),e("span",Se,c(t.skillRevision.date),1),s[2]||(s[2]=m(". ",-1))])):(l(),a("span",xe,[m(" This is an old revision of this skill, as edited by "+c(t.skillRevision.userName)+", at ",1),e("span",Re,c(t.skillRevision.date),1),s[1]||(s[1]=m(". ",-1))]))]),v(r,{class:"mb-5",skillRevisionHistory:t.skillRevisionHistory,currentShowingVersion:t.skillRevision.version_number,updateCompareWithRevision:i.updateCompareWithRevision,compareWithRevision:t.compareWithRevision},null,8,["skillRevisionHistory","currentShowingVersion","updateCompareWithRevision","compareWithRevision"])]),s[13]||(s[13]=e("hr",{class:"border border-1 opacity-100 hr mt-md-4 mt-5"},null,-1)),e("div",Le,[e("div",null,[s[4]||(s[4]=e("h2",{class:"secondary-heading"},"Introduction",-1)),e("div",We,[e("div",{innerHTML:t.skillRevision.introduction},null,8,He)]),s[5]||(s[5]=e("h2",{class:"secondary-heading"},"Mastery Requirements",-1)),e("div",ze,[e("div",{innerHTML:t.skillRevision.mastery_requirements},null,8,Ve)])]),e("div",Ye,[e("div",Te,[s[9]||(s[9]=e("h2",{class:"h4 secondary-heading"},"Image",-1)),t.skillRevision.icon_image?(l(),a("a",{key:0,href:t.skillRevision.icon_image},[e("img",{src:t.skillRevision.icon_image,class:"rounded img-fluid"},null,8,Ne)],8,Ie)):(l(),a("div",Ue,s[6]||(s[6]=[e("div",{class:"no-image-warn"},"No image",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"80",height:"80"},[e("path",{d:"M448 80c8.8 0 16 7.2 16 16l0 319.8-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3L48 96c0-8.8 7.2-16 16-16l384 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"})],-1)]))),s[10]||(s[10]=e("h2",{class:"h4 secondary-heading"},"Icon",-1)),t.skillRevision.icon?(l(),a("a",{key:2,href:t.skillRevision.icon},[e("img",{src:t.skillRevision.icon,class:"rounded img-fluid"},null,8,je)],8,Be)):(l(),a("div",Ae,s[7]||(s[7]=[e("div",{class:"no-image-warn"},"No icon",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"80",height:"80"},[e("path",{d:"M448 80c8.8 0 16 7.2 16 16l0 319.8-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3L48 96c0-8.8 7.2-16 16-16l384 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"})],-1)]))),e("div",$e,[s[8]||(s[8]=e("h2",{class:"h4 secondary-heading"},"Level",-1)),t.skill.level=="grade_school"?(l(),a("span",qe,"Grade School")):t.skill.level=="middle_school"?(l(),a("span",Fe,"Middle School")):t.skill.level=="high_school"?(l(),a("span",Pe,"High School")):t.skill.level=="college"?(l(),a("span",Ee,"College")):t.skill.level=="phd"?(l(),a("span",Ge,"PHD")):u("",!0)])])])]),!t.isCurrentVersion&&(d.userDetailsStore.role=="platform_admin"||d.userDetailsStore.role=="editor")?(l(),a("button",{key:0,class:"btn primary-btn mt-4",onClick:s[0]||(s[0]=C=>i.confirmRevert())},s[11]||(s[11]=[e("div",null,[m(" Revert to this version  "),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"white",height:"25",width:"25",class:"me-2"},[e("path",{d:"M75 75L41 41C25.9 25.9 0 36.6 0 57.9L0 168c0 13.3 10.7 24 24 24l110.1 0c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24l0 104c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65 0-94.1c0-13.3-10.7-24-24-24z"})])],-1)]))):u("",!0),s[14]||(s[14]=e("p",null," ",-1))])]))]),v(p,{showConfirmModal:t.showConfirmModal,closeModal:i.closeModal,openCommentModal:i.openCommentModal},null,8,["showConfirmModal","closeModal","openCommentModal"]),v(g,{showCommentModal:t.showCommentModal,closeModal:i.closeModal,revert:i.revert},null,8,["showCommentModal","closeModal","revert"]),v(y,{skillUrl:t.skillUrl,showLoadingModal:t.showLoadingModal,loadingStatus:t.loadingStatus,closeModal:i.closeModal},null,8,["skillUrl","showLoadingModal","loadingStatus","closeModal"])],64)}const Ze=_(fe,[["render",Oe],["__scopeId","data-v-ee5cedc6"]]),Je={setup(){const o=S(),s=L();return{skillsStore:o,userDetailsStore:s}},data(){return{skillId:this.$route.params.skillId}},async mounted(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList()},components:{ShowSkillRevision:Ze}},Ke={class:"position-relative d-flex"},Qe={class:"container-lg container-fluid show-skill-ctnr"};function Xe(o,s,n,d,t,i){const r=h("ShowSkillRevision");return l(),a("div",Ke,[e("div",Qe,[v(r)])])}const li=_(Je,[["render",Xe]]);export{li as default};
