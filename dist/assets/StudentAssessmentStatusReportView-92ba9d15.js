import{_ as Ke,f as pt,J as Je,o as te,c as ke,A as Ct,r as Ue,a as de,t as St,k as Ye}from"./main-e53e6faf.js";import{u as xt}from"./TeacherAnalyticsStore-928243e2.js";import{S as it,k as At,l as It,a as Et,s as F}from"./transform-62bed377.js";import{u as Dt,j as Mt,t as ot,k as at,l as Tt}from"./time-38fd1dc5.js";import{m as je}from"./linear-95df80da.js";import{e as Lt}from"./extent-4cf1c809.js";import{p as wt}from"./band-ec92a044.js";import{F as zt}from"./FailedAssessmentsHorizontalBarChart-afd4bab5.js";import"./continuous-074aac43.js";import"./ordinal-c74fec4a.js";function ie(e){return typeof e=="string"?new it([document.querySelectorAll(e)],[document.documentElement]):new it([It(e)],At)}var gt="%Y-%m-%dT%H:%M:%S.%LZ";function Ot(e){return e.toISOString()}Date.prototype.toISOString||Dt(gt);function Bt(e){var t=new Date(e);return isNaN(t)?null:t}var Nt=+new Date("2000-01-01T00:00:00.000Z")?Bt:Mt(gt);const Wt=Nt,ue={second:"%Y-%m-%d %H:%M:%S",minute:"%Y-%m-%d %H:%M",hour:"%Y-%m-%d %H:00",day:"%Y-%m-%d",week:"%Y week %W",month:"%Y-%m",quarter:"%Y-Q%Q",year:"%Y"};function Pt(e){function t(s,o){return a=>(o(a),s)}return Object.keys(e).reduce((s,o)=>(s[o]=t(s,e[o]),s),{})}const be="milestones",rt=be+"__category_label",Ft=be+"__horizontal_line",Rt=be+"__vertical_line",We=be+"__group",Ht=We+"__bullet",_e=We+"__label",Be=_e+"-last",qe=_e+"-above",Pe=_e+"__text",lt=Pe+"__title",yt=Pe+"__event",ct=yt+"--hover",j={DISTRIBUTION:"top-bottom",OPTIMIZE:!1,ORIENTATION:"horizontal",SCALE_TYPE:"time",MAPPING:{category:void 0,entries:void 0,timestamp:"timestamp",value:"value",text:"text",url:"url",id:"id",textStyle:"textStyle",titleStyle:"titleStyle"},LABEL_FORMAT:"%Y-%m-%d %H:%M",USE_LABELS:!0,AGGREGATE_BY:"minute",AUTO_RESIZE:!0,URL_TARGET:"_self"};function Fe(e,t){let s=e%2;return t==="top"?s=!0:t==="bottom"&&(s=!1),s>0}var R="$";function Re(){}Re.prototype=He.prototype={constructor:Re,has:function(e){return R+e in this},get:function(e){return this[R+e]},set:function(e,t){return this[R+e]=t,this},remove:function(e){var t=R+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===R&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===R&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===R&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===R&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===R&&++e;return e},empty:function(){for(var e in this)if(e[0]===R)return!1;return!0},each:function(e){for(var t in this)t[0]===R&&e(this[t],t.slice(1),this)}};function He(e,t){var s=new Re;if(e instanceof Re)e.each(function(i,c){s.set(c,i)});else if(Array.isArray(e)){var o=-1,a=e.length,n;if(t==null)for(;++o<a;)s.set(o,e[o]);else for(;++o<a;)s.set(t(n=e[o],o,e),n)}else if(e)for(var u in e)s.set(u,e[u]);return s}function Qe(){var e=[],t=[],s,o,a;function n(i,c,p,h){if(c>=e.length)return s!=null&&i.sort(s),o!=null?o(i):i;for(var l=-1,g=i.length,T=e[c++],L,k,N=He(),x,H=p();++l<g;)(x=N.get(L=T(k=i[l])+""))?x.push(k):N.set(L,[k]);return N.each(function(m,C){h(H,C,n(m,c,p,h))}),H}function u(i,c){if(++c>e.length)return i;var p,h=t[c-1];return o!=null&&c>=e.length?p=i.entries():(p=[],i.each(function(l,g){p.push({key:g,values:u(l,c)})})),h!=null?p.sort(function(l,g){return h(l.key,g.key)}):p}return a={object:function(i){return n(i,0,$t,Gt)},map:function(i){return n(i,0,ut,dt)},entries:function(i){return u(n(i,0,ut,dt),0)},key:function(i){return e.push(i),a},sortKeys:function(i){return t[e.length-1]=i,a},sortValues:function(i){return s=i,a},rollup:function(i){return o=i,a}}}function $t(){return{}}function Gt(e,t,s){e[t]=s}function ut(){return He()}function dt(e,t,s){e.set(t,s)}function ht(){}var ce=He.prototype;ht.prototype={constructor:ht,has:ce.has,add:function(e){return e+="",this[R+e]=e,this},remove:ce.remove,clear:ce.clear,values:ce.keys,size:ce.size,empty:ce.empty,each:ce.each};function vt(e,t){return parseInt(e.style[t].replace("px",""),10)}const ve=6,Ut=(e,t,s,o,a,n,u,i,c,p,h,l,g,T,L,k=!0,N="time")=>{let x=l==="horizontal"&&k?s+u:s-u,H;do if(l==="horizontal"&&k?x+=u:x-=u,H=g._groups[x],typeof H>"u")break;while(i>=H[0][h]);let m;typeof o.category>"u"?m=a[n.timelineIndex][x]:m=a[n.timelineIndex].entries[x];let C=vt(t,p);if(typeof m<"u"){const W=N==="ordinal"?m.key:e(m.key),J=L(W);l==="horizontal"&k?C=J-c-ve:l==="horizontal"&!k?C=J-ve:C=c-J-ve}else l==="horizontal"&k?C=T-c-ve:(l==="horizontal"&!k,C=c-ve);return u<0?Math.min(c,C):C},Yt=(e,t,s,o)=>e==="horizontal"?t[s+o]:t[s-o],mt=(e,t,s,o,a)=>{const u=Yt(a,s,e,t);let i=0;return typeof u<"u"&&(i=u[0][o]+3),i},ft=20,oe=(e,t)=>parseInt(e.style(t).replace("px",""),10),Ne=e=>e.select(function(){return this.parentNode}),jt=(e,t,s)=>{const o=e%t;return(s+o)%t!==0},qt=(e,t,s,o,a,n,u,i,c,p,h="time")=>{const l=Qe().key(N=>ie(N).data()[0].timelineIndex).entries(u._groups),g=t==="top-bottom"?2:1,T=N=>{let x=0;return l.forEach(H=>{const m=H.values;m.forEach(C=>{const W=ie(C).data()[0],J=n==="horizontal"?60:20,w=n==="horizontal"?m.length-W.index-1:W.index,se=ie(m[w]).data()[0],$e=h==="ordinal"?se.key:e(se.key),$=p($e),q=m[w][0];let X=w===m.length-1;!X&&t==="top-bottom"&&(X=w===m.length-2&&i-$<60);const De=n==="horizontal"?"offsetWidth":"offsetHeight",he=n==="horizontal"?"width":"height",me=vt(q,he),b=ie(m[w]);let y=X?!0:Ne(b).classed(Be);const fe=n==="horizontal"?"offsetHeight":"offsetWidth",Ce=n==="horizontal"?"padding-bottom":"padding-right",Me=n==="horizontal"?"padding-top":"padding-left",ee=Fe(w,t)?Ce:Me,Te=y?$-me<0:$+me>i;if(N===0&&(y=X?!0:Te,b.style(ee,"0px"),Ne(b).classed(Be,y)),q[De]>me||me<J||y||Te){let A=null,r=0,ne=n==="horizontal"?g-1:g+1;do if(n==="horizontal"?ne++:ne--,r++,ne>0){const V=mt(w,g,m,fe,n),Z=n==="horizontal"?mt(w,g*-1,m,fe,n):V;let I=V<=Z&&!X;!I&&!X&&(I=$<J);let v=I?V:Z;X&&(v=0);const E=I?g:g*-1;b.style(ee,v+"px"),Ne(b).classed(Be,!I),A=Ut(e,q,w,o,a,W,E,v,$,he,fe,n,u,i,p,I,h)}while(A<q[De]&&r<ft);n==="horizontal"&&(A=Math.min(s,A)),b.style(c,A+"px");const Se=oe(b.select(".wrapper"),"width");if(Se<A&&(A=Se+6,b.style(c,A+"px")),N>0&&n==="horizontal"){const V=oe(b,"width"),Z=y?$-V:$+V;m.forEach((v,E)=>{const G=ie(v).data()[0];if(G.key===se.key||jt(w,g,E))return;const pe=h==="ordinal"?G.key:e(G.key);let D=p(pe)-5;const z=D,ge=ie(m[E]),ae=Ne(ge).classed(Be);if(y&&!ae){const M=oe(ge,"width");D=D+M+5}if(!y&&ae){const M=oe(ge,"width");D=D-M-5}const xe=y?D>Z:Z>z,Le=y?z<$:z>$;if(xe&&Le){const M=v[0][fe];if(oe(b,ee)<M){const Xe=y?D-Z:Z-z,Ae=oe(b,c)-Xe-6;Ae>J?(A=Math.min(A,Ae),b.style(c,`${A}px`)):b.style(ee,`${M+5}px`),x++}}});let I=Number.POSITIVE_INFINITY;m.forEach((v,E)=>{if((Fe(E,t)?Ce:Me)!==ee)return;const pe=ie(m[E]),D=oe(pe,ee);I=Math.min(I,D)}),I>0&&m.forEach((v,E)=>{const G=w%g;if((E+G)%g!==0)return;const D=ie(m[E]),z=oe(D,ee);D.style(ee,`${z-I}px`)})}}})}),x};let L=0,k=0;do k=T(L),L++,L===1&&(k=1);while(L<ft&&k>0)};function Ve(e){if(e==="%Y-Q%Q"){const t=ot(ue.month);return s=>{const o=t(s),a=o.split("-")[1],n=Math.ceil(parseInt(a)/3);return o.split("-")[0]+"-Q"+n}}return ot(e)}function Ze(e){if(e==="%Y-Q%Q"){const t=at(ue.month);return s=>{if(s.search("-Q")===-1){const a=Math.ceil(parseInt(s.split("-")[1])/3)*3-2+"",n=a.length<2?"0"+a:a;return t(s.split("-")[0]+"-"+n)}else{const o=parseInt(s.split("-")[1][1])*3+"",a=o.length<2?"0"+o:o;return t(s.split("-")[0]+"-"+a)}}}return at(e)}function Vt(e,t,s,o,a="time"){const n=function(i){return a==="ordinal"?i[s.value]:e(o(i[s.timestamp]))};if(typeof s.category<"u"&&typeof s.entries<"u")return t=t.map((i,c)=>({category:i[s.category],entries:u(i[s.entries],c)})),t;typeof t<"u"&&!Array.isArray(t[0])&&(t=[t]);function u(i,c){const p=a==="ordinal"?Qe().key(n).entries(i):Qe().key(n).sortKeys(Et).entries(i);if(a==="ordinal"){const h={};i.forEach((l,g)=>{const T=n(l);!h[T]&&h[T]!==0&&(h[T]=g)}),p.sort((l,g)=>(h[l.key]||0)-(h[g.key]||0))}return p.map((h,l)=>(h.index=l,h.timelineIndex=c,h.scaleType=a,h))}return t.map((i,c)=>u(i,c))}function kt(e){let t=j.DISTRIBUTION;function s(r){t=r}let o=j.OPTIMIZE;function a(r){o=r}let n=j.ORIENTATION;function u(r){n=r,F(e).html("")}let i=j.SCALE_TYPE;function c(r){(r==="time"||r==="ordinal")&&(i=r,F(e).html(""))}let p=Wt;function h(r){p=Ze(r)}let l=Object.assign({},j.MAPPING);function g(r){l=Object.assign({},l,r)}let T;function L(r){T=Ve(r)}L(j.LABEL_FORMAT);let k;function N(r){Array.isArray(r)&&r.length==2&&(k=r)}let x;function H(r){x=r}H(j.USE_LABELS);let m;function C(r){typeof r=="string"&&["_blank","_self","_parent","_top"].includes(r.toLowerCase())&&(m=r)}C(j.URL_TARGET);let W;function J(r){W=r}function w(r){return typeof W=="function"&&(F(this).classed(ct,!0),W(r)),r}let se;function $e(r){se=r}function $(r){return typeof W=="function"&&(F(this).classed(ct,!1),se(r)),r}let q;function X(r){q=r}function De(r){return typeof q=="function"&&q(r),r}let he;function me(r){he=r}let b=Ve(ue[j.AGGREGATE_BY]),y=Ze(ue[j.AGGREGATE_BY]);function fe(r){b=Ve(ue[r]),y=Ze(ue[r]),L(ue[r])}const Ce={current:j.AUTO_RESIZE},Me=()=>{F(e).node()!==null&&window.requestAnimationFrame(()=>{Ce.current&&A()})};new ResizeObserver(Me).observe(typeof e=="string"?document.querySelector(e):e);function Te(r){Ce.current=r}function A(r){const ne=n==="horizontal"?"width":"height",Se=n==="horizontal"?"margin-left":"margin-top",V=n==="horizontal"?Ft:Rt,Z=n==="horizontal"?180:100,I=F(e).selectAll("."+be),v=typeof r<"u"?Vt(b,r,l,p,i):I.data(),E=I.data(v),G=E.enter().append("div").attr("class",be);E.exit().remove();const pe=11,D=parseFloat(F(e).style(ne))-pe;typeof l.category<"u"?(G.append("div").attr("class",rt).text(_=>_.category),G.append("div").attr("class","data-js-timeline").append("div").attr("class",V)):G.append("div").attr("class",V);const z=E.merge(G),ge=[],ae=z.selectAll("."+rt);ae.each((_,O,U)=>{ge.push(U[O].offsetWidth)});const xe=Math.round(je(ge)||0),Le=10,M=D-xe-Le;ae.style("width",xe+"px"),n==="vertical"&&(ae.style("margin-left","-50%"),ae.style("text-align","center")),z.selectAll(".data-js-timeline").style(Se,xe+Le+"px"),z.selectAll("."+V).style(ne,M+"px");const we=(typeof l.category>"u"?z:z.selectAll(".data-js-timeline")).selectAll("."+We).data(_=>typeof l.category>"u"?_:_.entries),Ae=v.reduce((_,O)=>((typeof l.category>"u"?O:O.entries).map(ze=>_.push(ze.key)),_),[]),bt=typeof k<"u"?k.map(y):Lt(Ae,_=>y(_)),Ie=i==="ordinal"?wt().range([0,M]).domain(Ae):Tt().rangeRound([0,M]).domain(bt),et=we.enter().append("div").attr("class",We);we.exit().remove(),et.append("div").attr("class",Ht);const tt=et.merge(we).style(Se,_=>{_.scaleType=i;const O=i==="ordinal"?_.key:y(_.key);return Ie(O)+"px"});if(x){const _=tt.selectAll("."+_e+"-"+n).data(d=>[d]),U=_.enter().append("div").attr("class",_e+"-"+n).merge(_).classed(qe+"-"+n,d=>Fe(d.index,t)).selectAll("."+Pe+"-"+n).data(d=>[d]),ze=U.enter().append("div").attr("class",Pe+"-"+n).merge(U).style(ne,d=>{d.scaleType=i;const Q=i==="ordinal"?d.key:y(d.key),re=Ie(Q);let le,B,f;const P=d.index+1,K=t==="top-bottom"?2:1;typeof l.category>"u"?(le=v[d.timelineIndex][d.index+K],B=v[d.timelineIndex][d.index-K],f=v[d.timelineIndex].length):(le=v[d.timelineIndex].entries[d.index+K],B=v[d.timelineIndex].entries[d.index-K],f=v[d.timelineIndex].entries.length);let Y;const S=n==="horizontal"?le:B,ye=n==="horizontal"?B:le;if(typeof S<"u"){S.scaleType=i;const Ge=i==="ordinal"?S.key:y(S.key),Ee=Ie(Ge);Y=n==="horizontal"?Ee-re:re-Ee,f-P===2&&(Y/=2)}else if(f-P===1)Y=n==="horizontal"?M-re:re;else if(f-P===0)if(typeof ye<"u"){ye.scaleType=i;const Ge=i==="ordinal"?ye.key:y(ye.key),Ee=Ie(Ge);Y=n==="horizontal"?(M-Ee)/2:Ee/2}else Y=M;const nt=Math.max(0,Y-6);return Math.min(n==="horizontal"?Z:nt,nt)+"px"}).each(function(d){const Q=Fe(d.index,t),re=F(this);re.html(null);const le=d.values.reduce((f,P)=>P[l.titleStyle]!==void 0?Object.assign(f,P[l.titleStyle]):f,{}),B=re.append("div").classed("wrapper",!0);if(!Q||n==="vertical"){const f=B.append("span").classed(lt,!0);i==="ordinal"?f.text(d.key):f.text(T(y(d.key))),Object.entries(le).forEach(([P,K])=>f.style(P,K)),B.append("br")}if(d.values.map((f,P)=>{P>0&&B.append("br");const K=Object.assign({},f[l.textStyle]),Y=f[l.text];let S;["jpg","jpeg","gif","png","webp"].indexOf(Y.split(".").pop())>-1?S=B.append("img").classed("milestones-label",!0).classed("milestones-image-label",!0).attr("height","100").attr("src",Y):f[l.url]?S=B.append("a").classed("milestones-label",!0).classed("milestones-link-label",!0).attr("href",f[l.url]).attr("target",m).text(Y):S=B.append("span").classed("milestones-label",!0).classed("milestones-text-label",!0).text(Y),f[l.id]&&S.attr("id",f[l.id]),S.datum({text:f[l.text],timestamp:f[l.timestamp],attributes:f}),(typeof q=="function"||typeof se=="function"||typeof W=="function")&&S.classed(yt,!0),typeof q=="function"&&S.on("click",De),typeof se=="function"&&S.on("mouseleave",$),typeof W=="function"&&S.on("mouseover",w),Object.entries(K).forEach(([ye,st])=>S.style(ye,st))}),Q&&n==="horizontal"){B.append("br");const f=B.append("span").classed(lt,!0);i==="ordinal"?f.text(d.key):f.text(T(y(d.key))),Object.entries(le).forEach(([P,K])=>f.style(P,K))}}),Oe=U.merge(ze);Oe.style("padding-top","0px").style("padding-bottom","0px"),o&&qt(y,t,Z,l,v,n,Oe,M,ne,Ie,i)}else tt.selectAll("."+_e+"-"+n).remove();z.each((_,O,U)=>{const Oe=je(F(U[O]).selectAll("* ."+qe+"-"+n)._groups[0],Q=>Q.offsetHeight),d=je(F(U[O]).selectAll("* :not(."+qe+"-"+n+")")._groups[0],Q=>Q.offsetHeight);if(n==="horizontal")F(U[O]).style("margin-top",10+(Oe||0)+"px").style("height",10+(d||0)+"px");else{const Q=typeof l.category<"u"?Math.round(100/(v.length+1))*(O+1):"50";F(U[O]).style("margin-top","50px").style("margin-left",Q+"%").style("position","absolute")}}),typeof he=="function"&&he()}return Pt({aggregateBy:fe,mapping:g,optimize:a,autoResize:Te,orientation:u,distribution:s,scaleType:c,parseTime:h,labelFormat:L,urlTarget:C,useLabels:H,range:N,render:A,renderCallback:me,onEventClick:X,onEventMouseLeave:$e,onEventMouseOver:J})}const Zt={setup(){const e=pt(),t=Je();return{userDetailsStore:e,userSkillsStore:t}},props:["data"],data(){return{chartOrientation:"horizontal"}},async mounted(){this.drawTimeLineChartWithMilesStone(),this.calculateChartLength(this.data)},methods:{drawTimeLineChartWithMilesStone(){kt("#passed-assessments-timeline").mapping({timestamp:"mastered_date",text:"labelName"}).aggregateBy("week").labelFormat("%d-%m-%Y").optimize(!0).orientation(this.chartOrientation).renderCallback(()=>{if(this.changeLabelColor(),this.chartOrientation==="vertical"){const t=document.getElementsByClassName("milestones")[0];t.style.marginLeft="30%"}}).render(this.data),this.changeBulletColor(),this.changeLabelColor()},calculateChartLength(e){const t=e[0].date,s=e[e.length-1].date,o=this.getDaysBetweenDates(t,s),a=e.length;this.chartWidth=o*3+a*50+"px"},getDaysBetweenDates(e,t){const s=new Date(e),o=new Date(t),a=s.getTime(),n=o.getTime(),u=Math.abs(n-a),i=1e3*60*60*24;return Math.round(u/i)},changeBulletColor(){const t=document.getElementsByClassName("milestones")[0].getElementsByClassName("milestones__group");for(let s=0;s<t.length;s++){const o=t[s],n=o.getElementsByClassName("milestones-link-label")[0].id,u=this.data.find(h=>h.id===parseInt(n)),c=o.getElementsByClassName("milestones__group__bullet")[0],p=this.mapSkillLevelWithColor(u.level);c.style.backgroundColor=p}},changeLabelColor(){this.data.forEach(e=>{const t=document.getElementById(e.id),s=this.data.find(a=>parseInt(t.id)===a.id),o=this.mapSkillLevelWithColor(s.level);t.style.color=o})},mapSkillLevelWithColor(e){switch(e){case"grade_school":return"#116b62";case"middle_school":return"#168216";case"high_school":return"#7d6a02";case"college":return"#ffa500";case"phd":return"#9e0000"}},handleOrientationBtnClick(e){this.chartOrientation=e,this.drawTimeLineChartWithMilesStone()}}},Qt={id:"passed-assessments-timeline"};function Kt(e,t,s,o,a,n){return te(),ke("div",Qt)}const Jt=Ke(Zt,[["render",Kt]]);const Xt={setup(){const e=pt(),t=Je();return{userDetailsStore:e,userSkillsStore:t}},props:["data"],data(){return{chartOrientation:"horizontal"}},async mounted(){this.drawTimeLineChartWithMilesStone(),this.calculateChartLength(this.data)},methods:{drawTimeLineChartWithMilesStone(){kt("#attempted-assessments-timeline").mapping({timestamp:"date",text:"labelName"}).aggregateBy("week").labelFormat("%d-%m-%Y").optimize(!0).orientation(this.chartOrientation).renderCallback(()=>{if(this.changeLabelColor(),this.chartOrientation==="vertical"){const t=document.getElementsByClassName("milestones")[0];t.style.marginLeft="30%"}}).render(this.data),this.changeBulletColor(),this.changeLabelColor()},calculateChartLength(e){const t=e[0].date,s=e[e.length-1].date,o=this.getDaysBetweenDates(t,s),a=e.length;this.chartWidth=o*3+a*50+"px"},getDaysBetweenDates(e,t){const s=new Date(e),o=new Date(t),a=s.getTime(),n=o.getTime(),u=Math.abs(n-a),i=1e3*60*60*24;return Math.round(u/i)},changeBulletColor(){const t=document.getElementsByClassName("milestones")[0].getElementsByClassName("milestones__group");for(let s=0;s<t.length;s++){const o=t[s],n=o.getElementsByClassName("milestones-link-label")[0].id,u=this.data.find(h=>h.id===parseInt(n)),c=o.getElementsByClassName("milestones__group__bullet")[0],p=this.mapSkillLevelWithColor(u.level);c.style.backgroundColor=p}},changeLabelColor(){this.data.forEach(e=>{const t=document.getElementById(e.id),s=this.data.find(a=>parseInt(t.id)===a.id),o=this.mapSkillLevelWithColor(s.level);t.style.color=o})},mapSkillLevelWithColor(e){switch(e){case"grade_school":return"#116b62";case"middle_school":return"#168216";case"high_school":return"#7d6a02";case"college":return"#ffa500";case"phd":return"#9e0000"}},handleOrientationBtnClick(e){this.chartOrientation=e,this.drawTimeLineChartWithMilesStone()}}},es={id:"attempted-assessments-timeline"};function ts(e,t,s,o,a,n){return te(),ke("div",es)}const ss=Ke(Xt,[["render",ts]]),ns={setup(){const e=Ct(),t=Je(),s=xt();return{usersStore:e,userSkillsStore:t,teacherAnalyticsStore:s}},components:{FailedAssessmentsHorizontalBarChart:zt,PassedAssessmentsTimelineChart:Jt,AttemptedAssessmentsTimelineChart:ss},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentPasses:[],assessmentAttempts:[],multipleFails:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const e=this.usersStore.users.find(t=>t.id===this.studentId);e&&(this.studentName=e.username),await this.getUserSkillMasteredHistory(this.studentId),await this.getAssessmentAttempts(),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),this.isLoaded=!0},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(e=>e.json()).then(e=>{this.assessmentAttempts=e.map(t=>({...t,url:`/skills/${t.url}`,labelName:`${t.name}`}))}).catch(e=>{console.error("Error fetching last visited skills:",e)})},assessmentDate(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async getUserSkillMasteredHistory(e){await this.userSkillsStore.getMasteredSkills(e),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(t=>({...t,url:`/skills/${t.url}`,labelName:`${t.name}`}))}}},is={class:"container"},os={class:"d-flex justify-content-between w-100"},as=de("h1",{class:"heading"},"Assessment Status Report",-1),rs={class:"secondary-heading h3"},ls=de("h2",{class:"secondary-heading"},"Passed",-1),cs={key:1},us=de("h2",{class:"secondary-heading"},"Attempted",-1),ds={key:3},hs=de("p",null,null,-1),ms=de("h2",{class:"secondary-heading"},"Failed multiple times",-1),fs={key:5};function ps(e,t,s,o,a,n){const u=Ue("PassedAssessmentsTimelineChart"),i=Ue("AttemptedAssessmentsTimelineChart"),c=Ue("FailedAssessmentsHorizontalBarChart");return te(),ke("div",is,[de("span",os,[as,de("h2",rs,St(a.studentName),1)]),ls,a.assessmentPasses.length>0?(te(),Ye(u,{key:0,class:"mb-5",data:a.assessmentPasses},null,8,["data"])):(te(),ke("p",cs,"This student has not completed any assessments yet.")),us,a.assessmentAttempts.length>0?(te(),Ye(i,{key:2,class:"mb-5",data:a.assessmentAttempts},null,8,["data"])):(te(),ke("p",ds,"This student has attempted any assessments yet.")),hs,ms,o.teacherAnalyticsStore.studentMultipleFails.length>0?(te(),Ye(c,{key:4,data:o.teacherAnalyticsStore.studentMultipleFails,colour:"darkred",class:"mb-5"},null,8,["data"])):(te(),ke("p",fs," This student has not failed any assessments more than once yet. "))])}const Es=Ke(ns,[["render",ps]]);export{Es as default};
