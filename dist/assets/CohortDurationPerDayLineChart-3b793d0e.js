import{w as un,c as T,a as cn}from"./point-ea70dc51.js";import"./transform-4d0f7c8f.js";import{_ as ln}from"./main-a6b5522f.js";import{u as fn,l as gn}from"./line-bfb1ca50.js";import{e as mn}from"./time-ce17bce2.js";import{l as hn,c as pn,b as dn}from"./linear-841004c4.js";import{m as yn}from"./continuous-e5db47ab.js";import{s as xn}from"./string-c67ea49d.js";const on=Math.abs,M=Math.atan2,Q=Math.cos,vn=Math.max,en=Math.min,I=Math.sin,j=Math.sqrt,k=1e-12,z=Math.PI,X=z/2,U=2*z;function An(e){return e>1?0:e<-1?z:Math.acos(e)}function sn(e){return e>=1?X:e<=-1?-X:Math.asin(e)}function Mn(e){return e.innerRadius}function Rn(e){return e.outerRadius}function Tn(e){return e.startAngle}function wn(e){return e.endAngle}function $n(e){return e&&e.padAngle}function kn(e,u,m,v,p,d,l,n){var g=m-e,i=v-u,t=l-p,c=n-d,a=c*g-t*i;if(!(a*a<k))return a=(t*(u-d)-c*(e-p))/a,[e+a*g,u+a*i]}function K(e,u,m,v,p,d,l){var n=e-m,g=u-v,i=(l?d:-d)/j(n*n+g*g),t=i*g,c=-i*n,a=e+t,o=u+c,h=m+t,y=v+c,D=(a+h)/2,f=(o+y)/2,R=h-a,A=y-o,x=R*R+A*A,w=p-d,$=a*y-h*o,E=(A<0?-1:1)*j(vn(0,w*w*x-$*$)),q=($*A-R*E)/x,N=(-$*R-A*E)/x,B=($*A+R*E)/x,P=(-$*R+A*E)/x,C=q-D,r=N-f,s=B-D,O=P-f;return C*C+r*r>s*s+O*O&&(q=B,N=P),{cx:q,cy:N,x01:-t,y01:-c,x11:q*(p/w-1),y11:N*(p/w-1)}}function Vn(){var e=Mn,u=Rn,m=T(0),v=null,p=Tn,d=wn,l=$n,n=null,g=un(i);function i(){var t,c,a=+e.apply(this,arguments),o=+u.apply(this,arguments),h=p.apply(this,arguments)-X,y=d.apply(this,arguments)-X,D=on(y-h),f=y>h;if(n||(n=t=g()),o<a&&(c=o,o=a,a=c),!(o>k))n.moveTo(0,0);else if(D>U-k)n.moveTo(o*Q(h),o*I(h)),n.arc(0,0,o,h,y,!f),a>k&&(n.moveTo(a*Q(y),a*I(y)),n.arc(0,0,a,y,h,f));else{var R=h,A=y,x=h,w=y,$=D,E=D,q=l.apply(this,arguments)/2,N=q>k&&(v?+v.apply(this,arguments):j(a*a+o*o)),B=en(on(o-a)/2,+m.apply(this,arguments)),P=B,C=B,r,s;if(N>k){var O=sn(N/a*I(q)),H=sn(N/o*I(q));($-=O*2)>k?(O*=f?1:-1,x+=O,w-=O):($=0,x=w=(h+y)/2),(E-=H*2)>k?(H*=f?1:-1,R+=H,A-=H):(E=0,R=A=(h+y)/2)}var S=o*Q(R),V=o*I(R),W=a*Q(w),F=a*I(w);if(B>k){var G=o*Q(A),J=o*I(A),Y=a*Q(x),Z=a*I(x),L;if(D<z)if(L=kn(S,V,Y,Z,G,J,W,F)){var b=S-L[0],_=V-L[1],nn=G-L[0],tn=J-L[1],rn=1/I(An((b*nn+_*tn)/(j(b*b+_*_)*j(nn*nn+tn*tn)))/2),an=j(L[0]*L[0]+L[1]*L[1]);P=en(B,(a-an)/(rn-1)),C=en(B,(o-an)/(rn+1))}else P=C=0}E>k?C>k?(r=K(Y,Z,S,V,o,C,f),s=K(G,J,W,F,o,C,f),n.moveTo(r.cx+r.x01,r.cy+r.y01),C<B?n.arc(r.cx,r.cy,C,M(r.y01,r.x01),M(s.y01,s.x01),!f):(n.arc(r.cx,r.cy,C,M(r.y01,r.x01),M(r.y11,r.x11),!f),n.arc(0,0,o,M(r.cy+r.y11,r.cx+r.x11),M(s.cy+s.y11,s.cx+s.x11),!f),n.arc(s.cx,s.cy,C,M(s.y11,s.x11),M(s.y01,s.x01),!f))):(n.moveTo(S,V),n.arc(0,0,o,R,A,!f)):n.moveTo(S,V),!(a>k)||!($>k)?n.lineTo(W,F):P>k?(r=K(W,F,G,J,a,-P,f),s=K(S,V,Y,Z,a,-P,f),n.lineTo(r.cx+r.x01,r.cy+r.y01),P<B?n.arc(r.cx,r.cy,P,M(r.y01,r.x01),M(s.y01,s.x01),!f):(n.arc(r.cx,r.cy,P,M(r.y01,r.x01),M(r.y11,r.x11),!f),n.arc(0,0,a,M(r.cy+r.y11,r.cx+r.x11),M(s.cy+s.y11,s.cx+s.x11),f),n.arc(s.cx,s.cy,P,M(s.y11,s.x11),M(s.y01,s.x01),!f))):n.arc(0,0,a,w,x,f)}if(n.closePath(),t)return n=null,t+""||null}return i.centroid=function(){var t=(+e.apply(this,arguments)+ +u.apply(this,arguments))/2,c=(+p.apply(this,arguments)+ +d.apply(this,arguments))/2-z/2;return[Q(c)*t,I(c)*t]},i.innerRadius=function(t){return arguments.length?(e=typeof t=="function"?t:T(+t),i):e},i.outerRadius=function(t){return arguments.length?(u=typeof t=="function"?t:T(+t),i):u},i.cornerRadius=function(t){return arguments.length?(m=typeof t=="function"?t:T(+t),i):m},i.padRadius=function(t){return arguments.length?(v=t==null?null:typeof t=="function"?t:T(+t),i):v},i.startAngle=function(t){return arguments.length?(p=typeof t=="function"?t:T(+t),i):p},i.endAngle=function(t){return arguments.length?(d=typeof t=="function"?t:T(+t),i):d},i.padAngle=function(t){return arguments.length?(l=typeof t=="function"?t:T(+t),i):l},i.context=function(t){return arguments.length?(n=t??null,i):n},i}function Pn(e,u){return u<e?-1:u>e?1:u>=e?0:NaN}function Cn(e){return e}function jn(){var e=Cn,u=Pn,m=null,v=T(0),p=T(U),d=T(0);function l(n){var g,i=(n=cn(n)).length,t,c,a=0,o=new Array(i),h=new Array(i),y=+v.apply(this,arguments),D=Math.min(U,Math.max(-U,p.apply(this,arguments)-y)),f,R=Math.min(Math.abs(D)/i,d.apply(this,arguments)),A=R*(D<0?-1:1),x;for(g=0;g<i;++g)(x=h[o[g]=g]=+e(n[g],g,n))>0&&(a+=x);for(u!=null?o.sort(function(w,$){return u(h[w],h[$])}):m!=null&&o.sort(function(w,$){return m(n[w],n[$])}),g=0,c=a?(D-i*A)/a:0;g<i;++g,y=f)t=o[g],x=h[t],f=y+(x>0?x*c:0)+A,h[t]={data:n[t],index:g,value:x,startAngle:y,endAngle:f,padAngle:R};return h}return l.value=function(n){return arguments.length?(e=typeof n=="function"?n:T(+n),l):e},l.sortValues=function(n){return arguments.length?(u=n,m=null,l):u},l.sort=function(n){return arguments.length?(m=n,u=null,l):m},l.startAngle=function(n){return arguments.length?(v=typeof n=="function"?n:T(+n),l):v},l.endAngle=function(n){return arguments.length?(p=typeof n=="function"?n:T(+n),l):p},l.padAngle=function(n){return arguments.length?(d=typeof n=="function"?n:T(+n),l):d},l}const Dn={name:"CohortDurationPerDayLineChart",props:["data","colour"],data(){return{}},mounted(){const e=this.data,u=document.getElementById("time-chart-container").clientWidth,m=document.getElementById("time-chart-container").clientHeight,v=0,p=0,d=20,l=0,n=fn(mn(e,c=>c.date),[l,u-p]),g=hn([0,yn(e,c=>c.formattedQuantity)],[m-d,v]),i=gn().x(c=>n(c.date)).y(c=>g(c.formattedQuantity)),t=xn("#time-chart-container").append("svg").attr("width",u).attr("height",m).attr("viewBox",[0,0,u,m]).attr("style","max-width: 100%; height: auto; height: intrinsic;");t.append("g").attr("transform",`translate(0,${m-d})`).call(pn(n).ticks(e.length).tickSizeOuter(0)),t.append("g").attr("transform",`translate(${l},0)`).call(dn(g).ticks(m/80)).call(c=>c.selectAll(".tick line").clone().attr("x2",u-l-p).attr("stroke-opacity",.1)).call(c=>c.append("text").attr("x",-l).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text("â†‘ Duration in minutes")),t.append("path").attr("fill","none").attr("stroke","#5f31dd").attr("stroke-width",1.5).attr("d",i(e))}};function Bn(e,u,m,v,p,d){return null}const zn=ln(Dn,[["render",Bn]]);export{zn as C,Vn as a,jn as p};
