import{_ as S,A as _,K as y,r as o,o as n,c as i,a,t as f,s as d,g as m,k as c}from"./main-2b6e2d7f.js";import{u as g}from"./TeacherAnalyticsStore-33c878a9.js";import{P as D,A as k}from"./AttemptedAssessmentsTimelineChart-d5477991.js";import{F as w}from"./FailedAssessmentsHorizontalBarChart-42f310eb.js";import{D as N}from"./downloadCSVBtn-7d45c695.js";import"./main-fbe756c6.js";import"./transform-8aa7b14f.js";import"./time-5737df17.js";import"./linear-ebf0540e.js";import"./band-682f5aee.js";import"./sort-cd73da73.js";import"./axis-5447c31d.js";const C={setup(){const t=_(),s=y(),h=g();return{usersStore:t,userSkillsStore:s,teacherAnalyticsStore:h}},components:{FailedAssessmentsHorizontalBarChart:w,PassedAssessmentsTimelineChart:D,AttemptedAssessmentsTimelineChart:k,DownloadCSVBtn:N},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentPasses:[],assessmentAttempts:[],assessmentPassesDownloadData:[],assessmentAttemptsDownloadData:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const t=this.usersStore.users.find(s=>s.id===this.studentId);t&&(this.studentName=t.username),await this.getUserSkillMasteredHistory(this.studentId),await this.getAssessmentAttempts(),this.assessmentPassesDownloadData=this.assessmentPasses.map(s=>({skill:s.name,date:this.assessmentDate(s.mastered_date)})),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),this.isLoaded=!0},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(t=>t.json()).then(t=>{this.assessmentAttempts=t.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`})),this.assessmentAttemptsDownloadData=this.assessmentAttempts.map(s=>({skill:s.name,date:this.assessmentDate(s.date)}))}).catch(t=>{console.error("Error fetching last visited skills:",t)})},assessmentDate(t){return new Date(t).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async getUserSkillMasteredHistory(t){await this.userSkillsStore.getMasteredSkills(t),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`}))}}},P={class:"container"},T={class:"d-flex justify-content-between w-100"},b=a("h1",{class:"heading"},"Assessment Status Report",-1),B={class:"secondary-heading h3"},F={class:"secondary-heading pt-2 d-flex justify-content-between"},V={key:1},j={class:"secondary-heading pt-2 d-flex justify-content-between"},x={key:1},M={class:"secondary-heading pt-2 d-flex justify-content-between"},v={key:1};function I(t,s,h,l,e,U){const r=o("DownloadCSVBtn"),u=o("FailedAssessmentsHorizontalBarChart"),p=o("PassedAssessmentsTimelineChart"),A=o("AttemptedAssessmentsTimelineChart");return n(),i("div",P,[a("span",T,[b,a("h2",B,f(e.studentName),1)]),a("div",null,[a("h4",F,[d(" Failed multiple times "),m(r,{data:l.teacherAnalyticsStore.studentMultipleFails,fileName:`Assessment Status Report - ${e.studentName}`,toolTip:"Download failed assessments data as CSV"},null,8,["data","fileName"])]),l.teacherAnalyticsStore.studentMultipleFails.length>0?(n(),c(u,{key:0,data:l.teacherAnalyticsStore.studentMultipleFails,colour:"darkred",class:"mb-5"},null,8,["data"])):(n(),i("p",V," This student has not failed any assessments more than once yet. "))]),a("div",null,[a("h4",j,[d(" Passed "),m(r,{data:e.assessmentPassesDownloadData,fileName:`Passed Assessments - ${e.studentName}`,toolTip:"Download passed assessments data as CSV"},null,8,["data","fileName"])]),e.assessmentPasses.length>0?(n(),c(p,{key:0,class:"mb-5",data:e.assessmentPasses},null,8,["data"])):(n(),i("p",x,"This student has not completed any assessments yet."))]),a("div",null,[a("h4",M,[d(" Attempted "),m(r,{data:e.assessmentAttemptsDownloadData,fileName:`Attempted Assessments - ${e.studentName}`,toolTip:"Download attempted assessments data as CSV"},null,8,["data","fileName"])]),e.assessmentAttempts.length>0?(n(),c(A,{key:0,class:"mb-5",data:e.assessmentAttempts},null,8,["data"])):(n(),i("p",v,"This student has not attempted any assessments yet."))])])}const X=S(C,[["render",I]]);export{X as default};
