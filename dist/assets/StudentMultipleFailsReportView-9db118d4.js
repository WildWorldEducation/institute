import{_ as y,y as _,r as h,o as i,c as p,a,t as S,j as f,f as b}from"./main-1e7b2a4c.js";import{u as B}from"./TeacherAnalyticsStore-0322b507.js";import{u as w}from"./AnalyticsStore-6362765e.js";import"./transform-af9a74a2.js";import{l as A,c as x,b as F}from"./linear-5b188edc.js";import{m as v,b as j}from"./continuous-7328829e.js";import{s as k}from"./sort-ed61f96d.js";import{s as C}from"./string-dd82ab4a.js";import{F as R}from"./FailedAssessmentsHorizontalBarChart-bc22ba72.js";import{D as M}from"./downloadCSVBtn-46bd1944.js";const H={name:"StudentFailedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const c=document.getElementById("fails-by-subject-chart-container").clientWidth,u=20*this.data.length+0+0,s=A().domain([0,v(this.data,t=>t.quantity)]).range([200,c-0]),r=j().domain(k(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,u-0]).padding(.1),m=C("#fails-by-subject-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,c,u]).attr("preserveAspectRatio","xMinYMin");m.append("g").selectAll().data(this.data).join("rect").attr("x",s(0)).attr("y",t=>r(t.name)).attr("width",t=>s(t.quantity)-s(0)).attr("height",r.bandwidth()).attr("fill",function(t){return t.name=="Language"?"DarkMagenta":t.name=="Mathematics"?"blue":t.name=="Science & Invention"?"purple":t.name=="Computer Science"?"deeppink":t.name=="Dangerous Ideas"?"brown":t.name=="History"?"cyan":t.name=="Life"?"magenta":"#ff7f0e"}),m.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>s(t.quantity)).attr("y",t=>r(t.name)+r.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(g=>s(g.quantity)-s(0)<20).attr("dx",4).attr("fill","white").attr("text-anchor","start")),m.append("g").attr("transform","translate(0,0)").call(x(s).ticks(0)).call(t=>t.select(".domain").remove()),m.append("g").attr("transform","translate(200,0)").attr("style","font-size: 16px").call(F(r).tickSizeOuter(0))}};function z(n,e,l,o,d,c){return null}const I=y(H,[["render",z]]);const T={setup(){const n=_(),e=B(),l=w();return{usersStore:n,teacherAnalyticsStore:e,analyticsStore:l}},components:{FailedAssessmentsHorizontalBarChart:R,StudentFailedAssessmentsByRootSubjectHorizontalBarChart:I,DownloadCSVBtn:M},data(){return{studentId:this.$route.params.studentId,studentName:null}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const n=this.usersStore.users.find(e=>e.id===this.studentId);n&&(this.studentName=n.username),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),await this.analyticsStore.getStudentFailedAssessmentsBySubject(this.studentId),this.isLoaded=!0},methods:{}},D={class:"container chart-page"},N={class:"d-flex justify-content-between w-100"},V={class:"secondary-heading h4"},L={class:"row mb-5"},$={id:"fails-by-subject-chart-container"},q={key:1},E={class:"row position-relative overflow-auto"},O={id:"fails-by-skill-chart-container"},U={key:1};function W(n,e,l,o,d,c){const u=h("StudentFailedAssessmentsByRootSubjectHorizontalBarChart"),s=h("DownloadCSVBtn"),r=h("FailedAssessmentsHorizontalBarChart");return i(),p("div",D,[a("span",N,[e[0]||(e[0]=a("h1",{class:"heading h4"},"Multiple fails",-1)),a("h2",V,S(d.studentName),1)]),a("div",L,[e[1]||(e[1]=a("h3",{class:"secondary-heading h5"},"By subject",-1)),a("div",$,[o.analyticsStore.studentRootSubjectsFailedAssessments.length>0?(i(),f(u,{key:0,data:o.analyticsStore.studentRootSubjectsFailedAssessments},null,8,["data"])):(i(),p("p",q,"This student has not failed any assessments more than once yet."))])]),a("div",E,[e[2]||(e[2]=a("h3",{class:"secondary-heading h5"},"By skill",-1)),a("div",O,[b(s,{data:o.teacherAnalyticsStore.studentMultipleFails,fileName:`Assessment Status Report - ${d.studentName}`,toolTip:"Download failed assessments data as CSV",class:"position-absolute download-btn"},null,8,["data","fileName"]),o.teacherAnalyticsStore.studentMultipleFails.length>0?(i(),f(r,{key:0,data:o.teacherAnalyticsStore.studentMultipleFails,colour:"darkred"},null,8,["data"])):(i(),p("p",U," This student has not failed any assessments more than once yet. "))])])])}const st=y(T,[["render",W],["__scopeId","data-v-f8638ed1"]]);export{st as default};
