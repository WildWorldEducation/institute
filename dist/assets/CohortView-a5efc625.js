import{P as M,_ as b,r as g,o as n,c as r,d as o,t as m,K as y,b as u,n as I,l as p,F as a,z as f,i as w,p as S,f as x,a as j,e as C,j as L,T as z,w as $,I as B}from"./main-a59bdd65.js";const k=M("cohorts",{state:()=>({cohorts:[],cohortSkills:[]}),actions:{async getCohorts(t){const i=await(await fetch("/cohorts/"+t+"/list")).json();return this.cohorts=i,this.$state},async getCohortSkillFilters(t){const e=await fetch("/cohorts/"+t+"/skill-filters");this.cohortSkills=await e.json()}}});const P={setup(){return{cohortsStore:k()}},props:["id","children","name","type","level","depth","filtered"],data(){return{cohortId:this.$route.params.cohortId,showChildren:!1,isFiltered:null}},computed:{indent(){var t=0;return screen.width<=480?this.depth==1?t=25:t=20:t=50,this.type!="sub"?{transform:`translate(${this.depth*t-35.2}px)`}:{transform:`translate(${(this.depth-1)*t-35.2}px)`}}},mounted(){console.log(this.$refs.name.offsetHeight),this.$refs.name.offsetHeight>90?this.$refs.name.classList.add("four-row-domain-name"):this.$refs.name.offsetHeight>60?this.$refs.name.classList.add("three-row-domain-name"):this.$refs.name.offsetHeight>30&&this.$refs.name.classList.add("two-row-domain-name")},methods:{toggleChildSkills(){this.showChildren=!this.showChildren},filter(){this.filtered==1?this.isFiltered=0:this.isFiltered=1;const t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({cohortId:this.cohortId,skillId:this.id,isFiltered:this.isFiltered})};var e="/cohorts/"+this.cohortId+"/edit-filters";fetch(e,t).then(i=>{this.cohortsStore.getCohortSkillFilters(this.cohortId)})}},components:{}},_=t=>(S("data-v-4f45045f"),t=t(),x(),t),D={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",height:"18",width:"18"},T=_(()=>o("path",{d:"M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z",fill:"black"},null,-1)),V=[T],U={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",height:"18",width:"18"},H=_(()=>o("path",{d:"M3.9 22.9C10.5 8.9 24.5 0 40 0L472 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L396.4 195.6C316.2 212.1 256 283 256 368c0 27.4 6.3 53.4 17.5 76.5c-1.6-.8-3.2-1.8-4.7-2.9l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 65.3C-.7 53.4-2.8 36.8 3.9 22.9zM432 224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zm59.3 107.3c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L432 345.4l-36.7-36.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6L409.4 368l-36.7 36.7c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L432 390.6l36.7 36.7c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L454.6 368l36.7-36.7z",fill:"white"},null,-1)),O=[H],N={key:0,height:"18",width:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},E=_(()=>o("path",{fill:"black",d:"M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"},null,-1)),q=[E],A={key:1,height:"18",width:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},J=_(()=>o("path",{fill:"black",d:"M201.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 205.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"},null,-1)),K=[J];function G(t,e,i,v,l,h){const d=g("FilterChild",!0);return n(),r(a,null,[o("button",{style:I(h.indent),class:p(["filter-button d-flex justify-content-between align-items-center",{"is-filtered":i.filtered==1}]),onClick:e[2]||(e[2]=s=>h.toggleChildSkills())},[o("span",{ref:"name"},m(i.name),513),o("div",null,[o("button",{class:"btn",onClick:e[0]||(e[0]=y((...s)=>h.filter&&h.filter(...s),["stop"]))},[i.filtered!=1?(n(),r("svg",D,V)):(n(),r("svg",U,O))]),i.children.length!=0?(n(),r("button",{key:0,onClick:e[1]||(e[1]=y((...s)=>h.toggleChildSkills&&h.toggleChildSkills(...s),["stop"])),class:"btn"},[l.showChildren?(n(),r("svg",A,K)):(n(),r("svg",N,q))])):u("",!0)])],6),l.showChildren&&i.filtered==1?(n(!0),r(a,{key:0},f(i.children,s=>(n(),w(d,{id:s.id,filtered:i.filtered,children:s.children,type:s.type,level:s.level,name:s.name,depth:i.depth+1},null,8,["id","filtered","children","type","level","name","depth"]))),256)):l.showChildren&&i.filtered==0?(n(!0),r(a,{key:1},f(i.children,s=>(n(),w(d,{id:s.id,filtered:s.filtered,children:s.children,type:s.type,level:s.level,name:s.name,depth:i.depth+1},null,8,["id","filtered","children","type","level","name","depth"]))),256)):u("",!0)],64)}const Q=b(P,[["render",G],["__scopeId","data-v-4f45045f"]]);const R={setup(){return{cohortsStore:k()}},data(){return{cohortId:this.$route.params.cohortId}},computed:{},async created(){await this.cohortsStore.getCohortSkillFilters(this.cohortId)},methods:{},components:{FilterChild:Q}};function W(t,e,i,v,l,h){const d=g("FilterChild");return n(!0),r(a,null,f(this.cohortsStore.cohortSkills,s=>(n(),w(d,{id:s.id,children:s.children,depth:1,name:s.name,type:s.type,filtered:s.filtered},null,8,["id","children","name","type","filtered"]))),256)}const X=b(R,[["render",W],["__scopeId","data-v-b5e84cbf"]]);const Y={setup(){return{userDetailsStore:j()}},data(){return{cohortId:this.$route.params.cohortId,cohort:{},students:[],unavailableStudents:[],members:[],showFilters:!1,showMembers:!1}},async created(){await this.getCohort(),await this.getMembers(),await this.getUnavailableStudents(),this.students.length==0&&await this.getStudents()},components:{FilterParent:X},computed:{},methods:{async getCohort(){fetch("/cohorts/"+this.cohortId).then(function(t){return t.json()}).then(t=>{this.cohort=t})},async getMembers(){fetch("/cohorts/"+this.cohortId+"/members").then(function(t){return t.json()}).then(t=>{this.members=t})},async getUnavailableStudents(){fetch("/cohorts/unavailable/"+this.cohortId+"/list").then(function(t){return t.json()}).then(t=>{this.unavailableStudents=t})},async getStudents(){fetch("/instructor-students/"+this.userDetailsStore.userId+"/list").then(function(t){return t.json()}).then(t=>{this.students=t;for(let e=0;e<this.students.length;e++){this.students[e].isMember=!1;for(let i=0;i<this.members.length;i++)this.students[e].id==this.members[i].id&&(this.students[e].isMember=!0)}for(let e=0;e<this.students.length;e++){this.students[e].unavailable=!1;for(let i=0;i<this.unavailableStudents.length;i++)this.students[e].id==this.unavailableStudents[i].user_id&&(this.students[e].unavailable=!0)}})},submit(){let t=0;this.updateCohortMembers(t)},async updateCohortMembers(t){const e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:this.students[t].id,isMember:this.students[t].isMember})};var i="/cohorts/edit/"+this.cohortId;fetch(i,e).then(()=>{if(t+1<this.students.length)t++,this.updateCohortMembers(t);else{alert("Cohort updated"),this.getMembers();return}})},async deleteCohort(){if(confirm("Are you sure you want to delete this cohort?")==!0)if(this.members.length>0)alert("Please remove all members from this cohort before deleting it.");else{const e=await fetch("/cohorts/"+this.cohortId,{method:"DELETE"});e.error&&console.log(e.error),this.$router.push("/cohorts")}}}},c=t=>(S("data-v-87c7dbd8"),t=t(),x(),t),Z={class:"container cohort-page bg-light rounded p-3"},tt={class:"d-flex justify-content-between"},et={class:"heading"},st={class:"d-flex flex-column"},ot={class:"d-flex flex-row justify-content-between"},it=["title"],nt={class:"d-flex"},lt=c(()=>o("h2",{class:"secondary-heading h4"},"Available Students",-1)),rt=c(()=>o("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1)),ht=[rt],dt=c(()=>o("p",null,[o("em",null,"Please note that a student can only be in one cohort.")],-1)),ct={key:0},at={style:{"list-style":"none"}},ut={class:"form-check"},ft={class:"control control-checkbox"},_t=["value","onUpdate:modelValue","disabled"],mt=c(()=>o("div",{class:"control_indicator"},null,-1)),pt={class:"students"},wt={class:"d-flex flex-column mt-4"},bt={class:"d-flex flex-row justify-content-between"},gt=["title"],vt={class:"d-flex"},yt=c(()=>o("h2",{class:"secondary-heading h4"},"Filters",-1)),Ct=c(()=>o("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1)),St=[Ct],xt={key:0};function kt(t,e,i,v,l,h){const d=g("FilterParent");return n(),r("div",Z,[o("span",tt,[o("h1",et,m(l.cohort.name),1),o("button",{class:"btn red-btn",onClick:e[0]||(e[0]=(...s)=>h.deleteCohort&&h.deleteCohort(...s))}," Delete ")]),o("div",st,[o("div",ot,[o("div",{class:"log-type",onClick:e[1]||(e[1]=s=>l.showMembers=!l.showMembers),"b-on-hover":"",title:l.showMembers?"collapse":"expand"},[o("div",nt,[lt,(n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([l.showMembers?"arrow-point-down mb-2":"arrow-point-up "])},ht,2))]),dt],8,it)])]),l.showMembers?(n(),r("div",ct,[o("ul",at,[(n(!0),r(a,null,f(l.students,s=>(n(),r("li",null,[o("div",ut,[o("label",ft,[$(o("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":F=>s.isMember=F,disabled:!!s.unavailable},null,8,_t),[[B,s.isMember]]),mt]),o("span",pt,m(s.username),1)])]))),256))]),o("button",{class:"green-btn btn",onClick:e[2]||(e[2]=(...s)=>h.submit&&h.submit(...s))},"Submit")])):u("",!0),o("div",wt,[o("div",bt,[o("div",{class:"log-type",onClick:e[3]||(e[3]=s=>l.showFilters=!l.showFilters),"b-on-hover":"",title:l.showFilters?"collapse":"expand"},[o("div",vt,[yt,(n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([l.showFilters?"arrow-point-down mb-2":"arrow-point-up "])},St,2))])],8,gt)])]),C(z,{name:"dropdown"},{default:L(()=>[l.showFilters?(n(),r("div",xt,[C(d)])):u("",!0)]),_:1})])}const Ft=b(Y,[["render",kt],["__scopeId","data-v-87c7dbd8"]]),It=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"}));export{Ft as C,X as F,It as a,k as u};
