import{_ as f,y as g,r as m,o as c,c as h,a,t as _,j as p,f as S}from"./main-a5607f73.js";import{u as b}from"./TeacherAnalyticsStore-3e92a304.js";import{u as B}from"./AnalyticsStore-c1cccdb3.js";import"./transform-af9a74a2.js";import{l as w,c as A,b as x}from"./linear-5b188edc.js";import{m as F,b as j}from"./continuous-7328829e.js";import{s as v}from"./sort-ed61f96d.js";import{s as k}from"./string-dd82ab4a.js";import{F as C}from"./FailedAssessmentsHorizontalBarChart-d673a022.js";import{D as R}from"./downloadCSVBtn-35c13d5d.js";const M={name:"StudentFailedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const l=document.getElementById("fails-by-subject-chart-container").clientWidth,u=document.getElementById("fails-by-subject-chart-container").clientHeight,s=w().domain([0,F(this.data,t=>t.quantity)]).range([200,l-0]),i=j().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,u-0]).padding(.2);s.tickFormat(20);const r=k("#fails-by-subject-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,"100%","100%"]).attr("preserveAspectRatio","xMinYMin");r.append("g").selectAll().data(this.data).join("rect").attr("x",s(0)).attr("y",t=>i(t.name)).attr("width",t=>s(t.quantity)-s(0)).attr("height",i.bandwidth()).attr("fill",function(t){return t.name=="Language"?"DarkMagenta":t.name=="Mathematics"?"blue":t.name=="Science & Invention"?"purple":t.name=="Computer Science"?"deeppink":t.name=="Dangerous Ideas"?"brown":t.name=="History"?"cyan":t.name=="Life"?"magenta":"#ff7f0e"}),r.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>s(t.quantity)).attr("y",t=>i(t.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(y=>s(y.quantity)-s(0)<20).attr("dx",4).attr("fill","white").attr("text-anchor","start")),r.append("g").attr("transform","translate(0,0)").call(A(s).ticks(0)).call(t=>t.select(".domain").remove()),r.append("g").attr("transform","translate(200,0)").attr("style","font-size: 16px").call(x(i).tickSizeOuter(0))}};function I(n,e,d,o,l,u){return null}const z=f(M,[["render",I]]);const H={setup(){const n=g(),e=b(),d=B();return{usersStore:n,teacherAnalyticsStore:e,analyticsStore:d}},components:{FailedAssessmentsHorizontalBarChart:C,StudentFailedAssessmentsByRootSubjectHorizontalBarChart:z,DownloadCSVBtn:R},data(){return{studentId:this.$route.params.studentId,studentName:null}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const n=this.usersStore.users.find(e=>e.id===this.studentId);n&&(this.studentName=n.username),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),await this.analyticsStore.getStudentFailedAssessmentsBySubject(this.studentId),this.isLoaded=!0},methods:{}},N={class:"container chart-page"},D={class:"d-flex justify-content-between w-100"},V={class:"tertiary-heading h4"},L={class:"row h-100"},T={class:"col-md"},$={id:"fails-by-subject-chart-container"},q={key:1},E={class:"col-md position-relative"},O={id:"fails-by-skill-chart-container"},U={key:1};function W(n,e,d,o,l,u){const s=m("StudentFailedAssessmentsByRootSubjectHorizontalBarChart"),i=m("DownloadCSVBtn"),r=m("FailedAssessmentsHorizontalBarChart");return c(),h("div",N,[a("span",D,[e[0]||(e[0]=a("h1",{class:"heading h4"},"Multiple fails",-1)),a("h2",V,_(l.studentName),1)]),a("div",L,[a("div",T,[e[1]||(e[1]=a("h3",{class:"secondary-heading h5"},"By subject",-1)),a("div",$,[o.analyticsStore.studentRootSubjectsFailedAssessments.length>0?(c(),p(s,{key:0,data:o.analyticsStore.studentRootSubjectsFailedAssessments},null,8,["data"])):(c(),h("p",q,"No data yet"))])]),a("div",E,[e[2]||(e[2]=a("h3",{class:"secondary-heading h5"},"By skill",-1)),a("div",O,[S(i,{data:o.teacherAnalyticsStore.studentMultipleFails,fileName:`Assessment Status Report - ${l.studentName}`,toolTip:"Download failed assessments data as CSV",class:"position-absolute download-btn"},null,8,["data","fileName"]),o.teacherAnalyticsStore.studentMultipleFails.length>0?(c(),p(r,{key:0,data:o.teacherAnalyticsStore.studentMultipleFails,colour:"darkred"},null,8,["data"])):(c(),h("p",U," This student has not failed any assessments more than once yet. "))])])])])}const st=f(H,[["render",W],["__scopeId","data-v-6191698f"]]);export{st as default};
