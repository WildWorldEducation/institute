import{u as d}from"./CohortsStore-b6ead073.js";import{_ as u,e as m,r as n,o as e,c as r,a as i,t as p,j as k,b as v,f as y}from"./main-0db18a32.js";import{C as S}from"./CohortSkillActivityChart-2d39cf58.js";import{D as f}from"./downloadCSVBtn-6d425410.js";import"./transform-af9a74a2.js";import"./string-dd82ab4a.js";import"./continuous-7328829e.js";import"./linear-5b188edc.js";const A={setup(){const o=d(),t=m();return{cohortsStore:o,userDetailsStore:t}},data(){return{cohortId:this.$route.params.cohortId,cohortName:"",visitedSkills:[],skillActivities:[],skillActivitiesDownloadData:[]}},components:{CohortSkillActivityChart:S,DownloadCSVBtn:f},async created(){this.cohortsStore.cohorts.length<1&&await this.cohortsStore.getCohorts(this.userDetailsStore.userId);const o=this.cohortsStore.cohorts.find(t=>t.id==this.cohortId);o?(this.cohortName=o.name,await this.getCohortSkillActivityReport()):this.cohortId==="all-students"?(this.cohortName="All Students",await this.getAllStudentsSkillActivityReport()):console.error("Cohort not found for ID:",this.cohortId),this.skillActivities=this.skillActivities.map(t=>({...t,quantity:this.millisecondsToHours(t.quantity,2)}))},mounted(){},methods:{async getCohortSkillActivityReport(){try{const o=await fetch(`/student-analytics/cohort-skill-activity-report/${this.cohortId}`);if(!o.ok)throw new Error("Network response was not ok");this.skillActivities=await o.json(),this.skillActivitiesDownloadData=this.skillActivities.map(t=>({skill:t.name,minutesSpent:this.millisecondsToHours(t.quantity,2)}))}catch(o){console.error("Error fetching skill activity report:",o)}},async getAllStudentsSkillActivityReport(){try{const o=await fetch(`/student-analytics/all-student-cohort-activity/instructor/${this.userDetailsStore.userId}`);if(!o.ok)throw new Error("Network response was not ok");this.skillActivities=await o.json(),this.skillActivitiesDownloadData=this.skillActivities.map(t=>({skill:t.name,minutesSpent:this.millisecondsToHours(t.quantity,2)}))}catch(o){console.error("Error fetching skill activity report for all students:",o)}},visitedDate(o){return new Date(o).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},millisecondsToHours(o,t){return(o/36e5).toFixed(t)}}},w={class:"container"},D={class:"d-flex justify-content-between w-100"},_={class:"d-flex align-items-center"},g={class:"secondary-heading h3 mt-1"},C={key:0,class:"mb-4"},N={key:1};function I(o,t,l,a,s,j){const c=n("DownloadCSVBtn"),h=n("CohortSkillActivityChart");return e(),r("div",w,[i("span",D,[t[0]||(t[0]=i("h1",{class:"heading"},"Skill Activity Report",-1)),i("div",_,[i("h2",g,p(s.cohortName),1),this.skillActivities.length>0?(e(),k(c,{key:0,data:s.skillActivitiesDownloadData,fileName:`${s.cohortName}-skill-activity.csv`},null,8,["data","fileName"])):v("",!0)])]),this.skillActivities.length>0?(e(),r("div",C,[y(h,{data:s.skillActivities,colour:"#4CAF50"},null,8,["data"])])):(e(),r("div",N,t[1]||(t[1]=[i("p",null,"No skills visited by this cohort.",-1)])))])}const T=u(A,[["render",I]]);export{T as default};
