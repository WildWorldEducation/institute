import{_ as c,r as h,o as e,c as r,a as n,F as _,x as S,f,l as k,t as d,e as p,g,y,k as L,b as A}from"./main-c88d736d.js";import{u as D}from"./AssessmentsStore-9111cf4b.js";import{u as v}from"./InstructorStudentsStore-db096a94.js";const w={props:{assessments:{type:Array,required:!0}},setup(){return{}},data(){return{}},computed:{},methods:{}},I={class:"container-fluid"},$={id:"list-body"},x={key:0},M={class:"assessment"},U={id:"student-name"},b={id:"skill-name"},N={id:"date"},B={key:1,class:"empty-message"};function V(s,t,i,o,a,m){const l=h("RouterLink");return e(),r("div",I,[t[0]||(t[0]=n("h2",{class:"secondary-heading white-heading h4"},"Mark Assessments",-1)),n("div",$,[i.assessments.length>0?(e(),r("div",x,[(e(!0),r(_,null,S(this.assessments,u=>(e(),r("div",M,[f(l,{class:"assessment-link",to:"/mark-assessment/"+u.id},{default:k(()=>[n("span",U,d(u.studentUsername)+", ",1),n("span",b,d(u.skillName)+", ",1),n("span",N,d(u.date),1)]),_:2},1032,["to"])]))),256))])):(e(),r("div",B," There are no assessments to be marked currently. "))])])}const j=c(w,[["render",V],["__scopeId","data-v-c5fb4c91"]]),C={setup(){const s=p(),t=D(),i=g(),o=y(),a=v();return s.getUserDetails(),{userDetailsStore:s,assessmentsStore:t,usersStore:o,skillsStore:i,instructorStudentsStore:a}},data(){return{assessments:[],studentIds:[]}},components:{MarkAssessment:j},async created(){(this.userDetailsStore.role=="instructor"||this.userDetailsStore.role=="partner")&&await this.fetchAssessments()},methods:{async fetchAssessments(){await this.assessmentsStore.getAssessments(),this.instructorStudentsStore.instructorStudentsList.length==0&&await this.instructorStudentsStore.getInstructorStudentsList();for(let s=0;s<this.instructorStudentsStore.instructorStudentsList.length;s++)this.userDetailsStore.userId==this.instructorStudentsStore.instructorStudentsList[s].instructor_id&&this.studentIds.push(this.instructorStudentsStore.instructorStudentsList[s].student_id);for(let s=0;s<this.assessmentsStore.assessments.length;s++)for(let t=0;t<this.studentIds.length;t++)this.assessmentsStore.assessments[s].student_id==this.studentIds[t]&&this.assessments.push(this.assessmentsStore.assessments[s]);for(let s=0;s<this.assessments.length;s++){let t=new Date(this.assessments[s].date).toDateString();this.assessments[s].date=t}this.usersStore.users.length==0&&await this.usersStore.getUsers();for(let s=0;s<this.assessments.length;s++)for(let t=0;t<this.usersStore.users.length;t++)this.assessments[s].student_id==this.usersStore.users[t].id&&(this.assessments[s].studentUsername=this.usersStore.users[t].username);this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let s=0;s<this.assessments.length;s++)for(let t=0;t<this.skillsStore.skillsList.length;t++)this.assessments[s].skill_id==this.skillsStore.skillsList[t].id&&(this.assessments[s].skillName=this.skillsStore.skillsList[t].name)}}},F={class:"container"};function R(s,t,i,o,a,m){const l=h("MarkAssessment");return e(),r("div",F,[o.userDetailsStore.role=="instructor"||this.userDetailsStore.role=="partner"?(e(),L(l,{key:0,assessments:a.assessments},null,8,["assessments"])):A("",!0)])}const z=c(C,[["render",R]]);export{z as default};
