import{_ as m,y as p,r as a,o as i,c as o,a as e,t as l,k as u,b as y,F as k}from"./main-2721b449.js";import{T as D}from"./TimePerSkillHorizontalBarChart-88619291.js";import{S as f}from"./StudentDurationPerDayLineChart-181edfbc.js";import"./transform-35b9fb9e.js";import"./linear-c968f95f.js";import"./band-039a8264.js";import"./ordinal-451cde74.js";import"./sort-855cf5d1.js";import"./line-8aa3dac8.js";import"./time-962c8065.js";import"./point-ea70dc51.js";const S={setup(){return{usersStore:p()}},components:{TimePerSkillHorizontalBarChart:D,StudentDurationPerDayLineChart:f},data(){return{studentId:this.$route.params.studentId,studentName:null,skillDurations:[],durationsPerDay:[],allSkillsDuration:0,isDataLoaded:!1}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const s=this.usersStore.users.find(t=>t.id===this.studentId);s&&(this.studentName=s.username),await this.getSkillDuration(),await this.getAllSkillsDuration(),await this.getStudentDurationPerDay(),this.isDataLoaded=!0},methods:{async getSkillDuration(){fetch(`/student-analytics/skill-durations/${this.studentId}`).then(s=>s.json()).then(s=>{this.skillDurations=s;for(let t=0;t<this.skillDurations.length;t++)this.skillDurations[t].formattedQuantity=this.millisToMinutesAndSeconds(this.skillDurations[t].quantity)}).catch(s=>{console.error("Error fetching last visited skills:",s)})},async getAllSkillsDuration(){fetch(`/student-analytics/all-skills-duration/${this.studentId}`).then(s=>s.json()).then(s=>{this.allSkillsDuration=s.duration}).catch(s=>{console.error("Error fetching last visited skills:",s)})},async getStudentDurationPerDay(){fetch(`/student-analytics/student-duration-per-day/${this.studentId}`).then(s=>s.json()).then(s=>{for(let t=0;t<s.length;t++)s[t].formattedQuantity=s[t].quantity/(1e3*60),s[t].date=new Date(s[t].date);s.sort((t,r)=>t.date-r.date),this.durationsPerDay=s}).catch(s=>{console.error("Error fetching student duration per day:",s)})},millisToMinutesAndSeconds(s){var t=Math.floor(s/6e4),r=(s%6e4/1e3).toFixed(0);return t+":"+(r<10?"0":"")+r}}},g={class:"container"},P={class:"d-flex justify-content-between w-100"},T={class:"secondary-heading h3"},_={key:0},w={key:1},v={key:3};function C(s,t,r,B,n,d){const h=a("StudentDurationPerDayLineChart"),c=a("TimePerSkillHorizontalBarChart");return i(),o(k,null,[e("div",g,[e("span",P,[t[0]||(t[0]=e("h1",{class:"heading"},"Time Report",-1)),e("h2",T,l(n.studentName),1)]),t[5]||(t[5]=e("p",null,[e("em",null," Please note that time spent on external sources (e.g. websites) related to skills is not measured.")],-1)),n.isDataLoaded?(i(),o("div",_,[t[2]||(t[2]=e("h4",{class:"secondary-heading"},"Total time on platform",-1)),n.durationsPerDay.length>0?(i(),u(h,{key:0,data:n.durationsPerDay},null,8,["data"])):(i(),o("p",w,"There is no data to show yet.")),t[3]||(t[3]=e("h4",{class:"secondary-heading"},"All skills",-1)),e("p",null,l(d.millisToMinutesAndSeconds(this.allSkillsDuration)),1),t[4]||(t[4]=e("h4",{class:"secondary-heading"},"Minutes per skill",-1)),n.skillDurations.length>0?(i(),u(c,{key:2,data:n.skillDurations,colour:"darkgreen"},null,8,["data"])):(i(),o("div",v,t[1]||(t[1]=[e("p",null,"No skills visited by this student.",-1)])))])):y("",!0)]),t[6]||(t[6]=e("p",null,"Â ",-1))],64)}const H=m(S,[["render",C]]);export{H as default};
