import{_ as k,o as n,c as a,a as s,b as r,h as x,A as D,f as C,r as h,g as p,l as u,t as _,k as g,F as L,s as v,p as N,d as z}from"./main-2f162222.js";import{W as B}from"./WaitLoadingModal-67277ed2.js";import{S as F}from"./SuccessModal-6c535a59.js";import{F as O}from"./FailsModal-c6155b11.js";const I={props:["showApproveModal","approveSkill","closeModal"],data(){return{showModal:!1}},methods:{handleApproveSkill(){this.closeModal(),this.approveSkill()}},watch:{showApproveModal:{handler(i){this.showModal=i}}}},T={key:0,id:"myModal",class:"modal"},j={class:"modal-content"},V=s("div",{class:"d-flex gap-4"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"grey",width:"45",height:"45"},[s("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})]),s("p",null,"Approve this skill and add it to the site?")],-1),E={class:"d-flex justify-content-lg-between justify-content-md-end justify-content-between gap-2"},H=s("span",{class:"d-none d-md-block"}," No ",-1),q=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1),U=[H,q],P=s("span",{class:"d-none d-md-block"}," Yes ",-1),K=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1),W=[P,K];function J(i,e,t,w,l,o){return l.showModal?(n(),a("div",T,[s("div",j,[V,s("div",E,[s("button",{type:"button",class:"btn red-btn modal-btn",onClick:e[0]||(e[0]=(...d)=>t.closeModal&&t.closeModal(...d))},U),s("button",{type:"button",class:"btn green-btn modal-btn",onClick:e[1]||(e[1]=(...d)=>o.handleApproveSkill&&o.handleApproveSkill(...d))},W)])])])):r("",!0)}const R=k(I,[["render",J]]);const Y={props:["showDismissModal","dismissSkill","closeDismissModal"],data(){return{showModal:!1}},methods:{handleDismissClick(){this.closeDismissModal(),this.dismissSkill()}},watch:{showDismissModal:{handler(i){console.log(i),this.showModal=i}}}},G={key:0,class:"modal"},Q={class:"modal-content"},X=s("div",{class:"d-flex gap-4"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"grey",width:"45",height:"45"},[s("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})]),s("p",null,"Permanently dismiss this suggested skill?")],-1),Z={class:"d-flex justify-content-lg-between justify-content-md-end justify-content-between gap-2"},$=s("span",{class:"d-none d-md-block"}," No ",-1),ss=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1),es=[$,ss],ls=s("span",{class:"d-none d-md-block"}," Yes ",-1),is=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1),ts=[ls,is];function os(i,e,t,w,l,o){return l.showModal?(n(),a("div",G,[s("div",Q,[X,s("div",Z,[s("button",{type:"button",class:"btn red-btn modal-btn",onClick:e[0]||(e[0]=d=>t.closeDismissModal())},es),s("button",{type:"button",class:"btn green-btn modal-btn",onClick:e[1]||(e[1]=(...d)=>o.handleDismissClick&&o.handleDismissClick(...d))},ts)])])])):r("",!0)}const ns=k(Y,[["render",os]]);const as={setup(){const i=x(),e=D(),t=C();return{skillsStore:i,usersStore:e,userDetailsStore:t}},data(){return{id:this.$route.params.id,newSkillAwaitingApproval:{},showApproveModal:!1,showDisMissModal:!1,severLoading:!1,showSuccessModal:!1,showFailsModal:!1,message:"",newSkillId:null}},async created(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),this.usersStore.users.length==0&&await this.usersStore.getUsers(),this.getNewSkillAwaitingApproval()},components:{ApproveNewSkillModal:R,DismissModal:ns,WaitLoadingModal:B,SuccessModal:F,FailsModal:O},methods:{async getNewSkillAwaitingApproval(){await fetch("/new-skills-awaiting-approval/show/"+this.id).then(function(i){return i.json()}).then(i=>{this.newSkillAwaitingApproval=i,this.newSkillAwaitingApproval.type=="domain"&&(this.newSkillAwaitingApproval.type="category");for(let e=0;e<this.skillsStore.skillsList.length;e++)this.skillsStore.skillsList[e].id==this.newSkillAwaitingApproval.parent&&(this.newSkillAwaitingApproval.parentName=this.skillsStore.skillsList[e].name,this.newSkillAwaitingApproval.parentUrl=this.skillsStore.skillsList[e].url);for(let e=0;e<this.usersStore.users.length;e++)this.usersStore.users[e].id==this.newSkillAwaitingApproval.user_id&&(this.newSkillAwaitingApproval.userName=this.usersStore.users[e].username)})},dismissSkill(){if(fetch("/new-skills-awaiting-approval/"+this.id+"?action=dismiss",{method:"DELETE"}).error){this.message="Failed to dismiss suggested skill",this.showFailsModal=!0;return}this.message="Successfully dismissed suggested skill",this.showSuccessModal=!0},approveSkill(){this.severLoading=!0;const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.newSkillAwaitingApproval.name,mastery_requirements:this.newSkillAwaitingApproval.mastery_requirements,icon_image:this.newSkillAwaitingApproval.icon_image,type:this.newSkillAwaitingApproval.type,level:this.newSkillAwaitingApproval.level})};var e=`/new-skills-awaiting-approval/accept/${this.newSkillAwaitingApproval.id}`;fetch(e,i).then(t=>((t.error||t.status===500)&&(this.message="Failed to add new skill",this.showFailsModal=!0),t.json())).then(t=>{this.newSkillId=t.newSkillId}).then(()=>{const t=fetch("/new-skills-awaiting-approval/"+this.id+"?action=approve",{method:"DELETE"});if(t.error){console.err(t.error),this.message="Failed to remove from list of suggested new skills",this.showFailsModal=!0;return}this.message="Successfully added skill",this.severLoading=!1,this.showSuccessModal=!0}).then(()=>{const t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:"new_skill",contentId:this.newSkillId})};var w="/users/increase-reputation/"+this.userDetailsStore.userId+"/"+this.newSkillAwaitingApproval.user_id;fetch(w,t)})},handleSaveBtnClick(){this.showApproveModal=!0},hideApproveModal(){this.showApproveModal=!1},handleDisMissBtnClick(){this.showDisMissModal=!0},hideDismissModal(){this.showDisMissModal=!1},handleSuccessOKclick(){this.$router.push("/todo?nav=newSkillsList")},handleFailsOKclick(){this.showFailsModal=!1}}},c=i=>(N("data-v-be3b4a50"),i=i(),z(),i),ds={class:"container mt-3"},rs={id:"user-alert","b-on-hoover":"",title:"Click on the user name to see their user details"},cs=c(()=>s("div",null,"Submitted by",-1)),hs={class:"container mt-3"},ps={id:"skill-info-container"},ws={class:"heading"},_s=c(()=>s("hr",{class:"border border-2 opacity-100 hr"},null,-1)),ms={class:"row"},us={key:0,class:"col-md-8 order-2 order-md-1 info-box"},gs={class:"d-flex flex-column"},vs={class:"mastery-requirements"},ks=["innerHTML"],Ss={class:"col-md-4 order-1 order-md-2"},As={class:"info-box p-2 mb-2"},Ms=["src"],fs={key:1,class:"d-flex flex-column align-items-center"},ys=c(()=>s("div",{class:"no-image-warn"}," This Skill Does Not Have Icon Image. ",-1)),bs=c(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"80",height:"80"},[s("path",{d:"M448 80c8.8 0 16 7.2 16 16l0 319.8-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3L48 96c0-8.8 7.2-16 16-16l384 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"})],-1)),xs=[ys,bs],Ds={class:"mt-3 d-flex flex-column align-items-center"},Cs=c(()=>s("h2",{class:"h4 heading"},"Parent",-1)),Ls={class:"mt-3 d-flex flex-column align-items-center"},Ns=c(()=>s("h2",{class:"h4 heading"},"Type",-1)),zs={key:2,class:"mt-3 d-flex flex-column align-items-center"},Bs=c(()=>s("h2",{class:"h4 heading"},"Level",-1)),Fs={key:0},Os={key:1},Is={key:2},Ts={key:3},js={key:4},Vs=c(()=>s("p",null,"Â ",-1)),Es={class:"d-flex justify-content-end gap-3"};function Hs(i,e,t,w,l,o){const d=h("RouterLink"),S=h("router-link"),A=h("ApproveNewSkillModal"),M=h("DismissModal"),f=h("WaitLoadingModal"),y=h("SuccessModal"),b=h("FailsModal");return n(),a(L,null,[s("div",ds,[s("div",rs,[cs,p(d,{class:"normal-text-link",to:`/users?username=${l.newSkillAwaitingApproval.userName}`},{default:u(()=>[v(_(l.newSkillAwaitingApproval.userName),1)]),_:1},8,["to"])])]),s("div",hs,[s("div",ps,[s("div",null,[s("h1",ws,_(l.newSkillAwaitingApproval.name),1),_s]),s("div",ms,[l.newSkillAwaitingApproval.type!="category"?(n(),a("div",us,[s("div",gs,[s("div",vs,[s("div",{innerHTML:l.newSkillAwaitingApproval.mastery_requirements},null,8,ks)])])])):r("",!0),s("div",Ss,[s("div",As,[l.newSkillAwaitingApproval.icon_image?(n(),a("img",{key:0,src:l.newSkillAwaitingApproval.icon_image,class:"rounded img-fluid"},null,8,Ms)):(n(),a("div",fs,xs)),s("div",Ds,[Cs,p(d,{"b-on-hoover":"",title:"Click on parent name to see it details",class:"normal-text-link",to:`/skills/${l.newSkillAwaitingApproval.parentUrl}`},{default:u(()=>[v(_(l.newSkillAwaitingApproval.parentName),1)]),_:1},8,["to"])]),s("div",Ls,[Ns,s("div",null,_(l.newSkillAwaitingApproval.type),1)]),l.newSkillAwaitingApproval.type!="category"?(n(),a("div",zs,[Bs,l.newSkillAwaitingApproval.level=="grade_school"?(n(),a("span",Fs,"Grade School")):l.newSkillAwaitingApproval.level=="middle_school"?(n(),a("span",Os,"Middle School")):l.newSkillAwaitingApproval.level=="high_school"?(n(),a("span",Is,"High School")):l.newSkillAwaitingApproval.level=="college"?(n(),a("span",Ts,"College")):l.newSkillAwaitingApproval.level=="phd"?(n(),a("span",js,"PHD")):r("",!0)])):r("",!0)])])]),Vs,s("div",Es,[s("button",{class:"btn red-btn",onClick:e[0]||(e[0]=(...m)=>o.handleDisMissBtnClick&&o.handleDisMissBtnClick(...m))}," Dismiss "),p(S,{class:"btn primary-btn",to:"/new-skill-awaiting-approval/edit/"+l.id},{default:u(()=>[v(" Edit ")]),_:1},8,["to"]),s("button",{class:"btn primary-btn",onClick:e[1]||(e[1]=(...m)=>o.handleSaveBtnClick&&o.handleSaveBtnClick(...m))}," Approve ")])])]),p(A,{showApproveModal:l.showApproveModal,approveSkill:o.approveSkill,closeModal:o.hideApproveModal},null,8,["showApproveModal","approveSkill","closeModal"]),p(M,{dismissSkill:o.dismissSkill,closeDismissModal:o.hideDismissModal,showDismissModal:l.showDisMissModal},null,8,["dismissSkill","closeDismissModal","showDismissModal"]),l.severLoading?(n(),g(f,{key:0})):r("",!0),l.showSuccessModal?(n(),g(y,{key:1,message:l.message,handleOkClick:o.handleSuccessOKclick},null,8,["message","handleOkClick"])):r("",!0),l.showFailsModal?(n(),g(b,{key:2,message:l.message,handleOkClick:o.handleFailsOKclick},null,8,["message","handleOkClick"])):r("",!0)],64)}const Ws=k(as,[["render",Hs],["__scopeId","data-v-be3b4a50"]]);export{Ws as default};
