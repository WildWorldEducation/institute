import{_ as k,J as S,y as v,e as f,r as _,o as i,c as o,a as e,t as d,F as p,x as w,p as c,f as y,k as T,b as g,m as C}from"./main-dba12213.js";const x={setup(){const t=S(),s=v(),l=f();return{userSkillsStore:t,usersStore:s,userDetailsStore:l}},data(){return{studentId:this.$route.params.studentId,studentName:"",userSkills:[],isTutorialComplete:!1,showTutorialTip1:!1}},async created(){this.usersStore.users.length==0&&await this.usersStore.getUsers();for(let t=0;t<this.usersStore.users.length;t++)if(this.usersStore.users[t].id==this.studentId){this.studentName=this.usersStore.users[t].username;break}await this.userSkillsStore.getFilteredUnnestedList(this.studentId),await this.getGoals(),console.log(this.userSkills),this.checkIfTutorialComplete()},methods:{async getGoals(){const t=await fetch("/user-skills/goals/"+this.studentId+"/list");this.userSkills=await t.json();for(let s=0;s<this.userSkills.length;s++)await this.getGoalSteps(this.userSkills[s]);this.prepareGoals()},async getGoalSteps(t){const s=await fetch("/user-skills/"+this.studentId+"/"+t.skill_id+"/goal-steps/list");t.goalSteps=await s.json()},prepareGoals(){for(let t=0;t<this.userSkills.length;t++){let s=this.userSkillsStore.filteredUnnestedList.find(l=>l.id===this.userSkills[t].skill_id);this.userSkills[t].name=s.name,this.userSkills[t].level=s.level,this.userSkills[t].showSteps=!1;for(let l=0;l<this.userSkills[t].goalSteps.length;l++){let u=this.userSkillsStore.filteredUnnestedList.find(n=>n.id==this.userSkills[t].goalSteps[l].skill_id);this.userSkills[t].goalSteps[l].name=u.name,this.userSkills[t].goalSteps[l].level=u.level,this.userSkills[t].goalSteps[l].url=u.url,this.userSkills[t].goalSteps[l].isMastered=u.is_mastered}}},async deleteGoal(t){if(confirm("Are you sure you want to delete this goal?")==!0){const l=await fetch("/user-skills/"+this.studentId+"/"+t,{method:"DELETE"});l.error&&console.log(l.error),await this.getGoals()}},async checkIfTutorialComplete(){const s=await(await fetch("/users/check-tutorial-progress/student-goals/"+this.userDetailsStore.userId)).json();s==0?(this.isTutorialComplete=!1,this.showTutorialTip1=!0):s==1&&(this.isTutorialComplete=!0)},progressTutorial(t){t==1&&(this.showTutorialTip1=!1,this.markTutorialComplete())},restartTutorial(){this.showTutorialTip1=!0,this.isTutorialComplete=!1},markTutorialComplete(){let t="/users/mark-tutorial-complete/student-goals/"+this.userDetailsStore.userId;fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"}})}}},L={class:"container p-3 bg-light rounded"},b={class:"d-flex justify-content-between"},I={class:"heading"},M={key:0},z={id:"goal-list"},G={class:"d-flex"},V={class:"goal h4"},B=["onClick"],j={key:0,width:"18",height:"18",class:"primary-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},N={key:1,width:"18",height:"18",class:"primary-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},U=["onClick"],D={key:0},O={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"primary-icon",width:"20",height:"20"},E={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",class:"primary-icon",width:"20",height:"20"},H={key:1},F={key:2,class:"modal"},q={class:"modal-content"},A={key:0};function P(t,s,l,u,n,h){const m=_("router-link");return i(),o("div",L,[e("div",b,[e("h1",I,d(n.studentName),1),e("button",{class:"btn primary-btn me-1",onClick:s[0]||(s[0]=(...r)=>h.restartTutorial&&h.restartTutorial(...r))},s[2]||(s[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",fill:"white"},[e("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)]))]),n.userSkills.length>0?(i(),o("div",M,[s[8]||(s[8]=e("h2",{class:"secondary-heading"},"Goal Progress",-1)),e("div",z,[(i(!0),o(p,null,w(n.userSkills,r=>(i(),o("div",null,[e("div",G,[e("h2",V,[c(d(r.name)+" ",1),e("button",{class:"btn",onClick:a=>r.showSteps=!r.showSteps},[r.showSteps?(i(),o("svg",N,s[4]||(s[4]=[e("path",{d:"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"},null,-1)]))):(i(),o("svg",j,s[3]||(s[3]=[e("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"},null,-1)])))],8,B),e("button",{class:"btn",onClick:a=>h.deleteGoal(r.skill_id)},s[5]||(s[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"18",height:"18",class:"primary-icon"},[e("path",{d:"M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"})],-1)]),8,U)])]),r.showSteps?(i(),o("ul",D,[(i(!0),o(p,null,w(r.goalSteps,a=>(i(),o("li",null,[a.isMastered!=1?(i(),o("svg",O,s[6]||(s[6]=[e("path",{d:"M384 80c8.8 0 16 7.2 16 16l0 320c0 8.8-7.2 16-16 16L64 432c-8.8 0-16-7.2-16-16L48 96c0-8.8 7.2-16 16-16l320 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32z"},null,-1)]))):(i(),o("svg",E,s[7]||(s[7]=[e("path",{d:"M64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80zM0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"},null,-1)]))),e("span",{class:C(["rounded pe-2",{"grade-school":a.level=="grade_school","middle-school":a.level=="middle_school","high-school":a.level=="high_school",college:a.level=="college",phd:a.level=="phd"}])},"Â  "+d(a.name),3)]))),256))])):g("",!0)]))),256))])])):(i(),o("div",H,[c(d(n.studentName)+" does not yet have any goals assigned. Click ",1),y(m,{to:"/student/"+this.studentId+"/skills",target:"_blank"},{default:T(()=>s[9]||(s[9]=[c("here",-1)])),_:1,__:[9]},8,["to"]),s[10]||(s[10]=c(" to assign some. ",-1))])),n.showTutorialTip1?(i(),o("div",F,[e("div",q,[n.showTutorialTip1?(i(),o("div",A,[s[11]||(s[11]=e("p",null," On this page, you can see a list of any skills that you have assigned to your student to master. ",-1)),s[12]||(s[12]=e("p",null," It also includes skills they have assigned to themselves. ",-1)),e("button",{class:"btn primary-btn",onClick:s[1]||(s[1]=r=>h.progressTutorial(1))}," close ")])):g("",!0)])])):g("",!0)])}const K=k(x,[["render",P]]);export{K as default};
