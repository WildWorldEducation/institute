import{u as I}from"./AnalyticsStore-df08e50f.js";import{u as B}from"./TeacherAnalyticsStore-7ce6b23f.js";import{_ as w,o as m,c as f,e as M,r as _,a as t,f as y,l as S,j as g,k as C,b as k,F as P,x as q,t as H}from"./main-0345d612.js";import{c as L,S as R}from"./StudentProgressChart-c51dcdf4.js";import"./transform-af9a74a2.js";import{u as j,l as V}from"./line-85f04100.js";import{e as F}from"./extent-4cf1c809.js";import{l as $,a as N,b as A,c as z}from"./linear-5b188edc.js";import{m as T,o as E,b as O}from"./continuous-7328829e.js";import{s as b}from"./string-dd82ab4a.js";import{s as Y}from"./sort-ed61f96d.js";import"./colors-98f238a0.js";import"./time-0457d93b.js";import"./point-ea70dc51.js";const Q={name:"SchoolTimeChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(s){if(s.student.length==0)this.axisData=s.tenant;else if(s.tenant.length==0)this.axisData=s.student;else{const r=s.student.reduce((D,x)=>Math.max(D,x.quantity),-1/0),v=s.tenant.reduce((D,x)=>Math.max(D,x.quantity),-1/0);r>=v?this.axisData=s.student:this.axisData=s.tenant}const a=Object.entries(s).map(([r,v])=>({name:r,values:v})),i=document.getElementById("time-chart-container").clientWidth,n=document.getElementById("time-chart-container").clientHeight,h=5,p=0,l=25,u=25,o=j(F(this.axisData,r=>r.date),[u,i-p]),c=$([0,T(this.axisData,r=>r.formattedQuantity)],[n-l,h]);E().domain(a.map(r=>r.name)).range(L);const d=V().x(r=>o(r.date)).y(r=>c(r.formattedQuantity)),e=b("#time-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(i,n),+Math.min(i,n)]).attr("preserveAspectRatio","xMinYMin");e.append("g").attr("transform",`translate(0,${n-l})`).call(N(o).ticks(s.length).tickSizeOuter(0)),e.append("g").attr("transform",`translate(${u},0)`).call(A(c).ticks(n/40)).call(r=>r.select(".domain").remove()).call(r=>r.selectAll(".tick line").clone().attr("x2",i-u-p).attr("stroke-opacity",.2)).call(r=>r.append("text").attr("x",-u).attr("y",10).attr("fill","currentColor").attr("text-anchor","start")),e.selectAll(".line").data(a).join("path").attr("fill","none").attr("stroke",r=>r.name=="student"?"RoyalBlue":"#ff7f0e").attr("stroke-width",3).attr("d",r=>d(r.values))}}};function W(s,a,i,n,h,p){return null}const U=w(Q,[["render",W]]),G={name:"StudentComparisonChart",props:["data","colour"],data(){return{}},mounted(){},methods:{createChart(s){b("#student-comparison-container");const a=25,i=0,n=20,h=10,p=200,l=700,u=Math.ceil((s.length+.1)*a)+i+h,o=$().domain([0,T(s,e=>e.quantity)]).range([p,l-n]),c=O().domain(Y(s,e=>-e.quantity).map(e=>e.name)).rangeRound([i,u-h]).padding(.1);o.tickFormat(20);const d=b("#student-comparison-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,l,u]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");d.append("g").selectAll().data(s).join("rect").attr("x",o(0)).attr("y",e=>c(e.name)).attr("width",e=>o(e.quantity)-o(0)).attr("height",c.bandwidth()).attr("fill",function(e){return e.name=="Language"?"DarkMagenta":e.name=="Mathematics"?"blue":e.name=="Science & Invention"?"purple":e.name=="Computer Science"?"deeppink":e.name=="Dangerous Ideas"?"brown":e.name=="History"?"cyan":e.name=="Life"?"magenta":"#ff7f0e"}),d.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(s).join("text").attr("x",e=>o(e.quantity)).attr("y",e=>c(e.name)+c.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>e.quantity).call(e=>e.filter(r=>o(r.quantity)-o(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),d.append("g").attr("transform",`translate(0,${i})`).call(z(o).ticks(0)).call(e=>e.select(".domain").remove()),d.append("g").attr("transform",`translate(${p},0)`).attr("style","font-size: 16px").call(A(c).tickSizeOuter(0))}}},J={id:"student-comparison-container"};function K(s,a,i,n,h,p){return m(),f("div",J)}const X=w(G,[["render",K]]);const Z={name:"Student-Dashboard",setup(){const s=M(),a=I(),i=B();return{userDetailsStore:s,analyticsStore:a,teacherAnalyticsStore:i}},data(){return{showSidebar:!0,screenWidth:screen.width,isStudentData:!0,isSchoolData:!0,isLanguageData:!1,isMathData:!1,isHistoryData:!1,isLifeData:!1,isCSData:!1,isSAndIData:!1,isDIData:!1,progressData:{student:[],average:[]},isAboveTheCurve:!1}},components:{StudentProgressChart:R,StudentComparisonChart:X,StudentTimeChart:U},async created(){await this.analyticsStore.getStudentProgress(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userDetailsStore.userId),await this.analyticsStore.getStudentTime(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.teacherAnalyticsStore.getStudentMultipleFails(this.userDetailsStore.userId),this.analyticsStore.progress.student[this.analyticsStore.progress.student.length-1].quantity>this.analyticsStore.progress.tenant[this.analyticsStore.progress.tenant.length-1].quantity&&(this.isAboveTheCurve=!0),await this.HandleProgressData(),await this.HandleComparisonData(),await this.HandleTimeData()},methods:{async HandleProgressData(){if(this.isStudentData){this.progressData.student=[];for(let s=0;s<this.analyticsStore.progress.student.length;s++)this.progressData.student.push(this.analyticsStore.progress.student[s])}else this.progressData.student=[];if(this.isSchoolData){this.progressData.average=[];for(let s=0;s<this.analyticsStore.progress.tenant.length;s++)this.progressData.average.push(this.analyticsStore.progress.tenant[s])}else this.progressData.average=[];this.$nextTick(()=>{this.$refs.progressChart&&this.$refs.progressChart.createChart(this.progressData)})},async HandleComparisonData(){this.$nextTick(()=>{this.$refs.comparisonChart&&this.$refs.comparisonChart.createChart(this.analyticsStore.studentRootSubjectsPassedAssessments)})},async HandleTimeData(){this.$nextTick(()=>{this.$refs.timeChart&&this.$refs.timeChart.createChart(this.analyticsStore.time)})},toggleSidebar(){this.showSidebar=!this.showSidebar}}},tt={class:"dashboard"},et={class:"main"},st={class:"content container-fluid"},at={class:"dash-row row"},rt={class:"col-md-6 h-100 position-relative"},nt={id:"progress-chart-container"},it={class:"col-md-6"},ot={id:"comparison-chart-container"},lt={class:"dash-row row"},ct={class:"col-md h-100 position-relative"},dt={id:"time-chart-container"},ht={class:"col-md position-relative"},ut={class:"row"},mt={class:"col-md"},pt={key:0},gt={key:1},ft={class:"col-md"};function yt(s,a,i,n,h,p){const l=_("RouterLink"),u=_("StudentProgressChart"),o=_("StudentComparisonChart"),c=_("StudentTimeChart");return m(),f("div",tt,[t("div",et,[t("div",st,[t("div",at,[t("div",rt,[y(l,{to:"/my-progress/skills",class:"",target:"_blank"},{default:S(()=>a[0]||(a[0]=[t("h2",{class:"heading h5"},"Progress over time",-1)])),_:1,__:[0]}),a[1]||(a[1]=t("figcaption",{class:""},[t("span",{style:{color:"green"}},"You"),g(" vs "),t("span",{style:{color:"#ff7f0e"}},"school average")],-1)),t("div",nt,[h.progressData.student.length>0||h.progressData.average.length>0?(m(),C(u,{key:0,ref:"progressChart"},null,512)):k("",!0)])]),t("div",it,[t("div",ot,[a[2]||(a[2]=t("h2",{class:"heading h5 mt-1"},"Progress comparison",-1)),n.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(m(),C(o,{key:0,ref:"comparisonChart",data:n.analyticsStore.studentRootSubjectsPassedAssessments,colour:"#5f31dd"},null,8,["data"])):k("",!0)])])]),t("div",lt,[t("div",ct,[y(l,{to:"/my-progress/time",target:"_blank"},{default:S(()=>a[3]||(a[3]=[t("h2",{class:"heading h5"},"Study time",-1)])),_:1,__:[3]}),a[4]||(a[4]=t("figcaption",{class:""},[t("span",{style:{color:"blue"}},"You"),g(" vs "),t("span",{style:{color:"#ff7f0e"}},"school average")],-1)),t("div",dt,[n.analyticsStore.time.student.length>0||n.analyticsStore.time.tenant.length>0?(m(),C(c,{key:0,ref:"timeChart"},null,512)):k("",!0)])]),t("div",ht,[t("div",ut,[t("div",mt,[y(l,{to:"/my-progress/super-challenging",class:"col",target:"_blank"},{default:S(()=>a[5]||(a[5]=[t("h2",{class:"h5 heading"}," Consider asking for help ",-1)])),_:1,__:[5]}),n.teacherAnalyticsStore.studentMultipleFails.length>0?(m(),f("ul",pt,[(m(!0),f(P,null,q(n.teacherAnalyticsStore.studentMultipleFails,d=>(m(),f("li",{class:"failed-skills",key:d.id},[y(l,{to:"/skills/"+d.url,target:"_blank"},{default:S(()=>[g(H(d.name),1)]),_:2},1032,["to"])]))),128))])):(m(),f("p",gt,"Nothing to worry about yet"))]),t("div",ft,[a[9]||(a[9]=t("h2",{class:"h5 heading"},"Stats",-1)),t("ul",null,[a[7]||(a[7]=t("li",null,[t("strong",null,"Skills passed:"),g(" 25")],-1)),a[8]||(a[8]=t("li",null,[t("strong",null,"Total time spent:"),g(" 5:00 ")],-1)),t("li",null,[y(l,{to:"/my-progress/tokens",target:"_blank"},{default:S(()=>a[6]||(a[6]=[t("strong",null,"AI usage:",-1),g(" 10,000",-1)])),_:1,__:[6]})])])])])])])])])])}const Mt=w(Z,[["render",yt],["__scopeId","data-v-0771bc52"]]);export{Mt as default};
