import{u as g}from"./CohortsStore-da451cec.js";import{_ as A,f as b,r as c,o as a,c as i,a as s,t as k,b as P,k as l,g as f,p as w,d as B}from"./main-63ddc164.js";import{u as j}from"./AnalyticsStore-c9914b70.js";import{C as v}from"./CohortProgressLineChart-0b6df1eb.js";import{C as D,a as R,b as L,c as M}from"./CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart-ab13e0ff.js";import{C as I}from"./CohortDurationPerDayLineChart-8be36eef.js";import{C as T}from"./CohortSkillActivityChart-0168a7f3.js";import"./transform-4d0f7c8f.js";import"./string-c67ea49d.js";import"./line-bfb1ca50.js";import"./time-ce17bce2.js";import"./continuous-e5db47ab.js";import"./point-ea70dc51.js";import"./linear-841004c4.js";import"./colors-98f238a0.js";import"./sort-fcaf8f38.js";const z={setup(){const t=g(),e=b(),r=j();return{cohortsStore:t,userDetailsStore:e,analyticsStore:r}},data(){return{teacherId:this.$route.params.teacherId,isMobileCheck:window.innerWidth,percentageStudentsMasteredOneSkill:[],isLoaded:!1,classProgress:[],durationsPerDay:[]}},async created(){await this.getTenantClassProgress(),await this.getInstructorPercentageStudentsMasteredAtLeastOneSkill(),await this.getTenantClassDurationPerDay(),await this.analyticsStore.getTeacherClassSkillActivityReport(this.teacherId),await this.analyticsStore.getTeacherClassFailedAssessmentsBySubject(this.teacherId),await this.analyticsStore.getTeacherClassPassedAssessmentsBySubject(this.teacherId),await this.analyticsStore.getTeacherClassAttemptedAssessmentsBySubject(this.teacherId)},components:{CohortPercentageStudentsMasteredAtLeastOneSkillPieChart:D,CohortProgressLineChart:v,CohortDurationPerDayLineChart:I,CohortSkillActivityChart:T,CohortFailedAssessmentsByRootSubjectHorizontalBarChart:R,CohortPassedAssessmentsByRootSubjectHorizontalBarChart:L,CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart:M},methods:{async getTenantClassProgress(){fetch(`/student-analytics/all-students-progress/${this.teacherId}`).then(t=>t.json()).then(t=>{for(let e=0;e<t.length;e++)t[e].date=new Date(t[e].date);t.sort((e,r)=>e.date-r.date),this.classProgress=t}).catch(t=>{console.error("Error fetching student progress:",t)})},async getInstructorPercentageStudentsMasteredAtLeastOneSkill(){try{const t=await fetch(`/student-analytics/percentage-students-mastered-one-skill/instructor/${this.teacherId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();this.percentageStudentsMasteredOneSkill=Array.isArray(e)?e:[],this.isLoaded=!0,await this.$refs.cohortPercentageStudentsMasteredAtLeastOneSkillPieChart.generateChart()}catch(t){console.error("Error fetching all students failed assessments:",t),this.percentageStudentsMasteredOneSkill=[]}},async getTenantClassDurationPerDay(){fetch(`/student-analytics/all-students-duration-per-day/${this.teacherId}`).then(t=>t.json()).then(t=>{for(let e=0;e<t.length;e++)t[e].formattedQuantity=t[e].quantity/(1e3*60),t[e].date=new Date(t[e].date);t.sort((e,r)=>e.date-r.date),this.durationsPerDay=t}).catch(t=>{console.error("Error fetching student duration per day:",t)})},millisToMinutesAndSeconds(t){var e=Math.floor(t/6e4),r=(t%6e4/1e3).toFixed(0);return e+":"+(r<10?"0":"")+r}}},o=t=>(w("data-v-ebaba9d7"),t=t(),B(),t),H={class:"container bg-light"},O={key:0,class:"row"},N={class:"secondary-heading h3"},F={class:"d-flex justify-content-between"},x=o(()=>s("h1",{class:"heading"},"Teacher Report",-1)),E=o(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[s("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),V=[E],q=o(()=>s("h2",{class:"secondary-heading"},"Engagement",-1)),Q=o(()=>s("h4",null,"Time on platform",-1)),U={key:2},W=o(()=>s("hr",{class:"mt-5 mb-5"},null,-1)),G=o(()=>s("h4",{class:"mt-4"},"Skills visited",-1)),J={key:4},K=o(()=>s("hr",{class:"mt-5 mb-5"},null,-1)),X=o(()=>s("h2",{class:"secondary-heading mt-5"},"Academics",-1)),Y=o(()=>s("h4",null,"Skill mastery progress",-1)),Z={key:6},$=o(()=>s("hr",{class:"mt-5 mb-5"},null,-1)),tt=o(()=>s("h4",{class:"mt-4"}," Percentage of students who completed at least one skill ",-1)),et=o(()=>s("hr",{class:"mt-5 mb-5"},null,-1)),st=o(()=>s("h3",{class:"secondary-heading"},"By subject",-1)),ot=o(()=>s("h4",{class:""},"Failed more than once",-1)),at={key:8},rt=o(()=>s("hr",{class:"mt-5 mb-5"},null,-1)),nt=o(()=>s("h4",{class:""},"Passed",-1)),it={key:10},ct=o(()=>s("hr",{class:"mt-5 mb-5"},null,-1)),lt=o(()=>s("h4",{class:""},"Attempted",-1)),ht={key:12};function dt(t,e,r,n,h,mt){const d=c("CohortDurationPerDayLineChart"),m=c("CohortSkillActivityChart"),u=c("CohortProgressLineChart"),_=c("CohortPercentageStudentsMasteredAtLeastOneSkillPieChart"),y=c("CohortFailedAssessmentsByRootSubjectHorizontalBarChart"),S=c("CohortPassedAssessmentsByRootSubjectHorizontalBarChart"),p=c("CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart");return a(),i("div",H,[h.isMobileCheck<576?(a(),i("div",O,[s("h1",N,k(this.cohortsStore.selectedCohort.name),1)])):P("",!0),s("div",F,[x,s("button",{class:"btn me-1",onClick:e[0]||(e[0]=(...C)=>t.$parent.restartTutorial&&t.$parent.restartTutorial(...C))},V)]),q,Q,h.durationsPerDay.length>0?(a(),l(d,{key:1,data:h.durationsPerDay,colour:"#5f31dd",ref:"cohortDurationPerDayLineChart"},null,8,["data"])):(a(),i("p",U,"No data available")),W,G,n.analyticsStore.cohortSkillActivities.length>0?(a(),l(m,{key:3,data:n.analyticsStore.cohortSkillActivities},null,8,["data"])):(a(),i("p",J,"No skills visited by this student.")),K,X,Y,h.classProgress.length>0?(a(),l(u,{key:5,data:h.classProgress,colour:"#5f31dd",ref:"cohortProgressLineChart"},null,8,["data"])):(a(),i("p",Z,"No data available")),$,tt,f(_,{ref:"cohortPercentageStudentsMasteredAtLeastOneSkillPieChart",class:"mb-5"},null,512),et,st,ot,n.analyticsStore.cohortRootSubjectsFailedAssessments.length>0?(a(),l(y,{key:7,data:n.analyticsStore.cohortRootSubjectsFailedAssessments,colour:"darkred",class:"mb-5"},null,8,["data"])):(a(),i("p",at,"No data yet")),rt,nt,n.analyticsStore.cohortRootSubjectsPassedAssessments.length>0?(a(),l(S,{key:9,data:n.analyticsStore.cohortRootSubjectsPassedAssessments,colour:"darkgreen",class:"mb-5"},null,8,["data"])):(a(),i("p",it,"No data yet")),ct,lt,n.analyticsStore.cohortRootSubjectsAttemptedAssessments.length>0?(a(),l(p,{key:11,data:n.analyticsStore.cohortRootSubjectsAttemptedAssessments,colour:"darkblue",class:"mb-5"},null,8,["data"])):(a(),i("p",ht,"No data yet"))])}const Dt=A(z,[["render",dt],["__scopeId","data-v-ebaba9d7"]]);export{Dt as default};
