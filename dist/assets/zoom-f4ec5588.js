import{_ as bt,B as Jt,r as Gt,o as R,k as Kt,l as lt,c as q,q as St,a as S,g as Ot,s as Et,t as Pt,b as ct,w as Wt,v as Qt,F as jt,z as te,T as ee,p as kt,d as zt,f as ne}from"./main-68046098.js";import{s as U,c as ie,d as oe,i as Bt,T as ht,b as ut}from"./transform-7263f110.js";const se={setup(){},props:["skill","showSkillPanel"],data(){return{treeType:"",isImageLoading:!0,currentSkillId:null,isMobileCheck:window.innerWidth}},mounted(){const t=Jt();this.treeType=t.name,this.skill&&(this.currentSkillId=this.skill.id)},watch:{skill(t){t&&(!this.currentSkillId||t.id!==this.currentSkillId)&&(this.isImageLoading=!0,this.currentSkillId=t.id)}},computed:{},methods:{hideInfoPanel(){this.$parent.showSkillPanel=!1},toggleChildNodes(){this.skill.show_children==0?this.$parent.toggleShowChildren(this.skill):this.$parent.toggleHideChildren(this.skill)},imageUrlAlternative(t){t.target.src="",this.isImageLoading=!1},imageLoaded(){this.isImageLoading=!1}}},Tt=t=>(kt("data-v-7a4b564a"),t=t(),zt(),t),re={class:"d-flex justify-content-between p-2 mb-3"},ae={class:"d-flex"},le=Tt(()=>S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"#888",width:"20",height:"20"},[S("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})],-1)),ce=[le],he={class:"secondary-heading h3 text-center"},ue={class:"image-container"},de={key:0,class:"image-placeholder"},fe=Tt(()=>S("div",{class:"spinner"},null,-1)),pe=[fe],me=["src"],ge=["innerHTML"],ye={key:0,class:"skill-introduction"},ve=Tt(()=>S("h2",{class:"h4"},"Subskills",-1)),_e={class:"list-container"};function xe(t,e,n,i,o,s){const l=Gt("router-link");return R(),Kt(ee,{name:"skillPanel"},{default:lt(()=>{var h,u;return[n.showSkillPanel?(R(),q("div",{key:0,class:St(["skill-panel-container text-center overflow-auto",o.treeType==="radial-tree"&&"radial-skill-panel"])},[S("div",null,[S("div",re,[S("div",ae,[Ot(l,{class:"btn primary-btn",target:"_blank",id:"skillLink",to:"/skills/"+n.skill.url,"b-on-hover":"",title:"Learn more"},{default:lt(()=>[Et("Learn More ")]),_:1},8,["to"])]),S("button",{class:"closebtn",onClick:e[0]||(e[0]=(...r)=>s.hideInfoPanel&&s.hideInfoPanel(...r)),"b-on-hover":"",title:"Close Panel "},ce)]),S("h1",he,Pt((h=n.skill)==null?void 0:h.name),1),S("div",ue,[o.isImageLoading?(R(),q("div",de,pe)):ct("",!0),Wt((R(),q("img",{src:n.skill.image_thumbnail_url,class:"rounded img-fluid mx-auto",onError:e[1]||(e[1]=(...r)=>s.imageUrlAlternative&&s.imageUrlAlternative(...r)),onLoad:e[2]||(e[2]=(...r)=>s.imageLoaded&&s.imageLoaded(...r)),key:n.skill.id},null,40,me)),[[Qt,!o.isImageLoading]])]),S("div",{class:St(["skill-introduction bg-white rounded p-2 text-start mt-2 mb-4",{"skill-introduction-mobile":o.isMobileCheck<576}]),innerHTML:n.skill.introduction},null,10,ge),((u=n.skill)==null?void 0:u.type)=="super"?(R(),q("div",ye,[ve,S("ul",_e,[(R(!0),q(jt,null,te(n.skill.subskills,r=>(R(),q("li",null,[Ot(l,{class:"btn mb-2",to:"/skills/"+r.url},{default:lt(()=>[Et(Pt(r.name),1)]),_:2},1032,["to"])]))),256))])])):ct("",!0)])],2)):ct("",!0)]}),_:1})}const Vn=bt(se,[["render",xe],["__scopeId","data-v-7a4b564a"]]);const we={setup(){},data(){return{oldScale:0}},computed:{},async mounted(){this.oldScale=this.$parent.scale},methods:{scaleTree(t){const e=this.$parent.context.canvas.width/2,n=this.$parent.context.canvas.height/2,i=this.$parent.scale+t,o=i/this.$parent.scale;let s=e+(this.$parent.panX-e)*o,l=n+(this.$parent.panY-n)*o;this.$parent.scale=i,this.oldScale=i,this.$parent.zoomInD3(i,s,l)},zoomIn(){this.$parent.scale<2&&this.scaleTree(.1)},zoomOut(){this.$parent.scale>.3&&this.scaleTree(-.1)}}},Mt=t=>(kt("data-v-d66ddf5c"),t=t(),zt(),t),$e={id:"zoomcontrols"},be=Mt(()=>S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[S("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"})],-1)),ke=[be],ze=Mt(()=>S("div",{class:"divider"},null,-1)),Te=Mt(()=>S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[S("path",{d:"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"})],-1)),Me=[Te];function Ie(t,e,n,i,o,s){return R(),q("div",$e,[S("div",{onClick:e[0]||(e[0]=(...l)=>s.zoomIn&&s.zoomIn(...l)),class:"zoom-button"},ke),ze,S("div",{onClick:e[1]||(e[1]=(...l)=>s.zoomOut&&s.zoomOut(...l)),class:"zoom-button"},Me)])}const qn=bt(we,[["render",Ie],["__scopeId","data-v-d66ddf5c"]]),ot=(t,e)=>{const n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},Se=(t,e)=>{const n=e.x-t.x,i=e.y-t.y;return Ee(Math.atan2(i,n))},Oe=(t,e,n)=>{const i={x:0,y:0};return n=yt(n),i.x=t.x-e*Math.cos(n),i.y=t.y-e*Math.sin(n),i},yt=t=>t*(Math.PI/180),Ee=t=>t*(180/Math.PI),Pe=t=>isNaN(t.buttons)?t.pressure!==0:t.buttons!==0,dt=new Map,Ct=t=>{dt.has(t)&&clearTimeout(dt.get(t)),dt.set(t,setTimeout(t,100))},rt=(t,e,n)=>{const i=e.split(/[ ,]+/g);let o;for(let s=0;s<i.length;s+=1)o=i[s],t.addEventListener?t.addEventListener(o,n,!1):t.attachEvent&&t.attachEvent(o,n)},Dt=(t,e,n)=>{const i=e.split(/[ ,]+/g);let o;for(let s=0;s<i.length;s+=1)o=i[s],t.removeEventListener?t.removeEventListener(o,n):t.detachEvent&&t.detachEvent(o,n)},Ht=t=>(t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t),Yt=()=>{const t=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:t,y:e}},Xt=(t,e)=>{e.top||e.right||e.bottom||e.left?(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left):(t.style.left=e.x+"px",t.style.top=e.y+"px")},It=(t,e,n)=>{const i=Rt(t);for(let o in i)if(i.hasOwnProperty(o))if(typeof e=="string")i[o]=e+" "+n;else{let s="";for(let l=0,h=e.length;l<h;l+=1)s+=e[l]+" "+n+", ";i[o]=s.slice(0,-2)}return i},Ce=(t,e)=>{const n=Rt(t);for(let i in n)n.hasOwnProperty(i)&&(n[i]=e);return n},Rt=t=>{const e={};return e[t]="",["webkit","Moz","o"].forEach(function(i){e[i+t.charAt(0).toUpperCase()+t.slice(1)]=""}),e},ft=(t,e)=>{for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},De=(t,e)=>{const n={};for(let i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)?n[i]=e[i]:t.hasOwnProperty(i)&&(n[i]=t[i]);return n},vt=(t,e)=>{if(t.length)for(let n=0,i=t.length;n<i;n+=1)e(t[n]);else e(t)},Ye=(t,e,n)=>({x:Math.min(Math.max(t.x,e.x-n),e.x+n),y:Math.min(Math.max(t.y,e.y-n),e.y+n)});var Xe="ontouchstart"in window,Le=!!window.PointerEvent,Ae=!!window.MSPointerEvent,K={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},G,Q={};Le?G=K.pointer:Ae?G=K.MSPointer:Xe?(G=K.touch,Q=K.mouse):G=K.mouse;function F(){}F.prototype.on=function(t,e){var n=this,i=t.split(/[ ,]+/g),o;n._handlers_=n._handlers_||{};for(var s=0;s<i.length;s+=1)o=i[s],n._handlers_[o]=n._handlers_[o]||[],n._handlers_[o].push(e);return n};F.prototype.off=function(t,e){var n=this;return n._handlers_=n._handlers_||{},t===void 0?n._handlers_={}:e===void 0?n._handlers_[t]=null:n._handlers_[t]&&n._handlers_[t].indexOf(e)>=0&&n._handlers_[t].splice(n._handlers_[t].indexOf(e),1),n};F.prototype.trigger=function(t,e){var n=this,i=t.split(/[ ,]+/g),o;n._handlers_=n._handlers_||{};for(var s=0;s<i.length;s+=1)o=i[s],n._handlers_[o]&&n._handlers_[o].length&&n._handlers_[o].forEach(function(l){l.call(n,{type:o,target:n},e)})};F.prototype.config=function(t){var e=this;e.options=e.defaults||{},t&&(e.options=De(e.options,t))};F.prototype.bindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[e]=function(){typeof n["on"+e]=="function"?n["on"+e].apply(n,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},rt(t,G[e],n._domHandlers_[e]),Q[e]&&rt(t,Q[e],n._domHandlers_[e]),n};F.prototype.unbindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},Dt(t,G[e],n._domHandlers_[e]),Q[e]&&Dt(t,Q[e],n._domHandlers_[e]),delete n._domHandlers_[e],this};function E(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=E.id,E.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}E.prototype=new F;E.constructor=E;E.id=0;E.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};E.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=Ce("borderRadius","50%"),n=It("transition","opacity",t),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",left:0,marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",left:0,marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5",transform:"translate(0px, 0px)"},ft(i.el,n),this.options.shape==="circle"&&ft(i.back,e),ft(i.front,e),this.applyStyles(i),this};E.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var n in t[e])this.ui[e].style[n]=t[e][n];return this};E.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};E.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};E.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};E.prototype.show=function(t){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),typeof t=="function"&&t.call(this)},e.options.fadeTime)),e};E.prototype.hide=function(t){var e=this;if(e.options.dataOnly)return e;if(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var n=e.options.mode==="dynamic"?"none":"block";e.ui.el.style.display=n,typeof t=="function"&&t.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick){const n=e.options.restJoystick,i={};i.x=n===!0||n.x!==!1?0:e.instance.frontPosition.x,i.y=n===!0||n.y!==!1?0:e.instance.frontPosition.y,e.setPosition(t,i)}return e};E.prototype.setPosition=function(t,e){var n=this;n.frontPosition={x:e.x,y:e.y};var i=n.options.fadeTime+"ms",o={};o.front=It("transition",["transform"],i);var s={front:{}};s.front={transform:"translate("+n.frontPosition.x+"px,"+n.frontPosition.y+"px)"},n.applyStyles(o),n.applyStyles(s),n.restTimeout=setTimeout(function(){typeof t=="function"&&t.call(n),n.restCallback()},n.options.fadeTime)};E.prototype.restCallback=function(){var t=this,e={};e.front=It("transition","none",""),t.applyStyles(e),t.trigger("rested",t.instance)};E.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};E.prototype.computeDirection=function(t){var e=t.angle.radian,n=Math.PI/4,i=Math.PI/2,o,s,l;if(e>n&&e<n*3&&!t.lockX?o="up":e>-n&&e<=n&&!t.lockY?o="left":e>-n*3&&e<=-n&&!t.lockX?o="down":t.lockY||(o="right"),t.lockY||(e>-i&&e<i?s="left":s="right"),t.lockX||(e>0?l="up":l="down"),t.force>this.options.threshold){var h={},u;for(u in this.direction)this.direction.hasOwnProperty(u)&&(h[u]=this.direction[u]);var r={};this.direction={x:s,y:l,angle:o},t.direction=this.direction;for(u in h)h[u]===this.direction[u]&&(r[u]=!0);if(r.x&&r.y&&r.angle)return t;(!r.x||!r.y)&&this.trigger("plain",t),r.x||this.trigger("plain:"+s,t),r.y||this.trigger("plain:"+l,t),r.angle||this.trigger("dir dir:"+o,t)}else this.resetDirection();return t};function I(t,e){var n=this;n.nipples=[],n.idles=[],n.actives=[],n.ids=[],n.pressureIntervals={},n.manager=t,n.id=I.id,I.id+=1,n.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},n.config(e),(n.options.mode==="static"||n.options.mode==="semi")&&(n.options.multitouch=!1),n.options.multitouch||(n.options.maxNumberOfNipples=1);const i=getComputedStyle(n.options.zone.parentElement);return i&&i.display==="flex"&&(n.parentIsFlex=!0),n.updateBox(),n.prepareNipples(),n.bindings(),n.begin(),n.nipples}I.prototype=new F;I.constructor=I;I.id=0;I.prototype.prepareNipples=function(){var t=this,e=t.nipples;e.on=t.on.bind(t),e.off=t.off.bind(t),e.options=t.options,e.destroy=t.destroy.bind(t),e.ids=t.ids,e.id=t.id,e.processOnMove=t.processOnMove.bind(t),e.processOnEnd=t.processOnEnd.bind(t),e.get=function(n){if(n===void 0)return e[0];for(var i=0,o=e.length;i<o;i+=1)if(e[i].identifier===n)return e[i];return!1}};I.prototype.bindings=function(){var t=this;t.bindEvt(t.options.zone,"start"),t.options.zone.style.touchAction="none",t.options.zone.style.msTouchAction="none"};I.prototype.begin=function(){var t=this,e=t.options;if(e.mode==="static"){var n=t.createNipple(e.position,t.manager.getIdentifier());n.add(),t.idles.push(n)}};I.prototype.createNipple=function(t,e){var n=this,i=n.manager.scroll,o={},s=n.options,l={x:n.parentIsFlex?i.x:i.x+n.box.left,y:n.parentIsFlex?i.y:i.y+n.box.top};if(t.x&&t.y)o={x:t.x-l.x,y:t.y-l.y};else if(t.top||t.right||t.bottom||t.left){var h=document.createElement("DIV");h.style.display="hidden",h.style.top=t.top,h.style.right=t.right,h.style.bottom=t.bottom,h.style.left=t.left,h.style.position="absolute",s.zone.appendChild(h);var u=h.getBoundingClientRect();s.zone.removeChild(h),o=t,t={x:u.left+i.x,y:u.top+i.y}}var r=new E(n,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:e,position:t,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(Xt(r.ui.el,o),Xt(r.ui.front,r.frontPosition)),n.nipples.push(r),n.trigger("added "+r.identifier+":added",r),n.manager.trigger("added "+r.identifier+":added",r),n.bindNipple(r),r};I.prototype.updateBox=function(){var t=this;t.box=t.options.zone.getBoundingClientRect()};I.prototype.bindNipple=function(t){var e=this,n,i=function(o,s){n=o.type+" "+s.id+":"+o.type,e.trigger(n,s)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)};I.prototype.pressureFn=function(t,e,n){var i=this,o=0;clearInterval(i.pressureIntervals[n]),i.pressureIntervals[n]=setInterval(function(){var s=t.force||t.pressure||t.webkitForce||0;s!==o&&(e.trigger("pressure",s),i.trigger("pressure "+e.identifier+":pressure",s),o=s)}.bind(i),100)};I.prototype.onstart=function(t){var e=this,n=e.options,i=t;t=Ht(t),e.updateBox();var o=function(s){e.actives.length<n.maxNumberOfNipples?e.processOnStart(s):i.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach(function(l){if(Object.values(i.touches).findIndex(function(u){return u.identifier===l})<0){var h=[t[0]];h.identifier=l,e.processOnEnd(h)}}),e.actives.length<n.maxNumberOfNipples&&e.processOnStart(s))};return vt(t,o),e.manager.bindDocument(),!1};I.prototype.processOnStart=function(t){var e=this,n=e.options,i,o=e.manager.getIdentifier(t),s=t.force||t.pressure||t.webkitForce||0,l={x:t.pageX,y:t.pageY},h=e.getOrCreate(o,l);h.identifier!==o&&e.manager.removeIdentifier(h.identifier),h.identifier=o;var u=function(f){f.trigger("start",f),e.trigger("start "+f.id+":start",f),f.show(),s>0&&e.pressureFn(t,f,f.identifier),e.processOnMove(t)};if((i=e.idles.indexOf(h))>=0&&e.idles.splice(i,1),e.actives.push(h),e.ids.push(h.identifier),n.mode!=="semi")u(h);else{var r=ot(l,h.position);if(r<=n.catchDistance)u(h);else{h.destroy(),e.processOnStart(t);return}}return h};I.prototype.getOrCreate=function(t,e){var n=this,i=n.options,o;return/(semi|static)/.test(i.mode)?(o=n.idles[0],o?(n.idles.splice(0,1),o):i.mode==="semi"?n.createNipple(e,t):(console.warn("Coudln't find the needed nipple."),!1)):(o=n.createNipple(e,t),o)};I.prototype.processOnMove=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),o=e.nipples.get(i),s=e.manager.scroll;if(!Pe(t)){this.processOnEnd(t);return}if(!o){console.error("Found zombie joystick with ID "+i),e.manager.removeIdentifier(i);return}if(n.dynamicPage){var l=o.el.getBoundingClientRect();o.position={x:s.x+l.left,y:s.y+l.top}}o.identifier=i;var h=o.options.size/2,u={x:t.pageX,y:t.pageY};n.lockX&&(u.y=o.position.y),n.lockY&&(u.x=o.position.x);var r=ot(u,o.position),f=Se(u,o.position),w=yt(f),g=r/h,$={distance:r,position:u},b,k;if(o.options.shape==="circle"?(b=Math.min(r,h),k=Oe(o.position,b,f)):(k=Ye(u,o.position,h),b=ot(k,o.position)),n.follow){if(r>h){let C=u.x-k.x,O=u.y-k.y;o.position.x+=C,o.position.y+=O,o.el.style.top=o.position.y-(e.box.top+s.y)+"px",o.el.style.left=o.position.x-(e.box.left+s.x)+"px",r=ot(u,o.position)}}else u=k,r=b;var T=u.x-o.position.x,p=u.y-o.position.y;o.frontPosition={x:T,y:p},n.dataOnly||(o.ui.front.style.transform="translate("+T+"px,"+p+"px)");var x={identifier:o.identifier,position:u,force:g,pressure:t.force||t.pressure||t.webkitForce||0,distance:r,angle:{radian:w,degree:f},vector:{x:T/h,y:-p/h},raw:$,instance:o,lockX:n.lockX,lockY:n.lockY};x=o.computeDirection(x),x.angle={radian:yt(180-f),degree:180-f},o.trigger("move",x),e.trigger("move "+o.id+":move",x)};I.prototype.processOnEnd=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),o=e.nipples.get(i),s=e.manager.removeIdentifier(o.identifier);o&&(n.dataOnly||o.hide(function(){n.mode==="dynamic"&&(o.trigger("removed",o),e.trigger("removed "+o.id+":removed",o),e.manager.trigger("removed "+o.id+":removed",o),o.destroy())}),clearInterval(e.pressureIntervals[o.identifier]),o.resetDirection(),o.trigger("end",o),e.trigger("end "+o.id+":end",o),e.ids.indexOf(o.identifier)>=0&&e.ids.splice(e.ids.indexOf(o.identifier),1),e.actives.indexOf(o)>=0&&e.actives.splice(e.actives.indexOf(o),1),/(semi|static)/.test(n.mode)?e.idles.push(o):e.nipples.indexOf(o)>=0&&e.nipples.splice(e.nipples.indexOf(o),1),e.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(e.manager.ids[s.id]=s.identifier))};I.prototype.onDestroyed=function(t,e){var n=this;n.nipples.indexOf(e)>=0&&n.nipples.splice(n.nipples.indexOf(e),1),n.actives.indexOf(e)>=0&&n.actives.splice(n.actives.indexOf(e),1),n.idles.indexOf(e)>=0&&n.idles.splice(n.idles.indexOf(e),1),n.ids.indexOf(e.identifier)>=0&&n.ids.splice(n.ids.indexOf(e.identifier),1),n.manager.removeIdentifier(e.identifier),n.manager.unbindDocument()};I.prototype.destroy=function(){var t=this;t.unbindEvt(t.options.zone,"start"),t.nipples.forEach(function(n){n.destroy()});for(var e in t.pressureIntervals)t.pressureIntervals.hasOwnProperty(e)&&clearInterval(t.pressureIntervals[e]);t.trigger("destroyed",t.nipples),t.manager.unbindDocument(),t.off()};function P(t){var e=this;e.ids={},e.index=0,e.collections=[],e.scroll=Yt(),e.config(t),e.prepareCollections();var n=function(){var o;e.collections.forEach(function(s){s.forEach(function(l){o=l.el.getBoundingClientRect(),l.position={x:e.scroll.x+o.left,y:e.scroll.y+o.top}})})};rt(window,"resize",function(){Ct(n)});var i=function(){e.scroll=Yt()};return rt(window,"scroll",function(){Ct(i)}),e.collections}P.prototype=new F;P.constructor=P;P.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var n;return t.collections.every(function(i){return n=i.get(e),!n}),n}};P.prototype.create=function(t){return this.createCollection(t)};P.prototype.createCollection=function(t){var e=this,n=new I(e,t);return e.bindCollection(n),e.collections.push(n),n};P.prototype.bindCollection=function(t){var e=this,n,i=function(o,s){n=o.type+" "+s.id+":"+o.type,e.trigger(n,s)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)};P.prototype.bindDocument=function(){var t=this;t.binded||(t.bindEvt(document,"move").bindEvt(document,"end"),t.binded=!0)};P.prototype.unbindDocument=function(t){var e=this;(!Object.keys(e.ids).length||t===!0)&&(e.unbindEvt(document,"move").unbindEvt(document,"end"),e.binded=!1)};P.prototype.getIdentifier=function(t){var e;return t?(e=t.identifier===void 0?t.pointerId:t.identifier,e===void 0&&(e=this.latest||0)):e=this.index,this.ids[e]===void 0&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]};P.prototype.removeIdentifier=function(t){var e={};for(var n in this.ids)if(this.ids[n]===t){e.id=n,e.identifier=this.ids[n],delete this.ids[n];break}return e};P.prototype.onmove=function(t){var e=this;return e.onAny("move",t),!1};P.prototype.onend=function(t){var e=this;return e.onAny("end",t),!1};P.prototype.oncancel=function(t){var e=this;return e.onAny("end",t),!1};P.prototype.onAny=function(t,e){var n=this,i,o="processOn"+t.charAt(0).toUpperCase()+t.slice(1);e=Ht(e);var s=function(h,u,r){r.ids.indexOf(u)>=0&&(r[o](h),h._found_=!0)},l=function(h){i=n.getIdentifier(h),vt(n.collections,s.bind(null,h,i)),h._found_||n.removeIdentifier(i)};return vt(e,l),!1};P.prototype.destroy=function(){var t=this;t.unbindDocument(!0),t.ids={},t.index=0,t.collections.forEach(function(e){e.destroy()}),t.off()};P.prototype.onDestroyed=function(t,e){var n=this;if(n.collections.indexOf(e)<0)return!1;n.collections.splice(n.collections.indexOf(e),1)};new P;const Ne={setup(){return{userDetailsStore:ne()}},data(){return{holdTime:0,interval:null,fps:10,holdTimeInterval:null,fnZoomKey:!1,lefClick:!1,oldMY:0,oldScale:0}},computed:{},async mounted(){switch(this.userDetailsStore.theme){}this.oldScale=this.$parent.scale;const t=Math.floor(1e3/this.fps)+1;this.$parent.$refs.canvas.addEventListener("keydown",e=>{if(this.interval==null){this.holdTimeInterval=setInterval(()=>{this.holdTime+=1},300);const n=this.$parent.scale>=1?this.$parent.scale/10:50/this.$parent.scale,i=this.$parent.scale>1?this.$parent.scale*15:10/this.$parent.scale;switch(e.code){case"ArrowRight":this.interval=setInterval(()=>{this.$parent.panX=this.$parent.panX-20-(this.holdTime*i+n),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break;case"ArrowLeft":this.interval=setInterval(()=>{this.$parent.panX=this.$parent.panX+20+(this.holdTime*i+n),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break;case"ArrowUp":this.interval=setInterval(()=>{this.$parent.panY=this.$parent.panY+20+(this.holdTime*i+n),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break;case"ArrowDown":this.interval=setInterval(()=>{this.$parent.panY=this.$parent.panY-20-(this.holdTime*i+n),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},t);break;case"Equal":this.interval=setInterval(()=>{this.$parent.scale<2&&this.scaleTree(.03)},50);break;case"Minus":this.interval=setInterval(()=>{this.$parent.scale>.3&&this.scaleTree(-.03)},50);break}}(e.code.includes("Shift")||e.code.includes("Control"))&&(this.fnZoomKey=!0,e.preventDefault()),(e.code.includes("Arrow")||e.code.includes("Page"))&&e.preventDefault()},!1),this.$parent.$refs.canvas.addEventListener("keyup",e=>{clearInterval(this.interval),clearInterval(this.holdTimeInterval),this.interval=null,this.holdTime=0,(e.code.includes("Shift")||e.code.includes("Control"))&&(this.fnZoomKey=!1)},!1),this.$parent.$refs.canvas.addEventListener("mousemove",e=>{if(this.fnZoomKey)if(e.pageY<this.oldMY){this.$parent.scale+=.01;const n=this.oldScale/this.$parent.scale;let i=this.$parent.scale>=1?this.$parent.panX:this.$parent.panX*this.$parent.scale,o=this.$parent.scale>=1?this.$parent.panY:this.$parent.panY*this.$parent.scale;i=i*n,o=o*n,this.oldScale=this.$parent.scale,this.$parent.zoomInD3(this.$parent.scale,i,o)}else{this.$parent.scale-=.01;const n=this.oldScale/this.$parent.scale;let i=this.$parent.scale>=1?this.$parent.panX:this.$parent.panX*this.$parent.scale,o=this.$parent.scale>=1?this.$parent.panY:this.$parent.panY*this.$parent.scale;i=i*n,o=o*n,this.oldScale=this.$parent.scale,this.$parent.zoomInD3(this.$parent.scale,i,o)}this.oldMY=e.pageY})},watch:{},methods:{scaleTree(t){const e=this.$parent.context.canvas.width/2,n=this.$parent.context.canvas.height/2,i=this.$parent.scale+t,o=i/this.$parent.scale;let s=e+(this.$parent.panX-e)*o,l=n+(this.$parent.panY-n)*o;this.$parent.scale=i,this.oldScale=i,this.$parent.zoomInD3(i,s,l)}}},Be=t=>(kt("data-v-4a458f68"),t=t(),zt(),t),He={id:"controlsWrapper"},Re=Be(()=>S("div",{id:"panJoystick"},null,-1)),Fe=[Re];function Ve(t,e,n,i,o,s){return R(),q("div",He,Fe)}const Un=bt(Ne,[["render",Ve],["__scopeId","data-v-4a458f68"]]);function Zn(t){return U(ie(t).call(document.documentElement))}function qe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Z(t,e){if(t=qe(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const _t={capture:!0,passive:!1};function xt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ue(t){var e=t.document.documentElement,n=U(t).on("dragstart.drag",xt,_t);"onselectstart"in e?n.on("selectstart.drag",xt,_t):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ze(t,e){var n=t.document.documentElement,i=U(t).on("dragstart.drag",null);e&&(i.on("click.drag",xt,_t),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Je=1e-12;function Lt(t){return((t=Math.exp(t))+1/t)/2}function Ge(t){return((t=Math.exp(t))-1/t)/2}function Ke(t){return((t=Math.exp(2*t))-1)/(t+1)}const We=function t(e,n,i){function o(s,l){var h=s[0],u=s[1],r=s[2],f=l[0],w=l[1],g=l[2],$=f-h,b=w-u,k=$*$+b*b,T,p;if(k<Je)p=Math.log(g/r)/e,T=function(V){return[h+V*$,u+V*b,r*Math.exp(e*V*p)]};else{var x=Math.sqrt(k),C=(g*g-r*r+i*k)/(2*r*n*x),O=(g*g-r*r-i*k)/(2*g*n*x),Y=Math.log(Math.sqrt(C*C+1)-C),X=Math.log(Math.sqrt(O*O+1)-O);p=(X-Y)/e,T=function(V){var tt=V*p,et=Lt(Y),nt=r/(n*x)*(et*Ke(e*tt+Y)-Ge(Y));return[h+nt*$,u+nt*b,r*et/Lt(e*tt+Y)]}}return T.duration=p*1e3*e/Math.SQRT2,T}return o.rho=function(s){var l=Math.max(.001,+s),h=l*l,u=h*h;return t(l,h,u)},o}(Math.SQRT2,2,4),wt=Math.PI,$t=2*wt,J=1e-6,Qe=$t-J;function Ft(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function je(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ft;const n=10**e;return function(i){this._+=i[0];for(let o=1,s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}class tn{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ft:je(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,o){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+o}`}bezierCurveTo(e,n,i,o,s,l){this._append`C${+e},${+n},${+i},${+o},${this._x1=+s},${this._y1=+l}`}arcTo(e,n,i,o,s){if(e=+e,n=+n,i=+i,o=+o,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,h=this._y1,u=i-e,r=o-n,f=l-e,w=h-n,g=f*f+w*w;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>J)if(!(Math.abs(w*u-r*f)>J)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let $=i-l,b=o-h,k=u*u+r*r,T=$*$+b*b,p=Math.sqrt(k),x=Math.sqrt(g),C=s*Math.tan((wt-Math.acos((k+g-T)/(2*p*x)))/2),O=C/x,Y=C/p;Math.abs(O-1)>J&&this._append`L${e+O*f},${n+O*w}`,this._append`A${s},${s},0,0,${+(w*$>f*b)},${this._x1=e+Y*u},${this._y1=n+Y*r}`}}arc(e,n,i,o,s,l){if(e=+e,n=+n,i=+i,l=!!l,i<0)throw new Error(`negative radius: ${i}`);let h=i*Math.cos(o),u=i*Math.sin(o),r=e+h,f=n+u,w=1^l,g=l?o-s:s-o;this._x1===null?this._append`M${r},${f}`:(Math.abs(this._x1-r)>J||Math.abs(this._y1-f)>J)&&this._append`L${r},${f}`,i&&(g<0&&(g=g%$t+$t),g>Qe?this._append`A${i},${i},0,1,${w},${e-h},${n-u}A${i},${i},0,1,${w},${this._x1=r},${this._y1=f}`:g>J&&this._append`A${i},${i},0,${+(g>=wt)},${w},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+o}h${-i}Z`}toString(){return this._}}function en(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function nn(){return this.eachAfter(en)}function on(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function sn(t,e){for(var n=this,i=[n],o,s,l=-1;n=i.pop();)if(t.call(e,n,++l,this),o=n.children)for(s=o.length-1;s>=0;--s)i.push(o[s]);return this}function rn(t,e){for(var n=this,i=[n],o=[],s,l,h,u=-1;n=i.pop();)if(o.push(n),s=n.children)for(l=0,h=s.length;l<h;++l)i.push(s[l]);for(;n=o.pop();)t.call(e,n,++u,this);return this}function an(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function ln(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,o=i&&i.length;--o>=0;)n+=i[o].value;e.value=n})}function cn(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function hn(t){for(var e=this,n=un(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var o=i.length;t!==n;)i.splice(o,0,t),t=t.parent;return i}function un(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),o=null;for(t=n.pop(),e=i.pop();t===e;)o=t,t=n.pop(),e=i.pop();return o}function dn(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function fn(){return Array.from(this)}function pn(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function mn(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*gn(){var t=this,e,n=[t],i,o,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(o=0,s=i.length;o<s;++o)n.push(i[o]);while(n.length)}function Vt(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=_n)):e===void 0&&(e=vn);for(var n=new j(t),i,o=[n],s,l,h,u;i=o.pop();)if((l=e(i.data))&&(u=(l=Array.from(l)).length))for(i.children=l,h=u-1;h>=0;--h)o.push(s=l[h]=new j(l[h])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(wn)}function yn(){return Vt(this).eachBefore(xn)}function vn(t){return t.children}function _n(t){return Array.isArray(t)?t[1]:null}function xn(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function wn(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function j(t){this.data=t,this.depth=this.height=0,this.parent=null}j.prototype=Vt.prototype={constructor:j,count:nn,each:on,eachAfter:rn,eachBefore:sn,find:an,sum:ln,sort:cn,path:hn,ancestors:dn,descendants:fn,leaves:pn,links:mn,copy:yn,[Symbol.iterator]:gn};function $n(t,e){return t.parent===e.parent?1:2}function pt(t){var e=t.children;return e?e[0]:t.t}function mt(t){var e=t.children;return e?e[e.length-1]:t.t}function bn(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function kn(t){for(var e=0,n=0,i=t.children,o=i.length,s;--o>=0;)s=i[o],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function zn(t,e,n){return t.a.parent===e.parent?t.a:n}function st(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}st.prototype=Object.create(j.prototype);function Tn(t){for(var e=new st(t,0),n,i=[e],o,s,l,h;n=i.pop();)if(s=n._.children)for(n.children=new Array(h=s.length),l=h-1;l>=0;--l)i.push(o=n.children[l]=new st(s[l],l)),o.parent=n;return(e.parent=new st(null,0)).children=[e],e}function Jn(){var t=$n,e=1,n=1,i=null;function o(r){var f=Tn(r);if(f.eachAfter(s),f.parent.m=-f.z,f.eachBefore(l),i)r.eachBefore(u);else{var w=r,g=r,$=r;r.eachBefore(function(x){x.x<w.x&&(w=x),x.x>g.x&&(g=x),x.depth>$.depth&&($=x)});var b=w===g?1:t(w,g)/2,k=b-w.x,T=e/(g.x+b+k),p=n/($.depth||1);r.eachBefore(function(x){x.x=(x.x+k)*T,x.y=x.depth*p})}return r}function s(r){var f=r.children,w=r.parent.children,g=r.i?w[r.i-1]:null;if(f){kn(r);var $=(f[0].z+f[f.length-1].z)/2;g?(r.z=g.z+t(r._,g._),r.m=r.z-$):r.z=$}else g&&(r.z=g.z+t(r._,g._));r.parent.A=h(r,g,r.parent.A||w[0])}function l(r){r._.x=r.z+r.parent.m,r.m+=r.parent.m}function h(r,f,w){if(f){for(var g=r,$=r,b=f,k=g.parent.children[0],T=g.m,p=$.m,x=b.m,C=k.m,O;b=mt(b),g=pt(g),b&&g;)k=pt(k),$=mt($),$.a=r,O=b.z+x-g.z-T+t(b._,g._),O>0&&(bn(zn(b,r,w),r,O),T+=O,p+=O),x+=b.m,T+=g.m,C+=k.m,p+=$.m;b&&!mt($)&&($.t=b,$.m+=x-p),g&&!pt(k)&&(k.t=g,k.m+=T-C,w=r)}return w}function u(r){r.x*=e,r.y=r.depth*n}return o.separation=function(r){return arguments.length?(t=r,o):t},o.size=function(r){return arguments.length?(i=!1,e=+r[0],n=+r[1],o):i?null:[e,n]},o.nodeSize=function(r){return arguments.length?(i=!0,e=+r[0],n=+r[1],o):i?[e,n]:null},o}function At(t){return function(){return t}}function Mn(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new tn(e)}var In=Array.prototype.slice;function Sn(t){return t[0]}function On(t){return t[1]}class En{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Pn(t){return new En(t,!0)}function Cn(t){return t.source}function Dn(t){return t.target}function Yn(t){let e=Cn,n=Dn,i=Sn,o=On,s=null,l=null,h=Mn(u);function u(){let r;const f=In.call(arguments),w=e.apply(this,f),g=n.apply(this,f);if(s==null&&(l=t(r=h())),l.lineStart(),f[0]=w,l.point(+i.apply(this,f),+o.apply(this,f)),f[0]=g,l.point(+i.apply(this,f),+o.apply(this,f)),l.lineEnd(),r)return l=null,r+""||null}return u.source=function(r){return arguments.length?(e=r,u):e},u.target=function(r){return arguments.length?(n=r,u):n},u.x=function(r){return arguments.length?(i=typeof r=="function"?r:At(+r),u):i},u.y=function(r){return arguments.length?(o=typeof r=="function"?r:At(+r),u):o},u.context=function(r){return arguments.length?(r==null?s=l=null:l=t(s=r),u):s},u}function Gn(){return Yn(Pn)}const it=t=>()=>t;function Xn(t,{sourceEvent:e,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function gt(t){t.stopImmediatePropagation()}function W(t){t.preventDefault(),t.stopImmediatePropagation()}function Ln(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function An(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Nt(){return this.__zoom||Bt}function Nn(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Bn(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hn(t,e,n){var i=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],l=t.invertY(e[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l))}function Kn(){var t=Ln,e=An,n=Hn,i=Nn,o=Bn,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],h=250,u=We,r=oe("start","zoom","end"),f,w,g,$=500,b=150,k=0,T=10;function p(a){a.property("__zoom",Nt).on("wheel.zoom",tt,{passive:!1}).on("mousedown.zoom",et).on("dblclick.zoom",nt).filter(o).on("touchstart.zoom",qt).on("touchmove.zoom",Ut).on("touchend.zoom touchcancel.zoom",Zt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(a,d,c,m){var y=a.selection?a.selection():a;y.property("__zoom",Nt),a!==y?Y(a,d,c,m):y.interrupt().each(function(){X(this,arguments).event(m).start().zoom(null,typeof d=="function"?d.apply(this,arguments):d).end()})},p.scaleBy=function(a,d,c,m){p.scaleTo(a,function(){var y=this.__zoom.k,v=typeof d=="function"?d.apply(this,arguments):d;return y*v},c,m)},p.scaleTo=function(a,d,c,m){p.transform(a,function(){var y=e.apply(this,arguments),v=this.__zoom,_=c==null?O(y):typeof c=="function"?c.apply(this,arguments):c,z=v.invert(_),M=typeof d=="function"?d.apply(this,arguments):d;return n(C(x(v,M),_,z),y,l)},c,m)},p.translateBy=function(a,d,c,m){p.transform(a,function(){return n(this.__zoom.translate(typeof d=="function"?d.apply(this,arguments):d,typeof c=="function"?c.apply(this,arguments):c),e.apply(this,arguments),l)},null,m)},p.translateTo=function(a,d,c,m,y){p.transform(a,function(){var v=e.apply(this,arguments),_=this.__zoom,z=m==null?O(v):typeof m=="function"?m.apply(this,arguments):m;return n(Bt.translate(z[0],z[1]).scale(_.k).translate(typeof d=="function"?-d.apply(this,arguments):-d,typeof c=="function"?-c.apply(this,arguments):-c),v,l)},m,y)};function x(a,d){return d=Math.max(s[0],Math.min(s[1],d)),d===a.k?a:new ht(d,a.x,a.y)}function C(a,d,c){var m=d[0]-c[0]*a.k,y=d[1]-c[1]*a.k;return m===a.x&&y===a.y?a:new ht(a.k,m,y)}function O(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function Y(a,d,c,m){a.on("start.zoom",function(){X(this,arguments).event(m).start()}).on("interrupt.zoom end.zoom",function(){X(this,arguments).event(m).end()}).tween("zoom",function(){var y=this,v=arguments,_=X(y,v).event(m),z=e.apply(y,v),M=c==null?O(z):typeof c=="function"?c.apply(y,v):c,N=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),D=y.__zoom,L=typeof d=="function"?d.apply(y,v):d,B=u(D.invert(M).concat(N/D.k),L.invert(M).concat(N/L.k));return function(A){if(A===1)A=L;else{var H=B(A),at=N/H[2];A=new ht(at,M[0]-H[0]*at,M[1]-H[1]*at)}_.zoom(null,A)}})}function X(a,d,c){return!c&&a.__zooming||new V(a,d)}function V(a,d){this.that=a,this.args=d,this.active=0,this.sourceEvent=null,this.extent=e.apply(a,d),this.taps=0}V.prototype={event:function(a){return a&&(this.sourceEvent=a),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(a,d){return this.mouse&&a!=="mouse"&&(this.mouse[1]=d.invert(this.mouse[0])),this.touch0&&a!=="touch"&&(this.touch0[1]=d.invert(this.touch0[0])),this.touch1&&a!=="touch"&&(this.touch1[1]=d.invert(this.touch1[0])),this.that.__zoom=d,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(a){var d=U(this.that).datum();r.call(a,this.that,new Xn(a,{sourceEvent:this.sourceEvent,target:p,type:a,transform:this.that.__zoom,dispatch:r}),d)}};function tt(a,...d){if(!t.apply(this,arguments))return;var c=X(this,d).event(a),m=this.__zoom,y=Math.max(s[0],Math.min(s[1],m.k*Math.pow(2,i.apply(this,arguments)))),v=Z(a);if(c.wheel)(c.mouse[0][0]!==v[0]||c.mouse[0][1]!==v[1])&&(c.mouse[1]=m.invert(c.mouse[0]=v)),clearTimeout(c.wheel);else{if(m.k===y)return;c.mouse=[v,m.invert(v)],ut(this),c.start()}W(a),c.wheel=setTimeout(_,b),c.zoom("mouse",n(C(x(m,y),c.mouse[0],c.mouse[1]),c.extent,l));function _(){c.wheel=null,c.end()}}function et(a,...d){if(g||!t.apply(this,arguments))return;var c=a.currentTarget,m=X(this,d,!0).event(a),y=U(a.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",N,!0),v=Z(a,c),_=a.clientX,z=a.clientY;Ue(a.view),gt(a),m.mouse=[v,this.__zoom.invert(v)],ut(this),m.start();function M(D){if(W(D),!m.moved){var L=D.clientX-_,B=D.clientY-z;m.moved=L*L+B*B>k}m.event(D).zoom("mouse",n(C(m.that.__zoom,m.mouse[0]=Z(D,c),m.mouse[1]),m.extent,l))}function N(D){y.on("mousemove.zoom mouseup.zoom",null),Ze(D.view,m.moved),W(D),m.event(D).end()}}function nt(a,...d){if(t.apply(this,arguments)){var c=this.__zoom,m=Z(a.changedTouches?a.changedTouches[0]:a,this),y=c.invert(m),v=c.k*(a.shiftKey?.5:2),_=n(C(x(c,v),m,y),e.apply(this,d),l);W(a),h>0?U(this).transition().duration(h).call(Y,_,m,a):U(this).call(p.transform,_,m,a)}}function qt(a,...d){if(t.apply(this,arguments)){var c=a.touches,m=c.length,y=X(this,d,a.changedTouches.length===m).event(a),v,_,z,M;for(gt(a),_=0;_<m;++_)z=c[_],M=Z(z,this),M=[M,this.__zoom.invert(M),z.identifier],y.touch0?!y.touch1&&y.touch0[2]!==M[2]&&(y.touch1=M,y.taps=0):(y.touch0=M,v=!0,y.taps=1+!!f);f&&(f=clearTimeout(f)),v&&(y.taps<2&&(w=M[0],f=setTimeout(function(){f=null},$)),ut(this),y.start())}}function Ut(a,...d){if(this.__zooming){var c=X(this,d).event(a),m=a.changedTouches,y=m.length,v,_,z,M;for(W(a),v=0;v<y;++v)_=m[v],z=Z(_,this),c.touch0&&c.touch0[2]===_.identifier?c.touch0[0]=z:c.touch1&&c.touch1[2]===_.identifier&&(c.touch1[0]=z);if(_=c.that.__zoom,c.touch1){var N=c.touch0[0],D=c.touch0[1],L=c.touch1[0],B=c.touch1[1],A=(A=L[0]-N[0])*A+(A=L[1]-N[1])*A,H=(H=B[0]-D[0])*H+(H=B[1]-D[1])*H;_=x(_,Math.sqrt(A/H)),z=[(N[0]+L[0])/2,(N[1]+L[1])/2],M=[(D[0]+B[0])/2,(D[1]+B[1])/2]}else if(c.touch0)z=c.touch0[0],M=c.touch0[1];else return;c.zoom("touch",n(C(_,z,M),c.extent,l))}}function Zt(a,...d){if(this.__zooming){var c=X(this,d).event(a),m=a.changedTouches,y=m.length,v,_;for(gt(a),g&&clearTimeout(g),g=setTimeout(function(){g=null},$),v=0;v<y;++v)_=m[v],c.touch0&&c.touch0[2]===_.identifier?delete c.touch0:c.touch1&&c.touch1[2]===_.identifier&&delete c.touch1;if(c.touch1&&!c.touch0&&(c.touch0=c.touch1,delete c.touch1),c.touch0)c.touch0[1]=this.__zoom.invert(c.touch0[0]);else if(c.end(),c.taps===2&&(_=Z(_,this),Math.hypot(w[0]-_[0],w[1]-_[1])<T)){var z=U(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return p.wheelDelta=function(a){return arguments.length?(i=typeof a=="function"?a:it(+a),p):i},p.filter=function(a){return arguments.length?(t=typeof a=="function"?a:it(!!a),p):t},p.touchable=function(a){return arguments.length?(o=typeof a=="function"?a:it(!!a),p):o},p.extent=function(a){return arguments.length?(e=typeof a=="function"?a:it([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),p):e},p.scaleExtent=function(a){return arguments.length?(s[0]=+a[0],s[1]=+a[1],p):[s[0],s[1]]},p.translateExtent=function(a){return arguments.length?(l[0][0]=+a[0][0],l[1][0]=+a[1][0],l[0][1]=+a[0][1],l[1][1]=+a[1][1],p):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},p.constrain=function(a){return arguments.length?(n=a,p):n},p.duration=function(a){return arguments.length?(h=+a,p):h},p.interpolate=function(a){return arguments.length?(u=a,p):u},p.on=function(){var a=r.on.apply(r,arguments);return a===r?p:a},p.clickDistance=function(a){return arguments.length?(k=(a=+a)*a,p):Math.sqrt(k)},p.tapDistance=function(a){return arguments.length?(T=+a,p):T},p}export{Un as J,Vn as S,qn as Z,Zn as c,Vt as h,Gn as l,Z as p,Jn as t,Kn as z};
