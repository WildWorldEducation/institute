import{_ as g,j as n,o as l,c as d,a as s,w as m,C as p,q as h,t as u,b as _,p as f,d as b,s as v,k as w}from"./main-e53e6faf.js";import{_ as k}from"./app-logo-6a421005.js";const y={data(){return{username:null,password:null,errors:{username:null,password:null},isSubmitting:!1,isMobileCheck:window.innerWidth}},mounted(){let e=document.createElement("script");e.setAttribute("src","https://accounts.google.com/gsi/client"),e.setAttribute("defer",""),document.head.appendChild(e),this.GetGoogleLoginResult(),document.addEventListener("keydown",this.handleKeyPress)},unmounted(){document.removeEventListener("keydown",this.handleKeyPress)},computed:{},methods:{clearError(e){this.errors[e]&&(this.errors[e]=null)},validateForm(){this.errors={username:null,password:null};let e=!0;return(!this.username||this.username.trim()==="")&&(this.errors.username="Username is required",e=!1),(!this.password||this.password.trim()==="")&&(this.errors.password="Password is required",e=!1),e},Submit(){if(!this.validateForm())return;this.isSubmitting=!0;const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})};var o="/login-attempt";fetch(o,e).then(t=>t.json()).then(t=>{this.isSubmitting=!1,t.account=="authorized"?t.role=="student"?this.isMobileCheck<576?n.push({name:"search"}):n.push({name:"skill-tree"}):t.role=="instructor"?n.push({name:"students"}):t.role=="editor"?n.push({name:"todo"}):t.role=="partner"?n.push({name:"students"}):t.role=="platform_admin"?n.push({name:"tenants"}):t.role=="school_admin"?n.push({name:"skill-tree"}):n.push({name:"skills"}):t.account=="wrong-password"?alert("Wrong password"):alert("No account found")}).catch(t=>{this.isSubmitting=!1,console.error("Login error:",t),alert("An error occurred during login. Please try again.")})},GetGoogleLoginResult(){fetch("/google-login-result").then(function(e){return e.json()}).then(e=>{e.account=="no account"&&alert("No account found.")})},handleKeyPress(e){e.key==="Enter"&&this.Submit()}}},i=e=>(f("data-v-007d9fe1"),e=e(),b(),e),x={class:"login-page"},S={class:"form-signin"},q=i(()=>s("div",{class:"text-center app-logo-wrapper"},[s("img",{class:"",src:k,alt:"icon of a skill tree"})],-1)),C=i(()=>s("h1",{class:"h3 mt-2 font-weight-normal"},"Sign in",-1)),P={class:"form"},E=i(()=>s("label",{class:"mb-4 welcome-message"},"Welcome back! Please enter your details.",-1)),L={class:"mb-3 text-start"},V=i(()=>s("label",{class:"form-label"},"Username",-1)),j={key:0,class:"invalid-feedback"},I={class:"mb-3 text-start"},N=i(()=>s("label",{class:"form-label"},"Password",-1)),U={key:0,class:"invalid-feedback"},B=i(()=>s("div",{class:"d-flex password-extras"},[s("div",{style:{color:"rgba(164, 139, 229, 1)"}},[s("a",{href:"/password-reset",class:"links"},"Forgot password")])],-1)),G=["disabled"],M={key:0,id:"g_id_onload","data-client_id":"13191319610-qectaoi146ce1pm4v95jtgctsbtmqb3t.apps.googleusercontent.com","data-context":"signin","data-ux_mode":"popup","data-login_uri":"/google-login-attempt?device=mobile","data-auto_prompt":"false"},T={key:1,id:"g_id_onload","data-client_id":"13191319610-qectaoi146ce1pm4v95jtgctsbtmqb3t.apps.googleusercontent.com","data-context":"signin","data-ux_mode":"popup","data-login_uri":"/google-login-attempt?device=not-mobile","data-auto_prompt":"false"},z=i(()=>s("div",{class:"g_id_signin","data-type":"standard","data-shape":"rectangular","data-theme":"outline","data-text":"signin_with","data-size":"large","data-logo_alignment":"left","data-width":"330"},null,-1)),A=i(()=>s("div",{class:"mt-4 signup text-center"},[v(" Don't have an account? "),s("a",{href:"/student-signup",class:"links"},"Register")],-1));function D(e,o,t,K,r,c){return l(),d("div",x,[s("div",S,[q,C,s("div",P,[E,s("div",L,[V,m(s("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>r.username=a),type:"text",placeholder:"Username",class:h(["form-control",{"is-invalid":r.errors.username}]),required:"",onInput:o[1]||(o[1]=a=>c.clearError("username"))},null,34),[[p,r.username]]),r.errors.username?(l(),d("div",j,u(r.errors.username),1)):_("",!0)]),s("div",I,[N,m(s("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>r.password=a),type:"password",placeholder:"Password",class:h(["form-control",{"is-invalid":r.errors.password}]),required:"",onInput:o[3]||(o[3]=a=>c.clearError("password"))},null,34),[[p,r.password]]),r.errors.password?(l(),d("div",U,u(r.errors.password),1)):_("",!0)]),B,s("button",{class:"btn btn-dark mb-2",onClick:o[4]||(o[4]=a=>c.Submit()),disabled:r.isSubmitting},u(r.isSubmitting?"Signing in...":"Sign in"),9,G),r.isMobileCheck<576?(l(),d("div",M)):(l(),d("div",T)),z,A])])])}const F=g(y,[["render",D],["__scopeId","data-v-007d9fe1"]]),W={__name:"LoginView",setup(e){return(o,t)=>(l(),w(F))}};export{W as default};
