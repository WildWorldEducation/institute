import{_ as p,e as y,o as i,c as r,a as e,w as h,s as _,h as f,y as S,H as D,r as w,b as d,F as m,x as b,f as x,N as A,t as g,p as v}from"./main-0db18a32.js";const I={setup(){return{userDetailsStore:y()}},data(){return{theme:this.userDetailsStore.theme}},created(){},async mounted(){await this.userDetailsStore.getUserDetails()},methods:{chooseTheme(){this.userDetailsStore.updateTheme(this.theme)}}},k={class:"mb-3 text-start themes"};function C(o,t,u,l,n,a){return i(),r("div",null,[t[3]||(t[3]=e("h2",{class:"secondary-heading white-heading h4"},"Theme",-1)),e("div",k,[h(e("select",{class:"form-select",onChange:t[0]||(t[0]=c=>a.chooseTheme()),"onUpdate:modelValue":t[1]||(t[1]=c=>n.theme=c)},t[2]||(t[2]=[e("option",{value:"original"},"Original",-1),e("option",{value:"instructor"},"Instructor",-1),e("option",{value:"editor"},"Editor",-1)]),544),[[_,n.theme]])])])}const P=p(I,[["render",C],["__scopeId","data-v-af51cfe5"]]),T={setup(){const o=y(),t=f(),u=S(),l=D();return o.getUserDetails(),u.getInstructors(),{userDetailsStore:o,sessionDetailsStore:t,userStore:u,tenantStore:l}},data(){return{instructorID:this.userDetailsStore.instructorId,selectedInstructorName:"",showWarnModal:!1,isEditing:!1,isAudioAutoPlay:!!this.userDetailsStore.isAudioAutoPlay}},components:{ThemeDetails:P},async mounted(){this.isAudioAutoPlay=!!this.userDetailsStore.isAudioAutoPlay,this.userDetailsStore.role=="school_admin"&&await this.getTenantSettings()},methods:{isInstructorLocked(){return this.userDetailsStore.role==="student"&&this.userDetailsStore.instructorId&&this.userDetailsStore.instructorId.trim()!==""},async updateInstructor(o){if(!this.isInstructorLocked())try{const t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({instructor_id:o})};await fetch(`/users/${this.userDetailsStore.userId}/edit/instructor`,t),this.userDetailsStore.getUserDetails(),this.isEditing=!1,this.showWarnModal=!1}catch(t){console.error("Error updating instructor:",t)}},cancelEdit(){this.isEditing=!1},handleInstructorChange(o){this.instructorID=o.target.value,this.selectedInstructorName=o.target.options[o.target.selectedIndex].text},async toggleAutoPlay(){await this.userDetailsStore.updateAudioAutoPlay(this.isAudioAutoPlay)},async getTenantSettings(){await this.tenantStore.getTenantDetails(this.userDetailsStore.tenantId)}},watch:{"userDetailsStore.isAudioAutoPlay":function(o){this.isAudioAutoPlay=!!o}}};const M={class:"container legend-div"},E={class:"mt-2 d-flex row gap-4 justify-content-between"},N={key:0,class:"form"},V={class:"profile-input"},U={key:0},B=["value"],W={key:0,class:"mt-2"},L={key:1},z={class:"profile-input"},O=["value"],j={class:"mt-2 d-flex gap-2"},F={key:1,class:"profile-input"},H={class:"setting-container d-flex align-items-center"},Y={class:"toggle-switch-container me-3"},q={class:"toggle-switch"},J={key:2},G={class:"setting-container d-flex align-items-center"},K={class:"toggle-switch-container me-3"},Q={class:"toggle-switch"},R={class:"d-flex align-items-center"},X={class:"setting-label"},Z={key:0},$={id:"myModal",class:"modal"},tt={class:"warn-content d-flex flex-column"},et={class:"d-flex flex-row"},st={id:"instructor-name-text"},ot={class:"d-flex flex-row-reverse gap-2"};function nt(o,t,u,l,n,a){const c=w("ThemeDetails");return i(),r(m,null,[e("div",M,[e("div",E,[l.userDetailsStore.role==="student"?(i(),r("div",N,[e("div",V,[e("div",null,[t[11]||(t[11]=e("h2",{class:"secondary-heading h4 white-heading"}," Instructor ",-1)),n.isEditing?(i(),r("div",L,[e("div",z,[h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.instructorID=s),class:"form-select",onChange:t[2]||(t[2]=(...s)=>a.handleInstructorChange&&a.handleInstructorChange(...s))},[t[10]||(t[10]=e("option",{value:"",selected:"",disabled:""}," Please choose an instructor ",-1)),(i(!0),r(m,null,b(l.userStore.instructors,s=>(i(),r("option",{key:s.id,value:s.id},g(s.username),9,O))),128))],544),[[_,n.instructorID]])]),e("div",j,[e("button",{class:"btn red-btn",onClick:t[3]||(t[3]=(...s)=>a.cancelEdit&&a.cancelEdit(...s))}," Cancel "),e("button",{class:"btn primary-btn",onClick:t[4]||(t[4]=s=>n.showWarnModal=!0)}," Submit ")])])):(i(),r("div",U,[e("input",{type:"text",class:"form-control",readonly:"",value:l.userDetailsStore.instructorUsername||"No instructor chosen"},null,8,B),a.isInstructorLocked()?d("",!0):(i(),r("div",W,[e("button",{class:"btn primary-btn",onClick:t[0]||(t[0]=s=>n.isEditing=!0)}," Edit ")]))]))])])])):d("",!0),x(c),l.userDetailsStore.role==="student"?(i(),r("div",F,[t[14]||(t[14]=e("h2",{class:"secondary-heading h4 mb-3 white-heading"}," AI Assistant Settings ",-1)),e("div",H,[e("div",Y,[e("label",q,[h(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=s=>n.isAudioAutoPlay=s),onChange:t[6]||(t[6]=(...s)=>a.toggleAutoPlay&&a.toggleAutoPlay(...s)),class:"toggle-input"},null,544),[[A,n.isAudioAutoPlay]]),t[12]||(t[12]=e("span",{class:"toggle-slider"},null,-1))])]),t[13]||(t[13]=e("div",{class:"d-flex align-items-center"},[e("span",{class:"setting-label"}," Auto-play AI tutor speech ")],-1))])])):d("",!0),l.userDetailsStore.role==="school_admin"?(i(),r("div",J,[t[16]||(t[16]=e("h2",{class:"secondary-heading white-heading h4"},"Billing Mode",-1)),e("div",G,[e("div",K,[e("label",Q,[e("input",{type:"checkbox",onChange:t[7]||(t[7]=s=>l.tenantStore.toggleBillingMode(this.userDetailsStore.tenantId,o.billingMode)),class:"toggle-input"},null,32),t[15]||(t[15]=e("span",{class:"toggle-slider"},null,-1))])]),e("div",R,[e("span",X,g(l.tenantStore.billingMode),1)])])])):d("",!0)])]),n.showWarnModal?(i(),r("div",Z,[e("div",$,[e("div",tt,[e("div",et,[t[19]||(t[19]=e("div",{class:"me-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"35",height:"35",fill:"#eed888"},[e("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})])],-1)),e("div",null,[t[17]||(t[17]=v(" You can only choose your instructor once. Are you sure you want   ",-1)),e("span",st,g(n.selectedInstructorName),1),t[18]||(t[18]=v("   to be your instructor. ",-1))])]),e("div",ot,[e("button",{class:"btn primary-btn",onClick:t[8]||(t[8]=s=>a.updateInstructor(n.instructorID))}," Yes "),e("button",{class:"btn red-btn",onClick:t[9]||(t[9]=s=>n.showWarnModal=!1)}," No ")])])])])):d("",!0)],64)}const rt=p(T,[["render",nt],["__scopeId","data-v-05c2878f"]]);export{rt as default};
