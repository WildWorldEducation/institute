import{_ as y,f,o as n,c as r,a as t,w as m,y as S,p as D,d as w,i as I,A as b,I as A,r as x,b as c,F as p,z as k,g as C,O as P,t as g,s as v}from"./main-fe555f81.js";const T={setup(){return{userDetailsStore:f()}},data(){return{theme:this.userDetailsStore.theme}},created(){},async mounted(){await this.userDetailsStore.getUserDetails()},methods:{chooseTheme(){this.userDetailsStore.updateTheme(this.theme)}}},_=s=>(D("data-v-af51cfe5"),s=s(),w(),s),M=_(()=>t("h2",{class:"secondary-heading white-heading h4"},"Theme",-1)),E={class:"mb-3 text-start themes"},V=_(()=>t("option",{value:"original"},"Original",-1)),N=_(()=>t("option",{value:"instructor"},"Instructor",-1)),U=_(()=>t("option",{value:"editor"},"Editor",-1)),B=[V,N,U];function W(s,e,u,l,i,a){return n(),r("div",null,[M,t("div",E,[m(t("select",{class:"form-select",onChange:e[0]||(e[0]=h=>a.chooseTheme()),"onUpdate:modelValue":e[1]||(e[1]=h=>i.theme=h)},B,544),[[S,i.theme]])])])}const z=y(T,[["render",W],["__scopeId","data-v-af51cfe5"]]),L={setup(){const s=f(),e=I(),u=b(),l=A();return s.getUserDetails(),u.getInstructors(),{userDetailsStore:s,sessionDetailsStore:e,userStore:u,tenantStore:l}},data(){return{instructorID:this.userDetailsStore.instructorId,selectedInstructorName:"",showWarnModal:!1,isEditing:!1,isAudioAutoPlay:!!this.userDetailsStore.isAudioAutoPlay}},components:{ThemeDetails:z},async mounted(){this.isAudioAutoPlay=!!this.userDetailsStore.isAudioAutoPlay,this.userDetailsStore.role=="school_admin"&&await this.getTenantSettings()},methods:{isInstructorLocked(){return this.userDetailsStore.role==="student"&&this.userDetailsStore.instructorId&&this.userDetailsStore.instructorId.trim()!==""},async updateInstructor(s){if(!this.isInstructorLocked())try{const e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({instructor_id:s})};await fetch(`/users/${this.userDetailsStore.userId}/edit/instructor`,e),this.userDetailsStore.getUserDetails(),this.isEditing=!1,this.showWarnModal=!1}catch(e){console.error("Error updating instructor:",e)}},cancelEdit(){this.isEditing=!1},handleInstructorChange(s){this.instructorID=s.target.value,this.selectedInstructorName=s.target.options[s.target.selectedIndex].text},async toggleAutoPlay(){await this.userDetailsStore.updateAudioAutoPlay(this.isAudioAutoPlay)},async getTenantSettings(){await this.tenantStore.getTenantDetails(this.userDetailsStore.tenantId)}},watch:{"userDetailsStore.isAudioAutoPlay":function(s){this.isAudioAutoPlay=!!s}}};const d=s=>(D("data-v-05c2878f"),s=s(),w(),s),O={class:"container legend-div"},j={class:"mt-2 d-flex row gap-4 justify-content-between"},F={key:0,class:"form"},Y={class:"profile-input"},q=d(()=>t("h2",{class:"secondary-heading h4 white-heading"}," Instructor ",-1)),H={key:0},J=["value"],G={key:0,class:"mt-2"},K={key:1},Q={class:"profile-input"},R=d(()=>t("option",{value:"",selected:"",disabled:""}," Please choose an instructor ",-1)),X=["value"],Z={class:"mt-2 d-flex gap-2"},$={key:1,class:"profile-input"},tt=d(()=>t("h2",{class:"secondary-heading h4 mb-3 white-heading"}," AI Assistant Settings ",-1)),et={class:"setting-container d-flex align-items-center"},st={class:"toggle-switch-container me-3"},ot={class:"toggle-switch"},it=d(()=>t("span",{class:"toggle-slider"},null,-1)),nt=d(()=>t("div",{class:"d-flex align-items-center"},[t("span",{class:"setting-label"}," Auto-play AI tutor speech ")],-1)),rt={key:2},lt=d(()=>t("h2",{class:"secondary-heading white-heading h4"},"Billing Mode",-1)),at={class:"setting-container d-flex align-items-center"},dt={class:"toggle-switch-container me-3"},ct={class:"toggle-switch"},ut=d(()=>t("span",{class:"toggle-slider"},null,-1)),ht={class:"d-flex align-items-center"},_t={class:"setting-label"},gt={key:0},mt={id:"myModal",class:"modal"},pt={class:"warn-content d-flex flex-column"},vt={class:"d-flex flex-row"},yt=d(()=>t("div",{class:"me-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"35",height:"35",fill:"#eed888"},[t("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})])],-1)),ft={id:"instructor-name-text"},St={class:"d-flex flex-row-reverse gap-2"};function Dt(s,e,u,l,i,a){const h=x("ThemeDetails");return n(),r(p,null,[t("div",O,[t("div",j,[l.userDetailsStore.role==="student"?(n(),r("div",F,[t("div",Y,[t("div",null,[q,i.isEditing?(n(),r("div",K,[t("div",Q,[m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>i.instructorID=o),class:"form-select",onChange:e[2]||(e[2]=(...o)=>a.handleInstructorChange&&a.handleInstructorChange(...o))},[R,(n(!0),r(p,null,k(l.userStore.instructors,o=>(n(),r("option",{key:o.id,value:o.id},g(o.username),9,X))),128))],544),[[S,i.instructorID]])]),t("div",Z,[t("button",{class:"btn red-btn",onClick:e[3]||(e[3]=(...o)=>a.cancelEdit&&a.cancelEdit(...o))}," Cancel "),t("button",{class:"btn primary-btn",onClick:e[4]||(e[4]=o=>i.showWarnModal=!0)}," Submit ")])])):(n(),r("div",H,[t("input",{type:"text",class:"form-control",readonly:"",value:l.userDetailsStore.instructorUsername||"No instructor chosen"},null,8,J),a.isInstructorLocked()?c("",!0):(n(),r("div",G,[t("button",{class:"btn primary-btn",onClick:e[0]||(e[0]=o=>i.isEditing=!0)}," Edit ")]))]))])])])):c("",!0),C(h),l.userDetailsStore.role==="student"?(n(),r("div",$,[tt,t("div",et,[t("div",st,[t("label",ot,[m(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=o=>i.isAudioAutoPlay=o),onChange:e[6]||(e[6]=(...o)=>a.toggleAutoPlay&&a.toggleAutoPlay(...o)),class:"toggle-input"},null,544),[[P,i.isAudioAutoPlay]]),it])]),nt])])):c("",!0),l.userDetailsStore.role==="school_admin"?(n(),r("div",rt,[lt,t("div",at,[t("div",dt,[t("label",ct,[t("input",{type:"checkbox",onChange:e[7]||(e[7]=o=>l.tenantStore.toggleBillingMode(this.userDetailsStore.tenantId,s.billingMode)),class:"toggle-input"},null,32),ut])]),t("div",ht,[t("span",_t,g(l.tenantStore.billingMode),1)])])])):c("",!0)])]),i.showWarnModal?(n(),r("div",gt,[t("div",mt,[t("div",pt,[t("div",vt,[yt,t("div",null,[v(" You can only choose your instructor once. Are you sure you want   "),t("span",ft,g(i.selectedInstructorName),1),v("   to be your instructor. ")])]),t("div",St,[t("button",{class:"btn primary-btn",onClick:e[8]||(e[8]=o=>a.updateInstructor(i.instructorID))}," Yes "),t("button",{class:"btn red-btn",onClick:e[9]||(e[9]=o=>i.showWarnModal=!1)}," No ")])])])])):c("",!0)],64)}const It=y(L,[["render",Dt],["__scopeId","data-v-05c2878f"]]);export{It as default};
