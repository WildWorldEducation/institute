import{_ as h,A as m,f,o as r,c as a,a as t,t as d,b as i,s as u,F as y,z as g,q as p,p as b,d as S}from"./main-fd6511ba.js";const v={setup(){const s=m(),l=f();return{usersStore:s,usersDetailsStore:l}},data(){return{partnerId:this.$route.params.partnerId,referredUserId:this.$route.params.referredUserId,receipts:[],student:null,loading:!0}},async created(){console.log(this.$route.params.partnerId),await this.getStudentInfo(),await this.getReferral()},methods:{async getStudentInfo(){try{await this.usersStore.getUsers(),this.student=this.usersStore.users.find(s=>s.id==this.referredUserId),this.student||console.error("Student not found")}catch(s){console.error("Error fetching student info:",s)}},getReferral(){fetch(`/referrals/get-receipts/${this.referredUserId}`).then(function(s){return s.json()}).then(async s=>{this.receipts=s,console.log(this.receipts),this.loading=!1})},formatCurrency(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s)},formatDate(s){const l={year:"numeric",month:"long",day:"numeric"};return new Date(s).toLocaleDateString("en-US",l)},getStatusClass(s){return{completed:"badge-success",pending:"badge-warning",failed:"badge-danger",refunded:"badge-secondary"}[s]||"badge-secondary"},getTotalPayments(){return this.receipts.filter(s=>s.status==="completed"||!s.status).reduce((s,l)=>s+parseFloat(l.amount||0),0)},goBack(){this.$router.push("/referrals")}}},e=s=>(b("data-v-dd18ba6f"),s=s(),S(),s),k={class:"container bg-light rounded"},I={class:"mb-3"},w={key:0,class:"heading"},C={key:1,class:"heading"},U={key:2,class:"text-center py-4"},D=e(()=>t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1)),T=[D],x={key:3,class:"row mb-4"},P={class:"col-md-6"},N={class:"card"},B={class:"card-body"},A=e(()=>t("h5",{class:"card-title"},"Student Summary",-1)),R={class:"card-text"},F=e(()=>t("strong",null,"Username:",-1)),j=e(()=>t("br",null,null,-1)),E=e(()=>t("strong",null,"Email:",-1)),L=e(()=>t("br",null,null,-1)),V=e(()=>t("strong",null,"Total Payments:",-1)),z=e(()=>t("br",null,null,-1)),q=e(()=>t("strong",null,"Number of Transactions:",-1)),H={key:4},M=e(()=>t("h3",null,"Payment History",-1)),G={key:0,class:"alert alert-info"},J={key:1,class:"table-responsive"},K={class:"table table-striped table-hover"},O={class:"table-dark"},Q=e(()=>t("th",null,"Date",-1)),W=e(()=>t("th",null,"Description",-1)),X=e(()=>t("th",null,"Amount",-1)),Y=e(()=>t("th",null,"Payment Method",-1)),Z=e(()=>t("th",null,"Transaction ID",-1)),$={key:0},tt={class:"fw-bold"},st={class:"font-monospace small"},et={key:0},nt={key:1,class:"badge badge-success"},ot={key:2,class:"row mt-4"},rt={class:"col-md-6 offset-md-6"},at={class:"card"},dt={class:"card-body"},lt=e(()=>t("h6",{class:"card-title"},"Payment Summary",-1)),ct={class:"d-flex justify-content-between"},it=e(()=>t("span",null,"Total Payments:",-1)),ut={class:"d-flex justify-content-between"},_t=e(()=>t("span",null,"Total Transactions:",-1));function ht(s,l,mt,ft,o,c){return r(),a("div",k,[t("div",I,[t("button",{onClick:l[0]||(l[0]=(...n)=>c.goBack&&c.goBack(...n)),class:"btn btn-outline-secondary"}," ← Back to Referrals ")]),o.student?(r(),a("h1",w,d(o.student.username),1)):(r(),a("h1",C,"Student ID: "+d(o.referredUserId),1)),o.loading?(r(),a("div",U,T)):i("",!0),!o.loading&&o.student?(r(),a("div",x,[t("div",P,[t("div",N,[t("div",B,[A,t("p",R,[F,u(" "+d(o.student.username),1),j,E,u(" "+d(o.student.email||"N/A"),1),L,V,u(" "+d(c.formatCurrency(c.getTotalPayments())),1),z,q,u(" "+d(o.receipts.length),1)])])])])])):i("",!0),o.loading?i("",!0):(r(),a("div",H,[M,o.receipts.length===0?(r(),a("div",G," No payments found for this student. ")):(r(),a("div",J,[t("table",K,[t("thead",O,[t("tr",null,[Q,W,X,Y,Z,o.receipts.some(n=>n.status)?(r(),a("th",$," Status ")):i("",!0)])]),t("tbody",null,[(r(!0),a(y,null,g(o.receipts,n=>(r(),a("tr",{key:n.id},[t("td",null,d(c.formatDate(n.created_at||n.payment_date)),1),t("td",null,d(n.description||n.course_name||"Payment"),1),t("td",tt,d(c.formatCurrency(n.amount)),1),t("td",null,d(n.payment_method||"N/A"),1),t("td",st,d(n.transaction_id||n.id),1),o.receipts.some(_=>_.status)?(r(),a("td",et,[n.status?(r(),a("span",{key:0,class:p(["badge",c.getStatusClass(n.status)])},d(n.status.charAt(0).toUpperCase()+n.status.slice(1)),3)):(r(),a("span",nt,"Completed"))])):i("",!0)]))),128))])])])),o.receipts.length>0?(r(),a("div",ot,[t("div",rt,[t("div",at,[t("div",dt,[lt,t("div",ct,[it,t("strong",null,d(c.formatCurrency(c.getTotalPayments())),1)]),t("div",ut,[_t,t("strong",null,d(o.receipts.length),1)])])])])])):i("",!0)]))])}const gt=h(v,[["render",ht],["__scopeId","data-v-dd18ba6f"]]);export{gt as default};
