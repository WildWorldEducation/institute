import{_ as u,f,r as p,o as c,c as d,a as n,k as _,p as y,d as w,b as g,F as b}from"./main-691088b1.js";import{u as A}from"./AnalyticsStore-de436e4a.js";import"./transform-af9a74a2.js";import{l as C,c as k,b as B}from"./linear-5b188edc.js";import{m as D,b as F}from"./continuous-7328829e.js";import{s as L}from"./sort-ed61f96d.js";import{s as T}from"./string-dd82ab4a.js";import{D as S}from"./downloadCSVBtn-2aa6f829.js";import{F as z}from"./FailedAssessmentsHorizontalBarChart-bba7470f.js";const I={name:"TenantFailedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){this.data;const r=document.getElementById("failed-assessments-chart-container").clientWidth,l=document.getElementById("failed-assessments-chart-container").clientHeight,a=C().domain([0,D(this.data,s=>s.quantity)]).range([200,r-0]),i=F().domain(L(this.data,s=>-s.quantity).map(s=>s.name)).rangeRound([0,l-10]).padding(.1);a.tickFormat(20);const m=T("#failed-assessments-chart-container").append("svg").attr("width",r).attr("height",l).attr("viewBox",[0,0,r,l]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");m.append("g").attr("fill","darkred").selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",s=>i(s.name)).attr("width",s=>a(s.quantity)-a(0)).attr("height",i.bandwidth()),m.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",s=>a(s.quantity)).attr("y",s=>i(s.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(s=>s.quantity).call(s=>s.filter(x=>a(x.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),m.append("g").attr("transform","translate(0,0)").call(k(a).ticks(0)).call(s=>s.select(".domain").remove()),m.append("g").attr("transform","translate(200,0)").call(B(i).tickSizeOuter(0))}};function R(t,e,h,o,r,l){return null}const H=u(I,[["render",R]]);const j={setup(){const t=f(),e=A();return{userDetailsStore:t,analyticsStore:e}},components:{TenantFailedAssessmentsHorizontalBarChart:H,DownloadCSVBtn:S},data(){return{studentId:this.$route.params.studentId}},async created(){this.analyticsStore.failedAssessments.length==0&&await this.getFailedAssessments()},methods:{async getFailedAssessments(){try{const t=await fetch(`/student-analytics/failed-assessments/tenant/${this.userDetailsStore.tenantId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);this.analyticsStore.failedAssessments=await t.json()}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.analyticsStore.failedAssessments=[]}}}},v=t=>(y("data-v-ba06c1cf"),t=t(),w(),t),E={class:"container chart-page"},q={class:"row h-100"},Q={class:"col-md position-relative"},M=v(()=>n("h3",{class:"secondary-heading h5"},"Assessments failed",-1)),N={id:"failed-assessments-chart-container"},V=v(()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[n("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)),P=[V],O={key:1};function U(t,e,h,o,r,l){const a=p("TenantFailedAssessmentsHorizontalBarChart");return c(),d("div",E,[n("div",q,[n("div",Q,[M,n("div",N,[n("button",{class:"position-absolute download-btn btn",onClick:e[0]||(e[0]=i=>t.downloadData(o.analyticsStore.rootSubjectsFailedAssessments,"Subjects-failed"))},P),o.analyticsStore.failedAssessments.length>0?(c(),_(a,{key:0,data:o.analyticsStore.failedAssessments},null,8,["data"])):(c(),d("p",O,"No data yet"))])])])])}const W=u(j,[["render",U],["__scopeId","data-v-ba06c1cf"]]);const G={setup(){const t=f(),e=A();return{userDetailsStore:t,analyticsStore:e}},components:{FailedAssessmentsHorizontalBarChart:z,DownloadCSVBtn:S},data(){return{failedAssessmentQuantities:[],failedAssessmentQuantitiesDownloadData:[]}},async created(){this.getAllStudentsFailedAssessments()},methods:{async getAllStudentsFailedAssessments(){try{const t=await fetch(`/student-analytics/failed-assessments/all-students/${this.userDetailsStore.userId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();this.failedAssessmentQuantities=Array.isArray(e)?e:[]}catch(t){console.error("Error fetching all students failed assessments:",t),this.failedAssessmentQuantities=[]}}}},$=t=>(y("data-v-5841f13e"),t=t(),w(),t),J={class:"container chart-page"},K={class:"row h-100"},X={class:"col-md position-relative"},Y=$(()=>n("h3",{class:"secondary-heading h5"},"Assessments failed",-1)),Z={id:"fails-by-skill-chart-container"},tt=$(()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[n("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)),st=[tt],et={key:1};function at(t,e,h,o,r,l){const a=p("FailedAssessmentsHorizontalBarChart");return c(),d("div",J,[n("div",K,[n("div",X,[Y,n("div",Z,[n("button",{class:"position-absolute download-btn btn",onClick:e[0]||(e[0]=i=>t.downloadData(o.analyticsStore.rootSubjectsFailedAssessments,"Subjects-failed"))},st),r.failedAssessmentQuantities.length>0?(c(),_(a,{key:0,data:r.failedAssessmentQuantities},null,8,["data"])):(c(),d("p",et,"No data yet"))])])])])}const nt=u(G,[["render",at],["__scopeId","data-v-5841f13e"]]),ot={name:"Dashboard",setup(){return{userDetailsStore:f()}},data(){return{}},components:{SchoolAdminChallengesReport:W,TeacherChallengesReport:nt},async created(){}};function rt(t,e,h,o,r,l){const a=p("SchoolAdminChallengesReport"),i=p("TeacherChallengesReport");return c(),d(b,null,[o.userDetailsStore.role=="school_admin"?(c(),_(a,{key:0})):g("",!0),o.userDetailsStore.role=="instructor"||o.userDetailsStore.role=="partner"?(c(),_(i,{key:1})):g("",!0)],64)}const ft=u(ot,[["render",rt]]);export{ft as default};
