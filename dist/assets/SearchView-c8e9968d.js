import{_ as v,r as p,o as i,c as a,a as s,F as _,z as x,k as w,l as f,s as y,t as T,q as k,p as b,d as S,f as I,i as C,w as L,C as q,g as D,b as d}from"./main-bed231f8.js";import{T as M}from"./tutorLoadingSymbol-fed08626.js";import{_ as B}from"./app-logo-6a421005.js";const z={data(){return{visitedSkills:[],noSkills:!0}},props:["userId"],async created(){const e=await fetch("/skills/last-visited/");this.visitedSkills=await e.json(),this.visitedSkills.length>0&&(this.noSkills=!1)},computed:{}},O=e=>(b("data-v-dbb233e9"),e=e(),S(),e),A=O(()=>s("h2",{class:"tertiary-heading h5"},"Last Visited Skills",-1)),j={id:"skill-list",class:"d-flex flex-wrap"},F=["src"];function V(e,t,h,l,r,n){const m=p("router-link");return i(),a(_,null,[A,s("div",j,[(i(!0),a(_,null,x(r.visitedSkills,c=>(i(),w(m,{class:k([{"grade-school":c.level=="grade_school","middle-school":c.level=="middle_school","high-school":c.level=="high_school",college:c.level=="college",phd:c.level=="phd"},"skill-link btn m-2 d-flex"]),to:`/skills/${c.url}`,target:"_blank"},{default:f(()=>[s("img",{class:"icons",src:c.icon},null,8,F),y("Â  "+T(c.name),1)]),_:2},1032,["class","to"]))),256))])],64)}const W=v(z,[["render",V],["__scopeId","data-v-dbb233e9"]]);const P={setup(){const e=I(),t=C();return e.getUserDetails(),{userDetailsStore:e,sessionDetailsStore:t}},data(){return{query:"",recommendedSkillsOrderedByRelevance:[],showRecommendedSkills:!1,waitForAIresponse:!1,isMobileCheck:window.innerWidth,debounceTimer:null,isTyping:!1}},components:{TutorLoadingSymbol:M},mounted(){var e=document.getElementById("searchBar");e.addEventListener("keypress",t=>{if(t.key==="Enter"){if(this.query===""||this.query===null)return;t.preventDefault(),clearTimeout(this.debounceTimer),this.isTyping=!1,this.sessionDetailsStore.isLoggedIn?this.getRecommendedSkills():this.getRecommendedSkillsGuestMode()}}),e.addEventListener("input",()=>{this.isTyping=!0,clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.query&&this.query.length>=3&&(this.isTyping=!1,this.sessionDetailsStore.isLoggedIn?this.getRecommendedSkills():this.getRecommendedSkillsGuestMode())},700)})},methods:{async getRecommendedSkills(){if(this.query===""||this.query===null||this.query.length<3)return;this.waitForAIresponse=!0,this.showRecommendedSkills=!1;let e="/skills/get-recommended-skills";const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,cohortId:this.userDetailsStore.cohortId,query:this.query})};try{const l=await(await fetch(e,t)).json();if(this.waitForAIresponse=!1,l.length===0){alert("Can't find any result that matches your need"),this.showRecommendedSkills=!1;return}this.recommendedSkillsOrderedByRelevance=l,this.showRecommendedSkills=!0}catch(h){console.error("Error fetching recommended skills:",h),this.waitForAIresponse=!1,alert("There was an error processing your request. Please try again.")}},async getRecommendedSkillsGuestMode(){if(this.query===""||this.query===null||this.query.length<3)return;this.waitForAIresponse=!0,this.showRecommendedSkills=!1;let e="/skills/guest-user/get-recommended-skills";const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,cohortId:this.userDetailsStore.cohortId,query:this.query})};try{const l=await(await fetch(e,t)).json();if(this.waitForAIresponse=!1,!l||l.length===0){this.showRecommendedSkills=!1;return}this.recommendedSkillsOrderedByRelevance=l,this.showRecommendedSkills=!0}catch(h){console.error("Error fetching recommended skills:",h),this.waitForAIresponse=!1,alert("There was an error processing your request. Please try again.")}},removeRecommendedSkill(e){this.recommendedSkillsOrderedByRelevance.splice(e,1)},async createLearningTrack(){let e="/learning-tracks/"+this.userDetailsStore.userId+"/create",t=this.recommendedSkillsOrderedByRelevance.map(l=>l.id);const h={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.query,skills:t})};await fetch(e,h),alert("Learning track created. You can view it on the 'Learning Tracks' tab.")}},watch:{recommendedSkillsOrderedByRelevance:{handler(e){e.length===0&&(this.showRecommendedSkills=!1)},deep:!0}}},g=e=>(b("data-v-11928240"),e=e(),S(),e),E={class:"search-bar"},N={class:"d-flex align-items-center p-1"},G=["placeholder"],U=["disabled"],J=g(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",class:"tertiary-icon"},[s("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})],-1)),Y=[J],$=["disabled"],H=g(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",class:"tertiary-icon"},[s("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})],-1)),K=[H],Q={key:0,class:"ai-tutor-processing mt-1"},X=g(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"18",height:"18",fill:"black"},[s("path",{d:"M320 0c17.7 0 32 14.3 32 32l0 64 120 0c39.8 0 72 32.2 72 72l0 272c0 39.8-32.2 72-72 72l-304 0c-39.8 0-72-32.2-72-72l0-272c0-39.8 32.2-72 72-72l120 0 0-64c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224l16 0 0 192-16 0c-26.5 0-48-21.5-48-48l0-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48l0 96c0 26.5-21.5 48-48 48l-16 0 0-192 16 0z"})],-1)),Z={key:1},ee=g(()=>s("h2",{class:"secondary-heading h5 bg-white rounded p-2 mt-2"}," Recommended Skills ",-1)),se=["src"],te=["src"],oe=["onClick"],ie=g(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"white",height:"11",width:"11"},[s("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})],-1)),le=[ie];function re(e,t,h,l,r,n){const m=p("TutorLoadingSymbol"),c=p("router-link");return i(),a(_,null,[s("div",E,[s("div",N,[L(s("input",{id:"searchBar",type:"text",class:"recommended-skills-input",placeholder:r.isMobileCheck<576?"Search...":"Which skill or profession do you want to learn about?","onUpdate:modelValue":t[0]||(t[0]=o=>r.query=o)},null,8,G),[[q,r.query]]),l.sessionDetailsStore.isLoggedIn?(i(),a("button",{key:0,id:"searchButton",onClick:t[1]||(t[1]=(...o)=>n.getRecommendedSkills&&n.getRecommendedSkills(...o)),class:"btn primary-btn rounded p-2",disabled:r.waitForAIresponse||r.isTyping||r.query.length<3},Y,8,U)):(i(),a("button",{key:1,id:"searchButton",onClick:t[2]||(t[2]=(...o)=>n.getRecommendedSkillsGuestMode&&n.getRecommendedSkillsGuestMode(...o)),class:"btn primary-btn rounded p-2",disabled:r.waitForAIresponse||r.isTyping||r.query.length<3},K,8,$))])]),r.waitForAIresponse?(i(),a("div",Q,[X,y(" Thinking "),D(m)])):d("",!0),r.showRecommendedSkills?(i(),a("div",Z,[ee,s("div",{class:k([{"d-flex flex-wrap":!l.sessionDetailsStore.isLoggedIn},"recommended-skills-wrapper"])},[(i(!0),a(_,null,x(r.recommendedSkillsOrderedByRelevance,(o,R)=>(i(),a("div",{key:o.id,class:"d-flex flex-row align-items-end"},[l.sessionDetailsStore.isLoggedIn?(i(),w(c,{key:0,class:k([{"grade-school":o.level=="grade_school","middle-school":o.level=="middle_school","high-school":o.level=="high_school",college:o.level=="college",phd:o.level=="phd"},"skill-link btn m-1 d-flex align-items-center"]),to:`/skills/${o.url}`,target:"_blank"},{default:f(()=>[o.icon_url?(i(),a("img",{key:0,src:o.icon_url,class:"skill-icon",alt:"",loading:"lazy"},null,8,se)):d("",!0),y(" "+T(o.name),1)]),_:2},1032,["class","to"])):(i(),w(c,{key:1,class:k([{"grade-school":o.level=="grade_school","middle-school":o.level=="middle_school","high-school":o.level=="high_school",college:o.level=="college",phd:o.level=="phd"},"skill-link btn m-1 d-flex align-items-center"]),to:`/skills/${o.url}`,target:"_blank"},{default:f(()=>[o.icon_url?(i(),a("img",{key:0,src:o.icon_url,class:"skill-icon",alt:"",loading:"lazy"},null,8,te)):d("",!0),y(" "+T(o.name),1)]),_:2},1032,["class","to"])),s("button",{"b-tooltip.hover":"",title:"remove skill from learning track",class:"red-btn small-btn",onClick:Ve=>n.removeRecommendedSkill(R)},le,8,oe)]))),128))],2)])):d("",!0)],64)}const ne=v(P,[["render",re],["__scopeId","data-v-11928240"]]);const ae={setup(){const e=I(),t=C();return e.getUserDetails(),{userDetailsStore:e,sessionDetailsStore:t}},data(){return{showWelcomeModal:!1,isTutorialComplete:!1,showTutorialTip1:!1,showTutorialTip2:!1,showTutorialTip3:!1}},components:{LastVisitedSkills:W,RecommendedSkillsGenerator:ne},computed:{name(){return this.userDetailsStore.firstName+" "+this.userDetailsStore.lastName}},async created(){document.querySelector('meta[name="description"]').setAttribute("content","Search for a skill or profession you want to learn about."),window.innerWidth<576&&this.sessionDetailsStore.isLoggedIn&&this.checkIfTutorialComplete()},methods:{async checkIfTutorialComplete(){if(window.innerWidth<576)try{const t=await(await fetch("/users/check-tutorial-progress/hub/"+this.userDetailsStore.userId)).json();t===0&&this.userDetailsStore.role==="student"?this.showWelcomeModal=!0:t===1&&(this.isTutorialComplete=!0)}catch(e){console.error("Error checking tutorial progress:",e)}else this.isTutorialComplete=!0},progressTutorial(e){e==1?(this.showTutorialTip1=!1,this.showTutorialTip2=!0):e==2?(this.showTutorialTip2=!1,this.showTutorialTip3=!0):e==3&&(this.showTutorialTip3=!1,this.markTutorialComplete())},markTutorialComplete(){let e="/users/mark-tutorial-complete/hub/"+this.userDetailsStore.userId;fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"}})},async startTutorial(){this.showTutorialTip1=!0,this.isTutorialComplete=!1,this.showWelcomeModal=!1,await this.resetTutorialProgress()},async resetTutorialProgress(){try{await fetch(`/users/reset-all-tutorials/${this.userDetailsStore.userId}`,{method:"PUT",headers:{"Content-Type":"application/json"}})}catch(e){console.error("Error resetting tutorials:",e)}},async closeTutorial(){this.showWelcomeModal=!1,await this.markAllTutorialsComplete()},restartTutorial(){this.startTutorial()},async markAllTutorialsComplete(){try{(await fetch(`/users/mark-all-tutorials-complete/${this.userDetailsStore.userId}`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok?this.isTutorialComplete=!0:console.error("Error marking tutorials as complete.")}catch(e){console.error("API request failed:",e)}},skipTutorial(){this.showTutorialTip1=!1,this.showTutorialTip2=!1,this.showTutorialTip3=!1,this.isTutorialComplete=!0,this.markTutorialComplete()}}},u=e=>(b("data-v-c8ee5cdb"),e=e(),S(),e),ce={key:0,class:"container-fluid d-flex info-btn"},de=u(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[s("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),he=[de],ue=u(()=>s("div",{class:"text-center app-logo-wrapper"},[s("img",{class:"img-fluid",src:B,alt:"icon of a skill tree"})],-1)),me={class:"container"},pe={class:"row mb-4"},_e={class:"col"},ge={key:0,class:"tool-tip-base",style:{maxWidth:"300px"}},ye={class:"explain-tool-tip triangle-top-left"},ke={class:"tool-tip-text"},we=u(()=>s("p",null," Type a career or skill here to get recommendations. ",-1)),fe={class:"d-flex justify-content-between"},Te={key:0,class:"row"},ve={class:"col mb-2"},be={class:"h-100"},Se={key:0,class:"tool-tip-base mb-3"},xe={class:"explain-tool-tip triangle-bottom-left"},Ie={class:"tool-tip-text"},Ce=u(()=>s("p",null," This section shows your the last 5 skill pages you visited. ",-1)),De={key:1,class:"modal"},Re={class:"modal-content"},Le=u(()=>s("h1",{class:"heading h3"},"Welcome to the Collins Institute",-1)),qe=u(()=>s("p",null,"Would you like to go through the tutorial?",-1)),Me=u(()=>s("p",null,' You can start or restart it anytime by clicking the "i" button on any page. ',-1)),Be={class:"d-flex justify-content-between"},ze={key:2,class:"modal"},Oe={key:0,class:"modal-content"},Ae=u(()=>s("p",null,"This is the search page.",-1)),je={class:"d-flex justify-content-between"};function Fe(e,t,h,l,r,n){const m=p("RecommendedSkillsGenerator"),c=p("LastVisitedSkills");return i(),a(_,null,[l.sessionDetailsStore.isLoggedIn?(i(),a("div",ce,[s("button",{class:"btn",onClick:t[0]||(t[0]=(...o)=>n.restartTutorial&&n.restartTutorial(...o))},he)])):d("",!0),ue,s("div",me,[s("div",pe,[s("div",_e,[D(m),r.showTutorialTip2&&l.userDetailsStore.role=="student"?(i(),a("div",ge,[s("div",ye,[s("div",ke,[we,s("div",fe,[s("button",{class:"btn primary-btn",onClick:t[1]||(t[1]=o=>n.progressTutorial(2))}," next "),s("button",{class:"btn red-btn",onClick:t[2]||(t[2]=(...o)=>n.skipTutorial&&n.skipTutorial(...o))}," exit tutorial ")])])])])):d("",!0)])]),l.sessionDetailsStore.isLoggedIn?(i(),a("div",Te,[s("div",ve,[s("div",be,[r.showTutorialTip3&&l.userDetailsStore.role=="student"?(i(),a("div",Se,[s("div",xe,[s("div",Ie,[Ce,s("button",{class:"btn primary-btn",onClick:t[3]||(t[3]=o=>n.progressTutorial(3))}," close ")])])])):d("",!0),l.userDetailsStore.role=="student"?(i(),w(c,{key:1,userId:l.userDetailsStore.userId},null,8,["userId"])):d("",!0)])])])):d("",!0)]),r.showWelcomeModal?(i(),a("div",De,[s("div",Re,[Le,qe,Me,s("div",Be,[s("button",{class:"btn red-btn mx-0",onClick:t[4]||(t[4]=(...o)=>n.closeTutorial&&n.closeTutorial(...o))}," No "),s("button",{class:"btn primary-btn mx-0",onClick:t[5]||(t[5]=(...o)=>n.startTutorial&&n.startTutorial(...o))}," Yes ")])])])):d("",!0),l.userDetailsStore.role=="student"&&r.showTutorialTip1?(i(),a("div",ze,[r.showTutorialTip1&&l.userDetailsStore.role=="student"?(i(),a("div",Oe,[s("div",null,[Ae,s("div",je,[s("button",{class:"btn primary-btn",onClick:t[6]||(t[6]=o=>n.progressTutorial(1))}," next "),s("button",{class:"btn red-btn",onClick:t[7]||(t[7]=(...o)=>n.skipTutorial&&n.skipTutorial(...o))}," exit tutorial ")])])])):d("",!0)])):d("",!0)],64)}const Ne=v(ae,[["render",Fe],["__scopeId","data-v-c8ee5cdb"]]);export{Ne as default};
