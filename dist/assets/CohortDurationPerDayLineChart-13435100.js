import{w as un,c as T,a as ln}from"./point-ea70dc51.js";import"./transform-af9a74a2.js";import{_ as cn}from"./main-617fe1f8.js";import{u as fn,l as gn}from"./line-85f04100.js";import{e as mn}from"./extent-4cf1c809.js";import{l as pn,a as hn,b as yn}from"./linear-5b188edc.js";import{m as dn}from"./continuous-7328829e.js";import{s as xn}from"./string-dd82ab4a.js";const on=Math.abs,M=Math.atan2,Q=Math.cos,vn=Math.max,en=Math.min,I=Math.sin,j=Math.sqrt,k=1e-12,z=Math.PI,X=z/2,U=2*z;function An(e){return e>1?0:e<-1?z:Math.acos(e)}function sn(e){return e>=1?X:e<=-1?-X:Math.asin(e)}function Mn(e){return e.innerRadius}function Rn(e){return e.outerRadius}function Tn(e){return e.startAngle}function wn(e){return e.endAngle}function $n(e){return e&&e.padAngle}function kn(e,u,m,v,h,y,c,n){var g=m-e,i=v-u,t=c-h,l=n-y,a=l*g-t*i;if(!(a*a<k))return a=(t*(u-y)-l*(e-h))/a,[e+a*g,u+a*i]}function K(e,u,m,v,h,y,c){var n=e-m,g=u-v,i=(c?y:-y)/j(n*n+g*g),t=i*g,l=-i*n,a=e+t,o=u+l,p=m+t,d=v+l,D=(a+p)/2,f=(o+d)/2,R=p-a,A=d-o,x=R*R+A*A,w=h-y,$=a*d-p*o,E=(A<0?-1:1)*j(vn(0,w*w*x-$*$)),q=($*A-R*E)/x,N=(-$*R-A*E)/x,B=($*A+R*E)/x,P=(-$*R+A*E)/x,C=q-D,r=N-f,s=B-D,O=P-f;return C*C+r*r>s*s+O*O&&(q=B,N=P),{cx:q,cy:N,x01:-t,y01:-l,x11:q*(h/w-1),y11:N*(h/w-1)}}function Vn(){var e=Mn,u=Rn,m=T(0),v=null,h=Tn,y=wn,c=$n,n=null,g=un(i);function i(){var t,l,a=+e.apply(this,arguments),o=+u.apply(this,arguments),p=h.apply(this,arguments)-X,d=y.apply(this,arguments)-X,D=on(d-p),f=d>p;if(n||(n=t=g()),o<a&&(l=o,o=a,a=l),!(o>k))n.moveTo(0,0);else if(D>U-k)n.moveTo(o*Q(p),o*I(p)),n.arc(0,0,o,p,d,!f),a>k&&(n.moveTo(a*Q(d),a*I(d)),n.arc(0,0,a,d,p,f));else{var R=p,A=d,x=p,w=d,$=D,E=D,q=c.apply(this,arguments)/2,N=q>k&&(v?+v.apply(this,arguments):j(a*a+o*o)),B=en(on(o-a)/2,+m.apply(this,arguments)),P=B,C=B,r,s;if(N>k){var O=sn(N/a*I(q)),H=sn(N/o*I(q));($-=O*2)>k?(O*=f?1:-1,x+=O,w-=O):($=0,x=w=(p+d)/2),(E-=H*2)>k?(H*=f?1:-1,R+=H,A-=H):(E=0,R=A=(p+d)/2)}var S=o*Q(R),V=o*I(R),W=a*Q(w),F=a*I(w);if(B>k){var G=o*Q(A),J=o*I(A),Y=a*Q(x),Z=a*I(x),L;if(D<z)if(L=kn(S,V,Y,Z,G,J,W,F)){var b=S-L[0],_=V-L[1],nn=G-L[0],tn=J-L[1],rn=1/I(An((b*nn+_*tn)/(j(b*b+_*_)*j(nn*nn+tn*tn)))/2),an=j(L[0]*L[0]+L[1]*L[1]);P=en(B,(a-an)/(rn-1)),C=en(B,(o-an)/(rn+1))}else P=C=0}E>k?C>k?(r=K(Y,Z,S,V,o,C,f),s=K(G,J,W,F,o,C,f),n.moveTo(r.cx+r.x01,r.cy+r.y01),C<B?n.arc(r.cx,r.cy,C,M(r.y01,r.x01),M(s.y01,s.x01),!f):(n.arc(r.cx,r.cy,C,M(r.y01,r.x01),M(r.y11,r.x11),!f),n.arc(0,0,o,M(r.cy+r.y11,r.cx+r.x11),M(s.cy+s.y11,s.cx+s.x11),!f),n.arc(s.cx,s.cy,C,M(s.y11,s.x11),M(s.y01,s.x01),!f))):(n.moveTo(S,V),n.arc(0,0,o,R,A,!f)):n.moveTo(S,V),!(a>k)||!($>k)?n.lineTo(W,F):P>k?(r=K(W,F,G,J,a,-P,f),s=K(S,V,Y,Z,a,-P,f),n.lineTo(r.cx+r.x01,r.cy+r.y01),P<B?n.arc(r.cx,r.cy,P,M(r.y01,r.x01),M(s.y01,s.x01),!f):(n.arc(r.cx,r.cy,P,M(r.y01,r.x01),M(r.y11,r.x11),!f),n.arc(0,0,a,M(r.cy+r.y11,r.cx+r.x11),M(s.cy+s.y11,s.cx+s.x11),f),n.arc(s.cx,s.cy,P,M(s.y11,s.x11),M(s.y01,s.x01),!f))):n.arc(0,0,a,w,x,f)}if(n.closePath(),t)return n=null,t+""||null}return i.centroid=function(){var t=(+e.apply(this,arguments)+ +u.apply(this,arguments))/2,l=(+h.apply(this,arguments)+ +y.apply(this,arguments))/2-z/2;return[Q(l)*t,I(l)*t]},i.innerRadius=function(t){return arguments.length?(e=typeof t=="function"?t:T(+t),i):e},i.outerRadius=function(t){return arguments.length?(u=typeof t=="function"?t:T(+t),i):u},i.cornerRadius=function(t){return arguments.length?(m=typeof t=="function"?t:T(+t),i):m},i.padRadius=function(t){return arguments.length?(v=t==null?null:typeof t=="function"?t:T(+t),i):v},i.startAngle=function(t){return arguments.length?(h=typeof t=="function"?t:T(+t),i):h},i.endAngle=function(t){return arguments.length?(y=typeof t=="function"?t:T(+t),i):y},i.padAngle=function(t){return arguments.length?(c=typeof t=="function"?t:T(+t),i):c},i.context=function(t){return arguments.length?(n=t??null,i):n},i}function Pn(e,u){return u<e?-1:u>e?1:u>=e?0:NaN}function Cn(e){return e}function jn(){var e=Cn,u=Pn,m=null,v=T(0),h=T(U),y=T(0);function c(n){var g,i=(n=ln(n)).length,t,l,a=0,o=new Array(i),p=new Array(i),d=+v.apply(this,arguments),D=Math.min(U,Math.max(-U,h.apply(this,arguments)-d)),f,R=Math.min(Math.abs(D)/i,y.apply(this,arguments)),A=R*(D<0?-1:1),x;for(g=0;g<i;++g)(x=p[o[g]=g]=+e(n[g],g,n))>0&&(a+=x);for(u!=null?o.sort(function(w,$){return u(p[w],p[$])}):m!=null&&o.sort(function(w,$){return m(n[w],n[$])}),g=0,l=a?(D-i*A)/a:0;g<i;++g,d=f)t=o[g],x=p[t],f=d+(x>0?x*l:0)+A,p[t]={data:n[t],index:g,value:x,startAngle:d,endAngle:f,padAngle:R};return p}return c.value=function(n){return arguments.length?(e=typeof n=="function"?n:T(+n),c):e},c.sortValues=function(n){return arguments.length?(u=n,m=null,c):u},c.sort=function(n){return arguments.length?(m=n,u=null,c):m},c.startAngle=function(n){return arguments.length?(v=typeof n=="function"?n:T(+n),c):v},c.endAngle=function(n){return arguments.length?(h=typeof n=="function"?n:T(+n),c):h},c.padAngle=function(n){return arguments.length?(y=typeof n=="function"?n:T(+n),c):y},c}const Dn={name:"CohortDurationPerDayLineChart",props:["data","colour"],data(){return{}},mounted(){const e=this.data,u=document.getElementById("time-chart-container").clientWidth,m=document.getElementById("time-chart-container").clientHeight,v=10,h=20,y=20,c=25,n=fn(mn(e,l=>l.date),[c,u-h]),g=pn([0,dn(e,l=>l.formattedQuantity)],[m-y,v]),i=gn().x(l=>n(l.date)).y(l=>g(l.formattedQuantity)),t=xn("#time-chart-container").append("svg").attr("width",u).attr("height",m).attr("viewBox",[0,0,u,m]).attr("style","max-width: 100%; height: auto; height: intrinsic;");t.append("g").attr("transform",`translate(0,${m-y})`).call(hn(n).ticks(e.length).tickSizeOuter(0)),t.append("g").attr("transform",`translate(${c},0)`).call(yn(g).ticks(m/80)).call(l=>l.selectAll(".tick line").clone().attr("x2",u-c-h).attr("stroke-opacity",.1)).call(l=>l.append("text").attr("x",-c).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text("â†‘ Duration in minutes")),t.append("path").attr("fill","none").attr("stroke","purple").attr("stroke-width",3).attr("d",i(e))}};function Bn(e,u,m,v,h,y){return null}const zn=cn(Dn,[["render",Bn]]);export{zn as C,Vn as a,jn as p};
