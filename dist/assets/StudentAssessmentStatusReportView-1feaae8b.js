import{_ as S,A as _,K as y,r as o,o as n,c as i,a,t as f,s as d,g as m,k as c}from"./main-b1b1baf1.js";import{u as g}from"./TeacherAnalyticsStore-964a39e9.js";import{P as D,A as k}from"./AttemptedAssessmentsTimelineChart-6223fc2c.js";import{F as w}from"./FailedAssessmentsHorizontalBarChart-7208eaf4.js";import{D as N}from"./downloadCSVBtn-d1b1cef6.js";import"./transform-35b9fb9e.js";import"./time-962c8065.js";import"./linear-c968f95f.js";import"./band-18e9f0c1.js";import"./sort-855cf5d1.js";const C={setup(){const e=_(),s=y(),h=g();return{usersStore:e,userSkillsStore:s,teacherAnalyticsStore:h}},components:{FailedAssessmentsHorizontalBarChart:w,PassedAssessmentsTimelineChart:D,AttemptedAssessmentsTimelineChart:k,DownloadCSVBtn:N},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentPasses:[],assessmentAttempts:[],assessmentPassesDownloadData:[],assessmentAttemptsDownloadData:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const e=this.usersStore.users.find(s=>s.id===this.studentId);e&&(this.studentName=e.username),await this.getUserSkillMasteredHistory(this.studentId),await this.getAssessmentAttempts(),this.assessmentPassesDownloadData=this.assessmentPasses.map(s=>({skill:s.name,date:this.assessmentDate(s.mastered_date)})),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),this.isLoaded=!0},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(e=>e.json()).then(e=>{this.assessmentAttempts=e.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`})),this.assessmentAttemptsDownloadData=this.assessmentAttempts.map(s=>({skill:s.name,date:this.assessmentDate(s.date)}))}).catch(e=>{console.error("Error fetching last visited skills:",e)})},assessmentDate(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async getUserSkillMasteredHistory(e){await this.userSkillsStore.getMasteredSkills(e),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`}))}}},P={class:"container"},T={class:"d-flex justify-content-between w-100"},b=a("h1",{class:"heading"},"Assessment Status Report",-1),B={class:"secondary-heading h3"},F={class:"secondary-heading pt-2 d-flex justify-content-between"},V={key:1},j={class:"secondary-heading pt-2 d-flex justify-content-between"},x={key:1},M={class:"secondary-heading pt-2 d-flex justify-content-between"},v={key:1};function I(e,s,h,l,t,U){const r=o("DownloadCSVBtn"),u=o("FailedAssessmentsHorizontalBarChart"),p=o("PassedAssessmentsTimelineChart"),A=o("AttemptedAssessmentsTimelineChart");return n(),i("div",P,[a("span",T,[b,a("h2",B,f(t.studentName),1)]),a("div",null,[a("h4",F,[d(" Failed multiple times "),m(r,{data:l.teacherAnalyticsStore.studentMultipleFails,fileName:`Assessment Status Report - ${t.studentName}`,toolTip:"Download failed assessments data as CSV"},null,8,["data","fileName"])]),l.teacherAnalyticsStore.studentMultipleFails.length>0?(n(),c(u,{key:0,data:l.teacherAnalyticsStore.studentMultipleFails,colour:"darkred",class:"mb-5"},null,8,["data"])):(n(),i("p",V," This student has not failed any assessments more than once yet. "))]),a("div",null,[a("h4",j,[d(" Passed "),m(r,{data:t.assessmentPassesDownloadData,fileName:`Passed Assessments - ${t.studentName}`,toolTip:"Download passed assessments data as CSV"},null,8,["data","fileName"])]),t.assessmentPasses.length>0?(n(),c(p,{key:0,class:"mb-5",data:t.assessmentPasses},null,8,["data"])):(n(),i("p",x,"This student has not completed any assessments yet."))]),a("div",null,[a("h4",M,[d(" Attempted "),m(r,{data:t.assessmentAttemptsDownloadData,fileName:`Attempted Assessments - ${t.studentName}`,toolTip:"Download attempted assessments data as CSV"},null,8,["data","fileName"])]),t.assessmentAttempts.length>0?(n(),c(A,{key:0,class:"mb-5",data:t.assessmentAttempts},null,8,["data"])):(n(),i("p",v,"This student has not attempted any assessments yet."))])])}const Q=S(C,[["render",I]]);export{Q as default};
