import{S as m}from"./SkillTimeTracker-0dcc3615.js";import{_ as p,r as f,o as i,c as n,a as o,b as a,j as h,F as b}from"./main-0db18a32.js";const v={data(){return{tutorPostId:this.$route.params.tutorPostId,tutorPost:{},validateDescription:!0,validateContact:!0,skillId:null}},components:{SkillTimeTracker:m},async created(){const t=await(await fetch("/tutor-posts/show/"+this.tutorPostId)).json();this.skillId=t.skill_id,this.getTutorPost()},beforeRouteLeave(e,t,r){this.$refs.skillTimeTracker.saveDuration(),r()},methods:{async getTutorPost(){await fetch("/tutor-posts/show/"+this.tutorPostId).then(function(e){return e.json()}).then(e=>this.tutorPost=e),$("#summernote-description").summernote({disableDragAndDrop:!0,placeholder:"Describe your tutoring style and experience with the subject.",tabsize:2,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["para",["ul"]],["view",["fullscreen","codeview"]]]}).summernote("code",this.tutorPost.description),$("#summernote-contact-preference").summernote({disableDragAndDrop:!0,placeholder:"How would you like to be contacted (eg: an email address, mobile number or calendar booking link)?",tabsize:2,toolbar:[["font",["bold","underline","clear"]],["para",["ul"]],["insert",["link"]],["view",["fullscreen","codeview"]]]}).summernote("code",this.tutorPost.contact_preference),$(".note-editor .note-editable").css("background-color","#ffffff")},Submit(){let e=$("#summernote-description").summernote("code"),t=$("#summernote-contact-preference").summernote("code");if(e.length<25?this.validateDescription=!1:this.validateDescription=!0,t.length<25?this.validateContact=!1:this.validateContact=!0,!this.validateContact||!this.validateDescription)return;const r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:e,contact_preference:t})};var l="/tutor-posts/edit/"+this.tutorPostId;fetch(l,r).then(()=>{let s=this.$route.query.dismissFlagId;s?fetch("/content-flags/"+s,{method:"DELETE"}).finally(()=>{this.$router.back()}):this.$router.back()})}}},k={class:"container p-2 bg-light rounded"},_={class:"row"},g={class:"mb-3"},y={key:0,class:"form-validate"},P={class:"mb-3"},T={key:0,class:"form-validate"},w={class:"mb-3 d-flex justify-content-end gap-4"};function D(e,t,r,l,s,c){const d=f("SkillTimeTracker");return i(),n(b,null,[o("div",k,[t[4]||(t[4]=o("h1",{class:"heading"},"Edit Tutor Post",-1)),o("div",_,[o("div",g,[t[2]||(t[2]=o("textarea",{id:"summernote-description",name:"editordata"},null,-1)),s.validateDescription==!1?(i(),n("div",y," Please provide at least 25 characters. ")):a("",!0)]),o("div",P,[t[3]||(t[3]=o("textarea",{id:"summernote-contact-preference",name:"editordata2"},null,-1)),s.validateContact==!1?(i(),n("div",T," Please provide at least 25 characters. ")):a("",!0)]),o("div",w,[o("a",{class:"btn red-btn",onClick:t[0]||(t[0]=u=>e.$router.go(-1))}," Cancel "),o("button",{onClick:t[1]||(t[1]=u=>c.Submit()),class:"btn primary-btn"}," Submit ")])])]),s.skillId?(i(),h(d,{key:0,ref:"skillTimeTracker"},null,512)):a("",!0)],64)}const S=p(v,[["render",D]]);export{S as default};
