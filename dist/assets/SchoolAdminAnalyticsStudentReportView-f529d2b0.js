import{_ as b,y as f,e as P,I as B,r as l,o as n,c as o,a as e,k as d}from"./main-c88d736d.js";import{u as C}from"./TeacherAnalyticsStore-3914186d.js";import{u as w}from"./AnalyticsStore-ba0e01a9.js";import{S as v}from"./StudentProgressLineChart-83658dd9.js";import{S as j}from"./StudentSkillActivityChart-196988db.js";import{P as D,A as R}from"./AttemptedAssessmentsTimelineChart-bf7b3403.js";import{F as T}from"./FailedAssessmentsHorizontalBarChart-4c16aecb.js";import{S as F}from"./StudentDurationPerDayLineChart-66b45e07.js";import{S as z,a as H,b as M}from"./StudentPassedAssessmentsByRootSubjectHorizontalBarChart-d6290a83.js";import"./transform-4d0f7c8f.js";import"./string-c67ea49d.js";import"./line-d122782f.js";import"./time-3c9385c3.js";import"./continuous-93813e6c.js";import"./point-ea70dc51.js";import"./linear-d9b6cbf2.js";import"./band-2263c9e7.js";import"./sort-fcaf8f38.js";const _={components:{StudentProgressLineChart:v,StudentSkillActivityChart:j,PassedAssessmentsTimelineChart:D,AttemptedAssessmentsTimelineChart:R,FailedAssessmentsHorizontalBarChart:T,StudentDurationPerDayLineChart:F,StudentAttemptedAssessmentsByRootSubjectHorizontalBarChart:z,StudentFailedAssessmentsByRootSubjectHorizontalBarChart:H,StudentPassedAssessmentsByRootSubjectHorizontalBarChart:M},setup(){const s=f(),t=P(),i=C(),a=B(),r=w();return s.users.length<1&&s.getUsers(),{usersStore:s,userDetailsStore:t,teacherAnalyticsStore:i,userSkillsStore:a,analyticsStore:r}},data(){return{userId:this.$route.params.studentId,isMobileCheck:window.innerWidth,studentProgress:[],assessmentPasses:[],assessmentAttempts:[],skillDurations:[],durationsPerDay:[],visitedSkills:[]}},async created(){await this.getStudentDurationPerDay(),await this.getTenantStudentProgress(),await this.getAssessmentPasses(),await this.getAssessmentAttempts(),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.userid),this.teacherAnalyticsStore.skillActivities.length==0&&await this.teacherAnalyticsStore.getSkillActivityReport(this.userid),this.teacherAnalyticsStore.skillActivities=this.teacherAnalyticsStore.skillActivities.map(s=>({...s,formattedQuantity:this.millisToMinutesAndSeconds(s.quantity)})),await this.analyticsStore.getStudentFailedAssessmentsBySubject(this.userid),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userid),await this.analyticsStore.getStudentAttemptedAssessmentsBySubject(this.userid)},computed:{studentName(){return`${this.$parent.user.username}`.trim()}},methods:{async getTenantStudentProgress(){fetch(`/student-analytics/student-progress/${this.userId}`).then(s=>s.json()).then(s=>{for(let t=0;t<s.length;t++)s[t].date=new Date(s[t].date);s.sort((t,i)=>t.date-i.date),this.studentProgress=s}).catch(s=>{console.error("Error fetching student progress:",s)})},async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.userId}`).then(s=>s.json()).then(s=>{this.assessmentAttempts=s.map(t=>({...t,url:`/skills/${t.url}`,labelName:`${t.name}`}))}).catch(s=>{console.error("Error fetching last visited skills:",s)})},async getAssessmentPasses(){await this.userSkillsStore.getMasteredSkills(this.userId),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`}))},async getStudentDurationPerDay(){fetch(`/student-analytics/student-duration-per-day/${this.userId}`).then(s=>s.json()).then(s=>{for(let t=0;t<s.length;t++)s[t].formattedQuantity=s[t].quantity/(1e3*60),s[t].date=new Date(s[t].date);s.sort((t,i)=>t.date-i.date),this.durationsPerDay=s}).catch(s=>{console.error("Error fetching student duration per day:",s)})},millisToMinutesAndSeconds(s){var t=Math.floor(s/6e4),i=(s%6e4/1e3).toFixed(0);return t+":"+(i<10?"0":"")+i}}},N={class:"container bg-light"},I={class:"d-flex justify-content-between"},L={key:1},x={key:3},E={key:5},U={key:7},V={key:9},q={key:11},Q={key:13},W={key:15},G={key:17,class:"mb-5"};function J(s,t,i,a,r,K){const m=l("StudentDurationPerDayLineChart"),u=l("StudentSkillActivityChart"),h=l("StudentProgressLineChart"),y=l("StudentFailedAssessmentsByRootSubjectHorizontalBarChart"),c=l("StudentPassedAssessmentsByRootSubjectHorizontalBarChart"),S=l("StudentAttemptedAssessmentsByRootSubjectHorizontalBarChart"),p=l("FailedAssessmentsHorizontalBarChart"),A=l("PassedAssessmentsTimelineChart"),g=l("AttemptedAssessmentsTimelineChart");return n(),o("div",N,[e("div",I,[t[2]||(t[2]=e("h1",{class:"heading"},"Student Report",-1)),e("button",{class:"btn me-1",onClick:t[0]||(t[0]=(...k)=>s.$parent.restartTutorial&&s.$parent.restartTutorial(...k))},t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[e("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)]))]),t[3]||(t[3]=e("h2",{class:"secondary-heading"},"Engagement",-1)),t[4]||(t[4]=e("h4",null,"Total time on platform",-1)),r.durationsPerDay.length>1?(n(),d(m,{key:0,data:r.durationsPerDay},null,8,["data"])):(n(),o("p",L,"There is no data to show yet.")),t[5]||(t[5]=e("hr",{class:"mt-5 mb-5"},null,-1)),t[6]||(t[6]=e("h4",{class:"mt-4"},"Skills visited",-1)),a.teacherAnalyticsStore.skillActivities.length>0?(n(),d(u,{key:2,data:a.teacherAnalyticsStore.skillActivities},null,8,["data"])):(n(),o("p",x,"No skills visited by this student.")),t[7]||(t[7]=e("hr",{class:"mt-5 mb-5"},null,-1)),t[8]||(t[8]=e("h2",{class:"secondary-heading mt-5"},"Academics",-1)),t[9]||(t[9]=e("h4",null,"Skill mastery progress",-1)),r.studentProgress.length>0?(n(),d(h,{key:4,data:r.studentProgress,colour:"#5f31dd"},null,8,["data"])):(n(),o("p",E,"No data to show yet.")),t[10]||(t[10]=e("hr",{class:"mt-5 mb-5"},null,-1)),t[11]||(t[11]=e("h3",{class:"secondary-heading mt-4"},"By subject",-1)),t[12]||(t[12]=e("h4",{class:""},"Failed more than once",-1)),a.analyticsStore.studentRootSubjectsFailedAssessments.length>0?(n(),d(y,{key:6,data:a.analyticsStore.studentRootSubjectsFailedAssessments,colour:"darkred",class:"mb-5"},null,8,["data"])):(n(),o("p",U,"No data yet")),t[13]||(t[13]=e("hr",{class:"mt-5 mb-5"},null,-1)),t[14]||(t[14]=e("h4",{class:""},"Passed",-1)),a.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(n(),d(c,{key:8,data:a.analyticsStore.studentRootSubjectsPassedAssessments,colour:"darkgreen",class:"mb-5"},null,8,["data"])):(n(),o("p",V,"No data yet")),t[15]||(t[15]=e("hr",{class:"mt-5 mb-5"},null,-1)),t[16]||(t[16]=e("h4",{class:""},"Attempted",-1)),a.analyticsStore.studentRootSubjectsAttemptedAssessments.length>0?(n(),d(S,{key:10,data:a.analyticsStore.studentRootSubjectsAttemptedAssessments,colour:"darkblue",class:"mb-5"},null,8,["data"])):(n(),o("p",q,"No data yet")),t[17]||(t[17]=e("hr",{class:"mt-5 mb-5"},null,-1)),t[18]||(t[18]=e("h3",{class:"secondary-heading mt-4"},"By skill",-1)),t[19]||(t[19]=e("h4",null,"Assessments failed",-1)),a.teacherAnalyticsStore.studentMultipleFails.length>0?(n(),d(p,{key:12,data:a.teacherAnalyticsStore.studentMultipleFails,colour:"darkred"},null,8,["data"])):(n(),o("p",Q," This student has not failed any assessments more than once yet. ")),t[20]||(t[20]=e("hr",{class:"mt-5 mb-5"},null,-1)),t[21]||(t[21]=e("h4",{class:"mt-4"},"Assessments passed",-1)),r.assessmentPasses.length>0?(n(),d(A,{key:14,data:r.assessmentPasses},null,8,["data"])):(n(),o("p",W,"This student has not completed any assessments yet.")),t[22]||(t[22]=e("hr",{class:"mt-5 mb-5"},null,-1)),t[23]||(t[23]=e("h4",{class:"mt-4"},"Assessments attempted",-1)),r.assessmentAttempts.length>0?(n(),d(g,{key:16,class:"mb-5",data:r.assessmentAttempts},null,8,["data"])):(n(),o("p",G," This student has attempted any assessments yet. "))])}const yt=b(_,[["render",J],["__scopeId","data-v-14aef477"]]);export{yt as default};
