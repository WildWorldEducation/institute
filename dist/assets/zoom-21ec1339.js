import{_ as _n,A as gn,r as mn,o as O,i as pe,j as Vt,c as J,z as _e,d as T,t as ge,b as rt,F as yn,y as wn,e as xn,l as me,T as vn,p as bn,f as kn}from"./main-794d02be.js";const $n={setup(){},props:["skill","showSkillPanel"],data(){return{treeType:""}},mounted(){const t=gn();this.treeType=t.name},computed:{},methods:{hideInfoPanel(){this.$parent.showSkillPanel=!1},toggleChildNodes(){this.skill.show_children==0?this.$parent.toggleShowChildren(this.skill):this.$parent.toggleHideChildren(this.skill)},imageUrlAlternative(t){t.target.src=""}}},Dt=t=>(bn("data-v-024c34ba"),t=t(),kn(),t),An={class:"skill-info-panel-top"},Nn={class:"closeButtonContainer"},Mn=Dt(()=>T("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"#888",width:"20",height:"20"},[T("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})],-1)),Cn=[Mn],zn={class:"secondary-heading h3 text-center"},Sn=["src"],Tn=["innerHTML"],En={key:0,class:"skill-mastery-requirement"},Rn=Dt(()=>T("p",null," This is a larger subject holding a series of more specific skills; click through to the skills within it to master each one! ",-1)),In=[Rn],Ln={key:1,class:"skill-mastery-requirement"},Pn=Dt(()=>T("h2",{class:"h4"},"Subskills",-1)),Bn={class:"skill-info-panel-bottom"},Dn={key:0},qn={class:"d-flex justify-content-between"},Hn=Dt(()=>T("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"primary-icon",xmlns:"http://www.w3.org/2000/svg"},[T("path",{d:"M6.34811 20.0423L6.34811 13.6494L-0.0358702 13.6583C-0.320945 13.6579 -0.594203 13.5444 -0.795782 13.3428C-0.997361 13.1412 -1.11082 12.868 -1.11132 12.5829L-1.11729 7.41477C-1.1168 7.1297 -1.00334 6.85644 -0.801757 6.65486C-0.600179 6.45328 -0.326921 6.33982 -0.0418461 6.33933L6.3481 6.34231L6.3481 -0.0506238C6.34659 -0.193451 6.3736 -0.335145 6.42756 -0.467396C6.48152 -0.599646 6.56134 -0.719794 6.66234 -0.820794C6.76334 -0.921794 6.88349 -1.00161 7.01574 -1.05557C7.14799 -1.10953 7.28969 -1.13655 7.43251 -1.13503L12.5827 -1.12308C12.8678 -1.12259 13.141 -1.00913 13.3426 -0.807549C13.5442 -0.60597 13.6577 -0.332713 13.6582 -0.047637L13.6552 6.34231L20.0481 6.34231C20.3325 6.34248 20.6052 6.45552 20.8063 6.65661C21.0074 6.8577 21.1204 7.13039 21.1206 7.41477L21.1325 12.565C21.1324 12.8494 21.0193 13.122 20.8182 13.3231C20.6171 13.5242 20.3444 13.6373 20.0601 13.6374L13.6552 13.6494L13.6641 20.0334C13.6636 20.3184 13.5502 20.5917 13.3486 20.7933C13.147 20.9948 12.8738 21.1083 12.5887 21.1088L7.43252 21.1267C7.28969 21.1282 7.148 21.1012 7.01575 21.0473C6.88349 20.9933 6.76335 20.9135 6.66235 20.8125C6.56135 20.7115 6.48153 20.5913 6.42757 20.4591C6.37361 20.3268 6.34659 20.1851 6.34811 20.0423Z"})],-1));function Xn(t,e,n,i,r,o){const s=mn("router-link");return O(),pe(vn,{name:"skillPanel"},{default:Vt(()=>{var u,l,a;return[n.showSkillPanel?(O(),J("div",{key:0,class:_e(["skill-panel-container",r.treeType==="radial-tree"&&"radial-skill-panel"])},[T("div",An,[T("div",Nn,[T("button",{class:"closebtn",onClick:e[0]||(e[0]=(...c)=>o.hideInfoPanel&&o.hideInfoPanel(...c)),"b-on-hover":"",title:"Close Panel "},Cn)]),T("h1",zn,ge((u=n.skill)==null?void 0:u.name),1),T("img",{src:"https://institute-skill-infobox-image-thumbnails.s3.amazonaws.com/"+n.skill.url,class:"rounded img-fluid",onError:e[1]||(e[1]=(...c)=>o.imageUrlAlternative&&o.imageUrlAlternative(...c))},null,40,Sn),T("div",{class:"skill-mastery-requirement",innerHTML:n.skill.masteryRequirements},null,8,Tn),((l=n.skill)==null?void 0:l.type)=="domain"?(O(),J("div",En,In)):rt("",!0),((a=n.skill)==null?void 0:a.type)=="super"?(O(),J("div",Ln,[Pn,T("ul",null,[(O(!0),J(yn,null,wn(n.skill.subskills,c=>(O(),J("li",null,[xn(s,{to:"/skills/"+c.url},{default:Vt(()=>[me(ge(c.name),1)]),_:2},1032,["to"])]))),256))])])):rt("",!0)]),T("div",Bn,[n.skill.type!="domain"?(O(),J("hr",Dn)):rt("",!0),T("div",qn,[n.skill.hasChildren?(O(),J("button",{key:0,class:"secondary-btn ms-2 btn",onClick:e[2]||(e[2]=(...c)=>o.toggleChildNodes&&o.toggleChildNodes(...c))}," Toggle child nodes ")):rt("",!0),n.skill.type!="domain"?(O(),pe(s,{key:1,class:_e(["btn secondary-btn me-2",{"ms-auto":!n.skill.hasChildren}]),target:"_blank",id:"skillLink",to:"/skills/"+n.skill.url,"b-on-hover":"",title:"To Skill Details Page"},{default:Vt(()=>[me("See MoreÂ  "),Hn]),_:1},8,["class","to"])):rt("",!0)])])],2)):rt("",!0)]}),_:1})}const ea=_n($n,[["render",Xn],["__scopeId","data-v-024c34ba"]]);function na(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}var Fn={value:()=>{}};function se(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Mt(n)}function Mt(t){this._=t}function Vn(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Mt.prototype=se.prototype={constructor:Mt,on:function(t,e){var n=this._,i=Vn(t+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=Yn(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=ye(n[r],t.name,e);else if(e==null)for(r in n)n[r]=ye(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Mt(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function Yn(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function ye(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Fn,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Wt="http://www.w3.org/1999/xhtml";const we={svg:"http://www.w3.org/2000/svg",xhtml:Wt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),we.hasOwnProperty(e)?{space:we[e],local:t}:t}function On(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Wt&&e.documentElement.namespaceURI===Wt?e.createElement(t):e.createElementNS(n,t)}}function Un(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ae(t){var e=qt(t);return(e.local?Un:On)(e)}function Gn(){}function ue(t){return t==null?Gn:function(){return this.querySelector(t)}}function Kn(t){typeof t!="function"&&(t=ue(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,u=i[r]=new Array(s),l,a,c=0;c<s;++c)(l=o[c])&&(a=t.call(l,l.__data__,c,o))&&("__data__"in l&&(a.__data__=l.__data__),u[c]=a);return new I(i,this._parents)}function Wn(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Zn(){return[]}function Be(t){return t==null?Zn:function(){return this.querySelectorAll(t)}}function Qn(t){return function(){return Wn(t.apply(this,arguments))}}function Jn(t){typeof t=="function"?t=Qn(t):t=Be(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],u=s.length,l,a=0;a<u;++a)(l=s[a])&&(i.push(t.call(l,l.__data__,a,s)),r.push(l));return new I(i,r)}function De(t){return function(){return this.matches(t)}}function qe(t){return function(e){return e.matches(t)}}var jn=Array.prototype.find;function ti(t){return function(){return jn.call(this.children,t)}}function ei(){return this.firstElementChild}function ni(t){return this.select(t==null?ei:ti(typeof t=="function"?t:qe(t)))}var ii=Array.prototype.filter;function ri(){return Array.from(this.children)}function oi(t){return function(){return ii.call(this.children,t)}}function si(t){return this.selectAll(t==null?ri:oi(typeof t=="function"?t:qe(t)))}function ai(t){typeof t!="function"&&(t=De(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,u=i[r]=[],l,a=0;a<s;++a)(l=o[a])&&t.call(l,l.__data__,a,o)&&u.push(l);return new I(i,this._parents)}function He(t){return new Array(t.length)}function ui(){return new I(this._enter||this._groups.map(He),this._parents)}function Et(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Et.prototype={constructor:Et,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function li(t){return function(){return t}}function ci(t,e,n,i,r,o){for(var s=0,u,l=e.length,a=o.length;s<a;++s)(u=e[s])?(u.__data__=o[s],i[s]=u):n[s]=new Et(t,o[s]);for(;s<l;++s)(u=e[s])&&(r[s]=u)}function hi(t,e,n,i,r,o,s){var u,l,a=new Map,c=e.length,d=o.length,f=new Array(c),_;for(u=0;u<c;++u)(l=e[u])&&(f[u]=_=s.call(l,l.__data__,u,e)+"",a.has(_)?r[u]=l:a.set(_,l));for(u=0;u<d;++u)_=s.call(t,o[u],u,o)+"",(l=a.get(_))?(i[u]=l,l.__data__=o[u],a.delete(_)):n[u]=new Et(t,o[u]);for(u=0;u<c;++u)(l=e[u])&&a.get(f[u])===l&&(r[u]=l)}function fi(t){return t.__data__}function di(t,e){if(!arguments.length)return Array.from(this,fi);var n=e?hi:ci,i=this._parents,r=this._groups;typeof t!="function"&&(t=li(t));for(var o=r.length,s=new Array(o),u=new Array(o),l=new Array(o),a=0;a<o;++a){var c=i[a],d=r[a],f=d.length,_=pi(t.call(c,c&&c.__data__,a,i)),w=_.length,v=u[a]=new Array(w),N=s[a]=new Array(w),m=l[a]=new Array(f);n(c,d,v,N,m,_,e);for(var $=0,C=0,z,E;$<w;++$)if(z=v[$]){for($>=C&&(C=$+1);!(E=N[C])&&++C<w;);z._next=E||null}}return s=new I(s,i),s._enter=u,s._exit=l,s}function pi(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _i(){return new I(this._exit||this._groups.map(He),this._parents)}function gi(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function mi(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),u=new Array(r),l=0;l<s;++l)for(var a=n[l],c=i[l],d=a.length,f=u[l]=new Array(d),_,w=0;w<d;++w)(_=a[w]||c[w])&&(f[w]=_);for(;l<r;++l)u[l]=n[l];return new I(u,this._parents)}function yi(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function wi(t){t||(t=xi);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],u=s.length,l=r[o]=new Array(u),a,c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new I(r,this._parents).order()}function xi(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function vi(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function bi(){return Array.from(this)}function ki(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function $i(){let t=0;for(const e of this)++t;return t}function Ai(){return!this.node()}function Ni(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,u;o<s;++o)(u=r[o])&&t.call(u,u.__data__,o,r);return this}function Mi(t){return function(){this.removeAttribute(t)}}function Ci(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zi(t,e){return function(){this.setAttribute(t,e)}}function Si(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ti(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ei(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ri(t,e){var n=qt(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Ci:Mi:typeof e=="function"?n.local?Ei:Ti:n.local?Si:zi)(n,e))}function Xe(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ii(t){return function(){this.style.removeProperty(t)}}function Li(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Pi(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Bi(t,e,n){return arguments.length>1?this.each((e==null?Ii:typeof e=="function"?Pi:Li)(t,e,n??"")):st(this.node(),t)}function st(t,e){return t.style.getPropertyValue(e)||Xe(t).getComputedStyle(t,null).getPropertyValue(e)}function Di(t){return function(){delete this[t]}}function qi(t,e){return function(){this[t]=e}}function Hi(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Xi(t,e){return arguments.length>1?this.each((e==null?Di:typeof e=="function"?Hi:qi)(t,e)):this.node()[t]}function Fe(t){return t.trim().split(/^|\s+/)}function le(t){return t.classList||new Ve(t)}function Ve(t){this._node=t,this._names=Fe(t.getAttribute("class")||"")}Ve.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ye(t,e){for(var n=le(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Oe(t,e){for(var n=le(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Fi(t){return function(){Ye(this,t)}}function Vi(t){return function(){Oe(this,t)}}function Yi(t,e){return function(){(e.apply(this,arguments)?Ye:Oe)(this,t)}}function Oi(t,e){var n=Fe(t+"");if(arguments.length<2){for(var i=le(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Yi:e?Fi:Vi)(n,e))}function Ui(){this.textContent=""}function Gi(t){return function(){this.textContent=t}}function Ki(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Wi(t){return arguments.length?this.each(t==null?Ui:(typeof t=="function"?Ki:Gi)(t)):this.node().textContent}function Zi(){this.innerHTML=""}function Qi(t){return function(){this.innerHTML=t}}function Ji(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ji(t){return arguments.length?this.each(t==null?Zi:(typeof t=="function"?Ji:Qi)(t)):this.node().innerHTML}function tr(){this.nextSibling&&this.parentNode.appendChild(this)}function er(){return this.each(tr)}function nr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ir(){return this.each(nr)}function rr(t){var e=typeof t=="function"?t:ae(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function or(){return null}function sr(t,e){var n=typeof t=="function"?t:ae(t),i=e==null?or:typeof e=="function"?e:ue(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function ar(){var t=this.parentNode;t&&t.removeChild(this)}function ur(){return this.each(ar)}function lr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function cr(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function hr(t){return this.select(t?cr:lr)}function fr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function dr(t){return function(e){t.call(this,e,this.__data__)}}function pr(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function _r(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function gr(t,e,n){return function(){var i=this.__on,r,o=dr(e);if(i){for(var s=0,u=i.length;s<u;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function mr(t,e,n){var i=pr(t+""),r,o=i.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,a=u.length,c;l<a;++l)for(r=0,c=u[l];r<o;++r)if((s=i[r]).type===c.type&&s.name===c.name)return c.value}return}for(u=e?gr:_r,r=0;r<o;++r)this.each(u(i[r],e,n));return this}function Ue(t,e,n){var i=Xe(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function yr(t,e){return function(){return Ue(this,t,e)}}function wr(t,e){return function(){return Ue(this,t,e.apply(this,arguments))}}function xr(t,e){return this.each((typeof e=="function"?wr:yr)(t,e))}function*vr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var Ge=[null];function I(t,e){this._groups=t,this._parents=e}function mt(){return new I([[document.documentElement]],Ge)}function br(){return this}I.prototype=mt.prototype={constructor:I,select:Kn,selectAll:Jn,selectChild:ni,selectChildren:si,filter:ai,data:di,enter:ui,exit:_i,join:gi,merge:mi,selection:br,order:yi,sort:wi,call:vi,nodes:bi,node:ki,size:$i,empty:Ai,each:Ni,attr:Ri,style:Bi,property:Xi,classed:Oi,text:Wi,html:ji,raise:er,lower:ir,append:rr,insert:sr,remove:ur,clone:hr,datum:fr,on:mr,dispatch:xr,[Symbol.iterator]:vr};function Q(t){return typeof t=="string"?new I([[document.querySelector(t)]],[document.documentElement]):new I([[t]],Ge)}function ia(t){return Q(ae(t).call(document.documentElement))}function kr(t){let e;for(;e=t.sourceEvent;)t=e;return t}function j(t,e){if(t=kr(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Zt={capture:!0,passive:!1};function Qt(t){t.preventDefault(),t.stopImmediatePropagation()}function $r(t){var e=t.document.documentElement,n=Q(t).on("dragstart.drag",Qt,Zt);"onselectstart"in e?n.on("selectstart.drag",Qt,Zt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ar(t,e){var n=t.document.documentElement,i=Q(t).on("dragstart.drag",null);e&&(i.on("click.drag",Qt,Zt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ce(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ke(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function yt(){}var ft=.7,Rt=1/ft,ot="\\s*([+-]?\\d+)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",X="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nr=/^#([0-9a-f]{3,8})$/,Mr=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),Cr=new RegExp(`^rgb\\(${X},${X},${X}\\)$`),zr=new RegExp(`^rgba\\(${ot},${ot},${ot},${dt}\\)$`),Sr=new RegExp(`^rgba\\(${X},${X},${X},${dt}\\)$`),Tr=new RegExp(`^hsl\\(${dt},${X},${X}\\)$`),Er=new RegExp(`^hsla\\(${dt},${X},${X},${dt}\\)$`),xe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ce(yt,pt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ve,formatHex:ve,formatHex8:Rr,formatHsl:Ir,formatRgb:be,toString:be});function ve(){return this.rgb().formatHex()}function Rr(){return this.rgb().formatHex8()}function Ir(){return We(this).formatHsl()}function be(){return this.rgb().formatRgb()}function pt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Nr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ke(e):n===3?new R(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?bt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?bt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Mr.exec(t))?new R(e[1],e[2],e[3],1):(e=Cr.exec(t))?new R(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zr.exec(t))?bt(e[1],e[2],e[3],e[4]):(e=Sr.exec(t))?bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Tr.exec(t))?Ne(e[1],e[2]/100,e[3]/100,1):(e=Er.exec(t))?Ne(e[1],e[2]/100,e[3]/100,e[4]):xe.hasOwnProperty(t)?ke(xe[t]):t==="transparent"?new R(NaN,NaN,NaN,0):null}function ke(t){return new R(t>>16&255,t>>8&255,t&255,1)}function bt(t,e,n,i){return i<=0&&(t=e=n=NaN),new R(t,e,n,i)}function Lr(t){return t instanceof yt||(t=pt(t)),t?(t=t.rgb(),new R(t.r,t.g,t.b,t.opacity)):new R}function Jt(t,e,n,i){return arguments.length===1?Lr(t):new R(t,e,n,i??1)}function R(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}ce(R,Jt,Ke(yt,{brighter(t){return t=t==null?Rt:Math.pow(Rt,t),new R(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ft:Math.pow(ft,t),new R(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new R(nt(this.r),nt(this.g),nt(this.b),It(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$e,formatHex:$e,formatHex8:Pr,formatRgb:Ae,toString:Ae}));function $e(){return`#${et(this.r)}${et(this.g)}${et(this.b)}`}function Pr(){return`#${et(this.r)}${et(this.g)}${et(this.b)}${et((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ae(){const t=It(this.opacity);return`${t===1?"rgb(":"rgba("}${nt(this.r)}, ${nt(this.g)}, ${nt(this.b)}${t===1?")":`, ${t})`}`}function It(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function nt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function et(t){return t=nt(t),(t<16?"0":"")+t.toString(16)}function Ne(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new D(t,e,n,i)}function We(t){if(t instanceof D)return new D(t.h,t.s,t.l,t.opacity);if(t instanceof yt||(t=pt(t)),!t)return new D;if(t instanceof D)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,u=o-r,l=(o+r)/2;return u?(e===o?s=(n-i)/u+(n<i)*6:n===o?s=(i-e)/u+2:s=(e-n)/u+4,u/=l<.5?o+r:2-o-r,s*=60):u=l>0&&l<1?0:s,new D(s,u,l,t.opacity)}function Br(t,e,n,i){return arguments.length===1?We(t):new D(t,e,n,i??1)}function D(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ce(D,Br,Ke(yt,{brighter(t){return t=t==null?Rt:Math.pow(Rt,t),new D(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ft:Math.pow(ft,t),new D(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new R(Yt(t>=240?t-240:t+120,r,i),Yt(t,r,i),Yt(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new D(Me(this.h),kt(this.s),kt(this.l),It(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=It(this.opacity);return`${t===1?"hsl(":"hsla("}${Me(this.h)}, ${kt(this.s)*100}%, ${kt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Me(t){return t=(t||0)%360,t<0?t+360:t}function kt(t){return Math.max(0,Math.min(1,t||0))}function Yt(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ze=t=>()=>t;function Dr(t,e){return function(n){return t+n*e}}function qr(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Hr(t){return(t=+t)==1?Qe:function(e,n){return n-e?qr(e,n,t):Ze(isNaN(e)?n:e)}}function Qe(t,e){var n=e-t;return n?Dr(t,n):Ze(isNaN(t)?e:t)}const Ce=function t(e){var n=Hr(e);function i(r,o){var s=n((r=Jt(r)).r,(o=Jt(o)).r),u=n(r.g,o.g),l=n(r.b,o.b),a=Qe(r.opacity,o.opacity);return function(c){return r.r=s(c),r.g=u(c),r.b=l(c),r.opacity=a(c),r+""}}return i.gamma=t,i}(1);function Z(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var jt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ot=new RegExp(jt.source,"g");function Xr(t){return function(){return t}}function Fr(t){return function(e){return t(e)+""}}function Vr(t,e){var n=jt.lastIndex=Ot.lastIndex=0,i,r,o,s=-1,u=[],l=[];for(t=t+"",e=e+"";(i=jt.exec(t))&&(r=Ot.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),u[s]?u[s]+=o:u[++s]=o),(i=i[0])===(r=r[0])?u[s]?u[s]+=r:u[++s]=r:(u[++s]=null,l.push({i:s,x:Z(i,r)})),n=Ot.lastIndex;return n<e.length&&(o=e.slice(n),u[s]?u[s]+=o:u[++s]=o),u.length<2?l[0]?Fr(l[0].x):Xr(e):(e=l.length,function(a){for(var c=0,d;c<e;++c)u[(d=l[c]).i]=d.x(a);return u.join("")})}var ze=180/Math.PI,te={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Je(t,e,n,i,r,o){var s,u,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,l/=u),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*ze,skewX:Math.atan(l)*ze,scaleX:s,scaleY:u}}var $t;function Yr(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?te:Je(e.a,e.b,e.c,e.d,e.e,e.f)}function Or(t){return t==null||($t||($t=document.createElementNS("http://www.w3.org/2000/svg","g")),$t.setAttribute("transform",t),!(t=$t.transform.baseVal.consolidate()))?te:(t=t.matrix,Je(t.a,t.b,t.c,t.d,t.e,t.f))}function je(t,e,n,i){function r(a){return a.length?a.pop()+" ":""}function o(a,c,d,f,_,w){if(a!==d||c!==f){var v=_.push("translate(",null,e,null,n);w.push({i:v-4,x:Z(a,d)},{i:v-2,x:Z(c,f)})}else(d||f)&&_.push("translate("+d+e+f+n)}function s(a,c,d,f){a!==c?(a-c>180?c+=360:c-a>180&&(a+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:Z(a,c)})):c&&d.push(r(d)+"rotate("+c+i)}function u(a,c,d,f){a!==c?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:Z(a,c)}):c&&d.push(r(d)+"skewX("+c+i)}function l(a,c,d,f,_,w){if(a!==d||c!==f){var v=_.push(r(_)+"scale(",null,",",null,")");w.push({i:v-4,x:Z(a,d)},{i:v-2,x:Z(c,f)})}else(d!==1||f!==1)&&_.push(r(_)+"scale("+d+","+f+")")}return function(a,c){var d=[],f=[];return a=t(a),c=t(c),o(a.translateX,a.translateY,c.translateX,c.translateY,d,f),s(a.rotate,c.rotate,d,f),u(a.skewX,c.skewX,d,f),l(a.scaleX,a.scaleY,c.scaleX,c.scaleY,d,f),a=c=null,function(_){for(var w=-1,v=f.length,N;++w<v;)d[(N=f[w]).i]=N.x(_);return d.join("")}}}var Ur=je(Yr,"px, ","px)","deg)"),Gr=je(Or,", ",")",")"),Kr=1e-12;function Se(t){return((t=Math.exp(t))+1/t)/2}function Wr(t){return((t=Math.exp(t))-1/t)/2}function Zr(t){return((t=Math.exp(2*t))-1)/(t+1)}const Qr=function t(e,n,i){function r(o,s){var u=o[0],l=o[1],a=o[2],c=s[0],d=s[1],f=s[2],_=c-u,w=d-l,v=_*_+w*w,N,m;if(v<Kr)m=Math.log(f/a)/e,N=function(W){return[u+W*_,l+W*w,a*Math.exp(e*W*m)]};else{var $=Math.sqrt(v),C=(f*f-a*a+i*v)/(2*a*n*$),z=(f*f-a*a-i*v)/(2*f*n*$),E=Math.log(Math.sqrt(C*C+1)-C),L=Math.log(Math.sqrt(z*z+1)-z);m=(L-E)/e,N=function(W){var wt=W*m,xt=Se(E),vt=a/(n*$)*(xt*Zr(e*wt+E)-Wr(E));return[u+vt*_,l+vt*w,a*xt/Se(e*wt+E)]}}return N.duration=m*1e3*e/Math.SQRT2,N}return r.rho=function(o){var s=Math.max(.001,+o),u=s*s,l=u*u;return t(s,u,l)},r}(Math.SQRT2,2,4);var at=0,ct=0,ut=0,tn=1e3,Lt,ht,Pt=0,it=0,Ht=0,_t=typeof performance=="object"&&performance.now?performance:Date,en=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function he(){return it||(en(Jr),it=_t.now()+Ht)}function Jr(){it=0}function Bt(){this._call=this._time=this._next=null}Bt.prototype=nn.prototype={constructor:Bt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?he():+n)+(e==null?0:+e),!this._next&&ht!==this&&(ht?ht._next=this:Lt=this,ht=this),this._call=t,this._time=n,ee()},stop:function(){this._call&&(this._call=null,this._time=1/0,ee())}};function nn(t,e,n){var i=new Bt;return i.restart(t,e,n),i}function jr(){he(),++at;for(var t=Lt,e;t;)(e=it-t._time)>=0&&t._call.call(void 0,e),t=t._next;--at}function Te(){it=(Pt=_t.now())+Ht,at=ct=0;try{jr()}finally{at=0,eo(),it=0}}function to(){var t=_t.now(),e=t-Pt;e>tn&&(Ht-=e,Pt=t)}function eo(){for(var t,e=Lt,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Lt=n);ht=t,ee(i)}function ee(t){if(!at){ct&&(ct=clearTimeout(ct));var e=t-it;e>24?(t<1/0&&(ct=setTimeout(Te,t-_t.now()-Ht)),ut&&(ut=clearInterval(ut))):(ut||(Pt=_t.now(),ut=setInterval(to,tn)),at=1,en(Te))}}function Ee(t,e,n){var i=new Bt;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var no=se("start","end","cancel","interrupt"),io=[],rn=0,Re=1,ne=2,Ct=3,Ie=4,ie=5,zt=6;function Xt(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;ro(t,n,{name:e,index:i,group:r,on:no,tween:io,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:rn})}function fe(t,e){var n=q(t,e);if(n.state>rn)throw new Error("too late; already scheduled");return n}function F(t,e){var n=q(t,e);if(n.state>Ct)throw new Error("too late; already running");return n}function q(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ro(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=nn(o,0,n.time);function o(a){n.state=Re,n.timer.restart(s,n.delay,n.time),n.delay<=a&&s(a-n.delay)}function s(a){var c,d,f,_;if(n.state!==Re)return l();for(c in i)if(_=i[c],_.name===n.name){if(_.state===Ct)return Ee(s);_.state===Ie?(_.state=zt,_.timer.stop(),_.on.call("interrupt",t,t.__data__,_.index,_.group),delete i[c]):+c<e&&(_.state=zt,_.timer.stop(),_.on.call("cancel",t,t.__data__,_.index,_.group),delete i[c])}if(Ee(function(){n.state===Ct&&(n.state=Ie,n.timer.restart(u,n.delay,n.time),u(a))}),n.state=ne,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ne){for(n.state=Ct,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(_=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=_);r.length=d+1}}function u(a){for(var c=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(l),n.state=ie,1),d=-1,f=r.length;++d<f;)r[d].call(t,c);n.state===ie&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=zt,n.timer.stop(),delete i[e];for(var a in i)return;delete t.__transition}}function St(t,e){var n=t.__transition,i,r,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>ne&&i.state<ie,i.state=zt,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function oo(t){return this.each(function(){St(this,t)})}function so(t,e){var n,i;return function(){var r=F(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,u=i.length;s<u;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function ao(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=F(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var u={name:e,value:n},l=0,a=r.length;l<a;++l)if(r[l].name===e){r[l]=u;break}l===a&&r.push(u)}o.tween=r}}function uo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=q(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?so:ao)(n,t,e))}function de(t,e,n){var i=t._id;return t.each(function(){var r=F(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return q(r,i).value[e]}}function on(t,e){var n;return(typeof e=="number"?Z:e instanceof pt?Ce:(n=pt(e))?(e=n,Ce):Vr)(t,e)}function lo(t){return function(){this.removeAttribute(t)}}function co(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ho(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function fo(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function po(t,e,n){var i,r,o;return function(){var s,u=n(this),l;return u==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=u+"",s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,u)))}}function _o(t,e,n){var i,r,o;return function(){var s,u=n(this),l;return u==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=u+"",s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,u)))}}function go(t,e){var n=qt(t),i=n==="transform"?Gr:on;return this.attrTween(t,typeof e=="function"?(n.local?_o:po)(n,i,de(this,"attr."+t,e)):e==null?(n.local?co:lo)(n):(n.local?fo:ho)(n,i,e))}function mo(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function yo(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function wo(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&yo(t,o)),n}return r._value=e,r}function xo(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&mo(t,o)),n}return r._value=e,r}function vo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=qt(t);return this.tween(n,(i.local?wo:xo)(i,e))}function bo(t,e){return function(){fe(this,t).delay=+e.apply(this,arguments)}}function ko(t,e){return e=+e,function(){fe(this,t).delay=e}}function $o(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?bo:ko)(e,t)):q(this.node(),e).delay}function Ao(t,e){return function(){F(this,t).duration=+e.apply(this,arguments)}}function No(t,e){return e=+e,function(){F(this,t).duration=e}}function Mo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ao:No)(e,t)):q(this.node(),e).duration}function Co(t,e){if(typeof e!="function")throw new Error;return function(){F(this,t).ease=e}}function zo(t){var e=this._id;return arguments.length?this.each(Co(e,t)):q(this.node(),e).ease}function So(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;F(this,t).ease=n}}function To(t){if(typeof t!="function")throw new Error;return this.each(So(this._id,t))}function Eo(t){typeof t!="function"&&(t=De(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,u=i[r]=[],l,a=0;a<s;++a)(l=o[a])&&t.call(l,l.__data__,a,o)&&u.push(l);return new K(i,this._parents,this._name,this._id)}function Ro(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),u=0;u<o;++u)for(var l=e[u],a=n[u],c=l.length,d=s[u]=new Array(c),f,_=0;_<c;++_)(f=l[_]||a[_])&&(d[_]=f);for(;u<i;++u)s[u]=e[u];return new K(s,this._parents,this._name,this._id)}function Io(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Lo(t,e,n){var i,r,o=Io(e)?fe:F;return function(){var s=o(this,t),u=s.on;u!==i&&(r=(i=u).copy()).on(e,n),s.on=r}}function Po(t,e){var n=this._id;return arguments.length<2?q(this.node(),n).on.on(t):this.each(Lo(n,t,e))}function Bo(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Do(){return this.on("end.remove",Bo(this._id))}function qo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ue(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var u=i[s],l=u.length,a=o[s]=new Array(l),c,d,f=0;f<l;++f)(c=u[f])&&(d=t.call(c,c.__data__,f,u))&&("__data__"in c&&(d.__data__=c.__data__),a[f]=d,Xt(a[f],e,n,f,a,q(c,n)));return new K(o,this._parents,e,n)}function Ho(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Be(t));for(var i=this._groups,r=i.length,o=[],s=[],u=0;u<r;++u)for(var l=i[u],a=l.length,c,d=0;d<a;++d)if(c=l[d]){for(var f=t.call(c,c.__data__,d,l),_,w=q(c,n),v=0,N=f.length;v<N;++v)(_=f[v])&&Xt(_,e,n,v,f,w);o.push(f),s.push(c)}return new K(o,s,e,n)}var Xo=mt.prototype.constructor;function Fo(){return new Xo(this._groups,this._parents)}function Vo(t,e){var n,i,r;return function(){var o=st(this,t),s=(this.style.removeProperty(t),st(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function sn(t){return function(){this.style.removeProperty(t)}}function Yo(t,e,n){var i,r=n+"",o;return function(){var s=st(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function Oo(t,e,n){var i,r,o;return function(){var s=st(this,t),u=n(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(t),st(this,t))),s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,u))}}function Uo(t,e){var n,i,r,o="style."+e,s="end."+o,u;return function(){var l=F(this,t),a=l.on,c=l.value[o]==null?u||(u=sn(e)):void 0;(a!==n||r!==c)&&(i=(n=a).copy()).on(s,r=c),l.on=i}}function Go(t,e,n){var i=(t+="")=="transform"?Ur:on;return e==null?this.styleTween(t,Vo(t,i)).on("end.style."+t,sn(t)):typeof e=="function"?this.styleTween(t,Oo(t,i,de(this,"style."+t,e))).each(Uo(this._id,t)):this.styleTween(t,Yo(t,i,e),n).on("end.style."+t,null)}function Ko(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Wo(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&Ko(t,s,n)),i}return o._value=e,o}function Zo(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Wo(t,e,n??""))}function Qo(t){return function(){this.textContent=t}}function Jo(t){return function(){var e=t(this);this.textContent=e??""}}function jo(t){return this.tween("text",typeof t=="function"?Jo(de(this,"text",t)):Qo(t==null?"":t+""))}function ts(t){return function(e){this.textContent=t.call(this,e)}}function es(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ts(r)),e}return i._value=t,i}function ns(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,es(t))}function is(){for(var t=this._name,e=this._id,n=an(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],u=s.length,l,a=0;a<u;++a)if(l=s[a]){var c=q(l,e);Xt(l,t,n,a,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new K(i,this._parents,t,n)}function rs(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var u={value:s},l={value:function(){--r===0&&o()}};n.each(function(){var a=F(this,i),c=a.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(l)),a.on=e}),r===0&&o()})}var os=0;function K(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function an(){return++os}var U=mt.prototype;K.prototype={constructor:K,select:qo,selectAll:Ho,selectChild:U.selectChild,selectChildren:U.selectChildren,filter:Eo,merge:Ro,selection:Fo,transition:is,call:U.call,nodes:U.nodes,node:U.node,size:U.size,empty:U.empty,each:U.each,on:Po,attr:go,attrTween:vo,style:Go,styleTween:Zo,text:jo,textTween:ns,remove:Do,tween:uo,delay:$o,duration:Mo,ease:zo,easeVarying:To,end:rs,[Symbol.iterator]:U[Symbol.iterator]};function ss(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var as={time:null,delay:0,duration:250,ease:ss};function us(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ls(t){var e,n;t instanceof K?(e=t._id,t=t._name):(e=an(),(n=as).time=he(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],u=s.length,l,a=0;a<u;++a)(l=s[a])&&Xt(l,t,e,a,s,n||us(l,e));return new K(i,this._parents,t,e)}mt.prototype.interrupt=oo;mt.prototype.transition=ls;const re=Math.PI,oe=2*re,tt=1e-6,cs=oe-tt;function un(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function hs(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return un;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class fs{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?un:hs(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,s){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,u=this._y1,l=i-e,a=r-n,c=s-e,d=u-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>tt)if(!(Math.abs(d*l-a*c)>tt)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let _=i-s,w=r-u,v=l*l+a*a,N=_*_+w*w,m=Math.sqrt(v),$=Math.sqrt(f),C=o*Math.tan((re-Math.acos((v+f-N)/(2*m*$)))/2),z=C/$,E=C/m;Math.abs(z-1)>tt&&this._append`L${e+z*c},${n+z*d}`,this._append`A${o},${o},0,0,${+(d*_>c*w)},${this._x1=e+E*l},${this._y1=n+E*a}`}}arc(e,n,i,r,o,s){if(e=+e,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let u=i*Math.cos(r),l=i*Math.sin(r),a=e+u,c=n+l,d=1^s,f=s?r-o:o-r;this._x1===null?this._append`M${a},${c}`:(Math.abs(this._x1-a)>tt||Math.abs(this._y1-c)>tt)&&this._append`L${a},${c}`,i&&(f<0&&(f=f%oe+oe),f>cs?this._append`A${i},${i},0,1,${d},${e-u},${n-l}A${i},${i},0,1,${d},${this._x1=a},${this._y1=c}`:f>tt&&this._append`A${i},${i},0,${+(f>=re)},${d},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function ds(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function ps(){return this.eachAfter(ds)}function _s(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function gs(t,e){for(var n=this,i=[n],r,o,s=-1;n=i.pop();)if(t.call(e,n,++s,this),r=n.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this}function ms(t,e){for(var n=this,i=[n],r=[],o,s,u,l=-1;n=i.pop();)if(r.push(n),o=n.children)for(s=0,u=o.length;s<u;++s)i.push(o[s]);for(;n=r.pop();)t.call(e,n,++l,this);return this}function ys(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function ws(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}function xs(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function vs(t){for(var e=this,n=bs(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}function bs(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function ks(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function $s(){return Array.from(this)}function As(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Ns(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Ms(){var t=this,e,n=[t],i,r,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(r=0,o=i.length;r<o;++r)n.push(i[r]);while(n.length)}function ln(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Ss)):e===void 0&&(e=zs);for(var n=new gt(t),i,r=[n],o,s,u,l;i=r.pop();)if((s=e(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,u=l-1;u>=0;--u)r.push(o=s[u]=new gt(s[u])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(Es)}function Cs(){return ln(this).eachBefore(Ts)}function zs(t){return t.children}function Ss(t){return Array.isArray(t)?t[1]:null}function Ts(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Es(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function gt(t){this.data=t,this.depth=this.height=0,this.parent=null}gt.prototype=ln.prototype={constructor:gt,count:ps,each:_s,eachAfter:ms,eachBefore:gs,find:ys,sum:ws,sort:xs,path:vs,ancestors:ks,descendants:$s,leaves:As,links:Ns,copy:Cs,[Symbol.iterator]:Ms};function Rs(t,e){return t.parent===e.parent?1:2}function Ut(t){var e=t.children;return e?e[0]:t.t}function Gt(t){var e=t.children;return e?e[e.length-1]:t.t}function Is(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Ls(t){for(var e=0,n=0,i=t.children,r=i.length,o;--r>=0;)o=i[r],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function Ps(t,e,n){return t.a.parent===e.parent?t.a:n}function Tt(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Tt.prototype=Object.create(gt.prototype);function Bs(t){for(var e=new Tt(t,0),n,i=[e],r,o,s,u;n=i.pop();)if(o=n._.children)for(n.children=new Array(u=o.length),s=u-1;s>=0;--s)i.push(r=n.children[s]=new Tt(o[s],s)),r.parent=n;return(e.parent=new Tt(null,0)).children=[e],e}function ra(){var t=Rs,e=1,n=1,i=null;function r(a){var c=Bs(a);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),i)a.eachBefore(l);else{var d=a,f=a,_=a;a.eachBefore(function($){$.x<d.x&&(d=$),$.x>f.x&&(f=$),$.depth>_.depth&&(_=$)});var w=d===f?1:t(d,f)/2,v=w-d.x,N=e/(f.x+w+v),m=n/(_.depth||1);a.eachBefore(function($){$.x=($.x+v)*N,$.y=$.depth*m})}return a}function o(a){var c=a.children,d=a.parent.children,f=a.i?d[a.i-1]:null;if(c){Ls(a);var _=(c[0].z+c[c.length-1].z)/2;f?(a.z=f.z+t(a._,f._),a.m=a.z-_):a.z=_}else f&&(a.z=f.z+t(a._,f._));a.parent.A=u(a,f,a.parent.A||d[0])}function s(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function u(a,c,d){if(c){for(var f=a,_=a,w=c,v=f.parent.children[0],N=f.m,m=_.m,$=w.m,C=v.m,z;w=Gt(w),f=Ut(f),w&&f;)v=Ut(v),_=Gt(_),_.a=a,z=w.z+$-f.z-N+t(w._,f._),z>0&&(Is(Ps(w,a,d),a,z),N+=z,m+=z),$+=w.m,N+=f.m,C+=v.m,m+=_.m;w&&!Gt(_)&&(_.t=w,_.m+=$-m),f&&!Ut(v)&&(v.t=f,v.m+=N-C,d=a)}return d}function l(a){a.x*=e,a.y=a.depth*n}return r.separation=function(a){return arguments.length?(t=a,r):t},r.size=function(a){return arguments.length?(i=!1,e=+a[0],n=+a[1],r):i?null:[e,n]},r.nodeSize=function(a){return arguments.length?(i=!0,e=+a[0],n=+a[1],r):i?[e,n]:null},r}function Le(t){return function(){return t}}function Ds(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new fs(e)}var qs=Array.prototype.slice;function Hs(t){return t[0]}function Xs(t){return t[1]}function At(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}class Fs{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}class Vs{constructor(e){this._context=e}lineStart(){this._point=0}lineEnd(){}point(e,n){if(e=+e,n=+n,this._point===0)this._point=1;else{const i=At(this._x0,this._y0),r=At(this._x0,this._y0=(this._y0+n)/2),o=At(e,this._y0),s=At(e,n);this._context.moveTo(...i),this._context.bezierCurveTo(...r,...o,...s)}this._x0=e,this._y0=n}}function Ys(t){return new Fs(t,!0)}function Os(t){return new Vs(t)}function Us(t){return t.source}function Gs(t){return t.target}function cn(t){let e=Us,n=Gs,i=Hs,r=Xs,o=null,s=null,u=Ds(l);function l(){let a;const c=qs.call(arguments),d=e.apply(this,c),f=n.apply(this,c);if(o==null&&(s=t(a=u())),s.lineStart(),c[0]=d,s.point(+i.apply(this,c),+r.apply(this,c)),c[0]=f,s.point(+i.apply(this,c),+r.apply(this,c)),s.lineEnd(),a)return s=null,a+""||null}return l.source=function(a){return arguments.length?(e=a,l):e},l.target=function(a){return arguments.length?(n=a,l):n},l.x=function(a){return arguments.length?(i=typeof a=="function"?a:Le(+a),l):i},l.y=function(a){return arguments.length?(r=typeof a=="function"?a:Le(+a),l):r},l.context=function(a){return arguments.length?(a==null?o=s=null:s=t(o=a),l):o},l}function oa(){return cn(Ys)}function sa(){const t=cn(Os);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const Nt=t=>()=>t;function Ks(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function G(t,e,n){this.k=t,this.x=e,this.y=n}G.prototype={constructor:G,scale:function(t){return t===1?this:new G(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new G(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var hn=new G(1,0,0);G.prototype;function Kt(t){t.stopImmediatePropagation()}function lt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ws(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Zs(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Pe(){return this.__zoom||hn}function Qs(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Js(){return navigator.maxTouchPoints||"ontouchstart"in this}function js(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function aa(){var t=Ws,e=Zs,n=js,i=Qs,r=Js,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],u=250,l=Qr,a=se("start","zoom","end"),c,d,f,_=500,w=150,v=0,N=10;function m(h){h.property("__zoom",Pe).on("wheel.zoom",wt,{passive:!1}).on("mousedown.zoom",xt).on("dblclick.zoom",vt).filter(r).on("touchstart.zoom",fn).on("touchmove.zoom",dn).on("touchend.zoom touchcancel.zoom",pn).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(h,g,p,y){var x=h.selection?h.selection():h;x.property("__zoom",Pe),h!==x?E(h,g,p,y):x.interrupt().each(function(){L(this,arguments).event(y).start().zoom(null,typeof g=="function"?g.apply(this,arguments):g).end()})},m.scaleBy=function(h,g,p,y){m.scaleTo(h,function(){var x=this.__zoom.k,b=typeof g=="function"?g.apply(this,arguments):g;return x*b},p,y)},m.scaleTo=function(h,g,p,y){m.transform(h,function(){var x=e.apply(this,arguments),b=this.__zoom,k=p==null?z(x):typeof p=="function"?p.apply(this,arguments):p,A=b.invert(k),M=typeof g=="function"?g.apply(this,arguments):g;return n(C($(b,M),k,A),x,s)},p,y)},m.translateBy=function(h,g,p,y){m.transform(h,function(){return n(this.__zoom.translate(typeof g=="function"?g.apply(this,arguments):g,typeof p=="function"?p.apply(this,arguments):p),e.apply(this,arguments),s)},null,y)},m.translateTo=function(h,g,p,y,x){m.transform(h,function(){var b=e.apply(this,arguments),k=this.__zoom,A=y==null?z(b):typeof y=="function"?y.apply(this,arguments):y;return n(hn.translate(A[0],A[1]).scale(k.k).translate(typeof g=="function"?-g.apply(this,arguments):-g,typeof p=="function"?-p.apply(this,arguments):-p),b,s)},y,x)};function $(h,g){return g=Math.max(o[0],Math.min(o[1],g)),g===h.k?h:new G(g,h.x,h.y)}function C(h,g,p){var y=g[0]-p[0]*h.k,x=g[1]-p[1]*h.k;return y===h.x&&x===h.y?h:new G(h.k,y,x)}function z(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function E(h,g,p,y){h.on("start.zoom",function(){L(this,arguments).event(y).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(y).end()}).tween("zoom",function(){var x=this,b=arguments,k=L(x,b).event(y),A=e.apply(x,b),M=p==null?z(A):typeof p=="function"?p.apply(x,b):p,H=Math.max(A[1][0]-A[0][0],A[1][1]-A[0][1]),S=x.__zoom,P=typeof g=="function"?g.apply(x,b):g,V=l(S.invert(M).concat(H/S.k),P.invert(M).concat(H/P.k));return function(B){if(B===1)B=P;else{var Y=V(B),Ft=H/Y[2];B=new G(Ft,M[0]-Y[0]*Ft,M[1]-Y[1]*Ft)}k.zoom(null,B)}})}function L(h,g,p){return!p&&h.__zooming||new W(h,g)}function W(h,g){this.that=h,this.args=g,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,g),this.taps=0}W.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,g){return this.mouse&&h!=="mouse"&&(this.mouse[1]=g.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=g.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=g.invert(this.touch1[0])),this.that.__zoom=g,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var g=Q(this.that).datum();a.call(h,this.that,new Ks(h,{sourceEvent:this.sourceEvent,target:m,type:h,transform:this.that.__zoom,dispatch:a}),g)}};function wt(h,...g){if(!t.apply(this,arguments))return;var p=L(this,g).event(h),y=this.__zoom,x=Math.max(o[0],Math.min(o[1],y.k*Math.pow(2,i.apply(this,arguments)))),b=j(h);if(p.wheel)(p.mouse[0][0]!==b[0]||p.mouse[0][1]!==b[1])&&(p.mouse[1]=y.invert(p.mouse[0]=b)),clearTimeout(p.wheel);else{if(y.k===x)return;p.mouse=[b,y.invert(b)],St(this),p.start()}lt(h),p.wheel=setTimeout(k,w),p.zoom("mouse",n(C($(y,x),p.mouse[0],p.mouse[1]),p.extent,s));function k(){p.wheel=null,p.end()}}function xt(h,...g){if(f||!t.apply(this,arguments))return;var p=h.currentTarget,y=L(this,g,!0).event(h),x=Q(h.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",H,!0),b=j(h,p),k=h.clientX,A=h.clientY;$r(h.view),Kt(h),y.mouse=[b,this.__zoom.invert(b)],St(this),y.start();function M(S){if(lt(S),!y.moved){var P=S.clientX-k,V=S.clientY-A;y.moved=P*P+V*V>v}y.event(S).zoom("mouse",n(C(y.that.__zoom,y.mouse[0]=j(S,p),y.mouse[1]),y.extent,s))}function H(S){x.on("mousemove.zoom mouseup.zoom",null),Ar(S.view,y.moved),lt(S),y.event(S).end()}}function vt(h,...g){if(t.apply(this,arguments)){var p=this.__zoom,y=j(h.changedTouches?h.changedTouches[0]:h,this),x=p.invert(y),b=p.k*(h.shiftKey?.5:2),k=n(C($(p,b),y,x),e.apply(this,g),s);lt(h),u>0?Q(this).transition().duration(u).call(E,k,y,h):Q(this).call(m.transform,k,y,h)}}function fn(h,...g){if(t.apply(this,arguments)){var p=h.touches,y=p.length,x=L(this,g,h.changedTouches.length===y).event(h),b,k,A,M;for(Kt(h),k=0;k<y;++k)A=p[k],M=j(A,this),M=[M,this.__zoom.invert(M),A.identifier],x.touch0?!x.touch1&&x.touch0[2]!==M[2]&&(x.touch1=M,x.taps=0):(x.touch0=M,b=!0,x.taps=1+!!c);c&&(c=clearTimeout(c)),b&&(x.taps<2&&(d=M[0],c=setTimeout(function(){c=null},_)),St(this),x.start())}}function dn(h,...g){if(this.__zooming){var p=L(this,g).event(h),y=h.changedTouches,x=y.length,b,k,A,M;for(lt(h),b=0;b<x;++b)k=y[b],A=j(k,this),p.touch0&&p.touch0[2]===k.identifier?p.touch0[0]=A:p.touch1&&p.touch1[2]===k.identifier&&(p.touch1[0]=A);if(k=p.that.__zoom,p.touch1){var H=p.touch0[0],S=p.touch0[1],P=p.touch1[0],V=p.touch1[1],B=(B=P[0]-H[0])*B+(B=P[1]-H[1])*B,Y=(Y=V[0]-S[0])*Y+(Y=V[1]-S[1])*Y;k=$(k,Math.sqrt(B/Y)),A=[(H[0]+P[0])/2,(H[1]+P[1])/2],M=[(S[0]+V[0])/2,(S[1]+V[1])/2]}else if(p.touch0)A=p.touch0[0],M=p.touch0[1];else return;p.zoom("touch",n(C(k,A,M),p.extent,s))}}function pn(h,...g){if(this.__zooming){var p=L(this,g).event(h),y=h.changedTouches,x=y.length,b,k;for(Kt(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},_),b=0;b<x;++b)k=y[b],p.touch0&&p.touch0[2]===k.identifier?delete p.touch0:p.touch1&&p.touch1[2]===k.identifier&&delete p.touch1;if(p.touch1&&!p.touch0&&(p.touch0=p.touch1,delete p.touch1),p.touch0)p.touch0[1]=this.__zoom.invert(p.touch0[0]);else if(p.end(),p.taps===2&&(k=j(k,this),Math.hypot(d[0]-k[0],d[1]-k[1])<N)){var A=Q(this).on("dblclick.zoom");A&&A.apply(this,arguments)}}}return m.wheelDelta=function(h){return arguments.length?(i=typeof h=="function"?h:Nt(+h),m):i},m.filter=function(h){return arguments.length?(t=typeof h=="function"?h:Nt(!!h),m):t},m.touchable=function(h){return arguments.length?(r=typeof h=="function"?h:Nt(!!h),m):r},m.extent=function(h){return arguments.length?(e=typeof h=="function"?h:Nt([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),m):e},m.scaleExtent=function(h){return arguments.length?(o[0]=+h[0],o[1]=+h[1],m):[o[0],o[1]]},m.translateExtent=function(h){return arguments.length?(s[0][0]=+h[0][0],s[1][0]=+h[1][0],s[0][1]=+h[0][1],s[1][1]=+h[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(h){return arguments.length?(n=h,m):n},m.duration=function(h){return arguments.length?(u=+h,m):u},m.interpolate=function(h){return arguments.length?(l=h,m):l},m.on=function(){var h=a.on.apply(a,arguments);return h===a?m:h},m.clickDistance=function(h){return arguments.length?(v=(h=+h)*h,m):Math.sqrt(v)},m.tapDistance=function(h){return arguments.length?(N=+h,m):N},m}export{ea as S,na as a,sa as b,ia as c,ln as h,hn as i,oa as l,Q as s,ra as t,aa as z};
