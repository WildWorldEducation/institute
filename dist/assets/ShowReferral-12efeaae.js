import{_ as m,y,e as g,o,c as l,a as s,t as a,b as u,j as i,F as f,x as h,p as _}from"./main-d0bd4343.js";const b={setup(){const e=y(),t=g();return{usersStore:e,usersDetailsStore:t}},data(){return{partnerId:this.$route.params.partnerId,referredUserId:this.$route.params.referredUserId,receipts:[],student:null,loading:!0}},async created(){console.log(this.$route.params.partnerId),await this.getStudentInfo(),await this.getReferral()},methods:{async getStudentInfo(){try{await this.usersStore.getUsers(),this.student=this.usersStore.users.find(e=>e.id==this.referredUserId),this.student||console.error("Student not found")}catch(e){console.error("Error fetching student info:",e)}},getReferral(){fetch(`/referrals/get-receipts/${this.referredUserId}`).then(function(e){return e.json()}).then(async e=>{this.receipts=e,console.log(this.receipts),this.loading=!1})},formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},formatDate(e){const t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString("en-US",t)},getStatusClass(e){return{completed:"badge-success",pending:"badge-warning",failed:"badge-danger",refunded:"badge-secondary"}[e]||"badge-secondary"},getTotalPayments(){return this.receipts.filter(e=>e.status==="completed"||!e.status).reduce((e,t)=>e+parseFloat(t.amount||0),0)},goBack(){this.$router.push("/referrals")}}},p={class:"container bg-light rounded"},v={class:"mb-3"},S={key:0,class:"heading"},k={key:1,class:"heading"},I={key:2,class:"text-center py-4"},w={key:3,class:"row mb-4"},C={class:"col-md-6"},U={class:"card"},D={class:"card-body"},x={class:"card-text"},T={key:4},P={key:0,class:"alert alert-info"},N={key:1,class:"table-responsive"},B={class:"table table-striped table-hover"},R={class:"table-dark"},j={key:0},A={class:"fw-bold"},F={class:"font-monospace small"},E={key:0},L={key:1,class:"badge badge-success"},V={key:2,class:"row mt-4"},z={class:"col-md-6 offset-md-6"},H={class:"card"},M={class:"card-body"},q={class:"d-flex justify-content-between"},G={class:"d-flex justify-content-between"};function J(e,t,K,O,r,d){return o(),l("div",p,[s("div",v,[s("button",{onClick:t[0]||(t[0]=(...n)=>d.goBack&&d.goBack(...n)),class:"btn btn-outline-secondary"}," ← Back to Referrals ")]),r.student?(o(),l("h1",S,a(r.student.username),1)):(o(),l("h1",k,"Student ID: "+a(r.referredUserId),1)),r.loading?(o(),l("div",I,t[1]||(t[1]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)]))):u("",!0),!r.loading&&r.student?(o(),l("div",w,[s("div",C,[s("div",U,[s("div",D,[t[9]||(t[9]=s("h5",{class:"card-title"},"Student Summary",-1)),s("p",x,[t[2]||(t[2]=s("strong",null,"Username:",-1)),i(" "+a(r.student.username),1),t[3]||(t[3]=s("br",null,null,-1)),t[4]||(t[4]=s("strong",null,"Email:",-1)),i(" "+a(r.student.email||"N/A"),1),t[5]||(t[5]=s("br",null,null,-1)),t[6]||(t[6]=s("strong",null,"Total Payments:",-1)),i(" "+a(d.formatCurrency(d.getTotalPayments())),1),t[7]||(t[7]=s("br",null,null,-1)),t[8]||(t[8]=s("strong",null,"Number of Transactions:",-1)),i(" "+a(r.receipts.length),1)])])])])])):u("",!0),r.loading?u("",!0):(o(),l("div",T,[t[18]||(t[18]=s("h3",null,"Payment History",-1)),r.receipts.length===0?(o(),l("div",P," No payments found for this student. ")):(o(),l("div",N,[s("table",B,[s("thead",R,[s("tr",null,[t[10]||(t[10]=s("th",null,"Date",-1)),t[11]||(t[11]=s("th",null,"Description",-1)),t[12]||(t[12]=s("th",null,"Amount",-1)),t[13]||(t[13]=s("th",null,"Payment Method",-1)),t[14]||(t[14]=s("th",null,"Transaction ID",-1)),r.receipts.some(n=>n.status)?(o(),l("th",j," Status ")):u("",!0)])]),s("tbody",null,[(o(!0),l(f,null,h(r.receipts,n=>(o(),l("tr",{key:n.id},[s("td",null,a(d.formatDate(n.created_at||n.payment_date)),1),s("td",null,a(n.description||n.course_name||"Payment"),1),s("td",A,a(d.formatCurrency(n.amount)),1),s("td",null,a(n.payment_method||"N/A"),1),s("td",F,a(n.transaction_id||n.id),1),r.receipts.some(c=>c.status)?(o(),l("td",E,[n.status?(o(),l("span",{key:0,class:_(["badge",d.getStatusClass(n.status)])},a(n.status.charAt(0).toUpperCase()+n.status.slice(1)),3)):(o(),l("span",L,"Completed"))])):u("",!0)]))),128))])])])),r.receipts.length>0?(o(),l("div",V,[s("div",z,[s("div",H,[s("div",M,[t[17]||(t[17]=s("h6",{class:"card-title"},"Payment Summary",-1)),s("div",q,[t[15]||(t[15]=s("span",null,"Total Payments:",-1)),s("strong",null,a(d.formatCurrency(d.getTotalPayments())),1)]),s("div",G,[t[16]||(t[16]=s("span",null,"Total Transactions:",-1)),s("strong",null,a(r.receipts.length),1)])])])])])):u("",!0)]))])}const W=m(b,[["render",J],["__scopeId","data-v-dd18ba6f"]]);export{W as default};
