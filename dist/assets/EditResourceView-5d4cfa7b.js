import{_ as i,o as a,c,d as s,i as d}from"./main-ac35fd62.js";const u={setup(){},data(){return{resourceId:this.$route.params.id,newContent:"",originalContent:""}},async created(){const e=await(await fetch("/resources/show/"+this.resourceId)).json();$("#summernote").summernote({maximumImageFileSize:2048*1024,callbacks:{onImageUploadError:function(t){alert("Max image size is 2MB.")},onChange:t=>{this.newContent=t}}}).summernote("code",e.content),$(".note-editor .note-editable").css("background-color","#ffffff"),this.originalContent=e.content},methods:{Submit(){var o="/resources/edit/"+this.resourceId,e=$("#summernote").summernote("code");const t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({editordata:e})};fetch(o,t).then(()=>{let n=this.$route.query.dismissFlagId;n?fetch("/content-flags/"+n,{method:"DELETE"}).finally(()=>{this.$router.back()}):this.$router.back()})}},computed:{isFormChanged(){return this.originalContent!==this.newContent}}},m={class:"container p-2 bg-light rounded"},l=s("h1",{class:"heading"},"Edit Source",-1),h=s("div",{class:"row"},[s("div",{class:"mb-3"},[s("textarea",{id:"summernote",name:"editordata"})])],-1),_=["disabled"];function f(o,e,t,n,g,r){return a(),c("div",m,[l,h,s("button",{class:"btn btn-dark",disabled:!r.isFormChanged,onClick:e[0]||(e[0]=b=>r.Submit())}," Submit ",8,_)])}const p=i(u,[["render",f]]),k={__name:"EditResourceView",setup(o){return(e,t)=>(a(),d(p))}};export{k as default};
