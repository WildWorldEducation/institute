import{_ as ve,z as Xn,r as Yn,o as q,i as Ln,j as Gt,c as G,l as Rn,d as E,m as Wt,b as Qt,e as Ne,x as Ae,F as Fn,t as Hn,T as Bn,p as xe,f as we,a as qn}from"./main-4aa34e8d.js";const Vn={setup(){},props:["skill","showSkillPanel"],data(){return{treeType:""}},mounted(){const t=Xn();this.treeType=t.name},computed:{},methods:{hideInfoPanel(){this.$parent.showSkillPanel=!1,console.log(this.skill)},toggleChildNodes(){this.skill.show_children==0?this.$parent.toggleShowChildren(this.skill):this.$parent.toggleHideChildren(this.skill)},imageUrlAlternative(t){t.target.src=""}}},Vt=t=>(xe("data-v-8abe774d"),t=t(),we(),t),Un={class:"d-flex justify-content-between p-2"},Jn={class:"d-flex"},Zn={key:0},Kn={key:1},Gn=Vt(()=>E("svg",{width:"18",height:"18",viewBox:"0 0 20 20",class:"tertiary-icon",xmlns:"http://www.w3.org/2000/svg"},[E("path",{d:"M6.34811 20.0423L6.34811 13.6494L-0.0358702 13.6583C-0.320945 13.6579 -0.594203 13.5444 -0.795782 13.3428C-0.997361 13.1412 -1.11082 12.868 -1.11132 12.5829L-1.11729 7.41477C-1.1168 7.1297 -1.00334 6.85644 -0.801757 6.65486C-0.600179 6.45328 -0.326921 6.33982 -0.0418461 6.33933L6.3481 6.34231L6.3481 -0.0506238C6.34659 -0.193451 6.3736 -0.335145 6.42756 -0.467396C6.48152 -0.599646 6.56134 -0.719794 6.66234 -0.820794C6.76334 -0.921794 6.88349 -1.00161 7.01574 -1.05557C7.14799 -1.10953 7.28969 -1.13655 7.43251 -1.13503L12.5827 -1.12308C12.8678 -1.12259 13.141 -1.00913 13.3426 -0.807549C13.5442 -0.60597 13.6577 -0.332713 13.6582 -0.047637L13.6552 6.34231L20.0481 6.34231C20.3325 6.34248 20.6052 6.45552 20.8063 6.65661C21.0074 6.8577 21.1204 7.13039 21.1206 7.41477L21.1325 12.565C21.1324 12.8494 21.0193 13.122 20.8182 13.3231C20.6171 13.5242 20.3444 13.6373 20.0601 13.6374L13.6552 13.6494L13.6641 20.0334C13.6636 20.3184 13.5502 20.5917 13.3486 20.7933C13.147 20.9948 12.8738 21.1083 12.5887 21.1088L7.43252 21.1267C7.28969 21.1282 7.148 21.1012 7.01575 21.0473C6.88349 20.9933 6.76335 20.9135 6.66235 20.8125C6.56135 20.7115 6.48153 20.5913 6.42757 20.4591C6.37361 20.3268 6.34659 20.1851 6.34811 20.0423Z"})],-1)),Wn=Vt(()=>E("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"#888",width:"20",height:"20"},[E("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})],-1)),Qn=[Wn],jn=Vt(()=>E("hr",null,null,-1)),ti={class:"secondary-heading h3 text-center"},ei=["src"],ni=["innerHTML"],ii={key:0,class:"skill-introduction"},ri=Vt(()=>E("h2",{class:"h4"},"Subskills",-1)),oi={class:"list-container"};function si(t,e,n,i,r,o){const s=Yn("router-link");return q(),Ln(Bn,{name:"skillPanel"},{default:Gt(()=>{var l,c;return[n.showSkillPanel?(q(),G("div",{key:0,class:Rn(["skill-panel-container text-center overflow-auto",r.treeType==="radial-tree"&&"radial-skill-panel"])},[E("div",null,[E("div",Un,[E("div",Jn,[n.skill.has_children&&this.$route.name==="learning-tracks"?(q(),G("button",{key:0,class:"primary-btn me-2 btn",onClick:e[0]||(e[0]=(...a)=>o.toggleChildNodes&&o.toggleChildNodes(...a))},[n.skill.show_children==1?(q(),G("span",Zn,"Collapse")):(q(),G("span",Kn,[Wt("Expand "),Gn]))])):Qt("",!0),Ne(s,{class:"btn primary-btn",target:"_blank",id:"skillLink",to:"/skills/"+n.skill.url,"b-on-hover":"",title:"Learn more"},{default:Gt(()=>[Wt("Learn More ")]),_:1},8,["to"])]),E("button",{class:"closebtn",onClick:e[1]||(e[1]=(...a)=>o.hideInfoPanel&&o.hideInfoPanel(...a)),"b-on-hover":"",title:"Close Panel "},Qn)]),jn,E("h1",ti,Ae((l=n.skill)==null?void 0:l.name),1),E("img",{src:"https://institute-skill-infobox-image-thumbnails.s3.amazonaws.com/"+n.skill.url,class:"rounded img-fluid mx-auto",onError:e[2]||(e[2]=(...a)=>o.imageUrlAlternative&&o.imageUrlAlternative(...a))},null,40,ei),E("div",{class:"skill-introduction text-start mt-1 mb-4",innerHTML:n.skill.introduction},null,8,ni),((c=n.skill)==null?void 0:c.type)=="super"?(q(),G("div",ii,[ri,E("ul",oi,[(q(!0),G(Fn,null,Hn(n.skill.subskills,a=>(q(),G("li",null,[Ne(s,{class:"btn mb-2",to:"/skills/"+a.url},{default:Gt(()=>[Wt(Ae(a.name),1)]),_:2},1032,["to"])]))),256))])])):Qt("",!0)])],2)):Qt("",!0)]}),_:1})}const qa=ve(Vn,[["render",si],["__scopeId","data-v-8abe774d"]]);const ai={setup(){},data(){return{oldScale:0}},computed:{},async mounted(){this.oldScale=this.$parent.scale},methods:{scaleTree(t){const e=this.$parent.context.canvas.width/2,n=this.$parent.context.canvas.height/2,i=this.$parent.scale+t,r=i/this.$parent.scale;let o=e+(this.$parent.panX-e)*r,s=n+(this.$parent.panY-n)*r;this.$parent.scale=i,this.oldScale=i,this.$parent.zoomInD3(i,o,s)},zoomIn(){this.$parent.scale<2&&this.scaleTree(.1)},zoomOut(){this.$parent.scale>.3&&this.scaleTree(-.1)}}},be=t=>(xe("data-v-d66ddf5c"),t=t(),we(),t),li={id:"zoomcontrols"},ci=be(()=>E("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[E("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"})],-1)),ui=[ci],hi=be(()=>E("div",{class:"divider"},null,-1)),fi=be(()=>E("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[E("path",{d:"M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"})],-1)),di=[fi];function pi(t,e,n,i,r,o){return q(),G("div",li,[E("div",{onClick:e[0]||(e[0]=(...s)=>o.zoomIn&&o.zoomIn(...s)),class:"zoom-button"},ui),hi,E("div",{onClick:e[1]||(e[1]=(...s)=>o.zoomOut&&o.zoomOut(...s)),class:"zoom-button"},di)])}const Va=ve(ai,[["render",pi],["__scopeId","data-v-d66ddf5c"]]),Nt=(t,e)=>{const n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},mi=(t,e)=>{const n=e.x-t.x,i=e.y-t.y;return yi(Math.atan2(i,n))},gi=(t,e,n)=>{const i={x:0,y:0};return n=se(n),i.x=t.x-e*Math.cos(n),i.y=t.y-e*Math.sin(n),i},se=t=>t*(Math.PI/180),yi=t=>t*(180/Math.PI),_i=t=>isNaN(t.buttons)?t.pressure!==0:t.buttons!==0,jt=new Map,Oe=t=>{jt.has(t)&&clearTimeout(jt.get(t)),jt.set(t,setTimeout(t,100))},Yt=(t,e,n)=>{const i=e.split(/[ ,]+/g);let r;for(let o=0;o<i.length;o+=1)r=i[o],t.addEventListener?t.addEventListener(r,n,!1):t.attachEvent&&t.attachEvent(r,n)},Pe=(t,e,n)=>{const i=e.split(/[ ,]+/g);let r;for(let o=0;o<i.length;o+=1)r=i[o],t.removeEventListener?t.removeEventListener(r,n):t.detachEvent&&t.detachEvent(r,n)},on=t=>(t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t),De=()=>{const t=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:t,y:e}},Xe=(t,e)=>{e.top||e.right||e.bottom||e.left?(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left):(t.style.left=e.x+"px",t.style.top=e.y+"px")},$e=(t,e,n)=>{const i=sn(t);for(let r in i)if(i.hasOwnProperty(r))if(typeof e=="string")i[r]=e+" "+n;else{let o="";for(let s=0,l=e.length;s<l;s+=1)o+=e[s]+" "+n+", ";i[r]=o.slice(0,-2)}return i},vi=(t,e)=>{const n=sn(t);for(let i in n)n.hasOwnProperty(i)&&(n[i]=e);return n},sn=t=>{const e={};return e[t]="",["webkit","Moz","o"].forEach(function(i){e[i+t.charAt(0).toUpperCase()+t.slice(1)]=""}),e},te=(t,e)=>{for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},xi=(t,e)=>{const n={};for(let i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)?n[i]=e[i]:t.hasOwnProperty(i)&&(n[i]=t[i]);return n},ae=(t,e)=>{if(t.length)for(let n=0,i=t.length;n<i;n+=1)e(t[n]);else e(t)},wi=(t,e,n)=>({x:Math.min(Math.max(t.x,e.x-n),e.x+n),y:Math.min(Math.max(t.y,e.y-n),e.y+n)});var bi="ontouchstart"in window,$i=!!window.PointerEvent,ki=!!window.MSPointerEvent,ft={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},lt,yt={};$i?lt=ft.pointer:ki?lt=ft.MSPointer:bi?(lt=ft.touch,yt=ft.mouse):lt=ft.mouse;function j(){}j.prototype.on=function(t,e){var n=this,i=t.split(/[ ,]+/g),r;n._handlers_=n._handlers_||{};for(var o=0;o<i.length;o+=1)r=i[o],n._handlers_[r]=n._handlers_[r]||[],n._handlers_[r].push(e);return n};j.prototype.off=function(t,e){var n=this;return n._handlers_=n._handlers_||{},t===void 0?n._handlers_={}:e===void 0?n._handlers_[t]=null:n._handlers_[t]&&n._handlers_[t].indexOf(e)>=0&&n._handlers_[t].splice(n._handlers_[t].indexOf(e),1),n};j.prototype.trigger=function(t,e){var n=this,i=t.split(/[ ,]+/g),r;n._handlers_=n._handlers_||{};for(var o=0;o<i.length;o+=1)r=i[o],n._handlers_[r]&&n._handlers_[r].length&&n._handlers_[r].forEach(function(s){s.call(n,{type:r,target:n},e)})};j.prototype.config=function(t){var e=this;e.options=e.defaults||{},t&&(e.options=xi(e.options,t))};j.prototype.bindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[e]=function(){typeof n["on"+e]=="function"?n["on"+e].apply(n,arguments):console.warn('[WARNING] : Missing "on'+e+'" handler.')},Yt(t,lt[e],n._domHandlers_[e]),yt[e]&&Yt(t,yt[e],n._domHandlers_[e]),n};j.prototype.unbindEvt=function(t,e){var n=this;return n._domHandlers_=n._domHandlers_||{},Pe(t,lt[e],n._domHandlers_[e]),yt[e]&&Pe(t,yt[e],n._domHandlers_[e]),delete n._domHandlers_[e],this};function N(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(e),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=N.id,N.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}N.prototype=new j;N.constructor=N;N.id=0;N.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};N.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=vi("borderRadius","50%"),n=$e("transition","opacity",t),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",left:0,marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",left:0,marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5",transform:"translate(0px, 0px)"},te(i.el,n),this.options.shape==="circle"&&te(i.back,e),te(i.front,e),this.applyStyles(i),this};N.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var n in t[e])this.ui[e].style[n]=t[e][n];return this};N.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};N.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};N.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};N.prototype.show=function(t){var e=this;return e.options.dataOnly||(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),typeof t=="function"&&t.call(this)},e.options.fadeTime)),e};N.prototype.hide=function(t){var e=this;if(e.options.dataOnly)return e;if(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var n=e.options.mode==="dynamic"?"none":"block";e.ui.el.style.display=n,typeof t=="function"&&t.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick){const n=e.options.restJoystick,i={};i.x=n===!0||n.x!==!1?0:e.instance.frontPosition.x,i.y=n===!0||n.y!==!1?0:e.instance.frontPosition.y,e.setPosition(t,i)}return e};N.prototype.setPosition=function(t,e){var n=this;n.frontPosition={x:e.x,y:e.y};var i=n.options.fadeTime+"ms",r={};r.front=$e("transition",["transform"],i);var o={front:{}};o.front={transform:"translate("+n.frontPosition.x+"px,"+n.frontPosition.y+"px)"},n.applyStyles(r),n.applyStyles(o),n.restTimeout=setTimeout(function(){typeof t=="function"&&t.call(n),n.restCallback()},n.options.fadeTime)};N.prototype.restCallback=function(){var t=this,e={};e.front=$e("transition","none",""),t.applyStyles(e),t.trigger("rested",t.instance)};N.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};N.prototype.computeDirection=function(t){var e=t.angle.radian,n=Math.PI/4,i=Math.PI/2,r,o,s;if(e>n&&e<n*3&&!t.lockX?r="up":e>-n&&e<=n&&!t.lockY?r="left":e>-n*3&&e<=-n&&!t.lockX?r="down":t.lockY||(r="right"),t.lockY||(e>-i&&e<i?o="left":o="right"),t.lockX||(e>0?s="up":s="down"),t.force>this.options.threshold){var l={},c;for(c in this.direction)this.direction.hasOwnProperty(c)&&(l[c]=this.direction[c]);var a={};this.direction={x:o,y:s,angle:r},t.direction=this.direction;for(c in l)l[c]===this.direction[c]&&(a[c]=!0);if(a.x&&a.y&&a.angle)return t;(!a.x||!a.y)&&this.trigger("plain",t),a.x||this.trigger("plain:"+o,t),a.y||this.trigger("plain:"+s,t),a.angle||this.trigger("dir dir:"+r,t)}else this.resetDirection();return t};function I(t,e){var n=this;n.nipples=[],n.idles=[],n.actives=[],n.ids=[],n.pressureIntervals={},n.manager=t,n.id=I.id,I.id+=1,n.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},n.config(e),(n.options.mode==="static"||n.options.mode==="semi")&&(n.options.multitouch=!1),n.options.multitouch||(n.options.maxNumberOfNipples=1);const i=getComputedStyle(n.options.zone.parentElement);return i&&i.display==="flex"&&(n.parentIsFlex=!0),n.updateBox(),n.prepareNipples(),n.bindings(),n.begin(),n.nipples}I.prototype=new j;I.constructor=I;I.id=0;I.prototype.prepareNipples=function(){var t=this,e=t.nipples;e.on=t.on.bind(t),e.off=t.off.bind(t),e.options=t.options,e.destroy=t.destroy.bind(t),e.ids=t.ids,e.id=t.id,e.processOnMove=t.processOnMove.bind(t),e.processOnEnd=t.processOnEnd.bind(t),e.get=function(n){if(n===void 0)return e[0];for(var i=0,r=e.length;i<r;i+=1)if(e[i].identifier===n)return e[i];return!1}};I.prototype.bindings=function(){var t=this;t.bindEvt(t.options.zone,"start"),t.options.zone.style.touchAction="none",t.options.zone.style.msTouchAction="none"};I.prototype.begin=function(){var t=this,e=t.options;if(e.mode==="static"){var n=t.createNipple(e.position,t.manager.getIdentifier());n.add(),t.idles.push(n)}};I.prototype.createNipple=function(t,e){var n=this,i=n.manager.scroll,r={},o=n.options,s={x:n.parentIsFlex?i.x:i.x+n.box.left,y:n.parentIsFlex?i.y:i.y+n.box.top};if(t.x&&t.y)r={x:t.x-s.x,y:t.y-s.y};else if(t.top||t.right||t.bottom||t.left){var l=document.createElement("DIV");l.style.display="hidden",l.style.top=t.top,l.style.right=t.right,l.style.bottom=t.bottom,l.style.left=t.left,l.style.position="absolute",o.zone.appendChild(l);var c=l.getBoundingClientRect();o.zone.removeChild(l),r=t,t={x:c.left+i.x,y:c.top+i.y}}var a=new N(n,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:e,position:t,zone:o.zone,frontPosition:{x:0,y:0},shape:o.shape});return o.dataOnly||(Xe(a.ui.el,r),Xe(a.ui.front,a.frontPosition)),n.nipples.push(a),n.trigger("added "+a.identifier+":added",a),n.manager.trigger("added "+a.identifier+":added",a),n.bindNipple(a),a};I.prototype.updateBox=function(){var t=this;t.box=t.options.zone.getBoundingClientRect()};I.prototype.bindNipple=function(t){var e=this,n,i=function(r,o){n=r.type+" "+o.id+":"+r.type,e.trigger(n,o)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)};I.prototype.pressureFn=function(t,e,n){var i=this,r=0;clearInterval(i.pressureIntervals[n]),i.pressureIntervals[n]=setInterval(function(){var o=t.force||t.pressure||t.webkitForce||0;o!==r&&(e.trigger("pressure",o),i.trigger("pressure "+e.identifier+":pressure",o),r=o)}.bind(i),100)};I.prototype.onstart=function(t){var e=this,n=e.options,i=t;t=on(t),e.updateBox();var r=function(o){e.actives.length<n.maxNumberOfNipples?e.processOnStart(o):i.type.match(/^touch/)&&(Object.keys(e.manager.ids).forEach(function(s){if(Object.values(i.touches).findIndex(function(c){return c.identifier===s})<0){var l=[t[0]];l.identifier=s,e.processOnEnd(l)}}),e.actives.length<n.maxNumberOfNipples&&e.processOnStart(o))};return ae(t,r),e.manager.bindDocument(),!1};I.prototype.processOnStart=function(t){var e=this,n=e.options,i,r=e.manager.getIdentifier(t),o=t.force||t.pressure||t.webkitForce||0,s={x:t.pageX,y:t.pageY},l=e.getOrCreate(r,s);l.identifier!==r&&e.manager.removeIdentifier(l.identifier),l.identifier=r;var c=function(u){u.trigger("start",u),e.trigger("start "+u.id+":start",u),u.show(),o>0&&e.pressureFn(t,u,u.identifier),e.processOnMove(t)};if((i=e.idles.indexOf(l))>=0&&e.idles.splice(i,1),e.actives.push(l),e.ids.push(l.identifier),n.mode!=="semi")c(l);else{var a=Nt(s,l.position);if(a<=n.catchDistance)c(l);else{l.destroy(),e.processOnStart(t);return}}return l};I.prototype.getOrCreate=function(t,e){var n=this,i=n.options,r;return/(semi|static)/.test(i.mode)?(r=n.idles[0],r?(n.idles.splice(0,1),r):i.mode==="semi"?n.createNipple(e,t):(console.warn("Coudln't find the needed nipple."),!1)):(r=n.createNipple(e,t),r)};I.prototype.processOnMove=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),r=e.nipples.get(i),o=e.manager.scroll;if(!_i(t)){this.processOnEnd(t);return}if(!r){console.error("Found zombie joystick with ID "+i),e.manager.removeIdentifier(i);return}if(n.dynamicPage){var s=r.el.getBoundingClientRect();r.position={x:o.x+s.left,y:o.y+s.top}}r.identifier=i;var l=r.options.size/2,c={x:t.pageX,y:t.pageY};n.lockX&&(c.y=r.position.y),n.lockY&&(c.x=r.position.x);var a=Nt(c,r.position),u=mi(c,r.position),d=se(u),f=a/l,m={distance:a,position:c},v,x;if(r.options.shape==="circle"?(v=Math.min(a,l),x=gi(r.position,v,u)):(x=wi(c,r.position,l),v=Nt(x,r.position)),n.follow){if(a>l){let S=c.x-x.x,C=c.y-x.y;r.position.x+=S,r.position.y+=C,r.el.style.top=r.position.y-(e.box.top+o.y)+"px",r.el.style.left=r.position.x-(e.box.left+o.x)+"px",a=Nt(c,r.position)}}else c=x,a=v;var T=c.x-r.position.x,g=c.y-r.position.y;r.frontPosition={x:T,y:g},n.dataOnly||(r.ui.front.style.transform="translate("+T+"px,"+g+"px)");var b={identifier:r.identifier,position:c,force:f,pressure:t.force||t.pressure||t.webkitForce||0,distance:a,angle:{radian:d,degree:u},vector:{x:T/l,y:-g/l},raw:m,instance:r,lockX:n.lockX,lockY:n.lockY};b=r.computeDirection(b),b.angle={radian:se(180-u),degree:180-u},r.trigger("move",b),e.trigger("move "+r.id+":move",b)};I.prototype.processOnEnd=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),r=e.nipples.get(i),o=e.manager.removeIdentifier(r.identifier);r&&(n.dataOnly||r.hide(function(){n.mode==="dynamic"&&(r.trigger("removed",r),e.trigger("removed "+r.id+":removed",r),e.manager.trigger("removed "+r.id+":removed",r),r.destroy())}),clearInterval(e.pressureIntervals[r.identifier]),r.resetDirection(),r.trigger("end",r),e.trigger("end "+r.id+":end",r),e.ids.indexOf(r.identifier)>=0&&e.ids.splice(e.ids.indexOf(r.identifier),1),e.actives.indexOf(r)>=0&&e.actives.splice(e.actives.indexOf(r),1),/(semi|static)/.test(n.mode)?e.idles.push(r):e.nipples.indexOf(r)>=0&&e.nipples.splice(e.nipples.indexOf(r),1),e.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(e.manager.ids[o.id]=o.identifier))};I.prototype.onDestroyed=function(t,e){var n=this;n.nipples.indexOf(e)>=0&&n.nipples.splice(n.nipples.indexOf(e),1),n.actives.indexOf(e)>=0&&n.actives.splice(n.actives.indexOf(e),1),n.idles.indexOf(e)>=0&&n.idles.splice(n.idles.indexOf(e),1),n.ids.indexOf(e.identifier)>=0&&n.ids.splice(n.ids.indexOf(e.identifier),1),n.manager.removeIdentifier(e.identifier),n.manager.unbindDocument()};I.prototype.destroy=function(){var t=this;t.unbindEvt(t.options.zone,"start"),t.nipples.forEach(function(n){n.destroy()});for(var e in t.pressureIntervals)t.pressureIntervals.hasOwnProperty(e)&&clearInterval(t.pressureIntervals[e]);t.trigger("destroyed",t.nipples),t.manager.unbindDocument(),t.off()};function A(t){var e=this;e.ids={},e.index=0,e.collections=[],e.scroll=De(),e.config(t),e.prepareCollections();var n=function(){var r;e.collections.forEach(function(o){o.forEach(function(s){r=s.el.getBoundingClientRect(),s.position={x:e.scroll.x+r.left,y:e.scroll.y+r.top}})})};Yt(window,"resize",function(){Oe(n)});var i=function(){e.scroll=De()};return Yt(window,"scroll",function(){Oe(i)}),e.collections}A.prototype=new j;A.constructor=A;A.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var n;return t.collections.every(function(i){return n=i.get(e),!n}),n}};A.prototype.create=function(t){return this.createCollection(t)};A.prototype.createCollection=function(t){var e=this,n=new I(e,t);return e.bindCollection(n),e.collections.push(n),n};A.prototype.bindCollection=function(t){var e=this,n,i=function(r,o){n=r.type+" "+o.id+":"+r.type,e.trigger(n,o)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)};A.prototype.bindDocument=function(){var t=this;t.binded||(t.bindEvt(document,"move").bindEvt(document,"end"),t.binded=!0)};A.prototype.unbindDocument=function(t){var e=this;(!Object.keys(e.ids).length||t===!0)&&(e.unbindEvt(document,"move").unbindEvt(document,"end"),e.binded=!1)};A.prototype.getIdentifier=function(t){var e;return t?(e=t.identifier===void 0?t.pointerId:t.identifier,e===void 0&&(e=this.latest||0)):e=this.index,this.ids[e]===void 0&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]};A.prototype.removeIdentifier=function(t){var e={};for(var n in this.ids)if(this.ids[n]===t){e.id=n,e.identifier=this.ids[n],delete this.ids[n];break}return e};A.prototype.onmove=function(t){var e=this;return e.onAny("move",t),!1};A.prototype.onend=function(t){var e=this;return e.onAny("end",t),!1};A.prototype.oncancel=function(t){var e=this;return e.onAny("end",t),!1};A.prototype.onAny=function(t,e){var n=this,i,r="processOn"+t.charAt(0).toUpperCase()+t.slice(1);e=on(e);var o=function(l,c,a){a.ids.indexOf(c)>=0&&(a[r](l),l._found_=!0)},s=function(l){i=n.getIdentifier(l),ae(n.collections,o.bind(null,l,i)),l._found_||n.removeIdentifier(i)};return ae(e,s),!1};A.prototype.destroy=function(){var t=this;t.unbindDocument(!0),t.ids={},t.index=0,t.collections.forEach(function(e){e.destroy()}),t.off()};A.prototype.onDestroyed=function(t,e){var n=this;if(n.collections.indexOf(e)<0)return!1;n.collections.splice(n.collections.indexOf(e),1)};const Ye=new A,Ti={create:function(t){return Ye.create(t)},factory:Ye};const zi={setup(){return{userDetailsStore:qn()}},data(){return{holdTime:0,interval:null,fps:10,holdTimeInterval:null,fnZoomKey:!1,lefClick:!1,oldMY:0,oldScale:0}},computed:{},async mounted(){let t="#184e80";switch(this.userDetailsStore.theme){case"original":t="#184e80";break;case"instructor":t="#000000";break;case"editor":t="#ffffff";break;default:t="#184e80";break}this.oldScale=this.$parent.scale;var e=Ti.create({zone:document.getElementById("panJoystick"),mode:"static",dynamicPage:!0,position:{right:"70%",bottom:"33%"},color:t});const n=Math.floor(1e3/this.fps)+1;e.on("dir:up plain:up dir:left plain:left dir:down plain:down dir:right plain:right",(i,r)=>{clearInterval(this.interval),this.interval=null,this.holdTime=0;const o=this.$parent.scale>=1?this.$parent.scale*10:20/this.$parent.scale,s=this.$parent.scale>1?this.$parent.scale*15:20/this.$parent.scale;if(this.interval==null)switch(r.direction.angle){case"right":this.interval=setInterval(()=>{this.$parent.panX=this.$parent.panX-20-(this.holdTime*s+o),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},n);break;case"left":this.interval=setInterval(()=>{this.$parent.panX=this.$parent.panX+20+(this.holdTime*s+o),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},n);break;case"up":this.interval=setInterval(()=>{this.$parent.panY=this.$parent.panY+20+(this.holdTime*s+o),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},n);break;case"down":this.interval=setInterval(()=>{this.$parent.panY=this.$parent.panY-20-(this.holdTime*s+o),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},n);break}}).on("end",(i,r)=>{clearInterval(this.interval)}),e.on("start",(i,r)=>{this.holdTimeInterval=setInterval(()=>{this.holdTime+=1},300)}).on("end",(i,r)=>{clearInterval(this.holdTimeInterval),this.holdTime=0,this.interval=null}),this.$parent.$refs.canvas.addEventListener("keydown",i=>{if(this.interval==null){this.holdTimeInterval=setInterval(()=>{this.holdTime+=1},300);const r=this.$parent.scale>=1?this.$parent.scale/10:50/this.$parent.scale,o=this.$parent.scale>1?this.$parent.scale*15:10/this.$parent.scale;switch(i.code){case"ArrowRight":this.interval=setInterval(()=>{this.$parent.panX=this.$parent.panX-20-(this.holdTime*o+r),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},n);break;case"ArrowLeft":this.interval=setInterval(()=>{this.$parent.panX=this.$parent.panX+20+(this.holdTime*o+r),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},n);break;case"ArrowUp":this.interval=setInterval(()=>{this.$parent.panY=this.$parent.panY+20+(this.holdTime*o+r),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},n);break;case"ArrowDown":this.interval=setInterval(()=>{this.$parent.panY=this.$parent.panY-20-(this.holdTime*o+r),this.$parent.panInD3(this.$parent.panX,this.$parent.panY)},n);break;case"Equal":this.interval=setInterval(()=>{this.$parent.scale<2&&this.scaleTree(.03)},50);break;case"Minus":this.interval=setInterval(()=>{this.$parent.scale>.3&&this.scaleTree(-.03)},50);break}}(i.code.includes("Shift")||i.code.includes("Control"))&&(this.fnZoomKey=!0,i.preventDefault()),(i.code.includes("Arrow")||i.code.includes("Page"))&&i.preventDefault()},!1),this.$parent.$refs.canvas.addEventListener("keyup",i=>{clearInterval(this.interval),clearInterval(this.holdTimeInterval),this.interval=null,this.holdTime=0,(i.code.includes("Shift")||i.code.includes("Control"))&&(this.fnZoomKey=!1)},!1),this.$parent.$refs.canvas.addEventListener("mousemove",i=>{if(this.fnZoomKey)if(i.pageY<this.oldMY){this.$parent.scale+=.01;const r=this.oldScale/this.$parent.scale;let o=this.$parent.scale>=1?this.$parent.panX:this.$parent.panX*this.$parent.scale,s=this.$parent.scale>=1?this.$parent.panY:this.$parent.panY*this.$parent.scale;o=o*r,s=s*r,this.oldScale=this.$parent.scale,this.$parent.zoomInD3(this.$parent.scale,o,s)}else{this.$parent.scale-=.01;const r=this.oldScale/this.$parent.scale;let o=this.$parent.scale>=1?this.$parent.panX:this.$parent.panX*this.$parent.scale,s=this.$parent.scale>=1?this.$parent.panY:this.$parent.panY*this.$parent.scale;o=o*r,s=s*r,this.oldScale=this.$parent.scale,this.$parent.zoomInD3(this.$parent.scale,o,s)}this.oldMY=i.pageY})},watch:{},methods:{scaleTree(t){const e=this.$parent.context.canvas.width/2,n=this.$parent.context.canvas.height/2,i=this.$parent.scale+t,r=i/this.$parent.scale;let o=e+(this.$parent.panX-e)*r,s=n+(this.$parent.panY-n)*r;this.$parent.scale=i,this.oldScale=i,this.$parent.zoomInD3(i,o,s)}}},Si=t=>(xe("data-v-2dc5e4b7"),t=t(),we(),t),Ci={id:"controlsWrapper"},Ei=Si(()=>E("div",{id:"panJoystick"},null,-1)),Mi=[Ei];function Ii(t,e,n,i,r,o){return q(),G("div",Ci,Mi)}const Ua=ve(zi,[["render",Ii],["__scopeId","data-v-2dc5e4b7"]]);function Ja(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}var Ni={value:()=>{}};function ke(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new At(n)}function At(t){this._=t}function Ai(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}At.prototype=ke.prototype={constructor:At,on:function(t,e){var n=this._,i=Ai(t+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=Oi(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=Le(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Le(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new At(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function Oi(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Le(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Ni,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var le="http://www.w3.org/1999/xhtml";const Re={svg:"http://www.w3.org/2000/svg",xhtml:le,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ut(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Re.hasOwnProperty(e)?{space:Re[e],local:t}:t}function Pi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===le&&e.documentElement.namespaceURI===le?e.createElement(t):e.createElementNS(n,t)}}function Di(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Te(t){var e=Ut(t);return(e.local?Di:Pi)(e)}function Xi(){}function ze(t){return t==null?Xi:function(){return this.querySelector(t)}}function Yi(t){typeof t!="function"&&(t=ze(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=new Array(s),c,a,u=0;u<s;++u)(c=o[u])&&(a=t.call(c,c.__data__,u,o))&&("__data__"in c&&(a.__data__=c.__data__),l[u]=a);return new X(i,this._parents)}function Li(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ri(){return[]}function an(t){return t==null?Ri:function(){return this.querySelectorAll(t)}}function Fi(t){return function(){return Li(t.apply(this,arguments))}}function Hi(t){typeof t=="function"?t=Fi(t):t=an(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],l=s.length,c,a=0;a<l;++a)(c=s[a])&&(i.push(t.call(c,c.__data__,a,s)),r.push(c));return new X(i,r)}function ln(t){return function(){return this.matches(t)}}function cn(t){return function(e){return e.matches(t)}}var Bi=Array.prototype.find;function qi(t){return function(){return Bi.call(this.children,t)}}function Vi(){return this.firstElementChild}function Ui(t){return this.select(t==null?Vi:qi(typeof t=="function"?t:cn(t)))}var Ji=Array.prototype.filter;function Zi(){return Array.from(this.children)}function Ki(t){return function(){return Ji.call(this.children,t)}}function Gi(t){return this.selectAll(t==null?Zi:Ki(typeof t=="function"?t:cn(t)))}function Wi(t){typeof t!="function"&&(t=ln(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=[],c,a=0;a<s;++a)(c=o[a])&&t.call(c,c.__data__,a,o)&&l.push(c);return new X(i,this._parents)}function un(t){return new Array(t.length)}function Qi(){return new X(this._enter||this._groups.map(un),this._parents)}function Lt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Lt.prototype={constructor:Lt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ji(t){return function(){return t}}function tr(t,e,n,i,r,o){for(var s=0,l,c=e.length,a=o.length;s<a;++s)(l=e[s])?(l.__data__=o[s],i[s]=l):n[s]=new Lt(t,o[s]);for(;s<c;++s)(l=e[s])&&(r[s]=l)}function er(t,e,n,i,r,o,s){var l,c,a=new Map,u=e.length,d=o.length,f=new Array(u),m;for(l=0;l<u;++l)(c=e[l])&&(f[l]=m=s.call(c,c.__data__,l,e)+"",a.has(m)?r[l]=c:a.set(m,c));for(l=0;l<d;++l)m=s.call(t,o[l],l,o)+"",(c=a.get(m))?(i[l]=c,c.__data__=o[l],a.delete(m)):n[l]=new Lt(t,o[l]);for(l=0;l<u;++l)(c=e[l])&&a.get(f[l])===c&&(r[l]=c)}function nr(t){return t.__data__}function ir(t,e){if(!arguments.length)return Array.from(this,nr);var n=e?er:tr,i=this._parents,r=this._groups;typeof t!="function"&&(t=ji(t));for(var o=r.length,s=new Array(o),l=new Array(o),c=new Array(o),a=0;a<o;++a){var u=i[a],d=r[a],f=d.length,m=rr(t.call(u,u&&u.__data__,a,i)),v=m.length,x=l[a]=new Array(v),T=s[a]=new Array(v),g=c[a]=new Array(f);n(u,d,x,T,g,m,e);for(var b=0,S=0,C,P;b<v;++b)if(C=x[b]){for(b>=S&&(S=b+1);!(P=T[S])&&++S<v;);C._next=P||null}}return s=new X(s,i),s._enter=l,s._exit=c,s}function rr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function or(){return new X(this._exit||this._groups.map(un),this._parents)}function sr(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function ar(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),l=new Array(r),c=0;c<s;++c)for(var a=n[c],u=i[c],d=a.length,f=l[c]=new Array(d),m,v=0;v<d;++v)(m=a[v]||u[v])&&(f[v]=m);for(;c<r;++c)l[c]=n[c];return new X(l,this._parents)}function lr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function cr(t){t||(t=ur);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],l=s.length,c=r[o]=new Array(l),a,u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(e)}return new X(r,this._parents).order()}function ur(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function hr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function fr(){return Array.from(this)}function dr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function pr(){let t=0;for(const e of this)++t;return t}function mr(){return!this.node()}function gr(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,l;o<s;++o)(l=r[o])&&t.call(l,l.__data__,o,r);return this}function yr(t){return function(){this.removeAttribute(t)}}function _r(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vr(t,e){return function(){this.setAttribute(t,e)}}function xr(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function wr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function br(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function $r(t,e){var n=Ut(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?_r:yr:typeof e=="function"?n.local?br:wr:n.local?xr:vr)(n,e))}function hn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function kr(t){return function(){this.style.removeProperty(t)}}function Tr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function zr(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Sr(t,e,n){return arguments.length>1?this.each((e==null?kr:typeof e=="function"?zr:Tr)(t,e,n??"")):ut(this.node(),t)}function ut(t,e){return t.style.getPropertyValue(e)||hn(t).getComputedStyle(t,null).getPropertyValue(e)}function Cr(t){return function(){delete this[t]}}function Er(t,e){return function(){this[t]=e}}function Mr(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ir(t,e){return arguments.length>1?this.each((e==null?Cr:typeof e=="function"?Mr:Er)(t,e)):this.node()[t]}function fn(t){return t.trim().split(/^|\s+/)}function Se(t){return t.classList||new dn(t)}function dn(t){this._node=t,this._names=fn(t.getAttribute("class")||"")}dn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function pn(t,e){for(var n=Se(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function mn(t,e){for(var n=Se(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Nr(t){return function(){pn(this,t)}}function Ar(t){return function(){mn(this,t)}}function Or(t,e){return function(){(e.apply(this,arguments)?pn:mn)(this,t)}}function Pr(t,e){var n=fn(t+"");if(arguments.length<2){for(var i=Se(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Or:e?Nr:Ar)(n,e))}function Dr(){this.textContent=""}function Xr(t){return function(){this.textContent=t}}function Yr(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Lr(t){return arguments.length?this.each(t==null?Dr:(typeof t=="function"?Yr:Xr)(t)):this.node().textContent}function Rr(){this.innerHTML=""}function Fr(t){return function(){this.innerHTML=t}}function Hr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Br(t){return arguments.length?this.each(t==null?Rr:(typeof t=="function"?Hr:Fr)(t)):this.node().innerHTML}function qr(){this.nextSibling&&this.parentNode.appendChild(this)}function Vr(){return this.each(qr)}function Ur(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Jr(){return this.each(Ur)}function Zr(t){var e=typeof t=="function"?t:Te(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Kr(){return null}function Gr(t,e){var n=typeof t=="function"?t:Te(t),i=e==null?Kr:typeof e=="function"?e:ze(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Wr(){var t=this.parentNode;t&&t.removeChild(this)}function Qr(){return this.each(Wr)}function jr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function to(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function eo(t){return this.select(t?to:jr)}function no(t){return arguments.length?this.property("__data__",t):this.node().__data__}function io(t){return function(e){t.call(this,e,this.__data__)}}function ro(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function oo(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function so(t,e,n){return function(){var i=this.__on,r,o=io(e);if(i){for(var s=0,l=i.length;s<l;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ao(t,e,n){var i=ro(t+""),r,o=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,a=l.length,u;c<a;++c)for(r=0,u=l[c];r<o;++r)if((s=i[r]).type===u.type&&s.name===u.name)return u.value}return}for(l=e?so:oo,r=0;r<o;++r)this.each(l(i[r],e,n));return this}function gn(t,e,n){var i=hn(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function lo(t,e){return function(){return gn(this,t,e)}}function co(t,e){return function(){return gn(this,t,e.apply(this,arguments))}}function uo(t,e){return this.each((typeof e=="function"?co:lo)(t,e))}function*ho(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var yn=[null];function X(t,e){this._groups=t,this._parents=e}function $t(){return new X([[document.documentElement]],yn)}function fo(){return this}X.prototype=$t.prototype={constructor:X,select:Yi,selectAll:Hi,selectChild:Ui,selectChildren:Gi,filter:Wi,data:ir,enter:Qi,exit:or,join:sr,merge:ar,selection:fo,order:lr,sort:cr,call:hr,nodes:fr,node:dr,size:pr,empty:mr,each:gr,attr:$r,style:Sr,property:Ir,classed:Pr,text:Lr,html:Br,raise:Vr,lower:Jr,append:Zr,insert:Gr,remove:Qr,clone:eo,datum:no,on:ao,dispatch:uo,[Symbol.iterator]:ho};function nt(t){return typeof t=="string"?new X([[document.querySelector(t)]],[document.documentElement]):new X([[t]],yn)}function Za(t){return nt(Te(t).call(document.documentElement))}function po(t){let e;for(;e=t.sourceEvent;)t=e;return t}function it(t,e){if(t=po(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const ce={capture:!0,passive:!1};function ue(t){t.preventDefault(),t.stopImmediatePropagation()}function mo(t){var e=t.document.documentElement,n=nt(t).on("dragstart.drag",ue,ce);"onselectstart"in e?n.on("selectstart.drag",ue,ce):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function go(t,e){var n=t.document.documentElement,i=nt(t).on("dragstart.drag",null);e&&(i.on("click.drag",ue,ce),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ce(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _n(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function kt(){}var _t=.7,Rt=1/_t,ct="\\s*([+-]?\\d+)\\s*",vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",V="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yo=/^#([0-9a-f]{3,8})$/,_o=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),vo=new RegExp(`^rgb\\(${V},${V},${V}\\)$`),xo=new RegExp(`^rgba\\(${ct},${ct},${ct},${vt}\\)$`),wo=new RegExp(`^rgba\\(${V},${V},${V},${vt}\\)$`),bo=new RegExp(`^hsl\\(${vt},${V},${V}\\)$`),$o=new RegExp(`^hsla\\(${vt},${V},${V},${vt}\\)$`),Fe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ce(kt,xt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:He,formatHex:He,formatHex8:ko,formatHsl:To,formatRgb:Be,toString:Be});function He(){return this.rgb().formatHex()}function ko(){return this.rgb().formatHex8()}function To(){return vn(this).formatHsl()}function Be(){return this.rgb().formatRgb()}function xt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=yo.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?qe(e):n===3?new D(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ct(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ct(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_o.exec(t))?new D(e[1],e[2],e[3],1):(e=vo.exec(t))?new D(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xo.exec(t))?Ct(e[1],e[2],e[3],e[4]):(e=wo.exec(t))?Ct(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bo.exec(t))?Je(e[1],e[2]/100,e[3]/100,1):(e=$o.exec(t))?Je(e[1],e[2]/100,e[3]/100,e[4]):Fe.hasOwnProperty(t)?qe(Fe[t]):t==="transparent"?new D(NaN,NaN,NaN,0):null}function qe(t){return new D(t>>16&255,t>>8&255,t&255,1)}function Ct(t,e,n,i){return i<=0&&(t=e=n=NaN),new D(t,e,n,i)}function zo(t){return t instanceof kt||(t=xt(t)),t?(t=t.rgb(),new D(t.r,t.g,t.b,t.opacity)):new D}function he(t,e,n,i){return arguments.length===1?zo(t):new D(t,e,n,i??1)}function D(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Ce(D,he,_n(kt,{brighter(t){return t=t==null?Rt:Math.pow(Rt,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_t:Math.pow(_t,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new D(st(this.r),st(this.g),st(this.b),Ft(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ve,formatHex:Ve,formatHex8:So,formatRgb:Ue,toString:Ue}));function Ve(){return`#${ot(this.r)}${ot(this.g)}${ot(this.b)}`}function So(){return`#${ot(this.r)}${ot(this.g)}${ot(this.b)}${ot((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ue(){const t=Ft(this.opacity);return`${t===1?"rgb(":"rgba("}${st(this.r)}, ${st(this.g)}, ${st(this.b)}${t===1?")":`, ${t})`}`}function Ft(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function st(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ot(t){return t=st(t),(t<16?"0":"")+t.toString(16)}function Je(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new F(t,e,n,i)}function vn(t){if(t instanceof F)return new F(t.h,t.s,t.l,t.opacity);if(t instanceof kt||(t=xt(t)),!t)return new F;if(t instanceof F)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,l=o-r,c=(o+r)/2;return l?(e===o?s=(n-i)/l+(n<i)*6:n===o?s=(i-e)/l+2:s=(e-n)/l+4,l/=c<.5?o+r:2-o-r,s*=60):l=c>0&&c<1?0:s,new F(s,l,c,t.opacity)}function Co(t,e,n,i){return arguments.length===1?vn(t):new F(t,e,n,i??1)}function F(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ce(F,Co,_n(kt,{brighter(t){return t=t==null?Rt:Math.pow(Rt,t),new F(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_t:Math.pow(_t,t),new F(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new D(ee(t>=240?t-240:t+120,r,i),ee(t,r,i),ee(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new F(Ze(this.h),Et(this.s),Et(this.l),Ft(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ft(this.opacity);return`${t===1?"hsl(":"hsla("}${Ze(this.h)}, ${Et(this.s)*100}%, ${Et(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ze(t){return t=(t||0)%360,t<0?t+360:t}function Et(t){return Math.max(0,Math.min(1,t||0))}function ee(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const xn=t=>()=>t;function Eo(t,e){return function(n){return t+n*e}}function Mo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Io(t){return(t=+t)==1?wn:function(e,n){return n-e?Mo(e,n,t):xn(isNaN(e)?n:e)}}function wn(t,e){var n=e-t;return n?Eo(t,n):xn(isNaN(t)?e:t)}const Ke=function t(e){var n=Io(e);function i(r,o){var s=n((r=he(r)).r,(o=he(o)).r),l=n(r.g,o.g),c=n(r.b,o.b),a=wn(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=l(u),r.b=c(u),r.opacity=a(u),r+""}}return i.gamma=t,i}(1);function et(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ne=new RegExp(fe.source,"g");function No(t){return function(){return t}}function Ao(t){return function(e){return t(e)+""}}function Oo(t,e){var n=fe.lastIndex=ne.lastIndex=0,i,r,o,s=-1,l=[],c=[];for(t=t+"",e=e+"";(i=fe.exec(t))&&(r=ne.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(i=i[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,c.push({i:s,x:et(i,r)})),n=ne.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?c[0]?Ao(c[0].x):No(e):(e=c.length,function(a){for(var u=0,d;u<e;++u)l[(d=c[u]).i]=d.x(a);return l.join("")})}var Ge=180/Math.PI,de={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bn(t,e,n,i,r,o){var s,l,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,c/=l),t*i<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Ge,skewX:Math.atan(c)*Ge,scaleX:s,scaleY:l}}var Mt;function Po(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?de:bn(e.a,e.b,e.c,e.d,e.e,e.f)}function Do(t){return t==null||(Mt||(Mt=document.createElementNS("http://www.w3.org/2000/svg","g")),Mt.setAttribute("transform",t),!(t=Mt.transform.baseVal.consolidate()))?de:(t=t.matrix,bn(t.a,t.b,t.c,t.d,t.e,t.f))}function $n(t,e,n,i){function r(a){return a.length?a.pop()+" ":""}function o(a,u,d,f,m,v){if(a!==d||u!==f){var x=m.push("translate(",null,e,null,n);v.push({i:x-4,x:et(a,d)},{i:x-2,x:et(u,f)})}else(d||f)&&m.push("translate("+d+e+f+n)}function s(a,u,d,f){a!==u?(a-u>180?u+=360:u-a>180&&(a+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:et(a,u)})):u&&d.push(r(d)+"rotate("+u+i)}function l(a,u,d,f){a!==u?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:et(a,u)}):u&&d.push(r(d)+"skewX("+u+i)}function c(a,u,d,f,m,v){if(a!==d||u!==f){var x=m.push(r(m)+"scale(",null,",",null,")");v.push({i:x-4,x:et(a,d)},{i:x-2,x:et(u,f)})}else(d!==1||f!==1)&&m.push(r(m)+"scale("+d+","+f+")")}return function(a,u){var d=[],f=[];return a=t(a),u=t(u),o(a.translateX,a.translateY,u.translateX,u.translateY,d,f),s(a.rotate,u.rotate,d,f),l(a.skewX,u.skewX,d,f),c(a.scaleX,a.scaleY,u.scaleX,u.scaleY,d,f),a=u=null,function(m){for(var v=-1,x=f.length,T;++v<x;)d[(T=f[v]).i]=T.x(m);return d.join("")}}}var Xo=$n(Po,"px, ","px)","deg)"),Yo=$n(Do,", ",")",")"),Lo=1e-12;function We(t){return((t=Math.exp(t))+1/t)/2}function Ro(t){return((t=Math.exp(t))-1/t)/2}function Fo(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ho=function t(e,n,i){function r(o,s){var l=o[0],c=o[1],a=o[2],u=s[0],d=s[1],f=s[2],m=u-l,v=d-c,x=m*m+v*v,T,g;if(x<Lo)g=Math.log(f/a)/e,T=function(tt){return[l+tt*m,c+tt*v,a*Math.exp(e*tt*g)]};else{var b=Math.sqrt(x),S=(f*f-a*a+i*x)/(2*a*n*b),C=(f*f-a*a-i*x)/(2*f*n*b),P=Math.log(Math.sqrt(S*S+1)-S),Y=Math.log(Math.sqrt(C*C+1)-C);g=(Y-P)/e,T=function(tt){var Tt=tt*g,zt=We(P),St=a/(n*b)*(zt*Fo(e*Tt+P)-Ro(P));return[l+St*m,c+St*v,a*zt/We(e*Tt+P)]}}return T.duration=g*1e3*e/Math.SQRT2,T}return r.rho=function(o){var s=Math.max(.001,+o),l=s*s,c=l*l;return t(s,l,c)},r}(Math.SQRT2,2,4);var ht=0,mt=0,dt=0,kn=1e3,Ht,gt,Bt=0,at=0,Jt=0,wt=typeof performance=="object"&&performance.now?performance:Date,Tn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ee(){return at||(Tn(Bo),at=wt.now()+Jt)}function Bo(){at=0}function qt(){this._call=this._time=this._next=null}qt.prototype=zn.prototype={constructor:qt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ee():+n)+(e==null?0:+e),!this._next&&gt!==this&&(gt?gt._next=this:Ht=this,gt=this),this._call=t,this._time=n,pe()},stop:function(){this._call&&(this._call=null,this._time=1/0,pe())}};function zn(t,e,n){var i=new qt;return i.restart(t,e,n),i}function qo(){Ee(),++ht;for(var t=Ht,e;t;)(e=at-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ht}function Qe(){at=(Bt=wt.now())+Jt,ht=mt=0;try{qo()}finally{ht=0,Uo(),at=0}}function Vo(){var t=wt.now(),e=t-Bt;e>kn&&(Jt-=e,Bt=t)}function Uo(){for(var t,e=Ht,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ht=n);gt=t,pe(i)}function pe(t){if(!ht){mt&&(mt=clearTimeout(mt));var e=t-at;e>24?(t<1/0&&(mt=setTimeout(Qe,t-wt.now()-Jt)),dt&&(dt=clearInterval(dt))):(dt||(Bt=wt.now(),dt=setInterval(Vo,kn)),ht=1,Tn(Qe))}}function je(t,e,n){var i=new qt;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Jo=ke("start","end","cancel","interrupt"),Zo=[],Sn=0,tn=1,me=2,Ot=3,en=4,ge=5,Pt=6;function Zt(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Ko(t,n,{name:e,index:i,group:r,on:Jo,tween:Zo,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Sn})}function Me(t,e){var n=H(t,e);if(n.state>Sn)throw new Error("too late; already scheduled");return n}function U(t,e){var n=H(t,e);if(n.state>Ot)throw new Error("too late; already running");return n}function H(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ko(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=zn(o,0,n.time);function o(a){n.state=tn,n.timer.restart(s,n.delay,n.time),n.delay<=a&&s(a-n.delay)}function s(a){var u,d,f,m;if(n.state!==tn)return c();for(u in i)if(m=i[u],m.name===n.name){if(m.state===Ot)return je(s);m.state===en?(m.state=Pt,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete i[u]):+u<e&&(m.state=Pt,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete i[u])}if(je(function(){n.state===Ot&&(n.state=en,n.timer.restart(l,n.delay,n.time),l(a))}),n.state=me,n.on.call("start",t,t.__data__,n.index,n.group),n.state===me){for(n.state=Ot,r=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(m=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=m);r.length=d+1}}function l(a){for(var u=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(c),n.state=ge,1),d=-1,f=r.length;++d<f;)r[d].call(t,u);n.state===ge&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Pt,n.timer.stop(),delete i[e];for(var a in i)return;delete t.__transition}}function Dt(t,e){var n=t.__transition,i,r,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>me&&i.state<ge,i.state=Pt,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function Go(t){return this.each(function(){Dt(this,t)})}function Wo(t,e){var n,i;return function(){var r=U(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,l=i.length;s<l;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function Qo(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=U(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var l={name:e,value:n},c=0,a=r.length;c<a;++c)if(r[c].name===e){r[c]=l;break}c===a&&r.push(l)}o.tween=r}}function jo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=H(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?Wo:Qo)(n,t,e))}function Ie(t,e,n){var i=t._id;return t.each(function(){var r=U(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return H(r,i).value[e]}}function Cn(t,e){var n;return(typeof e=="number"?et:e instanceof xt?Ke:(n=xt(e))?(e=n,Ke):Oo)(t,e)}function ts(t){return function(){this.removeAttribute(t)}}function es(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ns(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function is(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function rs(t,e,n){var i,r,o;return function(){var s,l=n(this),c;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=l+"",s===c?null:s===i&&c===r?o:(r=c,o=e(i=s,l)))}}function os(t,e,n){var i,r,o;return function(){var s,l=n(this),c;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=l+"",s===c?null:s===i&&c===r?o:(r=c,o=e(i=s,l)))}}function ss(t,e){var n=Ut(t),i=n==="transform"?Yo:Cn;return this.attrTween(t,typeof e=="function"?(n.local?os:rs)(n,i,Ie(this,"attr."+t,e)):e==null?(n.local?es:ts)(n):(n.local?is:ns)(n,i,e))}function as(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ls(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function cs(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&ls(t,o)),n}return r._value=e,r}function us(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&as(t,o)),n}return r._value=e,r}function hs(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Ut(t);return this.tween(n,(i.local?cs:us)(i,e))}function fs(t,e){return function(){Me(this,t).delay=+e.apply(this,arguments)}}function ds(t,e){return e=+e,function(){Me(this,t).delay=e}}function ps(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fs:ds)(e,t)):H(this.node(),e).delay}function ms(t,e){return function(){U(this,t).duration=+e.apply(this,arguments)}}function gs(t,e){return e=+e,function(){U(this,t).duration=e}}function ys(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ms:gs)(e,t)):H(this.node(),e).duration}function _s(t,e){if(typeof e!="function")throw new Error;return function(){U(this,t).ease=e}}function vs(t){var e=this._id;return arguments.length?this.each(_s(e,t)):H(this.node(),e).ease}function xs(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;U(this,t).ease=n}}function ws(t){if(typeof t!="function")throw new Error;return this.each(xs(this._id,t))}function bs(t){typeof t!="function"&&(t=ln(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=[],c,a=0;a<s;++a)(c=o[a])&&t.call(c,c.__data__,a,o)&&l.push(c);return new Q(i,this._parents,this._name,this._id)}function $s(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),l=0;l<o;++l)for(var c=e[l],a=n[l],u=c.length,d=s[l]=new Array(u),f,m=0;m<u;++m)(f=c[m]||a[m])&&(d[m]=f);for(;l<i;++l)s[l]=e[l];return new Q(s,this._parents,this._name,this._id)}function ks(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ts(t,e,n){var i,r,o=ks(e)?Me:U;return function(){var s=o(this,t),l=s.on;l!==i&&(r=(i=l).copy()).on(e,n),s.on=r}}function zs(t,e){var n=this._id;return arguments.length<2?H(this.node(),n).on.on(t):this.each(Ts(n,t,e))}function Ss(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Cs(){return this.on("end.remove",Ss(this._id))}function Es(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ze(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var l=i[s],c=l.length,a=o[s]=new Array(c),u,d,f=0;f<c;++f)(u=l[f])&&(d=t.call(u,u.__data__,f,l))&&("__data__"in u&&(d.__data__=u.__data__),a[f]=d,Zt(a[f],e,n,f,a,H(u,n)));return new Q(o,this._parents,e,n)}function Ms(t){var e=this._name,n=this._id;typeof t!="function"&&(t=an(t));for(var i=this._groups,r=i.length,o=[],s=[],l=0;l<r;++l)for(var c=i[l],a=c.length,u,d=0;d<a;++d)if(u=c[d]){for(var f=t.call(u,u.__data__,d,c),m,v=H(u,n),x=0,T=f.length;x<T;++x)(m=f[x])&&Zt(m,e,n,x,f,v);o.push(f),s.push(u)}return new Q(o,s,e,n)}var Is=$t.prototype.constructor;function Ns(){return new Is(this._groups,this._parents)}function As(t,e){var n,i,r;return function(){var o=ut(this,t),s=(this.style.removeProperty(t),ut(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function En(t){return function(){this.style.removeProperty(t)}}function Os(t,e,n){var i,r=n+"",o;return function(){var s=ut(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function Ps(t,e,n){var i,r,o;return function(){var s=ut(this,t),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(t),ut(this,t))),s===c?null:s===i&&c===r?o:(r=c,o=e(i=s,l))}}function Ds(t,e){var n,i,r,o="style."+e,s="end."+o,l;return function(){var c=U(this,t),a=c.on,u=c.value[o]==null?l||(l=En(e)):void 0;(a!==n||r!==u)&&(i=(n=a).copy()).on(s,r=u),c.on=i}}function Xs(t,e,n){var i=(t+="")=="transform"?Xo:Cn;return e==null?this.styleTween(t,As(t,i)).on("end.style."+t,En(t)):typeof e=="function"?this.styleTween(t,Ps(t,i,Ie(this,"style."+t,e))).each(Ds(this._id,t)):this.styleTween(t,Os(t,i,e),n).on("end.style."+t,null)}function Ys(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Ls(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&Ys(t,s,n)),i}return o._value=e,o}function Rs(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Ls(t,e,n??""))}function Fs(t){return function(){this.textContent=t}}function Hs(t){return function(){var e=t(this);this.textContent=e??""}}function Bs(t){return this.tween("text",typeof t=="function"?Hs(Ie(this,"text",t)):Fs(t==null?"":t+""))}function qs(t){return function(e){this.textContent=t.call(this,e)}}function Vs(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&qs(r)),e}return i._value=t,i}function Us(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Vs(t))}function Js(){for(var t=this._name,e=this._id,n=Mn(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],l=s.length,c,a=0;a<l;++a)if(c=s[a]){var u=H(c,e);Zt(c,t,n,a,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Q(i,this._parents,t,n)}function Zs(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var l={value:s},c={value:function(){--r===0&&o()}};n.each(function(){var a=U(this,i),u=a.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),a.on=e}),r===0&&o()})}var Ks=0;function Q(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Mn(){return++Ks}var K=$t.prototype;Q.prototype={constructor:Q,select:Es,selectAll:Ms,selectChild:K.selectChild,selectChildren:K.selectChildren,filter:bs,merge:$s,selection:Ns,transition:Js,call:K.call,nodes:K.nodes,node:K.node,size:K.size,empty:K.empty,each:K.each,on:zs,attr:ss,attrTween:hs,style:Xs,styleTween:Rs,text:Bs,textTween:Us,remove:Cs,tween:jo,delay:ps,duration:ys,ease:vs,easeVarying:ws,end:Zs,[Symbol.iterator]:K[Symbol.iterator]};function Gs(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ws={time:null,delay:0,duration:250,ease:Gs};function Qs(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function js(t){var e,n;t instanceof Q?(e=t._id,t=t._name):(e=Mn(),(n=Ws).time=Ee(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],l=s.length,c,a=0;a<l;++a)(c=s[a])&&Zt(c,t,e,a,s,n||Qs(c,e));return new Q(i,this._parents,t,e)}$t.prototype.interrupt=Go;$t.prototype.transition=js;const ye=Math.PI,_e=2*ye,rt=1e-6,ta=_e-rt;function In(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ea(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return In;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class na{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?In:ea(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,s){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,c=i-e,a=r-n,u=s-e,d=l-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>rt)if(!(Math.abs(d*c-a*u)>rt)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let m=i-s,v=r-l,x=c*c+a*a,T=m*m+v*v,g=Math.sqrt(x),b=Math.sqrt(f),S=o*Math.tan((ye-Math.acos((x+f-T)/(2*g*b)))/2),C=S/b,P=S/g;Math.abs(C-1)>rt&&this._append`L${e+C*u},${n+C*d}`,this._append`A${o},${o},0,0,${+(d*m>u*v)},${this._x1=e+P*c},${this._y1=n+P*a}`}}arc(e,n,i,r,o,s){if(e=+e,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),c=i*Math.sin(r),a=e+l,u=n+c,d=1^s,f=s?r-o:o-r;this._x1===null?this._append`M${a},${u}`:(Math.abs(this._x1-a)>rt||Math.abs(this._y1-u)>rt)&&this._append`L${a},${u}`,i&&(f<0&&(f=f%_e+_e),f>ta?this._append`A${i},${i},0,1,${d},${e-l},${n-c}A${i},${i},0,1,${d},${this._x1=a},${this._y1=u}`:f>rt&&this._append`A${i},${i},0,${+(f>=ye)},${d},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function ia(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function ra(){return this.eachAfter(ia)}function oa(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function sa(t,e){for(var n=this,i=[n],r,o,s=-1;n=i.pop();)if(t.call(e,n,++s,this),r=n.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this}function aa(t,e){for(var n=this,i=[n],r=[],o,s,l,c=-1;n=i.pop();)if(r.push(n),o=n.children)for(s=0,l=o.length;s<l;++s)i.push(o[s]);for(;n=r.pop();)t.call(e,n,++c,this);return this}function la(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function ca(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}function ua(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function ha(t){for(var e=this,n=fa(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}function fa(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function da(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function pa(){return Array.from(this)}function ma(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function ga(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*ya(){var t=this,e,n=[t],i,r,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(r=0,o=i.length;r<o;++r)n.push(i[r]);while(n.length)}function Nn(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=xa)):e===void 0&&(e=va);for(var n=new bt(t),i,r=[n],o,s,l,c;i=r.pop();)if((s=e(i.data))&&(c=(s=Array.from(s)).length))for(i.children=s,l=c-1;l>=0;--l)r.push(o=s[l]=new bt(s[l])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(ba)}function _a(){return Nn(this).eachBefore(wa)}function va(t){return t.children}function xa(t){return Array.isArray(t)?t[1]:null}function wa(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function ba(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function bt(t){this.data=t,this.depth=this.height=0,this.parent=null}bt.prototype=Nn.prototype={constructor:bt,count:ra,each:oa,eachAfter:aa,eachBefore:sa,find:la,sum:ca,sort:ua,path:ha,ancestors:da,descendants:pa,leaves:ma,links:ga,copy:_a,[Symbol.iterator]:ya};function $a(t,e){return t.parent===e.parent?1:2}function ie(t){var e=t.children;return e?e[0]:t.t}function re(t){var e=t.children;return e?e[e.length-1]:t.t}function ka(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Ta(t){for(var e=0,n=0,i=t.children,r=i.length,o;--r>=0;)o=i[r],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function za(t,e,n){return t.a.parent===e.parent?t.a:n}function Xt(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Xt.prototype=Object.create(bt.prototype);function Sa(t){for(var e=new Xt(t,0),n,i=[e],r,o,s,l;n=i.pop();)if(o=n._.children)for(n.children=new Array(l=o.length),s=l-1;s>=0;--s)i.push(r=n.children[s]=new Xt(o[s],s)),r.parent=n;return(e.parent=new Xt(null,0)).children=[e],e}function Ka(){var t=$a,e=1,n=1,i=null;function r(a){var u=Sa(a);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(s),i)a.eachBefore(c);else{var d=a,f=a,m=a;a.eachBefore(function(b){b.x<d.x&&(d=b),b.x>f.x&&(f=b),b.depth>m.depth&&(m=b)});var v=d===f?1:t(d,f)/2,x=v-d.x,T=e/(f.x+v+x),g=n/(m.depth||1);a.eachBefore(function(b){b.x=(b.x+x)*T,b.y=b.depth*g})}return a}function o(a){var u=a.children,d=a.parent.children,f=a.i?d[a.i-1]:null;if(u){Ta(a);var m=(u[0].z+u[u.length-1].z)/2;f?(a.z=f.z+t(a._,f._),a.m=a.z-m):a.z=m}else f&&(a.z=f.z+t(a._,f._));a.parent.A=l(a,f,a.parent.A||d[0])}function s(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function l(a,u,d){if(u){for(var f=a,m=a,v=u,x=f.parent.children[0],T=f.m,g=m.m,b=v.m,S=x.m,C;v=re(v),f=ie(f),v&&f;)x=ie(x),m=re(m),m.a=a,C=v.z+b-f.z-T+t(v._,f._),C>0&&(ka(za(v,a,d),a,C),T+=C,g+=C),b+=v.m,T+=f.m,S+=x.m,g+=m.m;v&&!re(m)&&(m.t=v,m.m+=b-g),f&&!ie(x)&&(x.t=f,x.m+=T-S,d=a)}return d}function c(a){a.x*=e,a.y=a.depth*n}return r.separation=function(a){return arguments.length?(t=a,r):t},r.size=function(a){return arguments.length?(i=!1,e=+a[0],n=+a[1],r):i?null:[e,n]},r.nodeSize=function(a){return arguments.length?(i=!0,e=+a[0],n=+a[1],r):i?[e,n]:null},r}function nn(t){return function(){return t}}function Ca(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new na(e)}var Ea=Array.prototype.slice;function Ma(t){return t[0]}function Ia(t){return t[1]}class Na{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Aa(t){return new Na(t,!0)}function Oa(t){return t.source}function Pa(t){return t.target}function Da(t){let e=Oa,n=Pa,i=Ma,r=Ia,o=null,s=null,l=Ca(c);function c(){let a;const u=Ea.call(arguments),d=e.apply(this,u),f=n.apply(this,u);if(o==null&&(s=t(a=l())),s.lineStart(),u[0]=d,s.point(+i.apply(this,u),+r.apply(this,u)),u[0]=f,s.point(+i.apply(this,u),+r.apply(this,u)),s.lineEnd(),a)return s=null,a+""||null}return c.source=function(a){return arguments.length?(e=a,c):e},c.target=function(a){return arguments.length?(n=a,c):n},c.x=function(a){return arguments.length?(i=typeof a=="function"?a:nn(+a),c):i},c.y=function(a){return arguments.length?(r=typeof a=="function"?a:nn(+a),c):r},c.context=function(a){return arguments.length?(a==null?o=s=null:s=t(o=a),c):o},c}function Ga(){return Da(Aa)}const It=t=>()=>t;function Xa(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function W(t,e,n){this.k=t,this.x=e,this.y=n}W.prototype={constructor:W,scale:function(t){return t===1?this:new W(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new W(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var An=new W(1,0,0);W.prototype;function oe(t){t.stopImmediatePropagation()}function pt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ya(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function La(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function rn(){return this.__zoom||An}function Ra(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Fa(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ha(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Wa(){var t=Ya,e=La,n=Ha,i=Ra,r=Fa,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,c=Ho,a=ke("start","zoom","end"),u,d,f,m=500,v=150,x=0,T=10;function g(h){h.property("__zoom",rn).on("wheel.zoom",Tt,{passive:!1}).on("mousedown.zoom",zt).on("dblclick.zoom",St).filter(r).on("touchstart.zoom",On).on("touchmove.zoom",Pn).on("touchend.zoom touchcancel.zoom",Dn).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(h,y,p,_){var w=h.selection?h.selection():h;w.property("__zoom",rn),h!==w?P(h,y,p,_):w.interrupt().each(function(){Y(this,arguments).event(_).start().zoom(null,typeof y=="function"?y.apply(this,arguments):y).end()})},g.scaleBy=function(h,y,p,_){g.scaleTo(h,function(){var w=this.__zoom.k,$=typeof y=="function"?y.apply(this,arguments):y;return w*$},p,_)},g.scaleTo=function(h,y,p,_){g.transform(h,function(){var w=e.apply(this,arguments),$=this.__zoom,k=p==null?C(w):typeof p=="function"?p.apply(this,arguments):p,z=$.invert(k),M=typeof y=="function"?y.apply(this,arguments):y;return n(S(b($,M),k,z),w,s)},p,_)},g.translateBy=function(h,y,p,_){g.transform(h,function(){return n(this.__zoom.translate(typeof y=="function"?y.apply(this,arguments):y,typeof p=="function"?p.apply(this,arguments):p),e.apply(this,arguments),s)},null,_)},g.translateTo=function(h,y,p,_,w){g.transform(h,function(){var $=e.apply(this,arguments),k=this.__zoom,z=_==null?C($):typeof _=="function"?_.apply(this,arguments):_;return n(An.translate(z[0],z[1]).scale(k.k).translate(typeof y=="function"?-y.apply(this,arguments):-y,typeof p=="function"?-p.apply(this,arguments):-p),$,s)},_,w)};function b(h,y){return y=Math.max(o[0],Math.min(o[1],y)),y===h.k?h:new W(y,h.x,h.y)}function S(h,y,p){var _=y[0]-p[0]*h.k,w=y[1]-p[1]*h.k;return _===h.x&&w===h.y?h:new W(h.k,_,w)}function C(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function P(h,y,p,_){h.on("start.zoom",function(){Y(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(_).end()}).tween("zoom",function(){var w=this,$=arguments,k=Y(w,$).event(_),z=e.apply(w,$),M=p==null?C(z):typeof p=="function"?p.apply(w,$):p,B=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),O=w.__zoom,L=typeof y=="function"?y.apply(w,$):y,J=c(O.invert(M).concat(B/O.k),L.invert(M).concat(B/L.k));return function(R){if(R===1)R=L;else{var Z=J(R),Kt=B/Z[2];R=new W(Kt,M[0]-Z[0]*Kt,M[1]-Z[1]*Kt)}k.zoom(null,R)}})}function Y(h,y,p){return!p&&h.__zooming||new tt(h,y)}function tt(h,y){this.that=h,this.args=y,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,y),this.taps=0}tt.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,y){return this.mouse&&h!=="mouse"&&(this.mouse[1]=y.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=y.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=y.invert(this.touch1[0])),this.that.__zoom=y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var y=nt(this.that).datum();a.call(h,this.that,new Xa(h,{sourceEvent:this.sourceEvent,target:g,type:h,transform:this.that.__zoom,dispatch:a}),y)}};function Tt(h,...y){if(!t.apply(this,arguments))return;var p=Y(this,y).event(h),_=this.__zoom,w=Math.max(o[0],Math.min(o[1],_.k*Math.pow(2,i.apply(this,arguments)))),$=it(h);if(p.wheel)(p.mouse[0][0]!==$[0]||p.mouse[0][1]!==$[1])&&(p.mouse[1]=_.invert(p.mouse[0]=$)),clearTimeout(p.wheel);else{if(_.k===w)return;p.mouse=[$,_.invert($)],Dt(this),p.start()}pt(h),p.wheel=setTimeout(k,v),p.zoom("mouse",n(S(b(_,w),p.mouse[0],p.mouse[1]),p.extent,s));function k(){p.wheel=null,p.end()}}function zt(h,...y){if(f||!t.apply(this,arguments))return;var p=h.currentTarget,_=Y(this,y,!0).event(h),w=nt(h.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",B,!0),$=it(h,p),k=h.clientX,z=h.clientY;mo(h.view),oe(h),_.mouse=[$,this.__zoom.invert($)],Dt(this),_.start();function M(O){if(pt(O),!_.moved){var L=O.clientX-k,J=O.clientY-z;_.moved=L*L+J*J>x}_.event(O).zoom("mouse",n(S(_.that.__zoom,_.mouse[0]=it(O,p),_.mouse[1]),_.extent,s))}function B(O){w.on("mousemove.zoom mouseup.zoom",null),go(O.view,_.moved),pt(O),_.event(O).end()}}function St(h,...y){if(t.apply(this,arguments)){var p=this.__zoom,_=it(h.changedTouches?h.changedTouches[0]:h,this),w=p.invert(_),$=p.k*(h.shiftKey?.5:2),k=n(S(b(p,$),_,w),e.apply(this,y),s);pt(h),l>0?nt(this).transition().duration(l).call(P,k,_,h):nt(this).call(g.transform,k,_,h)}}function On(h,...y){if(t.apply(this,arguments)){var p=h.touches,_=p.length,w=Y(this,y,h.changedTouches.length===_).event(h),$,k,z,M;for(oe(h),k=0;k<_;++k)z=p[k],M=it(z,this),M=[M,this.__zoom.invert(M),z.identifier],w.touch0?!w.touch1&&w.touch0[2]!==M[2]&&(w.touch1=M,w.taps=0):(w.touch0=M,$=!0,w.taps=1+!!u);u&&(u=clearTimeout(u)),$&&(w.taps<2&&(d=M[0],u=setTimeout(function(){u=null},m)),Dt(this),w.start())}}function Pn(h,...y){if(this.__zooming){var p=Y(this,y).event(h),_=h.changedTouches,w=_.length,$,k,z,M;for(pt(h),$=0;$<w;++$)k=_[$],z=it(k,this),p.touch0&&p.touch0[2]===k.identifier?p.touch0[0]=z:p.touch1&&p.touch1[2]===k.identifier&&(p.touch1[0]=z);if(k=p.that.__zoom,p.touch1){var B=p.touch0[0],O=p.touch0[1],L=p.touch1[0],J=p.touch1[1],R=(R=L[0]-B[0])*R+(R=L[1]-B[1])*R,Z=(Z=J[0]-O[0])*Z+(Z=J[1]-O[1])*Z;k=b(k,Math.sqrt(R/Z)),z=[(B[0]+L[0])/2,(B[1]+L[1])/2],M=[(O[0]+J[0])/2,(O[1]+J[1])/2]}else if(p.touch0)z=p.touch0[0],M=p.touch0[1];else return;p.zoom("touch",n(S(k,z,M),p.extent,s))}}function Dn(h,...y){if(this.__zooming){var p=Y(this,y).event(h),_=h.changedTouches,w=_.length,$,k;for(oe(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),$=0;$<w;++$)k=_[$],p.touch0&&p.touch0[2]===k.identifier?delete p.touch0:p.touch1&&p.touch1[2]===k.identifier&&delete p.touch1;if(p.touch1&&!p.touch0&&(p.touch0=p.touch1,delete p.touch1),p.touch0)p.touch0[1]=this.__zoom.invert(p.touch0[0]);else if(p.end(),p.taps===2&&(k=it(k,this),Math.hypot(d[0]-k[0],d[1]-k[1])<T)){var z=nt(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return g.wheelDelta=function(h){return arguments.length?(i=typeof h=="function"?h:It(+h),g):i},g.filter=function(h){return arguments.length?(t=typeof h=="function"?h:It(!!h),g):t},g.touchable=function(h){return arguments.length?(r=typeof h=="function"?h:It(!!h),g):r},g.extent=function(h){return arguments.length?(e=typeof h=="function"?h:It([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),g):e},g.scaleExtent=function(h){return arguments.length?(o[0]=+h[0],o[1]=+h[1],g):[o[0],o[1]]},g.translateExtent=function(h){return arguments.length?(s[0][0]=+h[0][0],s[1][0]=+h[1][0],s[0][1]=+h[0][1],s[1][1]=+h[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(h){return arguments.length?(n=h,g):n},g.duration=function(h){return arguments.length?(l=+h,g):l},g.interpolate=function(h){return arguments.length?(c=h,g):c},g.on=function(){var h=a.on.apply(a,arguments);return h===a?g:h},g.clickDistance=function(h){return arguments.length?(x=(h=+h)*h,g):Math.sqrt(x)},g.tapDistance=function(h){return arguments.length?(T=+h,g):T},g}export{Ua as J,qa as S,Va as Z,Ja as a,Za as c,Nn as h,An as i,Ga as l,nt as s,Ka as t,Wa as z};
