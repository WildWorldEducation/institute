import{_ as S,g as x,r as w,o as i,c as n,d as e,F as f,y as $,l as c,t as a,z as p,b as d,i as b,j as k,e as m,m as U,T as g}from"./main-8afc4a79.js";import{u as D,a as I,b as A}from"./EssayQuestionsStore-f3283af4.js";const W={props:["userId"],setup(){const l=x(),t=D(),u=I(),h=A();return{skillsStore:l,resourcesStore:t,mcQuestionsStore:u,essayQuestionsStore:h}},data(){return{contentFlags:[],rows:[],currentChooseSkill:"",showActionWarnModal:!1,showSkillWarnModal:!1}},components:{},async created(){},async mounted(){await this.getContentFlagLogs(),this.contentFlags.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),r={date:u.toLocaleTimeString()+` (${h})`,action:l.action,question:t.question,questionName:t.question_name,skillName:t.name,skillUrl:t.skill_url,id:l.id,skill_deleted:t.skill_deleted,is_deleted:l.is_deleted};switch(l.flag_type){case"mc_question":r.type="mc_question",r.questionId=t.question_id,r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"resource":r.type="resource",r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"skill":r.type="skill",r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"essay_question":r.type="essay_question",r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"image_question":r.type="image_question",r.questionId=t.question_id,r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;default:r.type="delete";break}this.rows.push(r)})},methods:{async getContentFlagLogs(){const l=await fetch(`/user-actions/${this.userId}/flag`);this.contentFlags=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}},handleNoneLinkClick(l,t){l==="delete"?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)}}},j={key:0,class:"container-md main-container"},L={class:"d-flex flex-column gap-3"},Q={key:0},T={key:0},q=["onClick"],O={key:3,class:"text-danger"},B={key:1},R=["onClick"],E={key:2,class:"text-danger"},K={key:2},z=["onClick"],H={key:2,class:"text-danger"},J={key:3},V=["onClick"],P={key:2,class:"text-danger"},G={key:4},X=["onClick"],Y={key:2,class:"text-danger"},Z={key:5},F={key:0,class:"text-danger"},ss={key:1,class:"shake"},es={key:2},ts={id:"myModal",class:"modal"},os={class:"modal-content skill-modal"},ls={class:"mb-4"},is={class:"modal-label"},ns={class:"skill-modal-text"},as={class:"d-flex justify-content-center"},rs=e("div",null,"OK",-1),cs=[rs],ds={key:3},us={id:"myModal",class:"modal"},_s={class:"modal-content skill-modal"},hs={class:"mb-4"},ks={class:"modal-label"},ms={class:"skill-modal-text"},ps={class:"d-flex justify-content-center"},ws=e("div",null,"OK",-1),fs=[ws],vs={key:4},ys={id:"myModal",class:"modal"},bs={class:"modal-content"},Ss=e("div",{class:"d-flex gap-4 justify-content-center mb-4"},[e("div",{class:"modal-label"},"this flag is deleted !!")],-1),gs={class:"d-flex justify-content-center"},$s=e("div",null,"OK",-1),xs=[$s];function Cs(l,t,u,h,o,r){const _=w("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",j,[e("div",L,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.date)+" ",1),s.type==="skill"?(i(),n("span",Q,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),s.action=="delete"?(i(),n("span",T," flag with id: "+a(s.id),1)):d("",!0),c(" flag on skill: "),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:1,class:"skill-link",onClick:v=>r.handleNoneLinkClick(s.action,s.skillName)},a(s.skillName),9,q)):(i(),b(_,{key:2,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"])),s.is_deleted?(i(),n("span",O,"[Flag deleted]")):d("",!0)])):d("",!0),s.type==="resource"?(i(),n("span",B,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),c(" flag on resource of skill: "),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>r.handleNoneLinkClick(s.action,s.skillName)},a(s.skillName),9,R)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"])),s.is_deleted?(i(),n("span",E,"[Flag deleted]")):d("",!0)])):d("",!0),s.type==="mc_question"?(i(),n("span",K,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),c(" flag on mc_question "+a('"'+s.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${s.skillId}/question-bank`},{default:k(()=>[c(a(s.question),1)]),_:2},1032,["to"]),c(" on skill: "),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>r.handleNoneLinkClick(s.action,s.skillName)},a(s.skillName),9,z)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"])),s.is_deleted?(i(),n("span",H,"[Flag deleted]")):d("",!0)])):d("",!0),s.type==="essay_question"?(i(),n("span",J,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),c(" flag on essay question "+a('"'+s.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${s.skillId}/question-bank`},{default:k(()=>[c(a(s.question),1)]),_:2},1032,["to"]),c(" on skill: "),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>r.handleNoneLinkClick(s.action,s.skillName)},a(s.skillName),9,V)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"])),s.is_deleted?(i(),n("span",P,"[Flag deleted]")):d("",!0)])):d("",!0),s.type==="image_question"?(i(),n("span",G,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),c(" flag on image question "+a('"'+s.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${s.skillId}/question-bank`},{default:k(()=>[c(a(s.question),1)]),_:2},1032,["to"]),c(" on skill: "),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>r.handleNoneLinkClick(s.action,s.skillName)},a(s.skillName),9,X)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"])),s.is_deleted?(i(),n("span",Y,"[Flag deleted]")):d("",!0)])):d("",!0),s.type==="delete"?(i(),n("span",Z,[e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),c(" flag with id "+a(s.id)+" ",1),s.is_deleted?(i(),n("span",F,"[Flag deleted]")):d("",!0)])):d("",!0)]))),256))])])):(i(),n("div",ss,"The user has no action on flags")),o.showSkillWarnModal?(i(),n("div",es,[e("div",ts,[e("div",os,[e("div",ls,[e("div",is,[c(" Skill "),e("span",ns,a(o.currentChooseSkill),1),c(" is deleted !! ")])]),e("div",as,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=s=>o.showSkillWarnModal=!1)},cs)])])])])):d("",!0),o.showSkillWarnModal?(i(),n("div",ds,[e("div",us,[e("div",_s,[e("div",hs,[e("div",ks,[c(" Skill "),e("span",ms,a(o.currentChooseSkill),1),c(" is deleted !! ")])]),e("div",ps,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=s=>o.showSkillWarnModal=!1)},fs)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",vs,[e("div",ys,[e("div",bs,[Ss,e("div",gs,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[2]||(t[2]=s=>o.showActionWarnModal=!1)},xs)])])])])):d("",!0)],64)}const Ms=S(W,[["render",Cs]]),Ns={props:["userId"],data(){return{resourcesData:[],rows:[],showWarnModal:!1,currentChooseSkill:"",showActionWarnModal:!1,showSkillWarnModal:!1}},components:{},async created(){await this.getResourceLogs(),this.resourcesData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,skillDeleted:t.skill_deleted,skillUrl:t.skill_url,resourceDeleted:t.resource_deleted})})},methods:{async getResourceLogs(){const l=await fetch(`/user-actions/${this.userId}/resource`);this.resourcesData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}},handleNoneLinkClick(l,t,u){l==="delete"?this.showActionWarnModal=!0:u?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)}}},Us={key:0,class:"container-md main-container"},Ds={class:"d-flex flex-column"},Is=["onClick"],As={key:1,class:"shake"},Ws={key:2},js={id:"myModal",class:"modal"},Ls={class:"modal-content skill-modal"},Qs={class:"modal-label"},Ts={class:"skill-modal-text"},qs={class:"d-flex justify-content-center"},Os=e("div",null,"OK",-1),Bs=[Os],Rs={key:3},Es={id:"myModal",class:"modal"},Ks={class:"modal-content"},zs=e("div",{class:"d-flex gap-4 justify-content-center mb-4"},[e("div",{class:"modal-label"},"Resource is deleted !!")],-1),Hs={class:"d-flex justify-content-center"},Js=e("div",null,"OK",-1),Vs=[Js];function Ps(l,t,u,h,o,r){const _=w("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",Us,[e("div",Ds,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.time)+" ("+a(s.date)+") - ",1),e("span",{class:p(r.actionColor(s.action))},a(s.action),3),c("Â  "),e("span",null,[m(_,{class:"skill-link",target:"_blank",to:"/users/"+u.userId+"/activity-report/source/"+s.id},{default:k(()=>[c("source")]),_:2},1032,["to"]),c(" in forum of skill: ")]),s.action==="delete"||s.skillDeleted===1||s.resourceDeleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>r.handleNoneLinkClick(s.action,s.skillName,s.resourceDeleted)},a(s.skillName),9,Is)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",As,"The user has no action on resource")),o.showSkillWarnModal?(i(),n("div",Ws,[e("div",js,[e("div",Ls,[e("div",Qs,[c(" Skill "),e("span",Ts,a(o.currentChooseSkill),1),c(" is deleted !! ")]),e("div",qs,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=s=>o.showSkillWarnModal=!1)},Bs)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",Rs,[e("div",Es,[e("div",Ks,[zs,e("div",Hs,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=s=>o.showActionWarnModal=!1)},Vs)])])])])):d("",!0)],64)}const Gs=S(Ns,[["render",Ps]]),Xs={props:["userId"],data(){return{questionsData:[],rows:[],showSkillWarnModal:!1,showActionWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getMcQuestionsLog(),this.questionsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({question_name:t.question_name,skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,studentName:t.student_name,studentId:t.student_id,type:l.content_type,skillDeleted:t.skill_deleted,skillUrl:t.skill_url,questionDeleted:t.question_deleted})})},methods:{async getMcQuestionsLog(){const l=await fetch(`/user-actions/${this.userId}/question`);this.questionsData=await l.json(),console.log("QUESTION ACTION: "),console.log(this.questionsData)},handleNoneLinkClick(l,t,u){l==="delete"||u?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";case"bulk-create":return"bulk-create-action";case"submit_update_for_review":return"submit_update_for_review";case"approve":return"approve-action";case"edit_and_approve":return"edit-and-approve-action";default:return"delete-action"}}}},Ys={key:0,class:"container-md main-container"},Zs={class:"d-flex flex-column"},Fs={key:0},se={key:1},ee={key:2},te=["onClick"],oe={key:1,class:"shake"},le={key:2},ie={id:"myModal",class:"modal"},ne={class:"modal-content skill-modal"},ae={class:"mb-4"},re={class:"modal-label"},ce={class:"skill-modal-text"},de={class:"d-flex justify-content-center"},ue=e("div",null,"OK",-1),_e=[ue],he={key:3},ke={id:"myModal",class:"modal"},me={class:"modal-content"},pe=e("div",{class:"d-flex gap-4 justify-content-center mb-4"},[e("div",{class:"modal-label"},"Question is deleted !!")],-1),we={class:"d-flex justify-content-center"},fe=e("div",null,"OK",-1),ve=[fe];function ye(l,t,u,h,o,r){const _=w("router-link");return i(),n(f,null,[o.rows.length>0?(i(),n("div",Ys,[e("div",Zs,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.time)+" ("+a(s.date)+") ",1),e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action.replace(/_/g," ")),3),s.type==="mc_question"?(i(),n("span",Fs,a(' "'+s.question_name+'"')+" in question bank of skill: ",1)):d("",!0),s.type==="essay_question"?(i(),n("span",se," essay question "+a(' "'+s.question_name+'"')+" in question bank of skill: ",1)):d("",!0),s.type==="image_question"?(i(),n("span",ee," image question "+a(' "'+s.question_name+'"')+" in question bank of skill: ",1)):d("",!0),s.action==="delete"||s.skillDeleted===1||s.questionDeleted===1?(i(),n("span",{key:3,class:"skill-link",onClick:v=>r.handleNoneLinkClick(s.action,s.skillName,s.questionDeleted)},a(s.skillName),9,te)):(i(),b(_,{key:4,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",oe," The user has no action on multiple-choice questions ")),o.showSkillWarnModal?(i(),n("div",le,[e("div",ie,[e("div",ne,[e("div",ae,[e("div",re,[c(" Skill "),e("span",ce,a(o.currentChooseSkill),1),c(" is deleted !! ")])]),e("div",de,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=s=>o.showSkillWarnModal=!1)},_e)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",he,[e("div",ke,[e("div",me,[pe,e("div",we,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=s=>o.showActionWarnModal=!1)},ve)])])])])):d("",!0)],64)}const be=S(Xs,[["render",ye]]),Se={props:["userId"],data(){return{skillsData:[],rows:[],showWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getSkillLogs(),this.skillsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,skillUrl:t.skill_url,is_deleted:t.is_deleted})})},methods:{async getSkillLogs(){const l=await fetch(`/user-actions/${this.userId}/skill`);this.skillsData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},ge={key:0,class:"container-md main-container"},$e={class:"d-flex flex-column"},xe=e("span",null," skill: ",-1),Ce=["onClick"],Me={key:1,class:"shake"},Ne={key:2},Ue={id:"myModal",class:"modal"},De={class:"modal-content skill-modal"},Ie={class:"modal-label"},Ae={class:"skill-modal-text"},We={class:"d-flex justify-content-center"},je=e("div",null,"OK",-1),Le=[je];function Qe(l,t,u,h,o,r){const _=w("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",ge,[e("div",$e,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.time)+" ("+a(s.date)+") - ",1),e("span",{class:p(r.actionColor(s.action))},a(s.action),3),xe,s.action==="delete"||s.is_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>{o.showWarnModal=!0,o.currentChooseSkill=s.skillName}},a(s.skillName),9,Ce)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",Me,"The user has no recorded actions on skills")),o.showWarnModal?(i(),n("div",Ne,[e("div",Ue,[e("div",De,[e("div",Ie,[c(" Skill "),e("span",Ae,a(o.currentChooseSkill),1),c(" is deleted !! ")]),e("div",We,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=s=>o.showWarnModal=!1)},Le)])])])])):d("",!0)],64)}const Te=S(Se,[["render",Qe]]),qe={props:["userId","deleteMcQuestion"],data(){return{questionsData:[],rows:[],showWarnModal:!1}},components:{},async created(){await this.getMcQuestionsLog(),this.questionsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,skillUrl:t.skill_url,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,studentName:t.student_name,studentId:t.student_id,skill_deleted:t.skill_deleted})})},methods:{async getMcQuestionsLog(){const l=await fetch(`/user-actions/${this.userId}/student_mc_question`);this.questionsData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},Oe={key:0,class:"container-md main-container"},Be={class:"d-flex flex-column"},Re={key:0},Ee={key:1},Ke={key:2},ze={key:1,class:"shake"},He={key:2},Je={id:"myModal",class:"modal"},Ve={class:"modal-content"},Pe=e("div",{class:"d-flex gap-4 justify-content-center mb-4"},[e("div",{class:"modal-label"},"This skill is deleted !!")],-1),Ge={class:"d-flex justify-content-center"},Xe=e("div",null,"OK",-1),Ye=[Xe];function Ze(l,t,u,h,o,r){const _=w("router-link");return i(),n(f,null,[o.rows.length>0?(i(),n("div",Oe,[e("div",Be,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.time)+" ("+a(s.date)+") ",1),e("span",{class:p(r.actionColor(s.action))}," - "+a(s.action),3),s.action==="delete"?(i(),n("span",Re," student mc_question with id "+a(s.id),1)):s.action==="create"?(i(),n("span",Ee," student mc_question for skill: ")):(i(),n("span",Ke,[c(" mc question of student "),m(_,{class:"user-link",target:"_blank",to:"/users"},{default:k(()=>[c(a(s.studentName),1)]),_:2},1024),c(" on skill: ")])),s.action==="delete"||s.skill_deleted===1?(i(),n("span",{key:3,class:"skill-link",onClick:t[0]||(t[0]=v=>o.showWarnModal=!0)},a(s.skillName),1)):(i(),b(_,{key:4,class:"skill-link",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",ze," The user has no recorded actions on multiple-choice questions ")),o.showWarnModal?(i(),n("div",He,[e("div",Je,[e("div",Ve,[Pe,e("div",Ge,[e("button",{type:"button",class:"btn green-btn w-25",onClick:t[1]||(t[1]=s=>o.showWarnModal=!1)},Ye)])])])])):d("",!0)],64)}const Fe=S(qe,[["render",Ze]]);const st={props:["userId"],setup(){return{skillsStore:x()}},data(){return{skillsData:[],rows:[],showWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getSubmittedSkillLogs();const l=[];this.skillsData.forEach(t=>{t.action==="approve"?l.push(this.getApproveSkillData(t)):l.push(this.getStillAwaitingData(t))}),Promise.all(l)},methods:{async getSubmittedSkillLogs(){const l=await fetch(`/user-actions/${this.userId}/new-skill`);this.skillsData=await l.json()},async getApproveSkillData(l){const t=new Date(l.create_date),u=t.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=t.toLocaleTimeString(),o=await this.skillsStore.findSkillById(l.content_id);this.rows.push({resourceId:l.content_id,action:l.action,date:u,time:h,id:l.id,skillName:o&&o.name,skillUrl:o.url&&o.url})},async getStillAwaitingData(l){const t=new Date(l.create_date),u=t.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=t.toLocaleTimeString(),r=await(await fetch(`/new-skills-awaiting-approval/show/${l.content_id}`)).json(),_=r.name&&r.name;this.rows.push({resourceId:l.content_id,action:l.action,date:u,time:h,id:l.id,skillName:_})},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},et={key:0,class:"container-md main-container"},tt={class:"d-flex flex-column"},ot={key:0,class:"ms-1"},lt={key:1,class:"shake"},it={key:2},nt={id:"myModal",class:"modal"},at={class:"modal-content skill-modal"},rt=e("div",{class:"modal-label"},"Skill is deleted !!",-1),ct={class:"d-flex justify-content-center"},dt=e("div",null,"OK",-1),ut=[dt];function _t(l,t,u,h,o,r){const _=w("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",et,[e("div",tt,[(i(!0),n(f,null,$(o.rows,s=>(i(),n("div",null,[c(a(s.time)+" ("+a(s.date)+") - ",1),e("span",{class:p(r.actionColor(s.action))},a(s.action),3),s.skillName&&s.action!=="approve"?(i(),n("span",ot," skill: "+a(s.skillName),1)):d("",!0),s.skillName&&s.action==="approve"?(i(),b(_,{key:1,class:"skill-link ms-1",target:"_blank",to:`/skills/${s.skillUrl}`},{default:k(()=>[c(a(s.skillName)+".",1)]),_:2},1032,["to"])):d("",!0),s.skillName?d("",!0):(i(),n("span",{key:2,onClick:t[0]||(t[0]=v=>o.showWarnModal=!0),class:"no-skill-text ms-1"},"skill deleted."))]))),256))])])):(i(),n("div",lt,"The user has no recorded actions on skills")),o.showWarnModal?(i(),n("div",it,[e("div",nt,[e("div",at,[rt,e("div",ct,[e("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=s=>o.showWarnModal=!1)},ut)])])])])):d("",!0)],64)}const ht=S(st,[["render",_t]]);const kt={setup(){return{usersStore:U()}},data(){return{user:{id:this.$route.params.id,firstName:null,lastName:null,username:null,role:null,avatar:null},showFlags:!1,showSources:!1,showMcQuestions:!1,showStudentMcQuestions:!1,showSkills:!1,showSkillSubmittedByUsers:!1,mcQuestions:[],resources:[],flags:[],skillEdits:[]}},components:{UserFlagActions:Ms,UserResourceActions:Gs,UserQuestionActions:be,UserStudentMcQuestionActions:Fe,UserSkillActions:Te,UserSkillAwaitingForApprovalActions:ht},async created(){await this.getUserDetails()},methods:{async getUserDetails(){this.usersStore.users.length<1&&await this.usersStore.getUsers();for(let l=0;l<this.usersStore.users.length;l++)this.usersStore.users[l].id==this.user.id&&(this.user.firstName=this.usersStore.users[l].first_name,this.user.lastName=this.usersStore.users[l].last_name,this.user.username=this.usersStore.users[l].username,this.user.role=this.usersStore.users[l].role,this.user.avatar=this.usersStore.users[l].avatar)}}},mt={class:"container bg-light rounded p-2"},pt=e("h1",{class:"page-title heading"},"User Activity Report",-1),wt={class:"row"},ft={class:"d-flex flex-column flex-md-row gap-3"},vt=["src"],yt={class:"d-flex flex-column"},bt={id:"user-name"},St={id:"role"},gt={class:"d-flex flex-column"},$t={class:"d-flex flex-row justify-content-between"},xt=["title"],Ct=e("span",null," Flags ",-1),Mt=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),Nt=[Mt],Ut={key:0},Dt=e("hr",{class:"mt-5 mb-3"},null,-1),It={class:"d-flex flex-column"},At={class:"d-flex flex-row justify-content-between"},Wt=["title"],jt=e("span",null,"Questions ",-1),Lt=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),Qt=[Lt],Tt={key:0},qt={key:0,class:"mt-5 mb-3"},Ot={class:"d-flex flex-column"},Bt={class:"d-flex flex-row justify-content-between"},Rt=["title"],Et=e("span",null,"Student MC Questions ",-1),Kt=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),zt=[Kt],Ht={key:0},Jt=e("hr",{class:"mt-5 mb-3"},null,-1),Vt={class:"d-flex flex-column"},Pt={class:"d-flex flex-row justify-content-between"},Gt=["title"],Xt=e("span",null," Sources ",-1),Yt=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),Zt=[Yt],Ft={key:0},so=e("hr",{class:"mt-5 mb-3"},null,-1),eo={class:"d-flex flex-column"},to={class:"d-flex flex-row justify-content-between"},oo=["title"],lo=e("span",null," Skills ",-1),io=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),no=[io],ao={key:0},ro=e("hr",{class:"mt-5 mb-3"},null,-1),co={class:"d-flex flex-column mb-3"},uo={class:"d-flex flex-row justify-content-between"},_o=["title"],ho=e("span",null," Skills Submitted By User ",-1),ko=e("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),mo=[ko],po={key:0},wo=e("hr",{class:"mt-5 mb-3"},null,-1);function fo(l,t,u,h,o,r){const _=w("UserFlagActions"),s=w("UserQuestionActions"),v=w("UserStudentMcQuestionActions"),C=w("UserResourceActions"),M=w("UserSkillActions"),N=w("UserSkillAwaitingForApprovalActions");return i(),n("div",mt,[pt,e("div",wt,[e("div",ft,[e("img",{id:"activity-report-user-avatar",src:o.user.avatar},null,8,vt),e("div",yt,[e("div",bt,a(o.user.username),1),e("div",St,a(o.user.role),1)])])]),e("div",null,[e("div",gt,[e("div",$t,[e("div",{class:"log-type",onClick:t[0]||(t[0]=y=>o.showFlags=!o.showFlags),"b-on-hover":"",title:o.showFlags?"collapse":"expand"},[Ct,(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showFlags?"arrow-point-down mb-2":"arrow-point-up "])},Nt,2))],8,xt)]),m(g,{name:"dropdown"},{default:k(()=>[o.showFlags?(i(),n("div",Ut,[m(_,{ref:"contentFlagsPerUser",userId:o.user.id,onCloseFlagDiv:t[1]||(t[1]=y=>o.showFlags=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),Dt,e("div",It,[e("div",At,[e("div",{class:"log-type",onClick:t[2]||(t[2]=y=>o.showMcQuestions=!o.showMcQuestions),"b-on-hover":"",title:o.showMcQuestions?"collapse":"expand"},[jt,(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showMcQuestions?"arrow-point-down mb-2":"arrow-point-up"])},Qt,2))],8,Wt)]),m(g,{name:"dropdown"},{default:k(()=>[o.showMcQuestions?(i(),n("div",Tt,[m(s,{userId:o.user.id,onCloseMcQuestionDiv:t[3]||(t[3]=y=>o.showMcQuestions=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),o.user.role==="admin"?(i(),n("hr",qt)):d("",!0),e("div",Ot,[e("div",Bt,[e("div",{class:"log-type",onClick:t[4]||(t[4]=y=>o.showStudentMcQuestions=!o.showStudentMcQuestions),"b-on-hover":"",title:o.showStudentMcQuestions?"collapse":"expand"},[Et,(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showStudentMcQuestions?"arrow-point-down mb-2":"arrow-point-up"])},zt,2))],8,Rt)]),m(g,{name:"dropdown"},{default:k(()=>[o.showStudentMcQuestions?(i(),n("div",Ht,[m(v,{userId:o.user.id,onCloseMcQuestionDiv:t[5]||(t[5]=y=>o.showStudentMcQuestions=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),Jt,e("div",Vt,[e("div",Pt,[e("div",{class:"log-type",onClick:t[6]||(t[6]=y=>o.showSources=!o.showSources),"b-on-hover":"",title:o.showSources?"collapse":"expand"},[Xt,(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSources?"arrow-point-down mb-2":"arrow-point-up "])},Zt,2))],8,Gt)]),m(g,{name:"dropdown"},{default:k(()=>[o.showSources?(i(),n("div",Ft,[m(C,{userId:o.user.id,onCloseResourceDiv:t[7]||(t[7]=y=>o.showSources=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),so,e("div",eo,[e("div",to,[e("div",{class:"log-type",onClick:t[8]||(t[8]=y=>o.showSkills=!o.showSkills),"b-on-hover":"",title:o.showSkills?"collapse":"expand"},[lo,(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSkills?"arrow-point-down mb-2":"arrow-point-up "])},no,2))],8,oo)]),m(g,{name:"dropdown"},{default:k(()=>[o.showSkills?(i(),n("div",ao,[m(M,{userId:o.user.id,onCloseResourceDiv:t[9]||(t[9]=y=>o.showSkills=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),ro,e("div",co,[e("div",uo,[e("div",{class:"log-type",onClick:t[10]||(t[10]=y=>o.showSkillSubmittedByUsers=!o.showSkillSubmittedByUsers),"b-on-hover":"",title:o.showSkillSubmittedByUsers?"collapse":"expand"},[ho,(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSkillSubmittedByUsers?"arrow-point-down mb-2":"arrow-point-up "])},mo,2))],8,_o)]),m(g,{name:"dropdown"},{default:k(()=>[o.showSkillSubmittedByUsers?(i(),n("div",po,[m(N,{userId:o.user.id,onCloseResourceDiv:t[11]||(t[11]=y=>o.showSkillSubmittedByUsers=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),wo])])}const bo=S(kt,[["render",fo]]);export{bo as default};
