import{_ as h,j as d,o as a,c,a as s,w as p,C as m,q as _,t as u,b as g,p as f,g as b,s as w,k as v}from"./main-61ffa570.js";import{_ as y}from"./app-logo-6a421005.js";const k={data(){return{username:null,password:null,errors:{username:null,password:null},isSubmitting:!1,isMobileCheck:window.innerWidth}},mounted(){let e=document.createElement("script");e.setAttribute("src","https://accounts.google.com/gsi/client"),e.setAttribute("defer",""),document.head.appendChild(e),this.GetGoogleLoginResult()},computed:{},methods:{validateForm(){this.errors={username:null,password:null};let e=!0;return(!this.username||this.username.trim()==="")&&(this.errors.username="Username is required",e=!1),(!this.password||this.password.trim()==="")&&(this.errors.password="Password is required",e=!1),e},Submit(){if(!this.validateForm())return;this.isSubmitting=!0;const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})};var t="/login-attempt";fetch(t,e).then(r=>r.json()).then(r=>{this.isSubmitting=!1,r.account=="authorized"?r.role=="student"?this.isMobileCheck<576?d.push({name:"search"}):d.push({name:"skill-tree"}):r.role=="instructor"?d.push({name:"students"}):r.role=="editor"?d.push({name:"todo"}):d.push({name:"skills"}):r.account=="wrong-password"?alert("Wrong password"):alert("No account found")}).catch(r=>{this.isSubmitting=!1,console.error("Login error:",r),alert("An error occurred during login. Please try again.")})},GetGoogleLoginResult(){fetch("/google-login-result").then(function(e){return e.json()}).then(e=>{e.account=="no account"&&alert("No account found.")})},handleKeyPress(e){e.key==="Enter"&&this.Submit()}}},n=e=>(f("data-v-bcdd68b2"),e=e(),b(),e),x={class:"login-page"},S={class:"form-signin"},P=n(()=>s("div",{class:"text-center app-logo-wrapper"},[s("img",{class:"",src:y,alt:"icon of a skill tree"})],-1)),q=n(()=>s("h1",{class:"h3 mt-2 font-weight-normal"},"Sign in",-1)),C={class:"form"},K=n(()=>s("label",{class:"mb-4 welcome-message"},"Welcome back! Please enter your details.",-1)),V={class:"mb-3 text-start"},j=n(()=>s("label",{class:"form-label"},"Username",-1)),L={key:0,class:"invalid-feedback"},N={class:"mb-3 text-start"},U=n(()=>s("label",{class:"form-label"},"Password",-1)),B={key:0,class:"invalid-feedback"},G=n(()=>s("div",{class:"d-flex password-extras"},[s("div",{style:{color:"rgba(164, 139, 229, 1)"}},[s("a",{href:"/password-reset",class:"links"},"Forgot password")])],-1)),I=["disabled"],M={key:0,id:"g_id_onload","data-client_id":"13191319610-qectaoi146ce1pm4v95jtgctsbtmqb3t.apps.googleusercontent.com","data-context":"signin","data-ux_mode":"popup","data-login_uri":"/google-login-attempt?device=mobile","data-auto_prompt":"false"},T={key:1,id:"g_id_onload","data-client_id":"13191319610-qectaoi146ce1pm4v95jtgctsbtmqb3t.apps.googleusercontent.com","data-context":"signin","data-ux_mode":"popup","data-login_uri":"/google-login-attempt?device=not-mobile","data-auto_prompt":"false"},z=n(()=>s("div",{class:"g_id_signin","data-type":"standard","data-shape":"rectangular","data-theme":"outline","data-text":"signin_with","data-size":"large","data-logo_alignment":"left","data-width":"330"},null,-1)),A=n(()=>s("div",{class:"mt-4 signup text-center"},[w(" Don't have an account? "),s("a",{href:"/student-signup",class:"links"},"Register")],-1));function D(e,t,r,F,o,l){return a(),c("div",x,[s("div",S,[P,q,s("div",C,[K,s("div",V,[j,p(s("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>o.username=i),type:"text",placeholder:"Username",class:_(["form-control",{"is-invalid":o.errors.username}]),required:"",onKeypress:t[1]||(t[1]=(...i)=>l.handleKeyPress&&l.handleKeyPress(...i))},null,34),[[m,o.username]]),o.errors.username?(a(),c("div",L,u(o.errors.username),1)):g("",!0)]),s("div",N,[U,p(s("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>o.password=i),type:"password",placeholder:"Password",class:_(["form-control",{"is-invalid":o.errors.password}]),required:"",onKeypress:t[3]||(t[3]=(...i)=>l.handleKeyPress&&l.handleKeyPress(...i))},null,34),[[m,o.password]]),o.errors.password?(a(),c("div",B,u(o.errors.password),1)):g("",!0)]),G,s("button",{class:"btn btn-dark mb-2",onClick:t[4]||(t[4]=i=>l.Submit()),disabled:o.isSubmitting},u(o.isSubmitting?"Signing in...":"Sign in"),9,I),o.isMobileCheck<576?(a(),c("div",M)):(a(),c("div",T)),z,A])])])}const E=h(k,[["render",D],["__scopeId","data-v-bcdd68b2"]]),W={__name:"LoginView",setup(e){return(t,r)=>(a(),v(E))}};export{W as default};
