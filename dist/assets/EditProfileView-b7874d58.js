import{_ as V,f as D,A as S,r as m,o as l,c as n,a as s,g as p,l as x,s as M,b as c,w as h,C as u,q as w,t as v,D as g,F as k,p as N,d as L,E as _,k as z}from"./main-84db89d7.js";import{f as I,h as U}from"./theme.compact-c71c3edb.js";import{C as F}from"./CheckPasswordComplexity-5ecef390.js";const B={setup(){const a=D(),e=S();return e.getInstructors(),{userDetailsStore:a,userStore:e}},data(){return{id:this.userDetailsStore.userId,userName:this.userDetailsStore.userName,avatar:"",email:this.userDetailsStore.email,image:this.userDetailsStore.avatar,firstName:this.userDetailsStore.firstName,lastName:this.userDetailsStore.lastName,instructorID:this.userDetailsStore.instructorId,isGoogleAuth:this.userDetailsStore.isGoogleAuth,originalValues:{firstName:this.userDetailsStore.firstName,lastName:this.userDetailsStore.lastName,userName:this.userDetailsStore.userName,email:this.userDetailsStore.email},validate:{firstName:!1,lastName:!1,username:!1,email:!1,emailFormat:!1,notSquareImg:!1,notCropped:!1},showPasswordSection:!1,passwordData:{currentPassword:"",newPassword:"",confirmPassword:""},passwordValidate:{currentPassword:!1,newPassword:!1,confirmPassword:!1,passwordMatch:!1,passwordComplex:!1},passwordVisible:{current:!1,new:!1,confirm:!1},passwordChangeMessage:"",passwordChangeSuccess:!1,isUpdatingPassword:!1,showCropModal:!1,cropCanvas:"",cropResult:{coordinates:null,image:null},lastZoomValue:0,zoomValue:0,showWarnModal:!1,isImageLoading:!1}},components:{Cropper:I,Preview:U,CheckPasswordComplexity:F},computed:{hasDetailsChanged(){return this.firstName!==this.originalValues.firstName||this.lastName!==this.originalValues.lastName||this.userName!==this.originalValues.userName||this.email!==this.originalValues.email},passwordsMatch(){return this.passwordData.newPassword===this.passwordData.confirmPassword},isPasswordFormValid(){const a=this.passwordData.currentPassword&&this.passwordData.newPassword&&this.passwordData.confirmPassword,e=this.passwordsMatch,d=this.passwordData.newPassword.length>=8;return a&&e&&d}},watch:{"passwordData.confirmPassword"(){this.validatePasswordMatch()},"passwordData.newPassword"(){this.validatePasswordMatch()}},async created(){await this.userDetailsStore.getUserDetails(),this.updateOriginalValues()},methods:{updateOriginalValues(){this.originalValues={firstName:this.userDetailsStore.firstName,lastName:this.userDetailsStore.lastName,userName:this.userDetailsStore.userName,email:this.userDetailsStore.email}},ValidateForm(){this.userName==""||this.userName==null?this.validate.username=!0:(this.email==""||this.email==null)&&(this.validate.email=!0),this.Submit()},ValidateEmail(){/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.email)?this.validate.emailFormat=!1:this.validate.emailFormat=!0},Submit(){if(!this.validate.username&&!this.validate.email&&!this.validate.emailFormat){const e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:this.firstName,lastName:this.lastName,username:this.userName,email:this.email})};var a="/users/profile/"+this.id+"/edit";fetch(a,e).then(()=>{this.userDetailsStore.getUserDetails(),this.updateOriginalValues(),this.$router.push("/profile")})}},togglePasswordSection(){this.showPasswordSection=!this.showPasswordSection,this.showPasswordSection||(this.resetPasswordForm(),this.passwordChangeMessage="",this.passwordChangeSuccess=!1)},resetPasswordForm(){this.passwordData={currentPassword:"",newPassword:"",confirmPassword:""},this.passwordValidate={currentPassword:!1,newPassword:!1,confirmPassword:!1,passwordMatch:!1,passwordComplex:!1},this.passwordVisible={current:!1,new:!1,confirm:!1},this.isUpdatingPassword=!1},validatePasswordMatch(){this.passwordData.confirmPassword&&this.passwordData.newPassword&&(this.passwordValidate.passwordMatch=this.passwordsMatch)},validatePasswordForm(){let a=!0;return this.passwordValidate.currentPassword=!1,this.passwordValidate.newPassword=!1,this.passwordValidate.confirmPassword=!1,this.passwordData.currentPassword||(this.passwordValidate.currentPassword=!0,a=!1),this.passwordData.newPassword||(this.passwordValidate.newPassword=!0,a=!1),this.passwordData.confirmPassword||(this.passwordValidate.confirmPassword=!0,a=!1),this.passwordsMatch||(this.passwordValidate.passwordMatch=!1,a=!1),a},async handlePasswordUpdate(){if(!this.validatePasswordForm())return;const a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:this.passwordData.currentPassword,newPassword:this.passwordData.newPassword})};try{const e=await fetch("/users/profile/"+this.id+"/edit-password",a),d=await e.json();e.ok?(this.passwordChangeSuccess=!0,this.passwordChangeMessage="Password updated successfully!",this.resetPasswordForm(),this.showPasswordSection=!1,setTimeout(()=>{this.passwordChangeMessage="",this.passwordChangeSuccess=!1},3e3)):(this.passwordChangeSuccess=!1,this.passwordChangeMessage=d.error||"Failed to update password")}catch{this.passwordChangeSuccess=!1,this.passwordChangeMessage="An error occurred while updating password",console.error("Password update failed")}},togglePasswordVisibility(a){this.passwordVisible[a]=!this.passwordVisible[a]},SubmitAvatar(){if(this.avatar)if(this.validate.notSquareImg)this.showWarnModal=!0;else{this.isImageLoading=!0;const e={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatar:this.avatar})};var a="/users/profile/"+this.id+"/edit-avatar";fetch(a,e).then(()=>{this.isImageLoading=!1,this.userDetailsStore.getUserDetails()})}},onFileChange(a){var e=a.target.files||a.dataTransfer.files;e.length&&(this.image="",this.avatar=this.image,this.createImage(e[0]))},createImage(a){var e=new Image,d=new FileReader,f=this;d.onload=t=>{f.image=t.target.result,this.image=t.target.result,e.src=t.target.result,this.avatar=this.image},e.onload=()=>{e.width/e.height!==1?(this.validate.notSquareImg=!0,this.showCropModal=!0):this.validate.notSquareImg=!1},d.readAsDataURL(a)},removeImage:function(a){this.image="",this.avatar=this.image},openImage(){document.getElementById("image-input").click()},cropImageChange({coordinates:a,canvas:e,image:d}){this.cropResult={coordinates:a,image:d},this.cropCanvas=e.toDataURL()},handleCancelCrop(){this.showCropModal=!1},handleCropImage(){var a=new Image;a.src=this.cropCanvas,this.avatar=this.cropCanvas,this.image=this.cropCanvas,this.showCropModal=!1,this.validate.notSquareImg=!1,this.validate.notCropped=!1},handlePhoneCropper(){if(window.innerWidth<940){const{visibleArea:a,image:e}=this.$refs.cropper.getResult(),d=e.height/e.width;this.zoomValue=d>1?a.height/e.height:a.width/e.width,this.lastZoomValue=this.zoomValue,d<1&&this.$refs.cropper.zoom(this.zoomValue)}},cropperZoomIn(){this.$refs.cropper.visibleArea.height>30&&this.$refs.cropper.zoom(2)},cropperZoomOut(){this.$refs.cropper.visibleArea.height<3e3&&this.$refs.cropper.zoom(.5)}}},r=a=>(N("data-v-e2749aa5"),a=a(),L(),a),H={class:"container bg-light rounded"},R=r(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:"20",width:"20",fill:"white"},[s("path",{d:"M134.1 296H436c6.6 0 12-5.4 12-12v-56c0-6.6-5.4-12-12-12H134.1v-46.1c0-21.4-25.9-32.1-41-17L7 239c-9.4 9.4-9.4 24.6 0 33.9l86.1 86.1c15.1 15.1 41 4.4 41-17V296z"})],-1)),j={class:"row mt-1"},q={class:"col-12 col-md-6 mb-2"},A={class:"row mx-0 px-md-0 mb-4 mb-lg-0"},E={class:"d-flex justify-content-center justify-content-md-start ps-lg-0"},O={key:0,class:"position-relative",style:{width:"fit-content"}},T=_('<svg class="" width="53" height="53" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-e2749aa5><circle cx="26.5" cy="26.5" r="26.5" fill="#D9D9D9" data-v-e2749aa5></circle><g clip-path="url(#clip0_372_11959)" data-v-e2749aa5><path d="M19.7439 45.0784L19.7439 33.2515L7.93354 33.268C7.40615 33.2671 6.90063 33.0572 6.52771 32.6843C6.15479 32.3114 5.94488 31.8059 5.94396 31.2785L5.93291 21.7174C5.93382 21.1901 6.14373 20.6845 6.51665 20.3116C6.88957 19.9387 7.3951 19.7288 7.92249 19.7279L19.7439 19.7334L19.7439 7.90646C19.7411 7.64223 19.7911 7.38009 19.8909 7.13543C19.9907 6.89076 20.1384 6.66849 20.3252 6.48164C20.5121 6.29479 20.7344 6.14713 20.979 6.0473C21.2237 5.94747 21.4858 5.8975 21.75 5.9003L31.2779 5.92241C31.8053 5.92332 32.3108 6.13322 32.6838 6.50615C33.0567 6.87907 33.2666 7.38459 33.2675 7.91198L33.262 19.7334L45.0889 19.7334C45.615 19.7337 46.1195 19.9428 46.4915 20.3148C46.8635 20.6869 47.0726 21.1913 47.073 21.7174L47.0951 31.2453C47.0948 31.7714 46.8856 32.2759 46.5136 32.6479C46.1416 33.0199 45.6371 33.229 45.111 33.2294L33.262 33.2515L33.2786 45.0618C33.2776 45.5892 33.0677 46.0947 32.6948 46.4677C32.3219 46.8406 31.8164 47.0505 31.289 47.0514L21.7501 47.0846C21.4858 47.0874 21.2237 47.0374 20.979 46.9376C20.7344 46.8377 20.5121 46.6901 20.3252 46.5032C20.1384 46.3164 19.9907 46.0941 19.8909 45.8494C19.7911 45.6048 19.7411 45.3426 19.7439 45.0784Z" fill="white" data-v-e2749aa5></path></g><defs data-v-e2749aa5><clipPath id="clip0_372_11959" data-v-e2749aa5><rect width="37" height="37" fill="white" transform="translate(8 8)" data-v-e2749aa5></rect></clipPath></defs></svg>',1),Z=[T],G=_('<svg class="" width="43" height="43" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-e2749aa5><circle cx="26.5" cy="26.5" r="26.5" fill="#D9D9D9" data-v-e2749aa5></circle><g clip-path="url(#clip0_372_11959)" data-v-e2749aa5><path d="M19.7439 45.0784L19.7439 33.2515L7.93354 33.268C7.40615 33.2671 6.90063 33.0572 6.52771 32.6843C6.15479 32.3114 5.94488 31.8059 5.94396 31.2785L5.93291 21.7174C5.93382 21.1901 6.14373 20.6845 6.51665 20.3116C6.88957 19.9387 7.3951 19.7288 7.92249 19.7279L19.7439 19.7334L19.7439 7.90646C19.7411 7.64223 19.7911 7.38009 19.8909 7.13543C19.9907 6.89076 20.1384 6.66849 20.3252 6.48164C20.5121 6.29479 20.7344 6.14713 20.979 6.0473C21.2237 5.94747 21.4858 5.8975 21.75 5.9003L31.2779 5.92241C31.8053 5.92332 32.3108 6.13322 32.6838 6.50615C33.0567 6.87907 33.2666 7.38459 33.2675 7.91198L33.262 19.7334L45.0889 19.7334C45.615 19.7337 46.1195 19.9428 46.4915 20.3148C46.8635 20.6869 47.0726 21.1913 47.073 21.7174L47.0951 31.2453C47.0948 31.7714 46.8856 32.2759 46.5136 32.6479C46.1416 33.0199 45.6371 33.229 45.111 33.2294L33.262 33.2515L33.2786 45.0618C33.2776 45.5892 33.0677 46.0947 32.6948 46.4677C32.3219 46.8406 31.8164 47.0505 31.289 47.0514L21.7501 47.0846C21.4858 47.0874 21.2237 47.0374 20.979 46.9376C20.7344 46.8377 20.5121 46.6901 20.3252 46.5032C20.1384 46.3164 19.9907 46.0941 19.8909 45.8494C19.7911 45.6048 19.7411 45.3426 19.7439 45.0784Z" fill="white" data-v-e2749aa5></path></g><defs data-v-e2749aa5><clipPath id="clip0_372_11959" data-v-e2749aa5><rect width="37" height="37" fill="white" transform="translate(8 8)" data-v-e2749aa5></rect></clipPath></defs></svg>',1),J=[G],W=r(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"35",height:"35",fill:"white"},[s("path",{d:"M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32V64H32C14.3 64 0 78.3 0 96s14.3 32 32 32H64V384c0 35.3 28.7 64 64 64H352V384H128V32zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32V448h32c17.7 0 32-14.3 32-32s-14.3-32-32-32H448l0-256c0-35.3-28.7-64-64-64L160 64v64l224 0 0 352z"})],-1)),K=[W],Q=r(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"28",height:"28",fill:"white"},[s("path",{d:"M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32V64H32C14.3 64 0 78.3 0 96s14.3 32 32 32H64V384c0 35.3 28.7 64 64 64H352V384H128V32zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32V448h32c17.7 0 32-14.3 32-32s-14.3-32-32-32H448l0-256c0-35.3-28.7-64-64-64L160 64v64l224 0 0 352z"})],-1)),X=[Q],Y=["src"],$=["src"],ss={key:1,class:"loading-animation d-flex justify-content-center align-items-center py-4"},es=r(()=>s("span",{class:"loader"},null,-1)),ts=[es],as=["disabled"],os=r(()=>s("hr",{class:"hr-border"},null,-1)),is={class:"col-12 col-md-6"},rs={class:"d-flex gap-4"},ls={class:"mb-3"},ns=r(()=>s("h2",{class:"secondary-heading h4"},"First Name",-1)),ds={class:"mb-3"},cs=r(()=>s("h2",{class:"secondary-heading h4"},"Last Name",-1)),hs={class:"mb-3"},ws=r(()=>s("h2",{class:"secondary-heading h4"},"Username",-1)),ms={key:0,class:"form-validate"},ps={class:"mb-3"},us=r(()=>s("h2",{class:"secondary-heading h4"},"Email",-1)),gs=["readonly"],fs={key:0,class:"form-validate"},vs={key:1,class:"form-validate"},_s=["disabled"],Cs=r(()=>s("hr",{class:"mt-4 mb-4"},null,-1)),Ps={class:"password-section"},bs={class:"d-flex align-items-center justify-content-between mb-3"},ys=r(()=>s("h2",{class:"secondary-heading h4 mb-0"},"Password",-1)),Vs={key:0,class:"password-change-form"},Ds={class:"mb-3"},Ss=r(()=>s("label",{class:"form-label"},"Current Password",-1)),xs={class:"password-div"},Ms=["type"],ks=["title"],Ns={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"20",height:"20",fill:"gray"},Ls=r(()=>s("path",{d:"M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256c13.6 30 40.2 72.5 78.6 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80c-.7 0-1.3 0-2 0c1.3 5.1 2 10.5 2 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2c0 .7 0 1.3 0 2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z"},null,-1)),zs=[Ls],Is={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"20",height:"20",fill:"gray"},Us=r(()=>s("path",{d:"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zm151 118.3C226 97.7 269.5 80 320 80c65.2 0 118.8 29.6 159.9 67.7C518.4 183.5 545 226 558.6 256c-12.6 28-36.6 66.8-70.9 100.9l-53.8-42.2c9.1-17.6 14.2-37.5 14.2-58.7c0-70.7-57.3-128-128-128c-32.2 0-61.7 11.9-84.2 31.5l-46.1-36.1zM394.9 284.2l-81.5-63.9c4.2-8.5 6.6-18.2 6.6-28.3c0-5.5-.7-10.9-2-16c.7 0 1.3 0 2 0c44.2 0 80 35.8 80 80c0 9.9-1.8 19.4-5.1 28.2zm51.3 163.3l-41.9-33C378.8 425.4 350.7 432 320 432c-65.2 0-118.8-29.6-159.9-67.7C121.6 328.5 95 286 81.4 256c8.3-18.4 21.5-41.5 39.4-64.8L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5zm-88-69.3L302 334c-23.5-5.4-43.1-21.2-53.7-42.3l-56.1-44.2c-.2 2.8-.3 5.6-.3 8.5c0 70.7 57.3 128 128 128c13.3 0 26.1-2 38.2-5.8z"},null,-1)),Fs=[Us],Bs={key:0,class:"form-validate"},Hs={class:"mb-3"},Rs=r(()=>s("label",{class:"form-label"},"New Password",-1)),js={class:"password-div"},qs=["type"],As=["title"],Es={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"20",height:"20",fill:"gray"},Os=r(()=>s("path",{d:"M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256c13.6 30 40.2 72.5 78.6 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80c-.7 0-1.3 0-2 0c1.3 5.1 2 10.5 2 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2c0 .7 0 1.3 0 2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z"},null,-1)),Ts=[Os],Zs={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"20",height:"20",fill:"gray"},Gs=r(()=>s("path",{d:"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zm151 118.3C226 97.7 269.5 80 320 80c65.2 0 118.8 29.6 159.9 67.7C518.4 183.5 545 226 558.6 256c-12.6 28-36.6 66.8-70.9 100.9l-53.8-42.2c9.1-17.6 14.2-37.5 14.2-58.7c0-70.7-57.3-128-128-128c-32.2 0-61.7 11.9-84.2 31.5l-46.1-36.1zM394.9 284.2l-81.5-63.9c4.2-8.5 6.6-18.2 6.6-28.3c0-5.5-.7-10.9-2-16c.7 0 1.3 0 2 0c44.2 0 80 35.8 80 80c0 9.9-1.8 19.4-5.1 28.2zm51.3 163.3l-41.9-33C378.8 425.4 350.7 432 320 432c-65.2 0-118.8-29.6-159.9-67.7C121.6 328.5 95 286 81.4 256c8.3-18.4 21.5-41.5 39.4-64.8L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5zm-88-69.3L302 334c-23.5-5.4-43.1-21.2-53.7-42.3l-56.1-44.2c-.2 2.8-.3 5.6-.3 8.5c0 70.7 57.3 128 128 128c13.3 0 26.1-2 38.2-5.8z"},null,-1)),Js=[Gs],Ws={key:0,class:"form-validate"},Ks={class:"mb-3"},Qs=r(()=>s("label",{class:"form-label"},"Confirm New Password",-1)),Xs={class:"password-div"},Ys=["type"],$s=["title"],se={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"20",height:"20",fill:"gray"},ee=r(()=>s("path",{d:"M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256c13.6 30 40.2 72.5 78.6 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80c-.7 0-1.3 0-2 0c1.3 5.1 2 10.5 2 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2c0 .7 0 1.3 0 2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z"},null,-1)),te=[ee],ae={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"20",height:"20",fill:"gray"},oe=r(()=>s("path",{d:"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zm151 118.3C226 97.7 269.5 80 320 80c65.2 0 118.8 29.6 159.9 67.7C518.4 183.5 545 226 558.6 256c-12.6 28-36.6 66.8-70.9 100.9l-53.8-42.2c9.1-17.6 14.2-37.5 14.2-58.7c0-70.7-57.3-128-128-128c-32.2 0-61.7 11.9-84.2 31.5l-46.1-36.1zM394.9 284.2l-81.5-63.9c4.2-8.5 6.6-18.2 6.6-28.3c0-5.5-.7-10.9-2-16c.7 0 1.3 0 2 0c44.2 0 80 35.8 80 80c0 9.9-1.8 19.4-5.1 28.2zm51.3 163.3l-41.9-33C378.8 425.4 350.7 432 320 432c-65.2 0-118.8-29.6-159.9-67.7C121.6 328.5 95 286 81.4 256c8.3-18.4 21.5-41.5 39.4-64.8L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5zm-88-69.3L302 334c-23.5-5.4-43.1-21.2-53.7-42.3l-56.1-44.2c-.2 2.8-.3 5.6-.3 8.5c0 70.7 57.3 128 128 128c13.3 0 26.1-2 38.2-5.8z"},null,-1)),ie=[oe],re={key:0,class:"form-validate"},le={key:1,class:"form-validate"},ne={class:"d-flex justify-content-end"},de=["disabled"],ce={key:0},he={key:1},we={class:"mb-3 row"},me={class:"d-none"},pe=r(()=>s("p",{style:{"font-size":"14px"}},[s("em",null,"Maximum file size 15mb")],-1)),ue={key:0},ge={id:"myModal",class:"modal"},fe={class:"modal-content d-flex flex-column"},ve={id:"crop-component",ref:"cropComponent"},_e={id:"crop-result"},Ce=r(()=>s("div",{class:"form-label"},"Result:",-1)),Pe={id:"zoom-range"},be=r(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"20",height:"20",fill:"gray"},[s("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM136 184c-13.3 0-24 10.7-24 24s10.7 24 24 24H280c13.3 0 24-10.7 24-24s-10.7-24-24-24H136z"})],-1)),ye=[be],Ve=r(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"20",height:"20",fill:"gray"},[s("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"})],-1)),De=[Ve],Se={class:"d-flex flex-row justify-content-center mt-2"},xe={class:"d-flex flex-row justify-content-between justify-content-lg-end gap-2 mt-5 pb-2 pb-lg-0"},Me=r(()=>s("span",{class:""},"Cancel",-1)),ke=[Me],Ne=r(()=>s("span",{class:""},"Crop",-1)),Le=[Ne];function ze(a,e,d,f,t,i){const C=m("router-link"),P=m("CheckPasswordComplexity"),b=m("cropper"),y=m("preview");return l(),n(k,null,[s("div",H,[p(C,{class:"btn red-btn mt-1",to:"/profile"},{default:x(()=>[R,M(" Back to Profile ")]),_:1}),s("div",j,[s("div",q,[s("div",A,[s("div",E,[t.isImageLoading?(l(),n("div",ss,ts)):(l(),n("div",O,[s("div",{id:"plus-svg",onClick:e[0]||(e[0]=o=>i.openImage()),class:"d-none d-lg-block","b-tooltip.hover":"",title:"add another image"},Z),s("div",{id:"plus-svg",onClick:e[1]||(e[1]=o=>i.openImage()),class:"d-lg-none","b-tooltip.hover":"",title:"add another image"},J),t.avatar&&t.validate.notSquareImg?(l(),n("div",{key:0,id:"crop-icon","b-tooltip.hover":"",title:"crop image",class:"d-none d-lg-block",onClick:e[2]||(e[2]=o=>t.showCropModal=!0)},K)):c("",!0),t.avatar&&t.validate.notSquareImg?(l(),n("div",{key:1,id:"crop-icon","b-tooltip.hover":"",title:"crop image",class:"d-lg-none",onClick:e[3]||(e[3]=o=>t.showCropModal=!0)},X)):c("",!0),s("img",{id:"img-background",src:t.image,height:"428",width:"428",style:{"background-color":"lightgrey"},class:"d-none d-lg-block"},null,8,Y),s("img",{id:"img-background",src:t.image,height:"240",width:"240",style:{"background-color":"lightgrey"},class:"d-lg-none"},null,8,$)]))])]),s("button",{disabled:!t.avatar,class:"btn primary-btn mt-1",onClick:e[4]||(e[4]=o=>i.SubmitAvatar())}," Update avatar ",8,as),os]),s("div",is,[s("div",rs,[s("div",ls,[ns,h(s("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.firstName=o),type:"text",class:"form-control"},null,512),[[u,t.firstName]])]),s("div",ds,[cs,h(s("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>t.lastName=o),type:"text",class:"form-control"},null,512),[[u,t.lastName]])])]),s("div",hs,[ws,h(s("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>t.userName=o),type:"text",class:"form-control"},null,512),[[u,t.userName]]),t.validate.username&&(t.userName==""||t.userName==null)?(l(),n("div",ms," please enter a user name ! ")):c("",!0)]),s("div",ps,[us,h(s("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>t.email=o),type:"email",class:"form-control",onBlur:e[9]||(e[9]=(...o)=>i.ValidateEmail&&i.ValidateEmail(...o)),readonly:t.isGoogleAuth},null,40,gs),[[u,t.email]]),t.validate.email&&(t.email==""||t.email==null)?(l(),n("div",fs," please enter an email ! ")):t.validate.emailFormat?(l(),n("div",vs," please enter a valid email ! ")):c("",!0)]),s("button",{class:"btn primary-btn",onClick:e[10]||(e[10]=o=>i.ValidateForm()),disabled:!i.hasDetailsChanged}," Update details ",8,_s),Cs,t.passwordChangeMessage?(l(),n("div",{key:0,class:w(["alert",t.passwordChangeSuccess?"alert-success":"alert-danger","mb-3"])},v(t.passwordChangeMessage),3)):c("",!0),s("div",Ps,[s("div",bs,[ys,s("button",{class:"btn cancel-btn btn-sm",onClick:e[11]||(e[11]=o=>i.togglePasswordSection())},v(t.showPasswordSection?"Cancel":"Change Password"),1)]),t.showPasswordSection?(l(),n("div",Vs,[s("div",Ds,[Ss,s("div",xs,[h(s("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>t.passwordData.currentPassword=o),type:t.passwordVisible.current?"text":"password",placeholder:"Enter current password",class:w(["form-control",{"is-invalid":t.passwordValidate.currentPassword}])},null,10,Ms),[[g,t.passwordData.currentPassword]]),s("div",{class:"eye-icon","b-tooltip.hover":"",title:t.passwordVisible.current?"hide password":"show password",onClick:e[13]||(e[13]=o=>i.togglePasswordVisibility("current"))},[t.passwordVisible.current?(l(),n("svg",Ns,zs)):(l(),n("svg",Is,Fs))],8,ks)]),t.passwordValidate.currentPassword?(l(),n("div",Bs," Please enter your current password ")):c("",!0)]),s("div",Hs,[Rs,s("div",js,[h(s("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>t.passwordData.newPassword=o),type:t.passwordVisible.new?"text":"password",placeholder:"Enter new password",class:w(["form-control",{"is-invalid":t.passwordValidate.newPassword}])},null,10,qs),[[g,t.passwordData.newPassword]]),s("div",{class:"eye-icon","b-tooltip.hover":"",title:t.passwordVisible.new?"hide password":"show password",onClick:e[15]||(e[15]=o=>i.togglePasswordVisibility("new"))},[t.passwordVisible.new?(l(),n("svg",Es,Ts)):(l(),n("svg",Zs,Js))],8,As)]),t.passwordValidate.newPassword?(l(),n("div",Ws," Please enter a new password ")):c("",!0),p(P,{formData:{username:t.userName,password:t.passwordData.newPassword,firstName:t.firstName,lastName:t.lastName,email:t.email}},null,8,["formData"])]),s("div",Ks,[Qs,s("div",Xs,[h(s("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>t.passwordData.confirmPassword=o),type:t.passwordVisible.confirm?"text":"password",placeholder:"Confirm new password",class:w(["form-control",{"is-invalid":t.passwordValidate.confirmPassword||!i.passwordsMatch&&t.passwordData.confirmPassword}])},null,10,Ys),[[g,t.passwordData.confirmPassword]]),s("div",{class:"eye-icon","b-tooltip.hover":"",title:t.passwordVisible.confirm?"hide password":"show password",onClick:e[17]||(e[17]=o=>i.togglePasswordVisibility("confirm"))},[t.passwordVisible.confirm?(l(),n("svg",se,te)):(l(),n("svg",ae,ie))],8,$s)]),t.passwordValidate.confirmPassword?(l(),n("div",re," Please confirm your new password ")):c("",!0),!i.passwordsMatch&&t.passwordData.confirmPassword?(l(),n("div",le," Passwords do not match ")):c("",!0)]),s("div",ne,[s("button",{class:"btn primary-btn",onClick:e[18]||(e[18]=o=>i.handlePasswordUpdate()),disabled:!i.isPasswordFormValid||t.isUpdatingPassword},[t.isUpdatingPassword?(l(),n("span",ce," Updating... ")):(l(),n("span",he," Update Password "))],8,de)])])):c("",!0)])])]),s("div",we,[s("div",me,[s("input",{id:"image-input",class:"form-control",type:"file",accept:"image/*",onChange:e[19]||(e[19]=(...o)=>i.onFileChange&&i.onFileChange(...o))},null,32),pe])])]),t.showCropModal?(l(),n("div",ue,[s("div",ge,[s("div",fe,[s("div",ve,[p(b,{src:t.image,onChange:i.cropImageChange,onReady:i.handlePhoneCropper,"stencil-props":{movable:!0,resizable:!0,aspectRatio:1},"image-restriction":"stencil",class:"cropper",ref:"cropper",debounce:!1},null,8,["src","onChange","onReady"]),s("div",_e,[Ce,p(y,{width:120,height:120,image:t.cropResult.image,coordinates:t.cropResult.coordinates},null,8,["image","coordinates"])])],512),s("div",Pe,[s("span",{class:"mt-1 me-1 zoom-icon",onClick:e[20]||(e[20]=(...o)=>i.cropperZoomOut&&i.cropperZoomOut(...o))},ye),s("span",{class:"mt-1 ms-1 zoom-icon",onClick:e[21]||(e[21]=(...o)=>i.cropperZoomIn&&i.cropperZoomIn(...o))},De)]),s("div",Se,[t.validate.notCropped?(l(),n("div",{key:0,id:"warning-line",class:w({shake:t.validate.notCropped})}," Please crop your image to square aspect ratio ",2)):c("",!0)]),s("div",xe,[s("button",{class:"btn red-btn",onClick:e[22]||(e[22]=(...o)=>i.handleCancelCrop&&i.handleCancelCrop(...o))},ke),s("button",{class:"btn green-btn",onClick:e[23]||(e[23]=(...o)=>i.handleCropImage&&i.handleCropImage(...o))},Le)])])])])):c("",!0)],64)}const Ie=V(B,[["render",ze],["__scopeId","data-v-e2749aa5"]]),He={__name:"EditProfileView",setup(a){return(e,d)=>(l(),z(Ie))}};export{He as default};
