import{u as T}from"./AnalyticsStore-3237f325.js";import{u as I}from"./TeacherAnalyticsStore-a4ea9a1c.js";import{_ as D,o as d,c as m,f as P,r as y,a as t,g as x,l as w,k as C,b,F as B,z as j,t as q,p as M,d as R,s as v}from"./main-e140fee1.js";import{s as f}from"./transform-62bed377.js";import{u as L,l as F}from"./line-69ff8f5e.js";import{e as H}from"./time-bec744cd.js";import{l as k,m as A,a as V,b as N}from"./linear-de29b0e6.js";import{o as O}from"./ordinal-ed23e132.js";import{c as z}from"./category10-63f9141e.js";import{b as E}from"./band-a97ffeb0.js";import{s as W}from"./sort-a49d696f.js";import"./point-ea70dc51.js";import"./colors-98f238a0.js";const Y={name:"SchoolProgressChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(s){f("svg").remove(),s.student.length>0?this.axisData=s.student:s.average.length>0?this.axisData=s.average:this.axisData=[];const c=Object.entries(s).map(([a,$])=>({name:a,values:$}));f("#progress-chart-container");const r=document.getElementById("progress-chart-container").clientWidth,o=document.getElementById("progress-chart-container").clientHeight,l=0,u=0,p=0,h=0,n=L(H(this.axisData,a=>a.date),[h,r-u]),i=k([0,A(this.axisData,a=>a.quantity)],[o-p,l]),S=O().domain(c.map(a=>a.name)).range(z),g=F().x(a=>n(a.date)).y(a=>i(a.quantity));f("#progress-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(r,o),+Math.min(r,o)]).attr("preserveAspectRatio","xMinYMin").selectAll(".line").data(c).join("path").attr("fill","none").attr("stroke",a=>S(a.name)).attr("stroke-width",3).attr("d",a=>g(a.values))}}};function U(s,c,r,o,l,u){return null}const G=D(Y,[["render",U]]),J={name:"StudentComparisonChart",props:["data","colour"],data(){return{}},mounted(){},methods:{createChart(s){f("#student-comparison-container");const c=25,r=0,o=0,l=10,u=200,p=700,h=Math.ceil((s.length+.1)*c)+r+l,n=k().domain([0,A(s,e=>e.quantity)]).range([u,p-o]),i=E().domain(W(s,e=>-e.quantity).map(e=>e.name)).rangeRound([r,h-l]).padding(.1),S=n.tickFormat(20),g=f("#student-comparison-container").append("svg").attr("width",p).attr("height",h).attr("viewBox",[0,0,p,h]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");g.append("g").attr("fill",this.colour).selectAll().data(s).join("rect").attr("x",n(0)).attr("y",e=>i(e.name)).attr("width",e=>n(e.quantity)-n(0)).attr("height",i.bandwidth()),g.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(s).join("text").attr("x",e=>n(e.quantity)).attr("y",e=>i(e.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>S(e.quantity)).call(e=>e.filter(a=>n(a.quantity)-n(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),g.append("g").attr("transform",`translate(0,${r})`).call(V(n).ticks(0)).call(e=>e.select(".domain").remove()),g.append("g").attr("transform",`translate(${u},0)`).attr("style","font-size: 16px").call(N(i).tickSizeOuter(0))}}},K={id:"student-comparison-container"};function Q(s,c,r,o,l,u){return d(),m("div",K)}const X=D(J,[["render",Q]]);const Z={name:"Student-Dashboard",setup(){const s=P(),c=T(),r=I();return{userDetailsStore:s,analyticsStore:c,teacherAnalyticsStore:r}},data(){return{showSidebar:!0,screenWidth:screen.width,isStudentData:!0,isSchoolData:!0,isLanguageData:!1,isMathData:!1,isHistoryData:!1,isLifeData:!1,isCSData:!1,isSAndIData:!1,isDIData:!1,progressData:{student:[],average:[]},isAboveTheCurve:!1}},components:{StudentProgressChart:G,StudentComparisonChart:X},async created(){await this.analyticsStore.getStudentProgress(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userDetailsStore.userId),await this.teacherAnalyticsStore.getStudentMultipleFails(this.userDetailsStore.userId),console.log(this.teacherAnalyticsStore.studentMultipleFails),this.analyticsStore.progress.student[this.analyticsStore.progress.student.length-1].quantity>this.analyticsStore.progress.tenant[this.analyticsStore.progress.tenant.length-1].quantity&&(this.isAboveTheCurve=!0),await this.HandleProgressData(),await this.HandleComparisonData()},methods:{async HandleProgressData(){if(this.isStudentData){this.progressData.student=[];for(let s=0;s<this.analyticsStore.progress.student.length;s++)this.progressData.student.push(this.analyticsStore.progress.student[s])}else this.progressData.student=[];if(this.isSchoolData){this.progressData.average=[];for(let s=0;s<this.analyticsStore.progress.tenant.length;s++)this.progressData.average.push(this.analyticsStore.progress.tenant[s])}else this.progressData.average=[];this.$nextTick(()=>{this.$refs.progressChart&&this.$refs.progressChart.createChart(this.progressData)})},async HandleComparisonData(){this.$nextTick(()=>{this.$refs.comparisonChart&&this.$refs.comparisonChart.createChart(this.analyticsStore.studentRootSubjectsPassedAssessments)})},toggleSidebar(){this.showSidebar=!this.showSidebar}}},_=s=>(M("data-v-2809cd50"),s=s(),R(),s),tt={class:"dashboard"},st={class:"main"},et={class:"content container"},at={class:"dash-row row"},rt={id:"progress-chart-container"},ot=_(()=>t("div",{class:"position-absolute chart-heading"},[t("h2",{class:"heading h5"},"Progress over time"),t("strong",null,"You"),t("br"),t("span",{style:{color:"#ff7f0e"}},[t("strong",null,"School average")])],-1)),nt={class:"col-md-6 position-relative"},it=_(()=>t("h2",{class:"heading chart-heading h5 mt-1"}," Subject comparison ",-1)),ct=_(()=>t("p",null,[t("em",null,"TODO: different color for each subject")],-1)),lt={class:"dash-row row"},ht=_(()=>t("h2",{class:"heading position-absolute chart-heading h5"}," Study time ",-1)),dt={class:"col-md p-0 position-relative"},ut={class:"row"},pt={class:"col"},gt=_(()=>t("h2",{class:"h5 heading"}," Super challenging skills ",-1)),mt={key:0},_t={key:1},ft=_(()=>t("div",{class:"col"},[t("h2",{class:"h5 heading"},"Stats"),t("ul",null,[t("li",null,[t("strong",null,"Skills passed:"),v(" 25")]),t("li",null,[t("strong",null,"Total time spent:"),v(" 5:00 ")]),t("li",null,[t("strong",null,"Tokens used:"),v(" 10,000 ")])])],-1));function St(s,c,r,o,l,u){const p=y("StudentProgressChart"),h=y("RouterLink"),n=y("StudentComparisonChart");return d(),m("div",tt,[t("div",st,[t("div",et,[t("div",at,[x(h,{to:"/my-progress/skills",class:"col-md-6 h-100 p-0 position-relative"},{default:w(()=>[t("div",rt,[ot,l.progressData.student.length>0||l.progressData.average.length>0?(d(),C(p,{key:0,ref:"progressChart"},null,512)):b("",!0)])]),_:1}),t("div",nt,[it,ct,o.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(d(),C(n,{key:0,ref:"comparisonChart",data:o.analyticsStore.studentRootSubjectsPassedAssessments,colour:"#5f31dd"},null,8,["data"])):b("",!0)])]),t("div",lt,[x(h,{to:"/my-progress/time",class:"col-md p-0 position-relative"},{default:w(()=>[ht]),_:1}),t("div",dt,[t("div",ut,[t("div",pt,[gt,o.teacherAnalyticsStore.studentMultipleFails.length>0?(d(),m("ul",mt,[(d(!0),m(B,null,j(o.teacherAnalyticsStore.studentMultipleFails,i=>(d(),m("li",{key:i.id},q(i.name),1))),128))])):(d(),m("p",_t,"Nothing to worry about yet"))]),ft])])])])])])}const Bt=D(Z,[["render",St],["__scopeId","data-v-2809cd50"]]);export{Bt as default};
