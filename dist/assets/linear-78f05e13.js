import{a as U}from"./transform-7263f110.js";import{i as $,t as rn,c as en,d as on,e as an,f as un}from"./continuous-5681c0ba.js";class X extends Map{constructor(r,e=hn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),r!=null)for(const[t,i]of r)this.set(t,i)}get(r){return super.get(Y(this,r))}has(r){return super.has(Y(this,r))}set(r,e){return super.set(fn(this,r),e)}delete(r){return super.delete(sn(this,r))}}function Y({_intern:n,_key:r},e){const t=r(e);return n.has(t)?n.get(t):e}function fn({_intern:n,_key:r},e){const t=r(e);return n.has(t)?n.get(t):(n.set(t,e),e)}function sn({_intern:n,_key:r},e){const t=r(e);return n.has(t)&&(e=n.get(t),n.delete(t)),e}function hn(n){return n!==null&&typeof n=="object"?n.valueOf():n}function dn(n,r){return Array.from(r,e=>n[e])}function On(n,...r){if(typeof n[Symbol.iterator]!="function")throw new TypeError("values is not iterable");n=Array.from(n);let[e]=r;if(e&&e.length!==2||r.length>1){const t=Uint32Array.from(n,(i,o)=>o);return r.length>1?(r=r.map(i=>n.map(i)),t.sort((i,o)=>{for(const a of r){const f=R(a[i],a[o]);if(f)return f}})):(e=n.map(e),t.sort((i,o)=>R(e[i],e[o]))),dn(n,t)}return n.sort(cn(e))}function cn(n=U){if(n===U)return R;if(typeof n!="function")throw new TypeError("compare is not a function");return(r,e)=>{const t=n(r,e);return t||t===0?t:(n(e,e)===0)-(n(r,r)===0)}}function R(n,r){return(n==null||!(n>=n))-(r==null||!(r>=r))||(n<r?-1:n>r?1:0)}function Tn(n,r){let e;if(r===void 0)for(const t of n)t!=null&&(e<t||e===void 0&&t>=t)&&(e=t);else{let t=-1;for(let i of n)(i=r(i,++t,n))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function mn(n,r,e){n=+n,r=+r,e=(i=arguments.length)<2?(r=n,n=0,1):i<3?1:+e;for(var t=-1,i=Math.max(0,Math.ceil((r-n)/e))|0,o=new Array(i);++t<i;)o[t]=n+t*e;return o}function gn(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function I(n,r){if((e=(n=r?n.toExponential(r-1):n.toExponential()).indexOf("e"))<0)return null;var e,t=n.slice(0,e);return[t.length>1?t[0]+t.slice(2):t,+n.slice(e+1)]}function P(n){return n=I(Math.abs(n)),n?n[1]:NaN}function ln(n,r){return function(e,t){for(var i=e.length,o=[],a=0,f=n[0],c=0;i>0&&f>0&&(c+f+1>t&&(f=Math.max(1,t-c)),o.push(e.substring(i-=f,i+f)),!((c+=f+1)>t));)f=n[a=(a+1)%n.length];return o.reverse().join(r)}}function yn(n){return function(r){return r.replace(/[0-9]/g,function(e){return n[+e]})}}var pn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function O(n){if(!(r=pn.exec(n)))throw new Error("invalid format: "+n);var r;return new D({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}O.prototype=D.prototype;function D(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}D.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Mn(n){n:for(var r=n.length,e=1,t=-1,i;e<r;++e)switch(n[e]){case".":t=i=e;break;case"0":t===0&&(t=e),i=e;break;default:if(!+n[e])break n;t>0&&(t=0);break}return t>0?n.slice(0,t)+n.slice(i+1):n}var Q;function xn(n,r){var e=I(n,r);if(!e)return n+"";var t=e[0],i=e[1],o=i-(Q=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=t.length;return o===a?t:o>a?t+new Array(o-a+1).join("0"):o>0?t.slice(0,o)+"."+t.slice(o):"0."+new Array(1-o).join("0")+I(n,Math.max(0,r+o-1))[0]}function Z(n,r){var e=I(n,r);if(!e)return n+"";var t=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+t:t.length>i+1?t.slice(0,i+1)+"."+t.slice(i+1):t+new Array(i-t.length+2).join("0")}const q={"%":(n,r)=>(n*100).toFixed(r),b:n=>Math.round(n).toString(2),c:n=>n+"",d:gn,e:(n,r)=>n.toExponential(r),f:(n,r)=>n.toFixed(r),g:(n,r)=>n.toPrecision(r),o:n=>Math.round(n).toString(8),p:(n,r)=>Z(n*100,r),r:Z,s:xn,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function B(n){return n}var H=Array.prototype.map,J=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function bn(n){var r=n.grouping===void 0||n.thousands===void 0?B:ln(H.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",t=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?B:yn(H.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",f=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function h(s){s=O(s);var d=s.fill,y=s.align,m=s.sign,b=s.symbol,p=s.zero,w=s.width,T=s.comma,k=s.precision,L=s.trim,g=s.type;g==="n"?(T=!0,g="g"):q[g]||(k===void 0&&(k=12),L=!0,g="g"),(p||d==="0"&&y==="=")&&(p=!0,d="0",y="=");var v=b==="$"?e:b==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",nn=b==="$"?t:/[%p]/.test(g)?a:"",C=q[g],tn=/[defgprs%]/.test(g);k=k===void 0?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function F(u){var S=v,l=nn,A,G,N;if(g==="c")l=C(u)+l,u="";else{u=+u;var j=u<0||1/u<0;if(u=isNaN(u)?c:C(Math.abs(u),k),L&&(u=Mn(u)),j&&+u==0&&m!=="+"&&(j=!1),S=(j?m==="("?m:f:m==="-"||m==="("?"":m)+S,l=(g==="s"?J[8+Q/3]:"")+l+(j&&m==="("?")":""),tn){for(A=-1,G=u.length;++A<G;)if(N=u.charCodeAt(A),48>N||N>57){l=(N===46?i+u.slice(A+1):u.slice(A))+l,u=u.slice(0,A);break}}}T&&!p&&(u=r(u,1/0));var z=S.length+u.length+l.length,M=z<w?new Array(w-z+1).join(d):"";switch(T&&p&&(u=r(M+u,M.length?w-l.length:1/0),M=""),y){case"<":u=S+u+l+M;break;case"=":u=S+M+u+l;break;case"^":u=M.slice(0,z=M.length>>1)+S+u+l+M.slice(z);break;default:u=M+S+u+l;break}return o(u)}return F.toString=function(){return s+""},F}function x(s,d){var y=h((s=O(s),s.type="f",s)),m=Math.max(-8,Math.min(8,Math.floor(P(d)/3)))*3,b=Math.pow(10,-m),p=J[8+m/3];return function(w){return y(b*w)+p}}return{format:h,formatPrefix:x}}var E,V,W;wn({thousands:",",grouping:[3],currency:["$",""]});function wn(n){return E=bn(n),V=E.format,W=E.formatPrefix,E}function kn(n){return Math.max(0,-P(Math.abs(n)))}function Sn(n,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(P(r)/3)))*3-P(Math.abs(n)))}function An(n,r){return n=Math.abs(n),r=Math.abs(r)-n,Math.max(0,P(r)-P(n))+1}const K=Symbol("implicit");function _(){var n=new X,r=[],e=[],t=K;function i(o){let a=n.get(o);if(a===void 0){if(t!==K)return t;n.set(o,a=r.push(o)-1)}return e[a%e.length]}return i.domain=function(o){if(!arguments.length)return r.slice();r=[],n=new X;for(const a of o)n.has(a)||n.set(a,r.push(a)-1);return i},i.range=function(o){return arguments.length?(e=Array.from(o),i):e.slice()},i.unknown=function(o){return arguments.length?(t=o,i):t},i.copy=function(){return _(r,e).unknown(t)},$.apply(i,arguments),i}function Pn(){var n=_().unknown(void 0),r=n.domain,e=n.range,t=0,i=1,o,a,f=!1,c=0,h=0,x=.5;delete n.unknown;function s(){var d=r().length,y=i<t,m=y?i:t,b=y?t:i;o=(b-m)/Math.max(1,d-c+h*2),f&&(o=Math.floor(o)),m+=(b-m-o*(d-c))*x,a=o*(1-c),f&&(m=Math.round(m),a=Math.round(a));var p=mn(d).map(function(w){return m+o*w});return e(y?p.reverse():p)}return n.domain=function(d){return arguments.length?(r(d),s()):r()},n.range=function(d){return arguments.length?([t,i]=d,t=+t,i=+i,s()):[t,i]},n.rangeRound=function(d){return[t,i]=d,t=+t,i=+i,f=!0,s()},n.bandwidth=function(){return a},n.step=function(){return o},n.round=function(d){return arguments.length?(f=!!d,s()):f},n.padding=function(d){return arguments.length?(c=Math.min(1,h=+d),s()):c},n.paddingInner=function(d){return arguments.length?(c=Math.min(1,d),s()):c},n.paddingOuter=function(d){return arguments.length?(h=+d,s()):h},n.align=function(d){return arguments.length?(x=Math.max(0,Math.min(1,d)),s()):x},n.copy=function(){return Pn(r(),[t,i]).round(f).paddingInner(c).paddingOuter(h).align(x)},$.apply(s(),arguments)}function Nn(n,r,e,t){var i=rn(n,r,e),o;switch(t=O(t??",f"),t.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(r));return t.precision==null&&!isNaN(o=Sn(i,a))&&(t.precision=o),W(t,a)}case"":case"e":case"g":case"p":case"r":{t.precision==null&&!isNaN(o=An(i,Math.max(Math.abs(n),Math.abs(r))))&&(t.precision=o-(t.type==="e"));break}case"f":case"%":{t.precision==null&&!isNaN(o=kn(i))&&(t.precision=o-(t.type==="%")*2);break}}return V(t)}function jn(n){var r=n.domain;return n.ticks=function(e){var t=r();return an(t[0],t[t.length-1],e??10)},n.tickFormat=function(e,t){var i=r();return Nn(i[0],i[i.length-1],e??10,t)},n.nice=function(e){e==null&&(e=10);var t=r(),i=0,o=t.length-1,a=t[i],f=t[o],c,h,x=10;for(f<a&&(h=a,a=f,f=h,h=i,i=o,o=h);x-- >0;){if(h=un(a,f,e),h===c)return t[i]=a,t[o]=f,r(t);if(h>0)a=Math.floor(a/h)*h,f=Math.ceil(f/h)*h;else if(h<0)a=Math.ceil(a*h)/h,f=Math.floor(f*h)/h;else break;c=h}return n},n}function zn(){var n=en();return n.copy=function(){return on(n,zn())},$.apply(n,arguments),jn(n)}export{Pn as b,zn as l,Tn as m,On as s};
