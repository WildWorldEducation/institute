import{u as B}from"./CohortsStore-85e476bd.js";import{_ as b,o as h,c as p,f as $,r as f,a as c,t as R,b as L,k as S,g as M,p as D,d as q}from"./main-c87842e3.js";import{u as z}from"./AnalyticsStore-4c20b1d2.js";import{C as T}from"./CohortProgressLineChart-abb26d7d.js";import{s as y}from"./transform-62bed377.js";import{o as H}from"./ordinal-ed23e132.js";import{q as I,S as O,p as F,a as P}from"./pie-bbb3c1fc.js";import{C as N}from"./CohortDurationPerDayLineChart-429dd8f3.js";import{C as E}from"./CohortSkillActivityChart-2b8799b6.js";import{l as C,m as k,a as x,b as A}from"./linear-de29b0e6.js";import{b as w}from"./band-a97ffeb0.js";import{s as v}from"./sort-a49d696f.js";import"./line-69ff8f5e.js";import"./time-bec744cd.js";import"./point-ea70dc51.js";import"./colors-98f238a0.js";const V={name:"CohortPercentageStudentsMasteredAtLeastOneSkillPieChart",data(){return{}},mounted(){this.clearChart()},methods:{async clearChart(){y("#cohort-percentage-students-mastered-one-skill-chart-container").selectAll("*").remove()},async generateChart(){this.clearChart();const e=y("#cohort-percentage-students-mastered-one-skill-chart-container");let a=this.$parent.percentageStudentsMasteredOneSkill;if(a[0].value==0&&a[1].value==0){e.append("p").text("No data available.");return}const n=928,r=Math.min(n,250);H().domain(a.map(s=>s.name)).range(I(s=>O(s*.8+.1),a.length).reverse());const l=F().sort(null).value(s=>s.value),d=P().innerRadius(0).outerRadius(Math.min(n,r)/2-1),u=d.outerRadius()()*.6,o=P().innerRadius(u).outerRadius(u),i=l(a),g=y("#cohort-percentage-students-mastered-one-skill-chart-container").append("svg").attr("width",n).attr("height",r).attr("viewBox",[-n/2,-r/2,n,r]).attr("style","max-width: 100%; height: auto; font: 10px sans-serif;");g.append("g").attr("stroke","white").selectAll().data(i).join("path").attr("fill",s=>{if(s.data.name==="Mastered one skill")return"darkgreen";if(s.data.name==="Mastered no skills")return"darkred"}).attr("d",d).append("title").text(s=>`${s.data.name}: ${s.data.value.toLocaleString("en-US")}`),g.append("g").attr("text-anchor","middle").selectAll().data(i).join("text").attr("transform",s=>`translate(${o.centroid(s)})`).call(s=>s.append("tspan").attr("y","-0.4em").attr("fill","white").attr("font-weight","bold").text(t=>t.data.name)).call(s=>s.filter(t=>t.endAngle-t.startAngle>.25).append("tspan").attr("x",0).attr("fill","white").attr("y","1em").attr("fill-opacity",1).text(t=>t.data.value.toLocaleString("en-US")))}}},U={id:"cohort-percentage-students-mastered-one-skill-chart-container"};function Q(e,a,n,r,l,d){return h(),p("div",U)}const W=b(V,[["render",Q]]),G={name:"CohortFailedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){y("#cohort-failed-assessments-by-root-subject-chart-container");const e=25,a=0,n=0,r=10,l=200,d=1e3,u=Math.ceil((this.data.length+.1)*e)+a+r,o=C().domain([0,k(this.data,t=>t.quantity)]).range([l,d-n]),i=w().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([a,u-r]).padding(.1),g=o.tickFormat(20),s=y("#cohort-failed-assessments-by-root-subject-chart-container").append("svg").attr("width",d).attr("height",u).attr("viewBox",[0,0,d,u]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");s.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",o(0)).attr("y",t=>i(t.name)).attr("width",t=>o(t.quantity)-o(0)).attr("height",i.bandwidth()),s.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>o(t.quantity)).attr("y",t=>i(t.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>g(t.quantity)).call(t=>t.filter(_=>o(_.quantity)-o(0)<20).attr("dx",4).attr("fill","white").attr("text-anchor","start")),s.append("g").attr("transform",`translate(0,${a})`).call(x(o).ticks(0)).call(t=>t.select(".domain").remove()),s.append("g").attr("transform",`translate(${l},0)`).attr("style","font-size: 16px").call(A(i).tickSizeOuter(0))}},J={id:"cohort-failed-assessments-by-root-subject-chart-container"};function K(e,a,n,r,l,d){return h(),p("div",J)}const X=b(G,[["render",K]]),Y={name:"CohortPassedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){y("#cohort-passed-assessments-by-root-subject-chart-container");const e=25,a=0,n=0,r=10,l=200,d=1e3,u=Math.ceil((this.data.length+.1)*e)+a+r,o=C().domain([0,k(this.data,t=>t.quantity)]).range([l,d-n]),i=w().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([a,u-r]).padding(.1),g=o.tickFormat(20),s=y("#cohort-passed-assessments-by-root-subject-chart-container").append("svg").attr("width",d).attr("height",u).attr("viewBox",[0,0,d,u]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");s.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",o(0)).attr("y",t=>i(t.name)).attr("width",t=>o(t.quantity)-o(0)).attr("height",i.bandwidth()),s.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>o(t.quantity)).attr("y",t=>i(t.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>g(t.quantity)).call(t=>t.filter(_=>o(_.quantity)-o(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),s.append("g").attr("transform",`translate(0,${a})`).call(x(o).ticks(0)).call(t=>t.select(".domain").remove()),s.append("g").attr("transform",`translate(${l},0)`).attr("style","font-size: 16px").call(A(i).tickSizeOuter(0))},computed:{}},Z={id:"cohort-passed-assessments-by-root-subject-chart-container"};function tt(e,a,n,r,l,d){return h(),p("div",Z)}const et=b(Y,[["render",tt]]),at={name:"CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){y("#cohort-attempted-assessments-by-root-subject-chart-container");const e=25,a=0,n=0,r=10,l=200,d=1e3,u=Math.ceil((this.data.length+.1)*e)+a+r,o=C().domain([0,k(this.data,t=>t.quantity)]).range([l,d-n]),i=w().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([a,u-r]).padding(.1),g=o.tickFormat(20),s=y("#cohort-attempted-assessments-by-root-subject-chart-container").append("svg").attr("width",d).attr("height",u).attr("viewBox",[0,0,d,u]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");s.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",o(0)).attr("y",t=>i(t.name)).attr("width",t=>o(t.quantity)-o(0)).attr("height",i.bandwidth()),s.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>o(t.quantity)).attr("y",t=>i(t.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>g(t.quantity)).call(t=>t.filter(_=>o(_.quantity)-o(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),s.append("g").attr("transform",`translate(0,${a})`).call(x(o).ticks(0)).call(t=>t.select(".domain").remove()),s.append("g").attr("transform",`translate(${l},0)`).attr("style","font-size: 16px").call(A(i).tickSizeOuter(0))},computed:{}},st={id:"cohort-attempted-assessments-by-root-subject-chart-container"};function ot(e,a,n,r,l,d){return h(),p("div",st)}const rt=b(at,[["render",ot]]);const nt={setup(){const e=B(),a=$(),n=z();return{cohortsStore:e,userDetailsStore:a,analyticsStore:n}},data(){return{teacherId:this.$route.params.teacherId,isMobileCheck:window.innerWidth,percentageStudentsMasteredOneSkill:[],isLoaded:!1,classProgress:[],durationsPerDay:[]}},async created(){await this.getTenantClassProgress(),await this.getInstructorPercentageStudentsMasteredAtLeastOneSkill(),await this.getTenantClassDurationPerDay(),await this.analyticsStore.getTeacherClassSkillActivityReport(this.teacherId),await this.analyticsStore.getTeacherClassFailedAssessmentsBySubject(this.teacherId),await this.analyticsStore.getTeacherClassPassedAssessmentsBySubject(this.teacherId),await this.analyticsStore.getTeacherClassAttemptedAssessmentsBySubject(this.teacherId)},components:{CohortPercentageStudentsMasteredAtLeastOneSkillPieChart:W,CohortProgressLineChart:T,CohortDurationPerDayLineChart:N,CohortSkillActivityChart:E,CohortFailedAssessmentsByRootSubjectHorizontalBarChart:X,CohortPassedAssessmentsByRootSubjectHorizontalBarChart:et,CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart:rt},methods:{async getTenantClassProgress(){fetch(`/student-analytics/all-students-progress/${this.teacherId}`).then(e=>e.json()).then(e=>{for(let a=0;a<e.length;a++)e[a].date=new Date(e[a].date);e.sort((a,n)=>a.date-n.date),this.classProgress=e}).catch(e=>{console.error("Error fetching student progress:",e)})},async getInstructorPercentageStudentsMasteredAtLeastOneSkill(){try{const e=await fetch(`/student-analytics/percentage-students-mastered-one-skill/instructor/${this.teacherId}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json();this.percentageStudentsMasteredOneSkill=Array.isArray(a)?a:[],this.isLoaded=!0,await this.$refs.cohortPercentageStudentsMasteredAtLeastOneSkillPieChart.generateChart()}catch(e){console.error("Error fetching all students failed assessments:",e),this.percentageStudentsMasteredOneSkill=[]}},async getTenantClassDurationPerDay(){fetch(`/student-analytics/all-students-duration-per-day/${this.teacherId}`).then(e=>e.json()).then(e=>{for(let a=0;a<e.length;a++)e[a].formattedQuantity=e[a].quantity/(1e3*60),e[a].date=new Date(e[a].date);e.sort((a,n)=>a.date-n.date),this.durationsPerDay=e}).catch(e=>{console.error("Error fetching student duration per day:",e)})},millisToMinutesAndSeconds(e){var a=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return a+":"+(n<10?"0":"")+n}}},m=e=>(D("data-v-ebaba9d7"),e=e(),q(),e),it={class:"container bg-light"},ct={key:0,class:"row"},lt={class:"secondary-heading h3"},dt={class:"d-flex justify-content-between"},ht=m(()=>c("h1",{class:"heading"},"Teacher Report",-1)),mt=m(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[c("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),ut=[mt],pt=m(()=>c("h2",{class:"secondary-heading"},"Engagement",-1)),gt=m(()=>c("h4",null,"Time on platform",-1)),yt={key:2},_t=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),ft=m(()=>c("h4",{class:"mt-4"},"Skills visited",-1)),St={key:4},bt=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),Ct=m(()=>c("h2",{class:"secondary-heading mt-5"},"Academics",-1)),kt=m(()=>c("h4",null,"Skill mastery progress",-1)),xt={key:6},At=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),wt=m(()=>c("h4",{class:"mt-4"}," Percentage of students who completed at least one skill ",-1)),vt=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),Pt=m(()=>c("h3",{class:"secondary-heading"},"By subject",-1)),jt=m(()=>c("h4",{class:""},"Failed more than once",-1)),Bt={key:8},$t=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),Rt=m(()=>c("h4",{class:""},"Passed",-1)),Lt={key:10},Mt=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),Dt=m(()=>c("h4",{class:""},"Attempted",-1)),qt={key:12};function zt(e,a,n,r,l,d){const u=f("CohortDurationPerDayLineChart"),o=f("CohortSkillActivityChart"),i=f("CohortProgressLineChart"),g=f("CohortPercentageStudentsMasteredAtLeastOneSkillPieChart"),s=f("CohortFailedAssessmentsByRootSubjectHorizontalBarChart"),t=f("CohortPassedAssessmentsByRootSubjectHorizontalBarChart"),_=f("CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart");return h(),p("div",it,[l.isMobileCheck<576?(h(),p("div",ct,[c("h1",lt,R(this.cohortsStore.selectedCohort.name),1)])):L("",!0),c("div",dt,[ht,c("button",{class:"btn me-1",onClick:a[0]||(a[0]=(...j)=>e.$parent.restartTutorial&&e.$parent.restartTutorial(...j))},ut)]),pt,gt,l.durationsPerDay.length>0?(h(),S(u,{key:1,data:l.durationsPerDay,colour:"#5f31dd",ref:"cohortDurationPerDayLineChart"},null,8,["data"])):(h(),p("p",yt,"No data available")),_t,ft,r.analyticsStore.cohortSkillActivities.length>0?(h(),S(o,{key:3,data:r.analyticsStore.cohortSkillActivities},null,8,["data"])):(h(),p("p",St,"No skills visited by this student.")),bt,Ct,kt,l.classProgress.length>0?(h(),S(i,{key:5,data:l.classProgress,colour:"#5f31dd",ref:"cohortProgressLineChart"},null,8,["data"])):(h(),p("p",xt,"No data available")),At,wt,M(g,{ref:"cohortPercentageStudentsMasteredAtLeastOneSkillPieChart",class:"mb-5"},null,512),vt,Pt,jt,r.analyticsStore.cohortRootSubjectsFailedAssessments.length>0?(h(),S(s,{key:7,data:r.analyticsStore.cohortRootSubjectsFailedAssessments,colour:"darkred",class:"mb-5"},null,8,["data"])):(h(),p("p",Bt,"No data yet")),$t,Rt,r.analyticsStore.cohortRootSubjectsPassedAssessments.length>0?(h(),S(t,{key:9,data:r.analyticsStore.cohortRootSubjectsPassedAssessments,colour:"darkgreen",class:"mb-5"},null,8,["data"])):(h(),p("p",Lt,"No data yet")),Mt,Dt,r.analyticsStore.cohortRootSubjectsAttemptedAssessments.length>0?(h(),S(_,{key:11,data:r.analyticsStore.cohortRootSubjectsAttemptedAssessments,colour:"darkblue",class:"mb-5"},null,8,["data"])):(h(),p("p",qt,"No data yet"))])}const Zt=b(nt,[["render",zt],["__scopeId","data-v-ebaba9d7"]]);export{Zt as default};
