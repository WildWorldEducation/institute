import{_ as x,o as n,c as l,A as v,J as A,r as S,a as t,t as h,F as p,z as g,k as B,b as D,g as y,l as f,s as k}from"./main-bd9f0ee9.js";import{s as b}from"./transform-7263f110.js";import{l as j,m as $,b as q,s as C}from"./linear-78f05e13.js";import{a as N,b as T}from"./continuous-5681c0ba.js";const z={name:"FailedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){b("#failed-assessments-chart-container");const s=25,i=0,_=0,u=10,o=200,d=1e3,c=Math.ceil((this.data.length+.1)*s)+i+u,r=j().domain([0,$(this.data,a=>a.quantity)]).range([o,d-_]),e=q().domain(C(this.data,a=>-a.quantity).map(a=>a.name)).rangeRound([i,c-u]).padding(.1),w=r.tickFormat(20),m=b("#failed-assessments-chart-container").append("svg").attr("width",d).attr("height",c).attr("viewBox",[0,0,d,c]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");m.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",r(0)).attr("y",a=>e(a.name)).attr("width",a=>r(a.quantity)-r(0)).attr("height",e.bandwidth()),m.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",a=>r(a.quantity)).attr("y",a=>e(a.name)+e.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(a=>w(a.quantity)).call(a=>a.filter(F=>r(F.quantity)-r(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),m.append("g").attr("transform",`translate(0,${i})`).call(N(r).ticks(0)).call(a=>a.select(".domain").remove()),m.append("g").attr("transform",`translate(${o},0)`).call(T(e).tickSizeOuter(0))},computed:{}},I={id:"failed-assessments-chart-container"};function H(s,i,_,u,o,d){return n(),l("div",I)}const V=x(z,[["render",H]]),L={setup(){const s=v(),i=A();return{usersStore:s,userSkillsStore:i}},components:{FailedAssessmentsHorizontalBarChart:V},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentAttempts:[],multipleFails:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const s=this.usersStore.users.find(i=>i.id===this.studentId);s&&(this.studentName=s.username),await this.userSkillsStore.getMasteredSkills(this.studentId),await this.getAssessmentAttempts(),await this.getMultipleFails()},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(s=>s.json()).then(s=>{this.assessmentAttempts=s}).catch(s=>{console.error("Error fetching last visited skills:",s)})},assessmentDate(s){return new Date(s).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async getMultipleFails(){fetch(`/student-analytics/multiple-fails/${this.studentId}`).then(s=>s.json()).then(s=>{this.multipleFails=s}).catch(s=>{console.error("Error fetching last visited skills:",s)})}}},M={class:"container"},R={class:"d-flex justify-content-between w-100"},U=t("h1",{class:"heading"},"Assessment Status Report",-1),E={class:"secondary-heading h3"},O=t("h2",{class:"secondary-heading"},"Passed",-1),J={key:0,class:"mb-4"},P={class:"table"},G=t("tr",null,[t("th",null,"Skill"),t("th",null,"Date")],-1),K={key:1},Q=t("h2",{class:"secondary-heading"},"Attempted",-1),W={key:2,class:"mb-4"},X={class:"table"},Y=t("tr",null,[t("th",null,"Skill"),t("th",null,"Date")],-1),Z={key:3},tt=t("p",null,null,-1),st=t("h2",{class:"secondary-heading"},"Failed multiple times",-1),et={key:5,class:"mb-4"},at={class:"table"},nt=t("tr",null,[t("th",null,"Skill"),t("th",null,"Times")],-1),lt={key:6};function it(s,i,_,u,o,d){const c=S("router-link"),r=S("FailedAssessmentsHorizontalBarChart");return n(),l("div",M,[t("span",R,[U,t("h2",E,h(o.studentName),1)]),O,this.userSkillsStore.masteredSkills.length>0?(n(),l("div",J,[t("table",P,[G,(n(!0),l(p,null,g(u.userSkillsStore.masteredSkills,e=>(n(),l("tr",{key:e.id,class:"table-rows"},[t("td",null,[y(c,{target:"_blank",to:"/skills/"+e.url},{default:f(()=>[k(h(e.name),1)]),_:2},1032,["to"])]),t("td",null,h(d.assessmentDate(e.date)),1)]))),128))])])):(n(),l("p",K,"This student has not completed any assessments yet.")),Q,this.assessmentAttempts.length>0?(n(),l("div",W,[t("table",X,[Y,(n(!0),l(p,null,g(o.assessmentAttempts,e=>(n(),l("tr",{key:e.id,class:"table-rows"},[t("td",null,[y(c,{target:"_blank",to:"/skills/"+e.url},{default:f(()=>[k(h(e.name),1)]),_:2},1032,["to"])]),t("td",null,h(d.assessmentDate(e.date)),1)]))),128))])])):(n(),l("p",Z,"This student has attempted any assessments yet.")),tt,st,o.multipleFails.length>0?(n(),B(r,{key:4,data:o.multipleFails,colour:"darkred"},null,8,["data"])):D("",!0),this.multipleFails.length>0?(n(),l("div",et,[t("table",at,[nt,(n(!0),l(p,null,g(o.multipleFails,e=>(n(),l("tr",{key:e.id,class:"table-rows"},[t("td",null,[y(c,{target:"_blank",to:"/skills/"+e.url},{default:f(()=>[k(h(e.name),1)]),_:2},1032,["to"])]),t("td",null,h(e.quantity),1)]))),128))])])):(n(),l("p",lt," This student has not failed any assessments more than once yet. "))])}const ht=x(L,[["render",it]]);export{ht as default};
