import{_ as g,r as h,o as i,c as n,d as e,F as p,t as w,i as v,j as T,m as D,x as m,l as I,p as f,f as S,a as L,g as x,e as y,w as M,z as B,b as u,y as j}from"./main-57e36b9e.js";import{u as A}from"./AssessmentsStore-5ae59b84.js";import{u as O}from"./InstructorStudentsStore-78f020ec.js";const z={data(){return{visitedSkills:[],noSkills:!0}},props:["userId"],async created(){const s=await fetch("/skills/last-visited/");this.visitedSkills=await s.json(),this.visitedSkills.length>0&&(this.noSkills=!1)},computed:{}},U=s=>(f("data-v-d8f98d20"),s=s(),S(),s),N=U(()=>e("h2",{class:"tertiary-heading h5"},"Last Visited Skills",-1)),V={id:"skill-list"},G=["src"];function E(s,t,c,r,l,a){const d=h("router-link");return i(),n(p,null,[N,e("div",V,[(i(!0),n(p,null,w(l.visitedSkills,o=>(i(),v(d,{class:I([{"grade-school":o.level=="grade_school","middle-school":o.level=="middle_school","high-school":o.level=="high_school",college:o.level=="college",phd:o.level=="phd"},"skill-link btn m-2 d-flex"]),to:`/skills/${o.url}`,target:"_blank"},{default:T(()=>[e("img",{class:"icons",src:o.icon},null,8,G),D("  "+m(o.name),1)]),_:2},1032,["class","to"]))),256))])],64)}const P=g(z,[["render",E],["__scopeId","data-v-d8f98d20"]]);const W={setup(){const s=L(),t=x();return{userDetailsStore:s,skillsStore:t}},data(){return{goals:[]}},async created(){await this.getGoals(),this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let s=0;s<this.goals.length;s++){let t=this.skillsStore.skillsList.find(c=>c.id===this.goals[s].skill_id);this.goals[s].name=t.name,this.goals[s].level=t.level}},methods:{async getGoals(){const s=await fetch("/goals/"+this.userDetailsStore.userId+"/list");this.goals=await s.json()}}},R=s=>(f("data-v-431ffccc"),s=s(),S(),s),Q=R(()=>e("h2",{class:"tertiary-heading h5"},"Goals",-1)),H={id:"goal-list"},Y=R(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"black",width:"20",heigth:"20"},[e("path",{d:"M448 256A192 192 0 1 0 64 256a192 192 0 1 0 384 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 80a80 80 0 1 0 0-160 80 80 0 1 0 0 160zm0-224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zM224 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1));function F(s,t,c,r,l,a){const d=h("router-link");return i(),n(p,null,[Q,e("div",H,[(i(!0),n(p,null,w(l.goals,o=>(i(),v(d,{class:I([{"grade-school":o.level=="grade_school","middle-school":o.level=="middle_school","high-school":o.level=="high_school",college:o.level=="college",phd:o.level=="phd"},"goal-link btn m-2 d-flex"]),to:`/goals/${o.id}`,target:"_blank"},{default:T(()=>[Y,D("   "+m(o.name),1)]),_:2},1032,["class","to"]))),256))])],64)}const J=g(W,[["render",F],["__scopeId","data-v-431ffccc"]]);const Z={props:{assessments:{type:Array,required:!0}},setup(){return{}},data(){return{}},computed:{},methods:{}},K=s=>(f("data-v-5dc9288a"),s=s(),S(),s),X={class:"container-fluid"},ss=K(()=>e("h2",{class:"secondary-heading h4"},"Mark Assessments",-1)),ts={id:"list-body"},es={class:"assessment"},os={id:"student-name"},is={id:"skill-name"},rs={id:"date"};function ls(s,t,c,r,l,a){const d=h("RouterLink");return i(),n("div",X,[ss,e("div",ts,[(i(!0),n(p,null,w(this.assessments,o=>(i(),n("div",es,[y(d,{class:"assessment-link",to:"/mark-assessment/"+o.id},{default:T(()=>[e("span",os,m(o.studentUsername)+", ",1),e("span",is,m(o.skillName)+", ",1),e("span",rs,m(o.date),1)]),_:2},1032,["to"])]))),256))])])}const ns=g(Z,[["render",ls],["__scopeId","data-v-5dc9288a"]]);const as={props:{questions:{type:Array,required:!0}},methods:{formatDate(s){var t=s.replace("T"," ");t=t.replace("Z"," ");let c=t.split(/[- :]/);var r=new Date(Date.UTC(c[0],c[1]-1,c[2],c[3],c[4],c[5])),l={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return r=r.toLocaleDateString("en-US",l),r}}},cs=s=>(f("data-v-1df3f680"),s=s(),S(),s),ds={class:"container-fluid"},us=cs(()=>e("h2",{class:"secondary-heading h4"},"Check New Questions",-1)),hs={class:"list-body"},_s={class:"question"},ms={class:"student-name"},ps={class:"skill-name"},ks={class:"date"};function gs(s,t,c,r,l,a){const d=h("RouterLink");return i(),n("div",ds,[us,e("div",hs,[(i(!0),n(p,null,w(c.questions,o=>(i(),n("div",_s,[y(d,{class:"question-link",to:`/check-student-question/${o.id}`},{default:T(()=>[e("span",ms,m(o.student)+", ",1),e("span",ps,m(o.skillname)+", ",1),e("span",ks,m(a.formatDate(o.create_date)),1)]),_:2},1032,["to"])]))),256))])])}const fs=g(as,[["render",gs],["__scopeId","data-v-1df3f680"]]);const Ss={setup(){const s=L();return s.getUserDetails(),{userDetailsStore:s}},data(){return{query:"",recommendedSkillsOrderedByRelevance:[],showRecommendedSkills:!1}},mounted(){var s=document.getElementById("searchBar");s.addEventListener("keypress",function(t){t.key==="Enter"&&(t.preventDefault(),document.getElementById("searchButton").click())})},methods:{async getRecommendedSkills(){let s="/skills/get-recommended-skills";const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,cohortId:this.userDetailsStore.cohortId,query:this.query})},r=await(await fetch(s,t)).json();this.recommendedSkillsOrderedByRelevance=r,this.showRecommendedSkills=!0},removeRecommendedSkill(s){this.recommendedSkillsOrderedByRelevance.splice(s,1)},async createLearningTrack(){let s="/learning-tracks/"+this.userDetailsStore.userId+"/create",t=this.recommendedSkillsOrderedByRelevance.map(r=>r.id);const c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.query,skills:t})};await fetch(s,c),alert("Learning track created. You can view it on the 'Learning Tracks' tab.")}}},C=s=>(f("data-v-b7655445"),s=s(),S(),s),vs={class:"search-bar"},ys={class:"d-flex align-items-center p-1"},ws=C(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",class:"tertiary-icon"},[e("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})],-1)),Ts=[ws],bs={key:0},Ds=C(()=>e("h2",{class:"secondary-heading h5 bg-white rounded p-2 mt-2"}," Recommended Skills ",-1)),Is=["onClick"],Ls=C(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:"18",class:"tertiary-icon"},[e("path",{d:"M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"})],-1)),Cs=[Ls];function $s(s,t,c,r,l,a){const d=h("router-link");return i(),n(p,null,[e("div",vs,[e("div",ys,[M(e("input",{id:"searchBar",type:"text",class:"recommended-skills-input",placeholder:"What skill or profession do you want to learn?","onUpdate:modelValue":t[0]||(t[0]=o=>l.query=o)},null,512),[[B,l.query]]),e("button",{id:"searchButton",onClick:t[1]||(t[1]=(...o)=>a.getRecommendedSkills&&a.getRecommendedSkills(...o)),class:"btn primary-btn rounded p-2"},Ts)])]),l.showRecommendedSkills?(i(),n("div",bs,[Ds,(i(!0),n(p,null,w(l.recommendedSkillsOrderedByRelevance,(o,b)=>(i(),n("div",null,[y(d,{class:I([{"grade-school":o.level=="grade_school","middle-school":o.level=="middle_school","high-school":o.level=="high_school",college:o.level=="college",phd:o.level=="phd"},"skill-link btn m-1"]),to:`/skills/${o.url}`,target:"_blank"},{default:T(()=>[D(m(o.name),1)]),_:2},1032,["class","to"]),e("button",{class:"btn red-btn",onClick:$=>a.removeRecommendedSkill(b)},Cs,8,Is)]))),256)),e("button",{class:"btn primary-btn mt-3",onClick:t[2]||(t[2]=(...o)=>a.createLearningTrack&&a.createLearningTrack(...o))}," Create learning track ")])):u("",!0)],64)}const xs=g(Ss,[["render",$s],["__scopeId","data-v-b7655445"]]);const Rs={setup(){const s=L(),t=A(),c=j(),r=x(),l=O();return s.getUserDetails(),{userDetailsStore:s,assessmentsStore:t,usersStore:c,skillsStore:r,instructorStudentsStore:l}},data(){return{showWelcomeModal:!1,assessments:[],questions:[],studentIds:[],isTutorialComplete:!1,showTutorialTip1:!1,showTutorialTip2:!1,showTutorialTip3:!1,showTutorialTip4:!1}},components:{MarkAssessment:ns,LastVisitedSkills:P,Goals:J,HubStudentQuestionList:fs,RecommendedSkillsGenerator:xs},computed:{name(){return this.userDetailsStore.firstName+" "+this.userDetailsStore.lastName}},async created(){this.checkIfTutorialComplete(),this.userDetailsStore.role=="instructor"&&(await this.fetchAssessments(),await this.getStudentMCQuestions())},methods:{async fetchAssessments(){await this.assessmentsStore.getAssessments(),this.instructorStudentsStore.instructorStudentsList.length==0&&await this.instructorStudentsStore.getInstructorStudentsList();for(let s=0;s<this.instructorStudentsStore.instructorStudentsList.length;s++)this.userDetailsStore.userId==this.instructorStudentsStore.instructorStudentsList[s].instructor_id&&this.studentIds.push(this.instructorStudentsStore.instructorStudentsList[s].student_id);for(let s=0;s<this.assessmentsStore.assessments.length;s++)for(let t=0;t<this.studentIds.length;t++)this.assessmentsStore.assessments[s].student_id==this.studentIds[t]&&this.assessments.push(this.assessmentsStore.assessments[s]);for(let s=0;s<this.assessments.length;s++){let t=new Date(this.assessments[s].date).toDateString();this.assessments[s].date=t}this.usersStore.users.length==0&&await this.usersStore.getUsers();for(let s=0;s<this.assessments.length;s++)for(let t=0;t<this.usersStore.users.length;t++)this.assessments[s].student_id==this.usersStore.users[t].id&&(this.assessments[s].studentUsername=this.usersStore.users[t].username);this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let s=0;s<this.assessments.length;s++)for(let t=0;t<this.skillsStore.skillsList.length;t++)this.assessments[s].skill_id==this.skillsStore.skillsList[t].id&&(this.assessments[s].skillName=this.skillsStore.skillsList[t].name)},async getStudentMCQuestions(){const t=await(await fetch("/questions/student-mc-questions/full-data-list")).json();this.questions=t},async checkIfTutorialComplete(){try{const t=await(await fetch("/users/check-tutorial-progress/hub/"+this.userDetailsStore.userId)).json();t===0&&this.userDetailsStore.role!="student"?this.showWelcomeModal=!0:t===0&&this.userDetailsStore.role=="student"?this.showTutorialTip1=!0:t===1&&(this.isTutorialComplete=!0)}catch(s){console.error("Error checking tutorial progress:",s)}},progressTutorial(s){s==1?(this.showTutorialTip1=!1,this.showTutorialTip2=!0):s==2?(this.showTutorialTip2=!1,this.showTutorialTip3=!0):s==3?(this.showTutorialTip3=!1,this.showTutorialTip4=!0):s==4&&(this.showTutorialTip4=!1,this.markTutorialComplete())},markTutorialComplete(){let s="/users/mark-tutorial-complete/hub/"+this.userDetailsStore.userId;fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"}})},async startTutorial(){this.showTutorialTip1=!0,this.isTutorialComplete=!1,this.showWelcomeModal=!1,await this.resetTutorialProgress()},async resetTutorialProgress(){try{await fetch(`/users/reset-all-tutorials/${this.userDetailsStore.userId}`,{method:"PUT",headers:{"Content-Type":"application/json"}})}catch(s){console.error("Error resetting tutorials:",s)}},async closeTutorial(){this.showWelcomeModal=!1,await this.markAllTutorialsComplete()},restartTutorial(){this.startTutorial()},async markAllTutorialsComplete(){try{(await fetch(`/users/mark-all-tutorials-complete/${this.userDetailsStore.userId}`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok?this.isTutorialComplete=!0:console.error("Error marking tutorials as complete.")}catch(s){console.error("API request failed:",s)}}}},k=s=>(f("data-v-8995c5c6"),s=s(),S(),s),qs={class:"container-fluid d-flex justify-content-end my-1"},Ms=k(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[e("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),Bs=[Ms],js={class:"container min-vh-100"},As={class:"row mb-5"},Os={class:"col"},zs={key:0,class:"info-panel bg-light rounded p-2 mt-2"},Us=k(()=>e("p",null,"Type a career or skill here to get recommendations.",-1)),Ns={class:"row"},Vs={class:"col-md-6 mb-2"},Gs={class:"h-100"},Es={key:0,class:"info-panel bg-light rounded p-2 mb-2"},Ps=k(()=>e("p",null," This section shows your the last 5 skill pages you visited. ",-1)),Ws={key:0,class:"col-md-6 mb-2"},Qs={class:"h-100"},Hs={key:0,class:"info-panel bg-light rounded p-2 mb-2"},Ys=k(()=>e("p",null,"This section shows any goals you might have made.",-1)),Fs=k(()=>e("p",null," You can make a goal when there is a skill you want to master but it is not unlocked yet. ",-1)),Js={key:0,class:"modal"},Zs={class:"modal-content"},Ks=k(()=>e("h1",{class:"heading h3"},"Welcome to the Collins Institute",-1)),Xs=k(()=>e("p",null,"Would you like to go through the tutorial?",-1)),st=k(()=>e("p",null,' You can start or restart it anytime by clicking the "i" button on any page. ',-1)),tt={class:"d-flex justify-content-between"},et={key:1,class:"modal"},ot={key:0,class:"modal-content"},it=k(()=>e("p",null,"This is your hub page.",-1));function rt(s,t,c,r,l,a){const d=h("RecommendedSkillsGenerator"),o=h("LastVisitedSkills"),b=h("MarkAssessment"),$=h("Goals"),q=h("HubStudentQuestionList");return i(),n(p,null,[e("div",qs,[e("button",{class:"btn",onClick:t[0]||(t[0]=(..._)=>a.restartTutorial&&a.restartTutorial(..._))},Bs)]),e("div",js,[e("div",As,[e("div",Os,[y(d),l.showTutorialTip2&&r.userDetailsStore.role=="student"?(i(),n("div",zs,[Us,e("button",{class:"btn primary-btn",onClick:t[1]||(t[1]=_=>a.progressTutorial(2))}," next ")])):u("",!0)])]),e("div",Ns,[e("div",Vs,[e("div",Gs,[l.showTutorialTip3&&r.userDetailsStore.role=="student"?(i(),n("div",Es,[Ps,e("button",{class:"btn primary-btn",onClick:t[2]||(t[2]=_=>a.progressTutorial(3))}," next ")])):u("",!0),r.userDetailsStore.role=="student"?(i(),v(o,{key:1,userId:r.userDetailsStore.userId},null,8,["userId"])):u("",!0),r.userDetailsStore.role=="instructor"?(i(),v(b,{key:2,assessments:l.assessments},null,8,["assessments"])):u("",!0)])]),r.userDetailsStore.role=="student"?(i(),n("div",Ws,[e("div",Qs,[l.showTutorialTip4&&r.userDetailsStore.role=="student"?(i(),n("div",Hs,[Ys,Fs,e("button",{class:"btn primary-btn",onClick:t[3]||(t[3]=_=>a.progressTutorial(4))}," close ")])):u("",!0),y($),r.userDetailsStore.role=="instructor"?(i(),v(q,{key:1,questions:l.questions},null,8,["questions"])):u("",!0)])])):u("",!0)])]),l.showWelcomeModal?(i(),n("div",Js,[e("div",Zs,[Ks,Xs,st,e("div",tt,[e("button",{class:"btn red-btn mx-0",onClick:t[4]||(t[4]=(..._)=>a.closeTutorial&&a.closeTutorial(..._))}," No "),e("button",{class:"btn primary-btn mx-0",onClick:t[5]||(t[5]=(..._)=>a.startTutorial&&a.startTutorial(..._))}," Yes ")])])])):u("",!0),r.userDetailsStore.role=="student"&&l.showTutorialTip1?(i(),n("div",et,[l.showTutorialTip1&&r.userDetailsStore.role=="student"?(i(),n("div",ot,[e("div",null,[it,e("button",{class:"btn primary-btn",onClick:t[6]||(t[6]=_=>a.progressTutorial(1))}," next ")])])):u("",!0)])):u("",!0)],64)}const ct=g(Rs,[["render",rt],["__scopeId","data-v-8995c5c6"]]);export{ct as default};
