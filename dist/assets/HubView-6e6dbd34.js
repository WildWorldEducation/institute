import{_ as T,r as p,o,c as i,d as t,F as g,t as D,i as y,j as v,m as k,x as f,l as S,p as b,f as x,a as C,g as B,h as L,w as M,A as z,e as I,b as d}from"./main-0e57434e.js";import{T as q}from"./tutorLoadingSymbol-f4b792c7.js";import{_ as O}from"./app-logo-6a421005.js";const j={data(){return{visitedSkills:[],noSkills:!0}},props:["userId"],async created(){const e=await fetch("/skills/last-visited/");this.visitedSkills=await e.json(),this.visitedSkills.length>0&&(this.noSkills=!1)},computed:{}},G=e=>(b("data-v-35618965"),e=e(),x(),e),A=G(()=>t("h2",{class:"tertiary-heading h5"},"Last Visited Skills",-1)),V={id:"skill-list",class:"d-flex flex-wrap"},N=["src"];function $(e,s,m,l,c,a){const _=p("router-link");return o(),i(g,null,[A,t("div",V,[(o(!0),i(g,null,D(c.visitedSkills,r=>(o(),y(_,{class:S([{"grade-school":r.level=="grade_school","middle-school":r.level=="middle_school","high-school":r.level=="high_school",college:r.level=="college",phd:r.level=="phd"},"skill-link btn m-2 d-flex"]),to:`/skills/${r.url}`,target:"_blank"},{default:v(()=>[t("img",{class:"icons",src:r.icon},null,8,N),k("  "+f(r.name),1)]),_:2},1032,["class","to"]))),256))])],64)}const P=T(j,[["render",$],["__scopeId","data-v-35618965"]]);const W={setup(){const e=C(),s=B();return{userDetailsStore:e,skillsStore:s}},data(){return{goals:[]}},async created(){await this.getGoals(),this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let e=0;e<this.goals.length;e++){let s=this.skillsStore.skillsList.find(m=>m.id===this.goals[e].skill_id);this.goals[e].name=s.name,this.goals[e].level=s.level}},methods:{async getGoals(){const e=await fetch("/user-skills/goals/"+this.userDetailsStore.userId+"/list");this.goals=await e.json()}}},R=e=>(b("data-v-e018bd50"),e=e(),x(),e),E=R(()=>t("h2",{class:"tertiary-heading h5"},"Goals",-1)),F={id:"goal-list"},U=R(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"black",width:"20",heigth:"20"},[t("path",{d:"M448 256A192 192 0 1 0 64 256a192 192 0 1 0 384 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 80a80 80 0 1 0 0-160 80 80 0 1 0 0 160zm0-224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zM224 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1));function Y(e,s,m,l,c,a){const _=p("router-link");return o(),i(g,null,[E,t("div",F,[(o(!0),i(g,null,D(c.goals,r=>(o(),y(_,{class:S([{"grade-school":r.level=="grade_school","middle-school":r.level=="middle_school","high-school":r.level=="high_school",college:r.level=="college",phd:r.level=="phd"},"goal-link btn m-2 d-flex"]),to:`/goals/${l.userDetailsStore.userId}/`+r.skill_id,target:"_blank"},{default:v(()=>[U,k("   "+f(r.name),1)]),_:2},1032,["class","to"]))),256))])],64)}const J=T(W,[["render",Y],["__scopeId","data-v-e018bd50"]]);const H={setup(){const e=C(),s=L();return e.getUserDetails(),{userDetailsStore:e,sessionDetailsStore:s}},data(){return{query:"",recommendedSkillsOrderedByRelevance:[],showRecommendedSkills:!1,waitForAIresponse:!1}},components:{TutorLoadingSymbol:q},mounted(){var e=document.getElementById("searchBar");e.addEventListener("keypress",function(s){if(s.key==="Enter"){if(this.query===""||this.query===null)return;s.preventDefault(),document.getElementById("searchButton").click()}})},methods:{async getRecommendedSkills(){if(this.waitForAIresponse=!0,this.query===""||this.query===null)return;let e="/skills/get-recommended-skills";const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,cohortId:this.userDetailsStore.cohortId,query:this.query})},l=await(await fetch(e,s)).json();if(this.waitForAIresponse=!1,l.length===0){alert("can`t find any result that match yours need"),this.showRecommendedSkills=!1;return}this.recommendedSkillsOrderedByRelevance=l,this.showRecommendedSkills=!0},async getRecommendedSkillsGuestMode(){if(this.waitForAIresponse=!0,this.query===""||this.query===null)return;let e="/skills/guest-user/get-recommended-skills";const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,cohortId:this.userDetailsStore.cohortId,query:this.query})},l=await(await fetch(e,s)).json();this.recommendedSkillsOrderedByRelevance=l,this.waitForAIresponse=!1,this.recommendedSkillsOrderedByRelevance||(this.showRecommendedSkills=!1),this.showRecommendedSkills=!0},removeRecommendedSkill(e){this.recommendedSkillsOrderedByRelevance.splice(e,1)},async createLearningTrack(){let e="/learning-tracks/"+this.userDetailsStore.userId+"/create",s=this.recommendedSkillsOrderedByRelevance.map(l=>l.id);const m={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.query,skills:s})};await fetch(e,m),alert("Learning track created. You can view it on the 'Learning Tracks' tab.")}},watch:{recommendedSkillsOrderedByRelevance:{handler(e){e.length===0&&(this.showRecommendedSkills=!1)},deep:!0}}},w=e=>(b("data-v-05487f09"),e=e(),x(),e),K={class:"search-bar"},Q={class:"d-flex align-items-center p-1"},X=w(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",class:"tertiary-icon"},[t("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})],-1)),Z=[X],ee=w(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",class:"tertiary-icon"},[t("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})],-1)),te=[ee],se={key:0,class:"ai-tutor-processing mt-1"},oe=w(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"18",height:"18",fill:"black"},[t("path",{d:"M320 0c17.7 0 32 14.3 32 32l0 64 120 0c39.8 0 72 32.2 72 72l0 272c0 39.8-32.2 72-72 72l-304 0c-39.8 0-72-32.2-72-72l0-272c0-39.8 32.2-72 72-72l120 0 0-64c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224l16 0 0 192-16 0c-26.5 0-48-21.5-48-48l0-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48l0 96c0 26.5-21.5 48-48 48l-16 0 0-192 16 0z"})],-1)),le={key:1},ie=w(()=>t("h2",{class:"secondary-heading h5 bg-white rounded p-2 mt-2"}," Recommended Skills ",-1)),re={class:"d-flex flex-row align-items-end"},ae=["onClick"],ne=w(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",fill:"white",height:"11",width:"11"},[t("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})],-1)),ce=[ne];function de(e,s,m,l,c,a){const _=p("TutorLoadingSymbol"),r=p("router-link");return o(),i(g,null,[t("div",K,[t("div",Q,[M(t("input",{id:"searchBar",type:"text",class:"recommended-skills-input",placeholder:"What skill or profession do you want to learn?","onUpdate:modelValue":s[0]||(s[0]=n=>c.query=n)},null,512),[[z,c.query]]),l.sessionDetailsStore.isLoggedIn?(o(),i("button",{key:0,id:"searchButton",onClick:s[1]||(s[1]=(...n)=>a.getRecommendedSkills&&a.getRecommendedSkills(...n)),class:"btn primary-btn rounded p-2"},Z)):(o(),i("button",{key:1,id:"searchButton",onClick:s[2]||(s[2]=(...n)=>a.getRecommendedSkillsGuestMode&&a.getRecommendedSkillsGuestMode(...n)),class:"btn primary-btn rounded p-2"},te))])]),c.waitForAIresponse?(o(),i("div",se,[oe,k(" Thinking "),I(_)])):d("",!0),c.showRecommendedSkills?(o(),i("div",le,[ie,t("div",{class:S([{"d-flex flex-wrap":!l.sessionDetailsStore.isLoggedIn},"recommended-skills-wrapper"])},[(o(!0),i(g,null,D(c.recommendedSkillsOrderedByRelevance,(n,h)=>(o(),i("div",re,[l.sessionDetailsStore.isLoggedIn?(o(),y(r,{key:0,class:S([{"grade-school":n.level=="grade_school","middle-school":n.level=="middle_school","high-school":n.level=="high_school",college:n.level=="college",phd:n.level=="phd"},"skill-link btn m-1"]),to:`/skills/${n.url}`,target:"_blank"},{default:v(()=>[k(f(n.name),1)]),_:2},1032,["class","to"])):(o(),y(r,{key:1,class:"skill-link btn m-1 skill-btn",to:`/skills/${n.url}`,target:"_blank"},{default:v(()=>[k(f(n.name),1)]),_:2},1032,["to"])),l.sessionDetailsStore.isLoggedIn?(o(),i("button",{key:2,"b-tooltip.hover":"",tile:"remove skill from learning track",class:"red-btn small-btn",onClick:Je=>a.removeRecommendedSkill(h)},ce,8,ae)):d("",!0)]))),256))],2),l.sessionDetailsStore.isLoggedIn?(o(),i("button",{key:0,class:"btn primary-btn mt-3",onClick:s[3]||(s[3]=(...n)=>a.createLearningTrack&&a.createLearningTrack(...n))}," Create learning track ")):d("",!0)])):d("",!0)],64)}const he=T(H,[["render",de],["__scopeId","data-v-05487f09"]]);const ue={setup(){const e=C(),s=L();return e.getUserDetails(),{userDetailsStore:e,sessionDetailsStore:s}},data(){return{showWelcomeModal:!1,isTutorialComplete:!1,showTutorialTip1:!1,showTutorialTip2:!1,showTutorialTip3:!1,showTutorialTip4:!1}},components:{LastVisitedSkills:P,Goals:J,RecommendedSkillsGenerator:he},computed:{name(){return this.userDetailsStore.firstName+" "+this.userDetailsStore.lastName}},async created(){this.sessionDetailsStore.isLoggedIn&&this.checkIfTutorialComplete()},methods:{async checkIfTutorialComplete(){try{const s=await(await fetch("/users/check-tutorial-progress/hub/"+this.userDetailsStore.userId)).json();s===0&&this.userDetailsStore.role!="student"?this.showWelcomeModal=!0:s===0&&this.userDetailsStore.role=="student"?this.showTutorialTip1=!0:s===1&&(this.isTutorialComplete=!0)}catch(e){console.error("Error checking tutorial progress:",e)}},progressTutorial(e){e==1?(this.showTutorialTip1=!1,this.showTutorialTip2=!0):e==2?(this.showTutorialTip2=!1,this.showTutorialTip3=!0):e==3?(this.showTutorialTip3=!1,this.showTutorialTip4=!0):e==4&&(this.showTutorialTip4=!1,this.markTutorialComplete())},markTutorialComplete(){let e="/users/mark-tutorial-complete/hub/"+this.userDetailsStore.userId;fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"}})},async startTutorial(){this.showTutorialTip1=!0,this.isTutorialComplete=!1,this.showWelcomeModal=!1,await this.resetTutorialProgress()},async resetTutorialProgress(){try{await fetch(`/users/reset-all-tutorials/${this.userDetailsStore.userId}`,{method:"PUT",headers:{"Content-Type":"application/json"}})}catch(e){console.error("Error resetting tutorials:",e)}},async closeTutorial(){this.showWelcomeModal=!1,await this.markAllTutorialsComplete()},restartTutorial(){this.startTutorial()},async markAllTutorialsComplete(){try{(await fetch(`/users/mark-all-tutorials-complete/${this.userDetailsStore.userId}`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok?this.isTutorialComplete=!0:console.error("Error marking tutorials as complete.")}catch(e){console.error("API request failed:",e)}}}},u=e=>(b("data-v-e1687833"),e=e(),x(),e),me={key:0,class:"container-fluid d-flex info-btn"},_e=u(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[t("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),pe=[_e],ge=u(()=>t("div",{class:"text-center app-logo-wrapper"},[t("img",{class:"img-fluid",src:O,alt:"icon of a skill tree"})],-1)),ke={class:"container"},ye={class:"row mb-4"},we={class:"col"},ve={key:0,class:"tool-tip-base",style:{maxWidth:"300px"}},fe={class:"explain-tool-tip triangle-top-left"},Se={class:"tool-tip-text"},Te=u(()=>t("p",null," Type a career or skill here to get recommendations. ",-1)),be={key:0,class:"row"},xe={class:"col mb-2"},Ie={class:"h-100"},De={key:0,class:"tool-tip-base mb-3"},Ce={class:"explain-tool-tip triangle-bottom-left"},Le={class:"tool-tip-text"},Re=u(()=>t("p",null," This section shows your the last 5 skill pages you visited. ",-1)),Be={key:0,class:"col-md-6 mb-2"},Me={class:"h-100"},ze={key:0,class:"tool-tip-base mb-3"},qe={class:"explain-tool-tip triangle-bottom-left"},Oe={class:"tool-tip-text"},je=u(()=>t("p",null," This section shows any goals you might have made. ",-1)),Ge=u(()=>t("p",null," You can make a goal when there is a skill you want to master but it is not unlocked yet. ",-1)),Ae={key:1,class:"modal"},Ve={class:"modal-content"},Ne=u(()=>t("h1",{class:"heading h3"},"Welcome to the Collins Institute",-1)),$e=u(()=>t("p",null,"Would you like to go through the tutorial?",-1)),Pe=u(()=>t("p",null,' You can start or restart it anytime by clicking the "i" button on any page. ',-1)),We={class:"d-flex justify-content-between"},Ee={key:2,class:"modal"},Fe={key:0,class:"modal-content"},Ue=u(()=>t("p",null,"This is your hub page.",-1));function Ye(e,s,m,l,c,a){const _=p("RecommendedSkillsGenerator"),r=p("LastVisitedSkills"),n=p("Goals");return o(),i(g,null,[l.sessionDetailsStore.isLoggedIn?(o(),i("div",me,[t("button",{class:"btn",onClick:s[0]||(s[0]=(...h)=>a.restartTutorial&&a.restartTutorial(...h))},pe)])):d("",!0),ge,t("div",ke,[t("div",ye,[t("div",we,[I(_),c.showTutorialTip2&&l.userDetailsStore.role=="student"?(o(),i("div",ve,[t("div",fe,[t("div",Se,[Te,t("button",{class:"btn primary-btn",onClick:s[1]||(s[1]=h=>a.progressTutorial(2))}," next ")])])])):d("",!0)])]),l.sessionDetailsStore.isLoggedIn?(o(),i("div",be,[t("div",xe,[t("div",Ie,[c.showTutorialTip3&&l.userDetailsStore.role=="student"?(o(),i("div",De,[t("div",Ce,[t("div",Le,[Re,t("button",{class:"btn primary-btn",onClick:s[2]||(s[2]=h=>a.progressTutorial(3))}," next ")])])])):d("",!0),l.userDetailsStore.role=="student"?(o(),y(r,{key:1,userId:l.userDetailsStore.userId},null,8,["userId"])):d("",!0)])]),l.userDetailsStore.role=="xyz"?(o(),i("div",Be,[t("div",Me,[c.showTutorialTip4&&l.userDetailsStore.role=="student"?(o(),i("div",ze,[t("div",qe,[t("div",Oe,[je,Ge,t("button",{class:"btn primary-btn",onClick:s[3]||(s[3]=h=>a.progressTutorial(4))}," close ")])])])):d("",!0),I(n)])])):d("",!0)])):d("",!0)]),c.showWelcomeModal?(o(),i("div",Ae,[t("div",Ve,[Ne,$e,Pe,t("div",We,[t("button",{class:"btn red-btn mx-0",onClick:s[4]||(s[4]=(...h)=>a.closeTutorial&&a.closeTutorial(...h))}," No "),t("button",{class:"btn primary-btn mx-0",onClick:s[5]||(s[5]=(...h)=>a.startTutorial&&a.startTutorial(...h))}," Yes ")])])])):d("",!0),l.userDetailsStore.role=="student"&&c.showTutorialTip1?(o(),i("div",Ee,[c.showTutorialTip1&&l.userDetailsStore.role=="student"?(o(),i("div",Fe,[t("div",null,[Ue,t("button",{class:"btn primary-btn",onClick:s[6]||(s[6]=h=>a.progressTutorial(1))}," next ")])])):d("",!0)])):d("",!0)],64)}const Xe=T(ue,[["render",Ye],["__scopeId","data-v-e1687833"]]);export{Xe as default};
