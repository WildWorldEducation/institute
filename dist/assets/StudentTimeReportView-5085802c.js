import{_,A as p,r as a,o,c as r,a as s,t as l,k as d,b as u,F as k}from"./main-9f13def8.js";import{T as y,S as D}from"./StudentDurationPerDayLineChart-54a86fce.js";import"./transform-62bed377.js";import"./linear-c1216a03.js";import"./band-22321830.js";import"./ordinal-3694ef9e.js";import"./sort-a49d696f.js";import"./line-61e28c6d.js";import"./time-8a8f3333.js";import"./point-ea70dc51.js";const S={setup(){return{usersStore:p()}},components:{TimePerSkillHorizontalBarChart:y,StudentDurationPerDayLineChart:D},data(){return{studentId:this.$route.params.studentId,studentName:null,skillDurations:[],durationsPerDay:[],allSkillsDuration:0,isDataLoaded:!1}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const t=this.usersStore.users.find(e=>e.id===this.studentId);t&&(this.studentName=t.username),await this.getSkillDuration(),await this.getAllSkillsDuration(),await this.getStudentDurationPerDay(),this.isDataLoaded=!0},methods:{async getSkillDuration(){fetch(`/student-analytics/skill-durations/${this.studentId}`).then(t=>t.json()).then(t=>{this.skillDurations=t;for(let e=0;e<this.skillDurations.length;e++)this.skillDurations[e].formattedQuantity=this.millisToMinutesAndSeconds(this.skillDurations[e].quantity)}).catch(t=>{console.error("Error fetching last visited skills:",t)})},async getAllSkillsDuration(){fetch(`/student-analytics/all-skills-duration/${this.studentId}`).then(t=>t.json()).then(t=>{this.allSkillsDuration=t.duration}).catch(t=>{console.error("Error fetching last visited skills:",t)})},async getStudentDurationPerDay(){fetch(`/student-analytics/student-duration-per-day/${this.studentId}`).then(t=>t.json()).then(t=>{for(let e=0;e<t.length;e++)t[e].formattedQuantity=t[e].quantity/1e3,t[e].date=new Date(t[e].date);t.sort((e,i)=>e.date-i.date),this.durationsPerDay=t}).catch(t=>{console.error("Error fetching student duration per day:",t)})},millisToMinutesAndSeconds(t){var e=Math.floor(t/6e4),i=(t%6e4/1e3).toFixed(0);return e+":"+(i<10?"0":"")+i}}},f={class:"container"},g={class:"d-flex justify-content-between w-100"},P=s("h1",{class:"heading"},"Time Report",-1),T={class:"secondary-heading h3"},v=s("p",null,[s("em",null," Please note that time spent on external sources (e.g. websites) related to skills is not measured.")],-1),w={key:0},C=s("h2",{class:"secondary-heading"},"Total time on platform",-1),A=s("h2",{class:"secondary-heading"},"All skills",-1),B=s("h2",{class:"secondary-heading"},"Minutes per skill",-1),x={key:2},I=s("p",null,"No skills visited by this student.",-1),L=[I],N=s("p",null,"Â ",-1);function b(t,e,i,j,n,c){const h=a("StudentDurationPerDayLineChart"),m=a("TimePerSkillHorizontalBarChart");return o(),r(k,null,[s("div",f,[s("span",g,[P,s("h2",T,l(n.studentName),1)]),v,n.isDataLoaded?(o(),r("div",w,[C,n.durationsPerDay.length>0?(o(),d(h,{key:0,data:n.durationsPerDay},null,8,["data"])):u("",!0),A,s("p",null,l(c.millisToMinutesAndSeconds(this.allSkillsDuration)),1),B,n.skillDurations.length>0?(o(),d(m,{key:1,data:n.skillDurations,colour:"darkgreen"},null,8,["data"])):(o(),r("div",x,L))])):u("",!0)]),N],64)}const O=_(S,[["render",b]]);export{O as default};
