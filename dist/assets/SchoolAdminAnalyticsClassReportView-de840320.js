import{u as B}from"./CohortsStore-d911d57f.js";import{_ as S,o as h,c as p,f as $,r as _,a as c,t as R,b as L,k as b,g as M,p as z,d as D}from"./main-85e56c1f.js";import{u as q}from"./AnalyticsStore-bbc48615.js";import{C as T}from"./CohortProgressLineChart-cde26ac5.js";import"./transform-af9a74a2.js";import{o as H,m as C,b as k}from"./continuous-7328829e.js";import{o as I,s as g}from"./string-dd82ab4a.js";import{c as O}from"./colors-98f238a0.js";import{p as F,a as P,C as N}from"./CohortDurationPerDayLineChart-843de4c0.js";import{C as E}from"./CohortSkillActivityChart-253ce607.js";import{l as A,c as w,b as x}from"./linear-5b188edc.js";import{s as v}from"./sort-ed61f96d.js";import"./line-85f04100.js";import"./time-0457d93b.js";import"./point-ea70dc51.js";import"./extent-4cf1c809.js";function V(e,a){for(var n=new Array(a),o=0;o<a;++o)n[o]=e(o/(a-1));return n}const U=e=>I(e[e.length-1]);var Q=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(O);const W=U(Q),G={name:"CohortPercentageStudentsMasteredAtLeastOneSkillPieChart",data(){return{}},mounted(){this.clearChart()},methods:{async clearChart(){g("#cohort-percentage-students-mastered-one-skill-chart-container").selectAll("*").remove()},async generateChart(){this.clearChart();const e=g("#cohort-percentage-students-mastered-one-skill-chart-container");let a=this.$parent.percentageStudentsMasteredOneSkill;if(a[0].value==0&&a[1].value==0){e.append("p").text("No data available.");return}const n=928,o=Math.min(n,250);H().domain(a.map(s=>s.name)).range(V(s=>W(s*.8+.1),a.length).reverse());const d=F().sort(null).value(s=>s.value),l=P().innerRadius(0).outerRadius(Math.min(n,o)/2-1),u=l.outerRadius()()*.6,r=P().innerRadius(u).outerRadius(u),i=d(a),f=g("#cohort-percentage-students-mastered-one-skill-chart-container").append("svg").attr("width",n).attr("height",o).attr("viewBox",[-n/2,-o/2,n,o]).attr("style","max-width: 100%; height: auto; font: 10px sans-serif;");f.append("g").attr("stroke","white").selectAll().data(i).join("path").attr("fill",s=>{if(s.data.name==="Mastered one skill")return"darkgreen";if(s.data.name==="Mastered no skills")return"darkred"}).attr("d",l).append("title").text(s=>`${s.data.name}: ${s.data.value.toLocaleString("en-US")}`),f.append("g").attr("text-anchor","middle").selectAll().data(i).join("text").attr("transform",s=>`translate(${r.centroid(s)})`).call(s=>s.append("tspan").attr("y","-0.4em").attr("fill","white").attr("font-weight","bold").text(t=>t.data.name)).call(s=>s.filter(t=>t.endAngle-t.startAngle>.25).append("tspan").attr("x",0).attr("fill","white").attr("y","1em").attr("fill-opacity",1).text(t=>t.data.value.toLocaleString("en-US")))}}},J={id:"cohort-percentage-students-mastered-one-skill-chart-container"};function K(e,a,n,o,d,l){return h(),p("div",J)}const X=S(G,[["render",K]]),Y={name:"CohortFailedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){g("#cohort-failed-assessments-by-root-subject-chart-container");const e=25,a=0,n=0,o=10,d=200,l=1e3,u=Math.ceil((this.data.length+.1)*e)+a+o,r=A().domain([0,C(this.data,t=>t.quantity)]).range([d,l-n]),i=k().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([a,u-o]).padding(.1),f=r.tickFormat(20),s=g("#cohort-failed-assessments-by-root-subject-chart-container").append("svg").attr("width",l).attr("height",u).attr("viewBox",[0,0,l,u]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");s.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",r(0)).attr("y",t=>i(t.name)).attr("width",t=>r(t.quantity)-r(0)).attr("height",i.bandwidth()),s.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>r(t.quantity)).attr("y",t=>i(t.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>f(t.quantity)).call(t=>t.filter(y=>r(y.quantity)-r(0)<20).attr("dx",4).attr("fill","white").attr("text-anchor","start")),s.append("g").attr("transform",`translate(0,${a})`).call(w(r).ticks(0)).call(t=>t.select(".domain").remove()),s.append("g").attr("transform",`translate(${d},0)`).attr("style","font-size: 16px").call(x(i).tickSizeOuter(0))}},Z={id:"cohort-failed-assessments-by-root-subject-chart-container"};function tt(e,a,n,o,d,l){return h(),p("div",Z)}const et=S(Y,[["render",tt]]),at={name:"CohortPassedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){g("#cohort-passed-assessments-by-root-subject-chart-container");const e=25,a=0,n=0,o=10,d=200,l=1e3,u=Math.ceil((this.data.length+.1)*e)+a+o,r=A().domain([0,C(this.data,t=>t.quantity)]).range([d,l-n]),i=k().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([a,u-o]).padding(.1),f=r.tickFormat(20),s=g("#cohort-passed-assessments-by-root-subject-chart-container").append("svg").attr("width",l).attr("height",u).attr("viewBox",[0,0,l,u]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");s.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",r(0)).attr("y",t=>i(t.name)).attr("width",t=>r(t.quantity)-r(0)).attr("height",i.bandwidth()),s.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>r(t.quantity)).attr("y",t=>i(t.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>f(t.quantity)).call(t=>t.filter(y=>r(y.quantity)-r(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),s.append("g").attr("transform",`translate(0,${a})`).call(w(r).ticks(0)).call(t=>t.select(".domain").remove()),s.append("g").attr("transform",`translate(${d},0)`).attr("style","font-size: 16px").call(x(i).tickSizeOuter(0))},computed:{}},st={id:"cohort-passed-assessments-by-root-subject-chart-container"};function ot(e,a,n,o,d,l){return h(),p("div",st)}const rt=S(at,[["render",ot]]),nt={name:"CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){g("#cohort-attempted-assessments-by-root-subject-chart-container");const e=25,a=0,n=0,o=10,d=200,l=1e3,u=Math.ceil((this.data.length+.1)*e)+a+o,r=A().domain([0,C(this.data,t=>t.quantity)]).range([d,l-n]),i=k().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([a,u-o]).padding(.1),f=r.tickFormat(20),s=g("#cohort-attempted-assessments-by-root-subject-chart-container").append("svg").attr("width",l).attr("height",u).attr("viewBox",[0,0,l,u]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");s.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",r(0)).attr("y",t=>i(t.name)).attr("width",t=>r(t.quantity)-r(0)).attr("height",i.bandwidth()),s.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>r(t.quantity)).attr("y",t=>i(t.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>f(t.quantity)).call(t=>t.filter(y=>r(y.quantity)-r(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),s.append("g").attr("transform",`translate(0,${a})`).call(w(r).ticks(0)).call(t=>t.select(".domain").remove()),s.append("g").attr("transform",`translate(${d},0)`).attr("style","font-size: 16px").call(x(i).tickSizeOuter(0))},computed:{}},it={id:"cohort-attempted-assessments-by-root-subject-chart-container"};function ct(e,a,n,o,d,l){return h(),p("div",it)}const dt=S(nt,[["render",ct]]);const lt={setup(){const e=B(),a=$(),n=q();return{cohortsStore:e,userDetailsStore:a,analyticsStore:n}},data(){return{teacherId:this.$route.params.teacherId,isMobileCheck:window.innerWidth,percentageStudentsMasteredOneSkill:[],isLoaded:!1,classProgress:[],durationsPerDay:[]}},async created(){await this.getTenantClassProgress(),await this.getInstructorPercentageStudentsMasteredAtLeastOneSkill(),await this.getTenantClassDurationPerDay(),await this.analyticsStore.getTeacherClassSkillActivityReport(this.teacherId),await this.analyticsStore.getTeacherClassFailedAssessmentsBySubject(this.teacherId),await this.analyticsStore.getTeacherClassPassedAssessmentsBySubject(this.teacherId),await this.analyticsStore.getTeacherClassAttemptedAssessmentsBySubject(this.teacherId)},components:{CohortPercentageStudentsMasteredAtLeastOneSkillPieChart:X,CohortProgressLineChart:T,CohortDurationPerDayLineChart:N,CohortSkillActivityChart:E,CohortFailedAssessmentsByRootSubjectHorizontalBarChart:et,CohortPassedAssessmentsByRootSubjectHorizontalBarChart:rt,CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart:dt},methods:{async getTenantClassProgress(){fetch(`/student-analytics/all-students-progress/${this.teacherId}`).then(e=>e.json()).then(e=>{for(let a=0;a<e.length;a++)e[a].date=new Date(e[a].date);e.sort((a,n)=>a.date-n.date),this.classProgress=e}).catch(e=>{console.error("Error fetching student progress:",e)})},async getInstructorPercentageStudentsMasteredAtLeastOneSkill(){try{const e=await fetch(`/student-analytics/percentage-students-mastered-one-skill/instructor/${this.teacherId}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json();this.percentageStudentsMasteredOneSkill=Array.isArray(a)?a:[],this.isLoaded=!0,await this.$refs.cohortPercentageStudentsMasteredAtLeastOneSkillPieChart.generateChart()}catch(e){console.error("Error fetching all students failed assessments:",e),this.percentageStudentsMasteredOneSkill=[]}},async getTenantClassDurationPerDay(){fetch(`/student-analytics/all-students-duration-per-day/${this.teacherId}`).then(e=>e.json()).then(e=>{for(let a=0;a<e.length;a++)e[a].formattedQuantity=e[a].quantity/(1e3*60),e[a].date=new Date(e[a].date);e.sort((a,n)=>a.date-n.date),this.durationsPerDay=e}).catch(e=>{console.error("Error fetching student duration per day:",e)})},millisToMinutesAndSeconds(e){var a=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return a+":"+(n<10?"0":"")+n}}},m=e=>(z("data-v-ebaba9d7"),e=e(),D(),e),ht={class:"container bg-light"},mt={key:0,class:"row"},ut={class:"secondary-heading h3"},pt={class:"d-flex justify-content-between"},ft=m(()=>c("h1",{class:"heading"},"Teacher Report",-1)),gt=m(()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[c("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),yt=[gt],_t=m(()=>c("h2",{class:"secondary-heading"},"Engagement",-1)),bt=m(()=>c("h4",null,"Time on platform",-1)),St={key:2},Ct=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),kt=m(()=>c("h4",{class:"mt-4"},"Skills visited",-1)),At={key:4},wt=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),xt=m(()=>c("h2",{class:"secondary-heading mt-5"},"Academics",-1)),vt=m(()=>c("h4",null,"Skill mastery progress",-1)),Pt={key:6},jt=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),Bt=m(()=>c("h4",{class:"mt-4"}," Percentage of students who completed at least one skill ",-1)),$t=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),Rt=m(()=>c("h3",{class:"secondary-heading"},"By subject",-1)),Lt=m(()=>c("h4",{class:""},"Failed more than once",-1)),Mt={key:8},zt=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),Dt=m(()=>c("h4",{class:""},"Passed",-1)),qt={key:10},Tt=m(()=>c("hr",{class:"mt-5 mb-5"},null,-1)),Ht=m(()=>c("h4",{class:""},"Attempted",-1)),It={key:12};function Ot(e,a,n,o,d,l){const u=_("CohortDurationPerDayLineChart"),r=_("CohortSkillActivityChart"),i=_("CohortProgressLineChart"),f=_("CohortPercentageStudentsMasteredAtLeastOneSkillPieChart"),s=_("CohortFailedAssessmentsByRootSubjectHorizontalBarChart"),t=_("CohortPassedAssessmentsByRootSubjectHorizontalBarChart"),y=_("CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart");return h(),p("div",ht,[d.isMobileCheck<576?(h(),p("div",mt,[c("h1",ut,R(this.cohortsStore.selectedCohort.name),1)])):L("",!0),c("div",pt,[ft,c("button",{class:"btn me-1",onClick:a[0]||(a[0]=(...j)=>e.$parent.restartTutorial&&e.$parent.restartTutorial(...j))},yt)]),_t,bt,d.durationsPerDay.length>0?(h(),b(u,{key:1,data:d.durationsPerDay,colour:"#5f31dd",ref:"cohortDurationPerDayLineChart"},null,8,["data"])):(h(),p("p",St,"No data available")),Ct,kt,o.analyticsStore.cohortSkillActivities.length>0?(h(),b(r,{key:3,data:o.analyticsStore.cohortSkillActivities},null,8,["data"])):(h(),p("p",At,"No skills visited by this student.")),wt,xt,vt,d.classProgress.length>0?(h(),b(i,{key:5,data:d.classProgress,colour:"#5f31dd",ref:"cohortProgressLineChart"},null,8,["data"])):(h(),p("p",Pt,"No data available")),jt,Bt,M(f,{ref:"cohortPercentageStudentsMasteredAtLeastOneSkillPieChart",class:"mb-5"},null,512),$t,Rt,Lt,o.analyticsStore.cohortRootSubjectsFailedAssessments.length>0?(h(),b(s,{key:7,data:o.analyticsStore.cohortRootSubjectsFailedAssessments,colour:"darkred",class:"mb-5"},null,8,["data"])):(h(),p("p",Mt,"No data yet")),zt,Dt,o.analyticsStore.cohortRootSubjectsPassedAssessments.length>0?(h(),b(t,{key:9,data:o.analyticsStore.cohortRootSubjectsPassedAssessments,colour:"darkgreen",class:"mb-5"},null,8,["data"])):(h(),p("p",qt,"No data yet")),Tt,Ht,o.analyticsStore.cohortRootSubjectsAttemptedAssessments.length>0?(h(),b(y,{key:11,data:o.analyticsStore.cohortRootSubjectsAttemptedAssessments,colour:"darkblue",class:"mb-5"},null,8,["data"])):(h(),p("p",It,"No data yet"))])}const se=S(lt,[["render",Ot],["__scopeId","data-v-ebaba9d7"]]);export{se as default};
