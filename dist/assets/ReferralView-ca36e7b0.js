import{_ as f,A as m,f as p,o as s,c as o,a as e,t as c,b as l,s as h,F as g,z as y,p as b,d as S}from"./main-2b6e2d7f.js";const k={setup(){const t=m(),r=p();return{usersStore:t,usersDetailsStore:r}},data(){return{referredUserId:this.$route.params.referredUserId,receipts:[],student:null,loading:!0}},async created(){await this.getStudentInfo(),await this.getReferral()},methods:{async getStudentInfo(){try{await this.usersStore.getUsers(),this.student=this.usersStore.users.find(t=>t.id==this.referredUserId),this.student||console.error("Student not found")}catch(t){console.error("Error fetching student info:",t)}},async getReferral(){fetch(`/referrals/get-receipts/${this.referredUserId}`).then(function(t){return t.json()}).then(async t=>{this.receipts=t,console.log(this.receipts),this.loading=!1})},formattedStripeReceiptAmount(t){return(t/100).toLocaleString("en-US",{style:"currency",currency:"USD"})},formattedStripeReceiptDate(t){let r=new Date(t);const u=r.getUTCMonth()+1,_=r.getUTCDate();return r.getUTCFullYear()+"/"+u+"/"+_},getTotalPayments(){return this.receipts.filter(t=>t.status==="completed"||!t.status).reduce((t,r)=>t+parseFloat(r.amount||0),0)},goBack(){this.$router.push("/referrals")}}},i=t=>(b("data-v-5acddc37"),t=t(),S(),t),v={class:"container bg-light rounded"},w={class:"d-flex justify-content-between flex-wrap"},D={key:0,class:"heading"},I={key:1,class:"heading"},U={key:0,class:"text-center py-4"},R=i(()=>e("div",{class:"spinner-border",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)),x=[R],T={key:1,class:"row mb-4"},A={class:"col-md-6"},B={class:"card"},C={class:"card-body"},V={class:"card-text"},N=i(()=>e("strong",null,"Total Payments:",-1)),P=i(()=>e("br",null,null,-1)),F=i(()=>e("strong",null,"Number of Transactions:",-1)),j={key:2},L={key:0,class:"alert alert-info"},E={key:1,class:"table-responsive"},z={class:"table table-striped table-hover"},M=i(()=>e("thead",{class:"table-dark"},[e("tr",null,[e("th",null,"Date"),e("th",null,"Amount"),e("th",null,"Commission"),e("th",null,"Transaction ID"),e("th",null,"Compensation Status")])],-1)),O={class:"fw-bold"},Y={class:"fw-bold"},q={class:"font-monospace small"},G=["href"],H={key:0,class:"badge badge-success"},J={key:1,class:"badge badge-warning"};function K(t,r,u,_,n,a){return s(),o("div",v,[e("div",w,[n.student?(s(),o("h1",D,c(n.student.username),1)):(s(),o("h1",I,"Student ID: "+c(n.referredUserId),1)),e("button",{onClick:r[0]||(r[0]=(...d)=>a.goBack&&a.goBack(...d)),class:"btn btn-outline-secondary primary-btn"}," ← Back ")]),n.loading?(s(),o("div",U,x)):l("",!0),!n.loading&&n.student?(s(),o("div",T,[e("div",A,[e("div",B,[e("div",C,[e("p",V,[N,h(" "+c(a.formattedStripeReceiptAmount(a.getTotalPayments())),1),P,F,h(" "+c(n.receipts.length),1)])])])])])):l("",!0),n.loading?l("",!0):(s(),o("div",j,[n.receipts.length===0?(s(),o("div",L," No payments found for this student. ")):(s(),o("div",E,[e("table",z,[M,e("tbody",null,[(s(!0),o(g,null,y(n.receipts,d=>(s(),o("tr",{key:d.id},[e("td",null,c(a.formattedStripeReceiptDate(d.date)),1),e("td",O,c(a.formattedStripeReceiptAmount(d.amount)),1),e("td",Y,c(a.formattedStripeReceiptAmount(d.amount/3)),1),e("td",q,[e("a",{href:d.url,target:"_blank"},"View",8,G)]),e("td",null,[d.is_partner_compensated==1?(s(),o("span",H,"Paid")):(s(),o("span",J,"Pending"))])]))),128))])])]))]))])}const W=f(k,[["render",K],["__scopeId","data-v-5acddc37"]]);export{W as default};
