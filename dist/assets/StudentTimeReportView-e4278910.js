import{_ as m,A as _,r as a,o as i,c as r,a as s,t as l,k as d,b as p,F as k}from"./main-138df8f6.js";import{T as y}from"./TimePerSkillHorizontalBarChart-5c174375.js";import{S as D}from"./StudentDurationPerDayLineChart-672d28b3.js";import"./transform-35b9fb9e.js";import"./linear-c968f95f.js";import"./band-18e9f0c1.js";import"./sort-855cf5d1.js";import"./line-8aa3dac8.js";import"./time-962c8065.js";import"./point-ea70dc51.js";const f={setup(){return{usersStore:_()}},components:{TimePerSkillHorizontalBarChart:y,StudentDurationPerDayLineChart:D},data(){return{studentId:this.$route.params.studentId,studentName:null,skillDurations:[],durationsPerDay:[],allSkillsDuration:0,isDataLoaded:!1}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const t=this.usersStore.users.find(e=>e.id===this.studentId);t&&(this.studentName=t.username),await this.getSkillDuration(),await this.getAllSkillsDuration(),await this.getStudentDurationPerDay(),this.isDataLoaded=!0},methods:{async getSkillDuration(){fetch(`/student-analytics/skill-durations/${this.studentId}`).then(t=>t.json()).then(t=>{this.skillDurations=t;for(let e=0;e<this.skillDurations.length;e++)this.skillDurations[e].formattedQuantity=this.millisToMinutesAndSeconds(this.skillDurations[e].quantity)}).catch(t=>{console.error("Error fetching last visited skills:",t)})},async getAllSkillsDuration(){fetch(`/student-analytics/all-skills-duration/${this.studentId}`).then(t=>t.json()).then(t=>{this.allSkillsDuration=t.duration}).catch(t=>{console.error("Error fetching last visited skills:",t)})},async getStudentDurationPerDay(){fetch(`/student-analytics/student-duration-per-day/${this.studentId}`).then(t=>t.json()).then(t=>{for(let e=0;e<t.length;e++)t[e].formattedQuantity=t[e].quantity/(1e3*60),t[e].date=new Date(t[e].date);t.sort((e,o)=>e.date-o.date),this.durationsPerDay=t}).catch(t=>{console.error("Error fetching student duration per day:",t)})},millisToMinutesAndSeconds(t){var e=Math.floor(t/6e4),o=(t%6e4/1e3).toFixed(0);return e+":"+(o<10?"0":"")+o}}},S={class:"container"},g={class:"d-flex justify-content-between w-100"},P=s("h1",{class:"heading"},"Time Report",-1),T={class:"secondary-heading h3"},w=s("p",null,[s("em",null," Please note that time spent on external sources (e.g. websites) related to skills is not measured.")],-1),v={key:0},C=s("h4",{class:"secondary-heading"},"Total time on platform",-1),A={key:1},B=s("h4",{class:"secondary-heading"},"All skills",-1),x=s("h4",{class:"secondary-heading"},"Minutes per skill",-1),I={key:3},L=s("p",null,"No skills visited by this student.",-1),N=[L],b=s("p",null,"Â ",-1);function j(t,e,o,M,n,u){const c=a("StudentDurationPerDayLineChart"),h=a("TimePerSkillHorizontalBarChart");return i(),r(k,null,[s("div",S,[s("span",g,[P,s("h2",T,l(n.studentName),1)]),w,n.isDataLoaded?(i(),r("div",v,[C,n.durationsPerDay.length>0?(i(),d(c,{key:0,data:n.durationsPerDay},null,8,["data"])):(i(),r("p",A,"There is no data to show yet.")),B,s("p",null,l(u.millisToMinutesAndSeconds(this.allSkillsDuration)),1),x,n.skillDurations.length>0?(i(),d(h,{key:2,data:n.skillDurations,colour:"darkgreen"},null,8,["data"])):(i(),r("div",I,N))])):p("",!0)]),b],64)}const $=m(f,[["render",j]]);export{$ as default};
