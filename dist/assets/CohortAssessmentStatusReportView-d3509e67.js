import{u as y}from"./CohortsStore-3092953f.js";import{_ as p,o as m,c as g,f as S,r as x,a as r,t as k,k as A,b as C}from"./main-2f5cb993.js";import{s as u}from"./transform-7263f110.js";import{l as w,m as $,b,s as B}from"./linear-78f05e13.js";import{a as v,b as D}from"./continuous-5681c0ba.js";const j={name:"CohortPassedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){u("#cohort-passed-assessments-chart-container");const t=25,e=0,l=0,d=10,o=200,n=1e3,i=Math.ceil((this.data.length+.1)*t)+e+d,a=w().domain([0,$(this.data,s=>s.quantity)]).range([o,n-l]),c=b().domain(B(this.data,s=>-s.quantity).map(s=>s.name)).rangeRound([e,i-d]).padding(.1),f=a.tickFormat(20),h=u("#cohort-passed-assessments-chart-container").append("svg").attr("width",n).attr("height",i).attr("viewBox",[0,0,n,i]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");h.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",s=>c(s.name)).attr("width",s=>a(s.quantity)-a(0)).attr("height",c.bandwidth()),h.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",s=>a(s.quantity)).attr("y",s=>c(s.name)+c.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(s=>f(s.quantity)).call(s=>s.filter(_=>a(_.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),h.append("g").attr("transform",`translate(0,${e})`).call(v(a).ticks(0)).call(s=>s.select(".domain").remove()),h.append("g").attr("transform",`translate(${o},0)`).call(D(c).tickSizeOuter(0))},computed:{}},I={id:"cohort-passed-assessments-chart-container"};function q(t,e,l,d,o,n){return m(),g("div",I)}const z=p(j,[["render",q]]),H={setup(){const t=y(),e=S();return{cohortsStore:t,userDetailsStore:e}},components:{CohortPassedAssessmentsHorizontalBarChart:z},data(){return{cohortId:this.$route.params.cohortId,cohortName:"",masteredSkillQuantities:[]}},async created(){if(this.cohortId!="all-students"){this.getCohortMasteredAssessments(),this.cohortsStore.cohorts.length<1&&await this.cohortsStore.getCohorts(this.userDetailsStore.userId);const t=this.cohortsStore.cohorts.find(e=>e.id==this.cohortId);t&&(this.cohortName=t.name)}else this.getAllStudentsAssessments()},methods:{async getCohortMasteredAssessments(){fetch(`/student-analytics/mastered-skills/cohort/${this.cohortId}`).then(t=>t.json()).then(t=>{this.masteredSkillQuantities=t}).catch(t=>{console.error("Error fetching last visited skills:",t)})},async getAllStudentsAssessments(){fetch(`/student-analytics/mastered-skills/all-students/${this.userDetailsStore.userId}`).then(t=>t.json()).then(t=>{this.masteredSkillQuantities=t}).catch(t=>{console.error("Error fetching last visited skills:",t)})},assessmentDate(t){return new Date(t).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}}},N={class:"container"},P={class:"d-flex justify-content-between w-100"},Q=r("h1",{class:"heading"},"Assessment Status Report",-1),R={class:"secondary-heading h3"},E=r("h2",{class:"secondary-heading"},"Passed",-1),L=r("h2",{class:"secondary-heading"},"Attempted",-1),M=r("h2",{class:"secondary-heading"},"Failed multiple times",-1);function V(t,e,l,d,o,n){const i=x("CohortPassedAssessmentsHorizontalBarChart");return m(),g("div",N,[r("span",P,[Q,r("h2",R,k(o.cohortName),1)]),E,o.masteredSkillQuantities.length>0?(m(),A(i,{key:0,data:o.masteredSkillQuantities,colour:"darkgreen"},null,8,["data"])):C("",!0),L,M])}const J=p(H,[["render",V]]);export{J as default};
