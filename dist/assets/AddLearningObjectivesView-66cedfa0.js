import{_ as u,h as _,f as g,o as n,c as l,a as s,s as b,t as a,F as c,z as m,b as h,N as v,w as p,C as f,p as k,d as j}from"./main-b3c90335.js";const y={setup(){const e=_(),t=g();return{skillsStore:e,userDetailsStore:t}},data(){return{skillId:this.$route.params.skillId,skill:{},objective:"",isLoading:!0,isSubmitting:!1,errors:[]}},async created(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let e=0;e<this.skillsStore.skillsList.length;e++)if(this.skillId==this.skillsStore.skillsList[e].id){this.skill=this.skillsStore.skillsList[e];break}this.isLoading=!1},methods:{validateForm(){return this.errors=[],this.objective.trim()||this.errors.push("Learning objective is required"),this.objective.trim().length<10&&this.errors.push("Learning objective must be at least 10 characters long"),this.errors.length===0},async addObjective(){if(this.validateForm()){this.isSubmitting=!0;try{const e=await fetch(`/skill-learning-objectives/${this.skillId}/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({objective:this.objective.trim()})}),t=await e.json();e.ok&&t.success?this.$router.push(`/skills/${this.skill.URL}/learning-objectives`):this.errors=[t.message||"Failed to add learning objective"]}catch(e){console.error("Error adding learning objective:",e),this.errors=["An error occurred while adding the learning objective. Please try again."]}finally{this.isSubmitting=!1}}}},computed:{canSubmit(){return this.objective.trim().length>0&&!this.isSubmitting}}},r=e=>(k("data-v-f094d49e"),e=e(),j(),e),S={class:"row px-2 px-lg-2"},w={class:"col d-flex justify-content-end"},L={class:"d-flex justify-content-between"},x=r(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",width:"20",height:"20",fill:"white"},[s("path",{d:"M208 96a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM123.7 200.5c1-.4 1.9-.8 2.9-1.2l-16.9 63.5c-5.6 21.1-.1 43.6 14.7 59.7l70.7 77.1 22 88.1c4.3 17.1 21.7 27.6 38.8 23.3s27.6-21.7 23.3-38.8l-23-92.1c-1.9-7.8-5.8-14.9-11.2-20.8l-49.5-54 19.3-65.5 9.6 23c4.4 10.6 12.5 19.3 22.8 24.5l26.7 13.3c15.8 7.9 35 1.5 42.9-14.3s1.5-35-14.3-42.9L281 232.7l-15.3-36.8C248.5 154.8 208.3 128 163.7 128c-22.8 0-45.3 4.8-66.1 14l-8 3.5c-32.9 14.6-58.1 42.4-69.4 76.5l-2.6 7.8c-5.6 16.8 3.5 34.9 20.2 40.5s34.9-3.5 40.5-20.2l2.6-7.8c5.7-17.1 18.3-30.9 34.7-38.2l8-3.5zm-30 135.1L68.7 398 9.4 457.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L116.3 441c4.6-4.6 8.2-10.1 10.6-16.1l14.5-36.2-40.7-44.4c-2.5-2.7-4.8-5.6-7-8.6zM550.6 153.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L530.7 224H384c-17.7 0-32 14.3-32 32s14.3 32 32 32H530.7l-25.4 25.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l80-80c12.5-12.5 12.5-32.8 0-45.3l-80-80z"})],-1)),O={class:"container bg-light rounded p-3"},I={class:"heading"},C={key:0,class:"text-center my-5"},A=r(()=>s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),D=r(()=>s("p",{class:"mt-2 text-muted"},"Loading...",-1)),N=[A,D],V={key:1,class:"container-fluid"},z={class:"row justify-content-center"},F={class:"col-12 col-md-8 col-lg-6"},M={key:0,class:"alert alert-danger mb-4"},T={class:"mb-0"},B={class:"add-form-card bg-white p-4 rounded shadow-sm"},E=r(()=>s("h2",{class:"secondary-heading mb-3"}," New Learning Objective ",-1)),U={class:"mb-3"},H=r(()=>s("label",{for:"objective",class:"form-label"},[b(" Objective Text "),s("span",{class:"text-danger"},"*")],-1)),P=["disabled"],q=r(()=>s("div",{class:"form-text"},[s("span",{class:"d-none d-sm-inline"}," Describe what students should be able to do after mastering this skill. "),s("span",{class:"d-sm-none"}," Describe what students should be able to do. ")],-1)),J={class:"d-flex flex-row justify-content-end gap-2 mt-4"},R=["disabled"],G={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},K=r(()=>s("span",{class:"visually-hidden"},"Loading...",-1)),Q=[K],W=["disabled"];function X(e,t,Y,Z,i,d){return n(),l(c,null,[s("div",S,[s("div",w,[s("div",L,[s("a",{class:"btn red-btn",onClick:t[0]||(t[0]=o=>e.$router.go(-1))},[b("Exit   "),x])])])]),s("div",O,[s("h1",I,a(i.skill.name)+" - Add Learning Objective",1),i.isLoading?(n(),l("div",C,N)):(n(),l("div",V,[s("div",z,[s("div",F,[i.errors.length>0?(n(),l("div",M,[s("ul",T,[(n(!0),l(c,null,m(i.errors,o=>(n(),l("li",{key:o},a(o),1))),128))])])):h("",!0),s("div",B,[E,s("form",{onSubmit:t[3]||(t[3]=v((...o)=>d.addObjective&&d.addObjective(...o),["prevent"]))},[s("div",U,[H,p(s("textarea",{id:"objective","onUpdate:modelValue":t[1]||(t[1]=o=>i.objective=o),class:"form-control",rows:"4",placeholder:"Enter the learning objective...",disabled:i.isSubmitting},null,8,P),[[f,i.objective]]),q]),s("div",J,[s("button",{type:"submit",class:"btn primary-btn",disabled:!d.canSubmit},[i.isSubmitting?(n(),l("span",G,Q)):h("",!0),s("span",null,a(i.isSubmitting?"Adding...":"Add Learning Objective"),1)],8,R),s("button",{type:"button",class:"btn btn red-btn",onClick:t[2]||(t[2]=o=>e.$router.go(-1)),disabled:i.isSubmitting}," Cancel ",8,W)])],32)])])])]))])],64)}const ss=u(y,[["render",X],["__scopeId","data-v-f094d49e"]]);export{ss as default};
