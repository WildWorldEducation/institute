import{_ as v,o as n,c as a,a as e,b as d,g as b,y as x,e as D,r as c,f as p,l as u,t as w,k as g,F as C,j as k}from"./main-0ec27460.js";import{W as L}from"./WaitLoadingModal-c13f8c4b.js";import{S as N}from"./SuccessModal-d0e21b1c.js";import{F as z}from"./FailsModal-e898c074.js";const B={props:["showApproveModal","approveSkill","closeModal"],data(){return{showModal:!1}},methods:{handleApproveSkill(){this.closeModal(),this.approveSkill()}},watch:{showApproveModal:{handler(t){this.showModal=t}}}},F={key:0,id:"myModal",class:"modal"},O={class:"modal-content"},j={class:"d-flex justify-content-lg-between justify-content-md-end justify-content-between gap-2"};function T(t,s,i,h,l,o){return l.showModal?(n(),a("div",F,[e("div",O,[s[4]||(s[4]=e("div",{class:"d-flex gap-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"grey",width:"45",height:"45"},[e("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})]),e("p",null,"Approve this skill and add it to the site?")],-1)),e("div",j,[e("button",{type:"button",class:"btn red-btn modal-btn",onClick:s[0]||(s[0]=(...r)=>i.closeModal&&i.closeModal(...r))},s[2]||(s[2]=[e("span",{class:"d-none d-md-block"}," No ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[e("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1)])),e("button",{type:"button",class:"btn green-btn modal-btn",onClick:s[1]||(s[1]=(...r)=>o.handleApproveSkill&&o.handleApproveSkill(...r))},s[3]||(s[3]=[e("span",{class:"d-none d-md-block"}," Yes ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[e("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1)]))])])])):d("",!0)}const I=v(B,[["render",T]]);const V={props:["showDismissModal","dismissSkill","closeDismissModal"],data(){return{showModal:!1}},methods:{handleDismissClick(){this.closeDismissModal(),this.dismissSkill()}},watch:{showDismissModal:{handler(t){console.log(t),this.showModal=t}}}},E={key:0,class:"modal"},H={class:"modal-content"},q={class:"d-flex justify-content-lg-between justify-content-md-end justify-content-between gap-2"};function U(t,s,i,h,l,o){return l.showModal?(n(),a("div",E,[e("div",H,[s[4]||(s[4]=e("div",{class:"d-flex gap-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"grey",width:"45",height:"45"},[e("path",{d:"M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})]),e("p",null,"Permanently dismiss this suggested skill?")],-1)),e("div",q,[e("button",{type:"button",class:"btn red-btn modal-btn",onClick:s[0]||(s[0]=r=>i.closeDismissModal())},s[2]||(s[2]=[e("span",{class:"d-none d-md-block"}," No ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[e("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"})],-1)])),e("button",{type:"button",class:"btn green-btn modal-btn",onClick:s[1]||(s[1]=(...r)=>o.handleDismissClick&&o.handleDismissClick(...r))},s[3]||(s[3]=[e("span",{class:"d-none d-md-block"}," Yes ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"18",height:"18",fill:"white",class:"d-md-none"},[e("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"})],-1)]))])])])):d("",!0)}const P=v(V,[["render",U]]);const K={setup(){const t=b(),s=x(),i=D();return{skillsStore:t,usersStore:s,userDetailsStore:i}},data(){return{id:this.$route.params.id,newSkillAwaitingApproval:{},showApproveModal:!1,showDisMissModal:!1,severLoading:!1,showSuccessModal:!1,showFailsModal:!1,message:"",newSkillId:null}},async created(){this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),this.usersStore.users.length==0&&await this.usersStore.getUsers(),this.getNewSkillAwaitingApproval()},components:{ApproveNewSkillModal:I,DismissModal:P,WaitLoadingModal:L,SuccessModal:N,FailsModal:z},methods:{async getNewSkillAwaitingApproval(){await fetch("/new-skills-awaiting-approval/show/"+this.id).then(function(t){return t.json()}).then(t=>{this.newSkillAwaitingApproval=t,this.newSkillAwaitingApproval.type=="domain"&&(this.newSkillAwaitingApproval.type="category");for(let s=0;s<this.skillsStore.skillsList.length;s++)this.skillsStore.skillsList[s].id==this.newSkillAwaitingApproval.parent&&(this.newSkillAwaitingApproval.parentName=this.skillsStore.skillsList[s].name,this.newSkillAwaitingApproval.parentUrl=this.skillsStore.skillsList[s].url);for(let s=0;s<this.usersStore.users.length;s++)this.usersStore.users[s].id==this.newSkillAwaitingApproval.user_id&&(this.newSkillAwaitingApproval.userName=this.usersStore.users[s].username)})},dismissSkill(){if(fetch("/new-skills-awaiting-approval/"+this.id+"?action=dismiss",{method:"DELETE"}).error){this.message="Failed to dismiss suggested skill",this.showFailsModal=!0;return}this.message="Successfully dismissed suggested skill",this.showSuccessModal=!0},approveSkill(){this.severLoading=!0;const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.newSkillAwaitingApproval.name,mastery_requirements:this.newSkillAwaitingApproval.mastery_requirements,icon_image:this.newSkillAwaitingApproval.icon_image,type:this.newSkillAwaitingApproval.type,level:this.newSkillAwaitingApproval.level})};var s=`/new-skills-awaiting-approval/accept/${this.newSkillAwaitingApproval.id}`;fetch(s,t).then(i=>((i.error||i.status===500)&&(this.message="Failed to add new skill",this.showFailsModal=!0),i.json())).then(i=>{this.newSkillId=i.newSkillId}).then(()=>{const i=fetch("/new-skills-awaiting-approval/"+this.id+"?action=approve",{method:"DELETE"});if(i.error){console.err(i.error),this.message="Failed to remove from list of suggested new skills",this.showFailsModal=!0;return}this.message="Successfully added skill",this.severLoading=!1,this.showSuccessModal=!0}).then(()=>{const i={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:"new_skill",contentId:this.newSkillId})};var h="/users/increase-reputation/"+this.userDetailsStore.userId+"/"+this.newSkillAwaitingApproval.user_id;fetch(h,i)})},handleSaveBtnClick(){this.showApproveModal=!0},hideApproveModal(){this.showApproveModal=!1},handleDisMissBtnClick(){this.showDisMissModal=!0},hideDismissModal(){this.showDisMissModal=!1},handleSuccessOKclick(){this.$router.push("/todo?nav=newSkillsList")},handleFailsOKclick(){this.showFailsModal=!1}}},W={class:"container mt-3"},J={id:"user-alert","b-on-hoover":"",title:"Click on the user name to see their user details"},R={class:"container mt-3"},Y={id:"skill-info-container"},G={class:"heading"},Q={class:"row"},X={key:0,class:"col-md-8 order-2 order-md-1 info-box"},Z={class:"d-flex flex-column"},$={class:"mastery-requirements"},ss=["innerHTML"],es={class:"col-md-4 order-1 order-md-2"},ls={class:"info-box p-2 mb-2"},is=["src"],ts={key:1,class:"d-flex flex-column align-items-center"},os={class:"mt-3 d-flex flex-column align-items-center"},ns={class:"mt-3 d-flex flex-column align-items-center"},as={key:2,class:"mt-3 d-flex flex-column align-items-center"},rs={key:0},ds={key:1},cs={key:2},ps={key:3},hs={key:4},ws={class:"d-flex justify-content-end gap-3"};function ms(t,s,i,h,l,o){const r=c("RouterLink"),S=c("router-link"),_=c("ApproveNewSkillModal"),A=c("DismissModal"),M=c("WaitLoadingModal"),f=c("SuccessModal"),y=c("FailsModal");return n(),a(C,null,[e("div",W,[e("div",J,[s[2]||(s[2]=e("div",null,"Submitted by",-1)),p(r,{class:"normal-text-link",to:`/users?username=${l.newSkillAwaitingApproval.userName}`},{default:u(()=>[k(w(l.newSkillAwaitingApproval.userName),1)]),_:1},8,["to"])])]),e("div",R,[e("div",Y,[e("div",null,[e("h1",G,w(l.newSkillAwaitingApproval.name),1),s[3]||(s[3]=e("hr",{class:"border border-2 opacity-100 hr"},null,-1))]),e("div",Q,[l.newSkillAwaitingApproval.type!="category"?(n(),a("div",X,[e("div",Z,[e("div",$,[e("div",{innerHTML:l.newSkillAwaitingApproval.mastery_requirements},null,8,ss)])])])):d("",!0),e("div",es,[e("div",ls,[l.newSkillAwaitingApproval.icon_image?(n(),a("img",{key:0,src:l.newSkillAwaitingApproval.icon_image,class:"rounded img-fluid"},null,8,is)):(n(),a("div",ts,s[4]||(s[4]=[e("div",{class:"no-image-warn"}," This Skill Does Not Have Icon Image. ",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"80",height:"80"},[e("path",{d:"M448 80c8.8 0 16 7.2 16 16l0 319.8-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3L48 96c0-8.8 7.2-16 16-16l384 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"})],-1)]))),e("div",os,[s[5]||(s[5]=e("h2",{class:"h4 heading"},"Parent",-1)),p(r,{"b-on-hoover":"",title:"Click on parent name to see it details",class:"normal-text-link",to:`/skills/${l.newSkillAwaitingApproval.parentUrl}`},{default:u(()=>[k(w(l.newSkillAwaitingApproval.parentName),1)]),_:1},8,["to"])]),e("div",ns,[s[6]||(s[6]=e("h2",{class:"h4 heading"},"Type",-1)),e("div",null,w(l.newSkillAwaitingApproval.type),1)]),l.newSkillAwaitingApproval.type!="category"?(n(),a("div",as,[s[7]||(s[7]=e("h2",{class:"h4 heading"},"Level",-1)),l.newSkillAwaitingApproval.level=="grade_school"?(n(),a("span",rs,"Grade School")):l.newSkillAwaitingApproval.level=="middle_school"?(n(),a("span",ds,"Middle School")):l.newSkillAwaitingApproval.level=="high_school"?(n(),a("span",cs,"High School")):l.newSkillAwaitingApproval.level=="college"?(n(),a("span",ps,"College")):l.newSkillAwaitingApproval.level=="phd"?(n(),a("span",hs,"PHD")):d("",!0)])):d("",!0)])])]),s[9]||(s[9]=e("p",null," ",-1)),e("div",ws,[e("button",{class:"btn red-btn",onClick:s[0]||(s[0]=(...m)=>o.handleDisMissBtnClick&&o.handleDisMissBtnClick(...m))}," Dismiss "),p(S,{class:"btn primary-btn",to:"/new-skill-awaiting-approval/edit/"+l.id},{default:u(()=>s[8]||(s[8]=[k(" Edit ",-1)])),_:1,__:[8]},8,["to"]),e("button",{class:"btn primary-btn",onClick:s[1]||(s[1]=(...m)=>o.handleSaveBtnClick&&o.handleSaveBtnClick(...m))}," Approve ")])])]),p(_,{showApproveModal:l.showApproveModal,approveSkill:o.approveSkill,closeModal:o.hideApproveModal},null,8,["showApproveModal","approveSkill","closeModal"]),p(A,{dismissSkill:o.dismissSkill,closeDismissModal:o.hideDismissModal,showDismissModal:l.showDisMissModal},null,8,["dismissSkill","closeDismissModal","showDismissModal"]),l.severLoading?(n(),g(M,{key:0})):d("",!0),l.showSuccessModal?(n(),g(f,{key:1,message:l.message,handleOkClick:o.handleSuccessOKclick},null,8,["message","handleOkClick"])):d("",!0),l.showFailsModal?(n(),g(y,{key:2,message:l.message,handleOkClick:o.handleFailsOKclick},null,8,["message","handleOkClick"])):d("",!0)],64)}const Ss=v(K,[["render",ms],["__scopeId","data-v-be3b4a50"]]);export{Ss as default};
