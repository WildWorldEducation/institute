import{u as R}from"./AnalyticsStore-56667226.js";import{u as j}from"./TeacherAnalyticsStore-38c58ff2.js";import{_ as C,o as p,c as f,f as H,r as v,a as s,g as S,l as x,k,b as w,F as L,z as F,s as D,t as V,p as z,d as E}from"./main-77db2c2e.js";import"./transform-4d0f7c8f.js";import{u as T,l as I}from"./line-d122782f.js";import{e as B}from"./time-3c9385c3.js";import{l as $,c as M,b,a as N}from"./linear-d9b6cbf2.js";import{m as A}from"./continuous-93813e6c.js";import{o as q,b as O}from"./band-2263c9e7.js";import{s as _}from"./string-c67ea49d.js";import{c as P}from"./category10-63f9141e.js";import{s as W}from"./sort-fcaf8f38.js";import"./point-ea70dc51.js";import"./colors-98f238a0.js";const Y={name:"SchoolProgressChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(e){e.student.length>0?this.axisData=e.student:e.average.length>0?this.axisData=e.average:this.axisData=[];const c=Object.entries(e).map(([t,y])=>({name:t,values:y}));_("#progress-chart-container");const r=document.getElementById("progress-chart-container").clientWidth,a=document.getElementById("progress-chart-container").clientHeight,h=0,d=20,i=20,o=20,n=T(B(this.axisData,t=>t.date),[o,r-d]),l=$([0,A(this.axisData,t=>t.quantity)],[a-i,h]);q().domain(c.map(t=>t.name)).range(P);const m=I().x(t=>n(t.date)).y(t=>l(t.quantity)),u=_("#progress-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(r,a),+Math.min(r,a)]).attr("preserveAspectRatio","xMinYMin");u.append("g").attr("transform",`translate(0,${a-20})`).call(M(n).ticks(r/100).tickSizeOuter(0)),u.append("g").attr("transform",`translate(${o},0)`).call(b(l).ticks(a/80)).call(t=>t.selectAll(".tick line").clone().attr("x2",r-o-d).attr("stroke-opacity",.1)),u.selectAll(".line").data(c).join("path").attr("fill","none").attr("stroke",t=>t.name=="student"?"green":"#ff7f0e").attr("stroke-width",3).attr("d",t=>m(t.values))}}};function U(e,c,r,a,h,d){return null}const G=C(Y,[["render",U]]),J={name:"SchoolTimeChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(e){e.student.length>0?this.axisData=e.student:e.average.length>0?this.axisData=e.average:this.axisData=[];const c=Object.entries(e).map(([t,y])=>({name:t,values:y}));_("#time-chart-container");const r=document.getElementById("time-chart-container").clientWidth,a=document.getElementById("time-chart-container").clientHeight,h=0,d=20,i=20,o=60,n=T(B(this.axisData,t=>t.date),[o,r-d]),l=$([0,A(this.axisData,t=>t.quantity)],[a-i,h]);q().domain(c.map(t=>t.name)).range(P);const m=I().x(t=>n(t.date)).y(t=>l(t.quantity)),u=_("#time-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(r,a),+Math.min(r,a)]).attr("preserveAspectRatio","xMinYMin");u.append("g").attr("transform",`translate(0,${a-i})`).call(M(n).ticks(e.length).tickSizeOuter(0)),u.append("g").attr("transform",`translate(${o},0)`).call(b(l).ticks(a/40)).call(t=>t.select(".domain").remove()).call(t=>t.selectAll(".tick line").clone().attr("x2",r-o-d).attr("stroke-opacity",.2)).call(t=>t.append("text").attr("x",-o).attr("y",10).attr("fill","currentColor").attr("text-anchor","start")),u.selectAll(".line").data(c).join("path").attr("fill","none").attr("stroke",t=>t.name=="student"?"RoyalBlue":"#ff7f0e").attr("stroke-width",3).attr("d",t=>m(t.values))}}};function K(e,c,r,a,h,d){return null}const Q=C(J,[["render",K]]),X={name:"StudentComparisonChart",props:["data","colour"],data(){return{}},mounted(){},methods:{createChart(e){_("#student-comparison-container");const c=25,r=0,a=0,h=10,d=200,i=700,o=Math.ceil((e.length+.1)*c)+r+h,n=$().domain([0,A(e,t=>t.quantity)]).range([d,i-a]),l=O().domain(W(e,t=>-t.quantity).map(t=>t.name)).rangeRound([r,o-h]).padding(.1),m=n.tickFormat(20),u=_("#student-comparison-container").append("svg").attr("width",i).attr("height",o).attr("viewBox",[0,0,i,o]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");u.append("g").selectAll().data(e).join("rect").attr("x",n(0)).attr("y",t=>l(t.name)).attr("width",t=>n(t.quantity)-n(0)).attr("height",l.bandwidth()).attr("fill",function(t){return t.name=="Language"?"green":t.name=="Mathematics"?"blue":t.name=="Science & Invention"?"purple":t.name=="Computer Science"?"pink":t.name=="Dangerous Ideas"?"brown":t.name=="History"?"cyan":t.name=="Life"?"magenta":"#ff7f0e"}),u.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(e).join("text").attr("x",t=>n(t.quantity)).attr("y",t=>l(t.name)+l.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>m(t.quantity)).call(t=>t.filter(y=>n(y.quantity)-n(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),u.append("g").attr("transform",`translate(0,${r})`).call(N(n).ticks(0)).call(t=>t.select(".domain").remove()),u.append("g").attr("transform",`translate(${d},0)`).attr("style","font-size: 16px").call(b(l).tickSizeOuter(0))}}},Z={id:"student-comparison-container"};function tt(e,c,r,a,h,d){return p(),f("div",Z)}const et=C(X,[["render",tt]]);const st={name:"Student-Dashboard",setup(){const e=H(),c=R(),r=j();return{userDetailsStore:e,analyticsStore:c,teacherAnalyticsStore:r}},data(){return{showSidebar:!0,screenWidth:screen.width,isStudentData:!0,isSchoolData:!0,isLanguageData:!1,isMathData:!1,isHistoryData:!1,isLifeData:!1,isCSData:!1,isSAndIData:!1,isDIData:!1,progressData:{student:[],average:[]},isAboveTheCurve:!1}},components:{StudentProgressChart:G,StudentComparisonChart:et,StudentTimeChart:Q},async created(){await this.analyticsStore.getStudentProgress(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userDetailsStore.userId),await this.analyticsStore.getStudentTime(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.teacherAnalyticsStore.getStudentMultipleFails(this.userDetailsStore.userId),this.analyticsStore.progress.student[this.analyticsStore.progress.student.length-1].quantity>this.analyticsStore.progress.tenant[this.analyticsStore.progress.tenant.length-1].quantity&&(this.isAboveTheCurve=!0),await this.HandleProgressData(),await this.HandleComparisonData(),await this.HandleTimeData()},methods:{async HandleProgressData(){if(this.isStudentData){this.progressData.student=[];for(let e=0;e<this.analyticsStore.progress.student.length;e++)this.progressData.student.push(this.analyticsStore.progress.student[e])}else this.progressData.student=[];if(this.isSchoolData){this.progressData.average=[];for(let e=0;e<this.analyticsStore.progress.tenant.length;e++)this.progressData.average.push(this.analyticsStore.progress.tenant[e])}else this.progressData.average=[];this.$nextTick(()=>{this.$refs.progressChart&&this.$refs.progressChart.createChart(this.progressData)})},async HandleComparisonData(){this.$nextTick(()=>{this.$refs.comparisonChart&&this.$refs.comparisonChart.createChart(this.analyticsStore.studentRootSubjectsPassedAssessments)})},async HandleTimeData(){this.$nextTick(()=>{this.$refs.timeChart&&this.$refs.timeChart.createChart(this.analyticsStore.time)})},toggleSidebar(){this.showSidebar=!this.showSidebar}}},g=e=>(z("data-v-7fc41ff1"),e=e(),E(),e),at={class:"dashboard"},rt={class:"main"},nt={class:"content container-fluid"},it={class:"dash-row row"},ot={class:"col-md-6 h-100 position-relative"},ct=g(()=>s("h2",{class:"heading h5"},"Progress over time",-1)),lt={id:"progress-chart-container"},ht={class:"col-md-6"},dt={id:"comparison-chart-container"},ut=g(()=>s("h2",{class:"heading h5 mt-1"},"Subject comparison",-1)),mt={class:"dash-row row"},pt={class:"col-md h-100 position-relative"},gt=g(()=>s("h2",{class:"heading h5"},"Study time",-1)),ft={id:"time-chart-container"},_t={class:"col-md position-relative"},yt={class:"row"},St={class:"col-md"},xt=g(()=>s("h2",{class:"h5 heading"}," Super challenging skills ",-1)),vt={key:0},Dt={key:1},Ct={class:"col-md"},kt=g(()=>s("h2",{class:"h5 heading"},"Stats",-1)),wt=g(()=>s("li",null,[s("strong",null,"Skills passed:"),D(" 25")],-1)),$t=g(()=>s("li",null,[s("strong",null,"Total time spent:"),D(" 5:00 ")],-1)),bt=g(()=>s("strong",null,"Tokens used:",-1));function At(e,c,r,a,h,d){const i=v("RouterLink"),o=v("StudentProgressChart"),n=v("StudentComparisonChart"),l=v("StudentTimeChart");return p(),f("div",at,[s("div",rt,[s("div",nt,[s("div",it,[s("div",ot,[S(i,{to:"/my-progress/skills",class:""},{default:x(()=>[ct]),_:1}),s("div",lt,[h.progressData.student.length>0||h.progressData.average.length>0?(p(),k(o,{key:0,ref:"progressChart"},null,512)):w("",!0)])]),s("div",ht,[s("div",dt,[ut,a.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(p(),k(n,{key:0,ref:"comparisonChart",data:a.analyticsStore.studentRootSubjectsPassedAssessments,colour:"#5f31dd"},null,8,["data"])):w("",!0)])])]),s("div",mt,[s("div",pt,[S(i,{to:"/my-progress/time"},{default:x(()=>[gt]),_:1}),s("div",ft,[a.analyticsStore.time.student.length>0||a.analyticsStore.time.tenant.length>0?(p(),k(l,{key:0,ref:"timeChart"},null,512)):w("",!0)])]),s("div",_t,[s("div",yt,[s("div",St,[S(i,{to:"/my-progress/super-challenging",class:"col"},{default:x(()=>[xt]),_:1}),a.teacherAnalyticsStore.studentMultipleFails.length>0?(p(),f("ul",vt,[(p(!0),f(L,null,F(a.teacherAnalyticsStore.studentMultipleFails,m=>(p(),f("li",{class:"failed-skills",key:m.id},[S(i,{to:"/skills/"+m.url,target:"_blank"},{default:x(()=>[D(V(m.name),1)]),_:2},1032,["to"])]))),128))])):(p(),f("p",Dt,"Nothing to worry about yet"))]),s("div",Ct,[kt,s("ul",null,[wt,$t,s("li",null,[S(i,{to:"/my-progress/tokens"},{default:x(()=>[bt,D(" 10,000")]),_:1})])])])])])])])])])}const Nt=C(st,[["render",At],["__scopeId","data-v-7fc41ff1"]]);export{Nt as default};
