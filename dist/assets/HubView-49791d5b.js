import{_ as S,r as h,o as i,c as n,d as t,F as _,t as w,i as g,j as T,m as D,x as k,l as y,p as f,f as v,a as x,g as $,e as b,w as B,z as j,b as u,y as A}from"./main-d56af489.js";import{u as O}from"./AssessmentsStore-f5f7fdd3.js";import{u as z}from"./InstructorStudentsStore-964eb1d4.js";const U={data(){return{userSkills:[],noSkills:!0}},props:["userId"],async created(){const s=await fetch("/user-skills/unnested-list/"+this.userId);this.userSkills=await s.json()},computed:{availableSkills(){const s=[];for(let e=0;e<this.userSkills.length;e++)this.userSkills[e].is_accessible==1&this.userSkills[e].is_mastered!=1&&s.push({name:this.userSkills[e].name,id:this.userSkills[e].id,url:this.userSkills[e].url,level:this.userSkills[e].level,icon:this.userSkills[e].icon});return s.length>0&&(this.noSkills=!1),s}},methods:{}},N=s=>(f("data-v-990a951b"),s=s(),v(),s),P=N(()=>t("h2",{class:"secondary-heading h5 bg-white rounded p-2"},"Available Skills",-1)),V={id:"skill-list"},G=["src"];function E(s,e,c,l,r,a){const d=h("router-link");return i(),n(_,null,[P,t("div",V,[(i(!0),n(_,null,w(a.availableSkills,o=>(i(),g(d,{class:y([{"grade-school":o.level=="grade_school","middle-school":o.level=="middle_school","high-school":o.level=="high_school",college:o.level=="college",phd:o.level=="phd"},"skill-link btn m-2 d-flex"]),to:`/skills/${o.url}`,target:"_blank"},{default:T(()=>[t("img",{class:"icons",src:o.icon},null,8,G),D("  "+k(o.name),1)]),_:2},1032,["class","to"]))),256))])],64)}const W=S(U,[["render",E],["__scopeId","data-v-990a951b"]]);const Q={data(){return{visitedSkills:[],noSkills:!0}},props:["userId"],async created(){const s=await fetch("/skills/last-visited/");this.visitedSkills=await s.json(),console.log(this.visitedSkills),this.visitedSkills.length>0&&(this.noSkills=!1)},computed:{}},H=s=>(f("data-v-cd55ee0c"),s=s(),v(),s),Y=H(()=>t("h2",{class:"secondary-heading h5 bg-white rounded p-2"}," Last Visited Skills ",-1)),F={id:"skill-list"},J=["src"];function Z(s,e,c,l,r,a){const d=h("router-link");return i(),n(_,null,[Y,t("div",F,[(i(!0),n(_,null,w(r.visitedSkills,o=>(i(),g(d,{class:y([{"grade-school":o.level=="grade_school","middle-school":o.level=="middle_school","high-school":o.level=="high_school",college:o.level=="college",phd:o.level=="phd"},"skill-link btn m-2 d-flex"]),to:`/skills/${o.url}`,target:"_blank"},{default:T(()=>[t("img",{class:"icons",src:o.icon},null,8,J),D("  "+k(o.name),1)]),_:2},1032,["class","to"]))),256))])],64)}const K=S(Q,[["render",Z],["__scopeId","data-v-cd55ee0c"]]);const X={setup(){const s=x(),e=$();return{userDetailsStore:s,skillsStore:e}},data(){return{goals:[]}},async created(){await this.getGoals(),this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let s=0;s<this.goals.length;s++){let e=this.skillsStore.skillsList.find(c=>c.id===this.goals[s].skill_id);this.goals[s].name=e.name,this.goals[s].level=e.level}},methods:{async getGoals(){const s=await fetch("/goals/"+this.userDetailsStore.userId+"/list");this.goals=await s.json()}}},q=s=>(f("data-v-e69f95e5"),s=s(),v(),s),ss=q(()=>t("h2",{class:"secondary-heading h5 bg-white rounded p-2"},"Goals",-1)),es={id:"goal-list"},ts=q(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"black",width:"20",heigth:"20"},[t("path",{d:"M448 256A192 192 0 1 0 64 256a192 192 0 1 0 384 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 80a80 80 0 1 0 0-160 80 80 0 1 0 0 160zm0-224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zM224 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1));function os(s,e,c,l,r,a){const d=h("router-link");return i(),n(_,null,[ss,t("div",es,[(i(!0),n(_,null,w(r.goals,o=>(i(),g(d,{class:y([{"grade-school":o.level=="grade_school","middle-school":o.level=="middle_school","high-school":o.level=="high_school",college:o.level=="college",phd:o.level=="phd"},"goal-link btn m-2 d-flex"]),to:`/goals/${o.id}`,target:"_blank"},{default:T(()=>[ts,D("   "+k(o.name),1)]),_:2},1032,["class","to"]))),256))])],64)}const is=S(X,[["render",os],["__scopeId","data-v-e69f95e5"]]);const ls={props:{assessments:{type:Array,required:!0}},setup(){return{}},data(){return{}},computed:{},methods:{}},rs=s=>(f("data-v-5dc9288a"),s=s(),v(),s),ns={class:"container-fluid"},as=rs(()=>t("h2",{class:"secondary-heading h4"},"Mark Assessments",-1)),cs={id:"list-body"},ds={class:"assessment"},us={id:"student-name"},hs={id:"skill-name"},_s={id:"date"};function ms(s,e,c,l,r,a){const d=h("RouterLink");return i(),n("div",ns,[as,t("div",cs,[(i(!0),n(_,null,w(this.assessments,o=>(i(),n("div",ds,[b(d,{class:"assessment-link",to:"/mark-assessment/"+o.id},{default:T(()=>[t("span",us,k(o.studentUsername)+", ",1),t("span",hs,k(o.skillName)+", ",1),t("span",_s,k(o.date),1)]),_:2},1032,["to"])]))),256))])])}const ps=S(ls,[["render",ms],["__scopeId","data-v-5dc9288a"]]);const ks={props:{questions:{type:Array,required:!0}},methods:{formatDate(s){var e=s.replace("T"," ");e=e.replace("Z"," ");let c=e.split(/[- :]/);var l=new Date(Date.UTC(c[0],c[1]-1,c[2],c[3],c[4],c[5])),r={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return l=l.toLocaleDateString("en-US",r),l}}},gs=s=>(f("data-v-1df3f680"),s=s(),v(),s),Ss={class:"container-fluid"},fs=gs(()=>t("h2",{class:"secondary-heading h4"},"Check New Questions",-1)),vs={class:"list-body"},ys={class:"question"},ws={class:"student-name"},Ts={class:"skill-name"},bs={class:"date"};function Ds(s,e,c,l,r,a){const d=h("RouterLink");return i(),n("div",Ss,[fs,t("div",vs,[(i(!0),n(_,null,w(c.questions,o=>(i(),n("div",ys,[b(d,{class:"question-link",to:`/check-student-question/${o.id}`},{default:T(()=>[t("span",ws,k(o.student)+", ",1),t("span",Ts,k(o.skillname)+", ",1),t("span",bs,k(a.formatDate(o.create_date)),1)]),_:2},1032,["to"])]))),256))])])}const Is=S(ks,[["render",Ds],["__scopeId","data-v-1df3f680"]]);const xs={setup(){const s=x();return s.getUserDetails(),{userDetailsStore:s}},data(){return{query:"",recommendedSkillsOrderedByRelevance:[],showRecommendedSkills:!1}},mounted(){var s=document.getElementById("searchBar");s.addEventListener("keypress",function(e){e.key==="Enter"&&(e.preventDefault(),document.getElementById("searchButton").click())})},methods:{async getRecommendedSkills(){let s="/skills/get-recommended-skills";const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.userDetailsStore.userId,cohortId:this.userDetailsStore.cohortId,query:this.query})},l=await(await fetch(s,e)).json();this.recommendedSkillsOrderedByRelevance=l,this.showRecommendedSkills=!0},removeRecommendedSkill(s){this.recommendedSkillsOrderedByRelevance.splice(s,1)},async createLearningTrack(){let s="/learning-tracks/"+this.userDetailsStore.userId+"/create",e=this.recommendedSkillsOrderedByRelevance.map(l=>l.id);const c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.query,skills:e})};await fetch(s,c),alert("Learning track created. You can view it on the 'Learning Tracks' tab.")}}},L=s=>(f("data-v-0b7ed841"),s=s(),v(),s),Ls={class:"search-bar"},Cs={class:"d-flex align-items-center p-1"},$s=L(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",class:"secondary-icon"},[t("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})],-1)),qs=[$s],Rs={key:0},Ms=L(()=>t("h2",{class:"secondary-heading h5 bg-white rounded p-2 mt-2"}," Recommended Skills ",-1)),Bs=["onClick"],js=L(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",height:"18",class:"tertiary-icon"},[t("path",{d:"M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"})],-1)),As=[js];function Os(s,e,c,l,r,a){const d=h("router-link");return i(),n(_,null,[t("div",Ls,[t("div",Cs,[B(t("input",{id:"searchBar",type:"text",class:"recommended-skills-input",placeholder:"What skill or profession do you want to learn?","onUpdate:modelValue":e[0]||(e[0]=o=>r.query=o)},null,512),[[j,r.query]]),t("button",{id:"searchButton",onClick:e[1]||(e[1]=(...o)=>a.getRecommendedSkills&&a.getRecommendedSkills(...o)),class:"btn primary-btn rounded p-2"},qs)])]),r.showRecommendedSkills?(i(),n("div",Rs,[Ms,(i(!0),n(_,null,w(r.recommendedSkillsOrderedByRelevance,(o,I)=>(i(),n("div",null,[b(d,{class:y([{"grade-school":o.level=="grade_school","middle-school":o.level=="middle_school","high-school":o.level=="high_school",college:o.level=="college",phd:o.level=="phd"},"skill-link btn m-1"]),to:`/skills/${o.url}`,target:"_blank"},{default:T(()=>[D(k(o.name),1)]),_:2},1032,["class","to"]),t("button",{class:"btn red-btn",onClick:C=>a.removeRecommendedSkill(I)},As,8,Bs)]))),256)),t("button",{class:"btn primary-btn mt-3",onClick:e[2]||(e[2]=(...o)=>a.createLearningTrack&&a.createLearningTrack(...o))}," Create learning track ")])):u("",!0)],64)}const zs=S(xs,[["render",Os],["__scopeId","data-v-0b7ed841"]]);const Us={setup(){const s=x(),e=O(),c=A(),l=$(),r=z();return s.getUserDetails(),{userDetailsStore:s,assessmentsStore:e,usersStore:c,skillsStore:l,instructorStudentsStore:r}},data(){return{showWelcomeModal:!1,assessments:[],questions:[],studentIds:[],isTutorialComplete:!1,showTutorialTip1:!1,showTutorialTip2:!1,showTutorialTip3:!1,showTutorialTip4:!1,showTutorialTip5:!1}},components:{StudentProgress:W,MarkAssessment:ps,LastVisitedSkills:K,Goals:is,HubStudentQuestionList:Is,RecommendedSkillsGenerator:zs},computed:{name(){return this.userDetailsStore.firstName+" "+this.userDetailsStore.lastName}},async created(){this.checkIfTutorialComplete(),this.userDetailsStore.role=="instructor"&&(await this.fetchAssessments(),await this.getStudentMCQuestions())},methods:{async fetchAssessments(){await this.assessmentsStore.getAssessments(),this.instructorStudentsStore.instructorStudentsList.length==0&&await this.instructorStudentsStore.getInstructorStudentsList();for(let s=0;s<this.instructorStudentsStore.instructorStudentsList.length;s++)this.userDetailsStore.userId==this.instructorStudentsStore.instructorStudentsList[s].instructor_id&&this.studentIds.push(this.instructorStudentsStore.instructorStudentsList[s].student_id);for(let s=0;s<this.assessmentsStore.assessments.length;s++)for(let e=0;e<this.studentIds.length;e++)this.assessmentsStore.assessments[s].student_id==this.studentIds[e]&&this.assessments.push(this.assessmentsStore.assessments[s]);for(let s=0;s<this.assessments.length;s++){let e=new Date(this.assessments[s].date).toDateString();this.assessments[s].date=e}this.usersStore.users.length==0&&await this.usersStore.getUsers();for(let s=0;s<this.assessments.length;s++)for(let e=0;e<this.usersStore.users.length;e++)this.assessments[s].student_id==this.usersStore.users[e].id&&(this.assessments[s].studentUsername=this.usersStore.users[e].username);this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList();for(let s=0;s<this.assessments.length;s++)for(let e=0;e<this.skillsStore.skillsList.length;e++)this.assessments[s].skill_id==this.skillsStore.skillsList[e].id&&(this.assessments[s].skillName=this.skillsStore.skillsList[e].name)},async getStudentMCQuestions(){const e=await(await fetch("/questions/student-mc-questions/full-data-list")).json();this.questions=e},async checkIfTutorialComplete(){try{const e=await(await fetch("/users/check-tutorial-progress/hub/"+this.userDetailsStore.userId)).json();e===0&&this.userDetailsStore.role!="student"?this.showWelcomeModal=!0:e===0&&this.userDetailsStore.role=="student"?this.showTutorialTip1=!0:e===1&&(this.isTutorialComplete=!0)}catch(s){console.error("Error checking tutorial progress:",s)}},progressTutorial(s){s==1?(this.showTutorialTip1=!1,this.showTutorialTip2=!0):s==2?(this.showTutorialTip2=!1,this.showTutorialTip3=!0):s==3?(this.showTutorialTip3=!1,this.showTutorialTip4=!0):s==4?(this.showTutorialTip4=!1,this.showTutorialTip5=!0):s==5&&(this.showTutorialTip5=!1,this.markTutorialComplete())},markTutorialComplete(){let s="/users/mark-tutorial-complete/hub/"+this.userDetailsStore.userId;fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"}})},async startTutorial(){this.showTutorialTip1=!0,this.isTutorialComplete=!1,this.showWelcomeModal=!1,await this.resetTutorialProgress()},async resetTutorialProgress(){try{await fetch(`/users/reset-all-tutorials/${this.userDetailsStore.userId}`,{method:"PUT",headers:{"Content-Type":"application/json"}})}catch(s){console.error("Error resetting tutorials:",s)}},async closeTutorial(){this.showWelcomeModal=!1,await this.markAllTutorialsComplete()},restartTutorial(){this.startTutorial()},async markAllTutorialsComplete(){try{(await fetch(`/users/mark-all-tutorials-complete/${this.userDetailsStore.userId}`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok?this.isTutorialComplete=!0:console.error("Error marking tutorials as complete.")}catch(s){console.error("API request failed:",s)}}}},m=s=>(f("data-v-746275b6"),s=s(),v(),s),Ns={class:"container-fluid d-flex justify-content-end my-1"},Ps=m(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[t("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)),Vs=[Ps],Gs={class:"container min-vh-100"},Es={class:"row mb-3"},Ws={class:"col"},Qs={key:0,class:"info-panel bg-light rounded p-2 mt-2"},Hs=m(()=>t("p",null,"Type a career or skill here to get recommendations.",-1)),Ys={class:"row"},Fs={class:"h-100"},Js={key:0,class:"info-panel bg-light rounded p-2 mb-2"},Zs=m(()=>t("p",null," This section shows your available skills. These are the skills that you can try to master by taking a quiz. ",-1)),Ks=m(()=>t("p",null," Once you master a skill, more skills will get unlocked. ",-1)),Xs={class:"h-100"},se={key:0,class:"info-panel bg-light rounded p-2 mb-2"},ee=m(()=>t("p",null," This section shows your the last 5 skill pages you visited. ",-1)),te={key:2,class:"col-lg-4 col-md-6 mb-2"},oe={class:"h-100"},ie={key:0,class:"info-panel bg-light rounded p-2 mb-2"},le=m(()=>t("p",null,"This section shows any goals you might have made.",-1)),re=m(()=>t("p",null," You can make a goal when there is a skill you want to master but it is not unlocked yet. ",-1)),ne={key:0,class:"modal"},ae={class:"modal-content"},ce=m(()=>t("h1",{class:"heading h3"},"Welcome to the Collins Institute",-1)),de=m(()=>t("p",null,"Would you like to go through the tutorial?",-1)),ue=m(()=>t("p",null,' You can start or restart it anytime by clicking the "i" button on any page. ',-1)),he={class:"d-flex justify-content-between"},_e={key:1,class:"modal"},me={key:0,class:"modal-content"},pe=m(()=>t("p",null,"This is your hub page.",-1));function ke(s,e,c,l,r,a){const d=h("RecommendedSkillsGenerator"),o=h("StudentProgress"),I=h("MarkAssessment"),C=h("LastVisitedSkills"),R=h("HubStudentQuestionList"),M=h("Goals");return i(),n(_,null,[t("div",Ns,[t("button",{class:"btn",onClick:e[0]||(e[0]=(...p)=>a.restartTutorial&&a.restartTutorial(...p))},Vs)]),t("div",Gs,[t("div",Es,[t("div",Ws,[b(d),r.showTutorialTip2&&l.userDetailsStore.role=="student"?(i(),n("div",Qs,[Hs,t("button",{class:"btn primary-btn",onClick:e[1]||(e[1]=p=>a.progressTutorial(2))}," next ")])):u("",!0)])]),t("div",Ys,[l.userDetailsStore.role!="editor"?(i(),n("div",{key:0,class:y(["col-lg-4 col-md-6 mb-2",{"d-none":l.userDetailsStore.role=="instructor"&&r.assessments.length===0}])},[t("div",Fs,[r.showTutorialTip3&&l.userDetailsStore.role=="student"?(i(),n("div",Js,[Zs,Ks,t("button",{class:"btn primary-btn",onClick:e[2]||(e[2]=p=>a.progressTutorial(3))}," next ")])):u("",!0),l.userDetailsStore.role=="student"?(i(),g(o,{key:1,userId:l.userDetailsStore.userId},null,8,["userId"])):l.userDetailsStore.role=="instructor"?(i(),g(I,{key:2,assessments:r.assessments},null,8,["assessments"])):u("",!0)])],2)):u("",!0),l.userDetailsStore.role!="editor"?(i(),n("div",{key:1,class:y(["col-lg-4 col-md-6 mb-2",{"d-none":l.userDetailsStore.role=="instructor"&&r.questions.length===0}])},[t("div",Xs,[r.showTutorialTip4&&l.userDetailsStore.role=="student"?(i(),n("div",se,[ee,t("button",{class:"btn primary-btn",onClick:e[3]||(e[3]=p=>a.progressTutorial(4))}," next ")])):u("",!0),l.userDetailsStore.role=="student"?(i(),g(C,{key:1,userId:l.userDetailsStore.userId},null,8,["userId"])):l.userDetailsStore.role=="instructor"?(i(),g(R,{key:2,questions:r.questions},null,8,["questions"])):u("",!0)])],2)):u("",!0),l.userDetailsStore.role=="student"?(i(),n("div",te,[t("div",oe,[r.showTutorialTip5&&l.userDetailsStore.role=="student"?(i(),n("div",ie,[le,re,t("button",{class:"btn primary-btn",onClick:e[4]||(e[4]=p=>a.progressTutorial(5))}," close ")])):u("",!0),b(M)])])):u("",!0)])]),r.showWelcomeModal?(i(),n("div",ne,[t("div",ae,[ce,de,ue,t("div",he,[t("button",{class:"btn red-btn mx-0",onClick:e[5]||(e[5]=(...p)=>a.closeTutorial&&a.closeTutorial(...p))}," No "),t("button",{class:"btn primary-btn mx-0",onClick:e[6]||(e[6]=(...p)=>a.startTutorial&&a.startTutorial(...p))}," Yes ")])])])):u("",!0),l.userDetailsStore.role=="student"&&r.showTutorialTip1?(i(),n("div",_e,[r.showTutorialTip1&&l.userDetailsStore.role=="student"?(i(),n("div",me,[t("div",null,[pe,t("button",{class:"btn primary-btn",onClick:e[7]||(e[7]=p=>a.progressTutorial(1))}," next ")])])):u("",!0)])):u("",!0)],64)}const ve=S(Us,[["render",ke],["__scopeId","data-v-746275b6"]]);export{ve as default};
