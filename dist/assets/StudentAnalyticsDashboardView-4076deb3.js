import{u as q}from"./AnalyticsStore-4e8b929f.js";import{u as P}from"./TeacherAnalyticsStore-d2b59f9f.js";import{_ as C,o as g,c as f,f as R,r as D,a as t,g as S,l as v,k as b,b as k,F as H,z as L,s as x,t as F,p as V,d as E}from"./main-4c3aab74.js";import"./transform-4d0f7c8f.js";import{u as A,l as I}from"./line-d122782f.js";import{e as B}from"./time-3c9385c3.js";import{l as $,a as N,b as O}from"./linear-d9b6cbf2.js";import{m as T}from"./continuous-93813e6c.js";import{o as M,b as Y}from"./band-2263c9e7.js";import{s as y}from"./string-c67ea49d.js";import{c as j}from"./category10-63f9141e.js";import{s as z}from"./sort-fcaf8f38.js";import"./point-ea70dc51.js";import"./colors-98f238a0.js";const W={name:"SchoolProgressChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(e){e.student.length>0?this.axisData=e.student:e.average.length>0?this.axisData=e.average:this.axisData=[];const c=Object.entries(e).map(([s,w])=>({name:s,values:w}));y("#progress-chart-container");const o=document.getElementById("progress-chart-container").clientWidth,n=document.getElementById("progress-chart-container").clientHeight,h=0,u=0,l=0,m=0,i=A(B(this.axisData,s=>s.date),[m,o-u]),d=$([0,T(this.axisData,s=>s.quantity)],[n-l,h]),p=M().domain(c.map(s=>s.name)).range(j),_=I().x(s=>i(s.date)).y(s=>d(s.quantity));y("#progress-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(o,n),+Math.min(o,n)]).attr("preserveAspectRatio","xMinYMin").selectAll(".line").data(c).join("path").attr("fill","none").attr("stroke",s=>p(s.name)).attr("stroke-width",3).attr("d",s=>_(s.values))}}};function U(e,c,o,n,h,u){return null}const G=C(W,[["render",U]]),J={name:"SchoolTimeChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(e){e.student.length>0?this.axisData=e.student:e.average.length>0?this.axisData=e.average:this.axisData=[];const c=Object.entries(e).map(([s,w])=>({name:s,values:w}));y("#time-chart-container");const o=document.getElementById("time-chart-container").clientWidth,n=document.getElementById("time-chart-container").clientHeight,h=0,u=0,l=0,m=0,i=A(B(this.axisData,s=>s.date),[m,o-u]),d=$([0,T(this.axisData,s=>s.quantity)],[n-l,h]),p=M().domain(c.map(s=>s.name)).range(j),_=I().x(s=>i(s.date)).y(s=>d(s.quantity));y("#time-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(o,n),+Math.min(o,n)]).attr("preserveAspectRatio","xMinYMin").selectAll(".line").data(c).join("path").attr("fill","none").attr("stroke",s=>p(s.name)).attr("stroke-width",3).attr("d",s=>_(s.values))}}};function K(e,c,o,n,h,u){return null}const Q=C(J,[["render",K]]),X={name:"StudentComparisonChart",props:["data","colour"],data(){return{}},mounted(){},methods:{createChart(e){y("#student-comparison-container");const c=25,o=0,n=0,h=10,u=200,l=700,m=Math.ceil((e.length+.1)*c)+o+h,i=$().domain([0,T(e,a=>a.quantity)]).range([u,l-n]),d=Y().domain(z(e,a=>-a.quantity).map(a=>a.name)).rangeRound([o,m-h]).padding(.1),p=i.tickFormat(20),_=y("#student-comparison-container").append("svg").attr("width",l).attr("height",m).attr("viewBox",[0,0,l,m]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");_.append("g").attr("fill",this.colour).selectAll().data(e).join("rect").attr("x",i(0)).attr("y",a=>d(a.name)).attr("width",a=>i(a.quantity)-i(0)).attr("height",d.bandwidth()),_.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(e).join("text").attr("x",a=>i(a.quantity)).attr("y",a=>d(a.name)+d.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(a=>p(a.quantity)).call(a=>a.filter(s=>i(s.quantity)-i(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),_.append("g").attr("transform",`translate(0,${o})`).call(N(i).ticks(0)).call(a=>a.select(".domain").remove()),_.append("g").attr("transform",`translate(${u},0)`).attr("style","font-size: 16px").call(O(d).tickSizeOuter(0))}}},Z={id:"student-comparison-container"};function tt(e,c,o,n,h,u){return g(),f("div",Z)}const et=C(X,[["render",tt]]);const st={name:"Student-Dashboard",setup(){const e=R(),c=q(),o=P();return{userDetailsStore:e,analyticsStore:c,teacherAnalyticsStore:o}},data(){return{showSidebar:!0,screenWidth:screen.width,isStudentData:!0,isSchoolData:!0,isLanguageData:!1,isMathData:!1,isHistoryData:!1,isLifeData:!1,isCSData:!1,isSAndIData:!1,isDIData:!1,progressData:{student:[],average:[]},isAboveTheCurve:!1}},components:{StudentProgressChart:G,StudentComparisonChart:et,StudentTimeChart:Q},async created(){await this.analyticsStore.getStudentProgress(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userDetailsStore.userId),await this.analyticsStore.getStudentTime(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.teacherAnalyticsStore.getStudentMultipleFails(this.userDetailsStore.userId),this.analyticsStore.progress.student[this.analyticsStore.progress.student.length-1].quantity>this.analyticsStore.progress.tenant[this.analyticsStore.progress.tenant.length-1].quantity&&(this.isAboveTheCurve=!0),await this.HandleProgressData(),await this.HandleComparisonData(),await this.HandleTimeData()},methods:{async HandleProgressData(){if(this.isStudentData){this.progressData.student=[];for(let e=0;e<this.analyticsStore.progress.student.length;e++)this.progressData.student.push(this.analyticsStore.progress.student[e])}else this.progressData.student=[];if(this.isSchoolData){this.progressData.average=[];for(let e=0;e<this.analyticsStore.progress.tenant.length;e++)this.progressData.average.push(this.analyticsStore.progress.tenant[e])}else this.progressData.average=[];this.$nextTick(()=>{this.$refs.progressChart&&this.$refs.progressChart.createChart(this.progressData)})},async HandleComparisonData(){this.$nextTick(()=>{this.$refs.comparisonChart&&this.$refs.comparisonChart.createChart(this.analyticsStore.studentRootSubjectsPassedAssessments)})},async HandleTimeData(){this.$nextTick(()=>{this.$refs.timeChart&&this.$refs.timeChart.createChart(this.analyticsStore.time)})},toggleSidebar(){this.showSidebar=!this.showSidebar}}},r=e=>(V("data-v-42711266"),e=e(),E(),e),at={class:"dashboard"},nt={class:"main"},ot={class:"content container"},rt={class:"dash-row row"},it={class:"col-md-6 h-100 position-relative"},ct={id:"progress-chart-container"},lt={class:"position-absolute chart-heading"},ht=r(()=>t("h2",{class:"heading h5"}," Progress over time ",-1)),dt=r(()=>t("span",{style:{color:"#5f31dd"}},[t("strong",null,"You")],-1)),ut=r(()=>t("br",null,null,-1)),mt=r(()=>t("span",{style:{color:"#ff7f0e"}},[t("strong",null,"School average")],-1)),pt={class:"col-md-6"},gt={id:"comparison-chart-container"},_t=r(()=>t("h2",{class:"heading h5 mt-1"},"Subject comparison",-1)),ft=r(()=>t("p",null,[t("em",null,"TODO: different color for each subject")],-1)),yt={class:"dash-row row"},St={class:"col-md h-100 position-relative"},vt={id:"time-chart-container"},Dt={class:"position-absolute chart-heading"},xt=r(()=>t("h2",{class:"heading h5"},"Study time",-1)),Ct=r(()=>t("span",{style:{color:"#5f31dd"}},[t("strong",null,"You")],-1)),wt=r(()=>t("br",null,null,-1)),bt=r(()=>t("span",{style:{color:"#ff7f0e"}},[t("strong",null,"School average")],-1)),kt={class:"col-md position-relative"},$t={class:"row"},Tt={class:"col-md"},At=r(()=>t("h2",{class:"h5 heading"}," Super challenging skills ",-1)),It={key:0},Bt={key:1},Mt={class:"col-md"},jt=r(()=>t("h2",{class:"h5 heading"},"Stats",-1)),qt=r(()=>t("li",null,[t("strong",null,"Skills passed:"),x(" 25")],-1)),Pt=r(()=>t("li",null,[t("strong",null,"Total time spent:"),x(" 5:00 ")],-1)),Rt=r(()=>t("strong",null,"Tokens used:",-1));function Ht(e,c,o,n,h,u){const l=D("RouterLink"),m=D("StudentProgressChart"),i=D("StudentComparisonChart"),d=D("StudentTimeChart");return g(),f("div",at,[t("div",nt,[t("div",ot,[t("div",rt,[t("div",it,[t("div",ct,[t("div",lt,[S(l,{to:"/my-progress/skills",class:""},{default:v(()=>[ht]),_:1}),dt,ut,mt]),h.progressData.student.length>0||h.progressData.average.length>0?(g(),b(m,{key:0,ref:"progressChart"},null,512)):k("",!0)])]),t("div",pt,[t("div",gt,[_t,ft,n.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(g(),b(i,{key:0,ref:"comparisonChart",data:n.analyticsStore.studentRootSubjectsPassedAssessments,colour:"#5f31dd"},null,8,["data"])):k("",!0)])])]),t("div",yt,[t("div",St,[t("div",vt,[t("div",Dt,[S(l,{to:"/my-progress/time"},{default:v(()=>[xt]),_:1}),Ct,wt,bt,n.analyticsStore.time.student.length>0||n.analyticsStore.time.tenant.length>0?(g(),b(d,{key:0,ref:"timeChart"},null,512)):k("",!0)])])]),t("div",kt,[t("div",$t,[t("div",Tt,[S(l,{to:"/my-progress/super-challenging",class:"col"},{default:v(()=>[At]),_:1}),n.teacherAnalyticsStore.studentMultipleFails.length>0?(g(),f("ul",It,[(g(!0),f(H,null,L(n.teacherAnalyticsStore.studentMultipleFails,p=>(g(),f("li",{class:"failed-skills",key:p.id},[S(l,{to:"/skills/"+p.url,target:"_blank"},{default:v(()=>[x(F(p.name),1)]),_:2},1032,["to"])]))),128))])):(g(),f("p",Bt,"Nothing to worry about yet"))]),t("div",Mt,[jt,t("ul",null,[qt,Pt,t("li",null,[S(l,{to:"/my-progress/tokens"},{default:v(()=>[Rt,x(" 10,000")]),_:1})])])])])])])])])])}const Xt=C(st,[["render",Ht],["__scopeId","data-v-42711266"]]);export{Xt as default};
