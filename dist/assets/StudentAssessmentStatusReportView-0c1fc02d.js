import{_ as x,o as n,c as r,A as F,J as v,r as k,a as t,t as h,F as p,z as g,k as B,b as D,g as y,l as f,s as S}from"./main-2f5cb993.js";import{u as M}from"./TeacherAnalyticsStore-c38453e0.js";import{s as b}from"./transform-7263f110.js";import{l as T,m as j,b as q,s as C}from"./linear-78f05e13.js";import{a as N,b as $}from"./continuous-5681c0ba.js";const z={name:"FailedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){b("#failed-assessments-chart-container");const a=25,i=0,m=0,o=10,u=200,d=1e3,c=Math.ceil((this.data.length+.1)*a)+i+o,l=T().domain([0,j(this.data,e=>e.quantity)]).range([u,d-m]),s=q().domain(C(this.data,e=>-e.quantity).map(e=>e.name)).rangeRound([i,c-o]).padding(.1),w=l.tickFormat(20),_=b("#failed-assessments-chart-container").append("svg").attr("width",d).attr("height",c).attr("viewBox",[0,0,d,c]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");_.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",l(0)).attr("y",e=>s(e.name)).attr("width",e=>l(e.quantity)-l(0)).attr("height",s.bandwidth()),_.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",e=>l(e.quantity)).attr("y",e=>s(e.name)+s.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>w(e.quantity)).call(e=>e.filter(A=>l(A.quantity)-l(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),_.append("g").attr("transform",`translate(0,${i})`).call(N(l).ticks(0)).call(e=>e.select(".domain").remove()),_.append("g").attr("transform",`translate(${u},0)`).call($(s).tickSizeOuter(0))}},I={id:"failed-assessments-chart-container"};function H(a,i,m,o,u,d){return n(),r("div",I)}const V=x(z,[["render",H]]),L={setup(){const a=F(),i=v(),m=M();return{usersStore:a,userSkillsStore:i,teacherAnalyticsStore:m}},components:{FailedAssessmentsHorizontalBarChart:V},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentAttempts:[],multipleFails:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const a=this.usersStore.users.find(i=>i.id===this.studentId);a&&(this.studentName=a.username),await this.userSkillsStore.getMasteredSkills(this.studentId),await this.getAssessmentAttempts(),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId)},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(a=>a.json()).then(a=>{this.assessmentAttempts=a}).catch(a=>{console.error("Error fetching last visited skills:",a)})},assessmentDate(a){return new Date(a).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}}},R={class:"container"},U={class:"d-flex justify-content-between w-100"},E=t("h1",{class:"heading"},"Assessment Status Report",-1),O={class:"secondary-heading h3"},J=t("h2",{class:"secondary-heading"},"Passed",-1),P={key:0,class:"mb-4"},G={class:"table"},K=t("tr",null,[t("th",null,"Skill"),t("th",null,"Date")],-1),Q={key:1},W=t("h2",{class:"secondary-heading"},"Attempted",-1),X={key:2,class:"mb-4"},Y={class:"table"},Z=t("tr",null,[t("th",null,"Skill"),t("th",null,"Date")],-1),tt={key:3},st=t("p",null,null,-1),et=t("h2",{class:"secondary-heading"},"Failed multiple times",-1),at={key:5,class:"mb-4"},nt={class:"table"},rt=t("tr",null,[t("th",null,"Skill"),t("th",null,"Times")],-1),it={key:6};function lt(a,i,m,o,u,d){const c=k("router-link"),l=k("FailedAssessmentsHorizontalBarChart");return n(),r("div",R,[t("span",U,[E,t("h2",O,h(u.studentName),1)]),J,this.userSkillsStore.masteredSkills.length>0?(n(),r("div",P,[t("table",G,[K,(n(!0),r(p,null,g(o.userSkillsStore.masteredSkills,s=>(n(),r("tr",{key:s.id,class:"table-rows"},[t("td",null,[y(c,{target:"_blank",to:"/skills/"+s.url},{default:f(()=>[S(h(s.name),1)]),_:2},1032,["to"])]),t("td",null,h(d.assessmentDate(s.date)),1)]))),128))])])):(n(),r("p",Q,"This student has not completed any assessments yet.")),W,this.assessmentAttempts.length>0?(n(),r("div",X,[t("table",Y,[Z,(n(!0),r(p,null,g(u.assessmentAttempts,s=>(n(),r("tr",{key:s.id,class:"table-rows"},[t("td",null,[y(c,{target:"_blank",to:"/skills/"+s.url},{default:f(()=>[S(h(s.name),1)]),_:2},1032,["to"])]),t("td",null,h(d.assessmentDate(s.date)),1)]))),128))])])):(n(),r("p",tt,"This student has attempted any assessments yet.")),st,et,o.teacherAnalyticsStore.studentMultipleFails.length>0?(n(),B(l,{key:4,data:o.teacherAnalyticsStore.studentMultipleFails,colour:"darkred"},null,8,["data"])):D("",!0),this.teacherAnalyticsStore.studentMultipleFails.length>0?(n(),r("div",at,[t("table",nt,[rt,(n(!0),r(p,null,g(o.teacherAnalyticsStore.studentMultipleFails,s=>(n(),r("tr",{key:s.id,class:"table-rows"},[t("td",null,[y(c,{target:"_blank",to:"/skills/"+s.url},{default:f(()=>[S(h(s.name),1)]),_:2},1032,["to"])]),t("td",null,h(s.quantity),1)]))),128))])])):(n(),r("p",it," This student has not failed any assessments more than once yet. "))])}const mt=x(L,[["render",lt]]);export{mt as default};
