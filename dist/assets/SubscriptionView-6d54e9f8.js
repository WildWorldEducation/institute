import{_ as u,e as c,o as a,c as l,a as t,t as o,q as i,b as h}from"./main-325ae4d0.js";import{u as d}from"./SettingsStore-581cfcfd.js";const m={setup(){const e=c(),s=d();return{userDetailsStore:e,settingsStore:s}},data(){return{monthlyTokenUsage:null,year:0,month:"",dollars:10,isAITokenLimitReached:!1,assistantsModelPrice:{input:75,output:150},amountOfTokens:0}},async mounted(){this.settingsStore.freeMonthlyTokens==0&&await this.settingsStore.getSettings(),await this.userDetailsStore.getUserDetails(),this.userDetailsStore.tokens<=0&&this.settingsStore.freeMonthlyTokens<=this.userDetailsStore.monthlyTokenUsage&&(this.isAITokenLimitReached=!0),this.year=new Date().getFullYear();const e=["January","February","March","April","May","June","July","August","September","October","November","December"],s=new Date;this.month=e[s.getMonth()]},methods:{checkout(){this.amountOfTokens=this.dollars*this.settingsStore.tokensPerDollar,fetch("/subscriptions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dollars:this.dollars,userId:this.userDetailsStore.userId,tokensPerDollar:this.settingsStore.tokensPerDollar,amountOfTokens:this.amountOfTokens})}).then(e=>e.ok?e.json():e.json().then(s=>Promise.reject(s))).then(({url:e})=>{console.log("add tokens"),window.location=e}).catch(e=>{console.error(e.error)})}},computed:{numberOfInputTokens(){let e=1e6/this.assistantsModelPrice.input;return Math.trunc(this.dollars*e)},numberOfOutputTokens(){let e=1e6/this.assistantsModelPrice.output;return Math.trunc(this.dollars*e)}}},g={class:"container"},k=t("h1",{class:"heading"},"Subscription",-1),S={class:"secondary-heading h4 mb-4"},p=t("strong",null,"Free limit:",-1),f=t("strong",null,"Your tokens:",-1),_=t("strong",null,"Current usage:",-1),y={key:0,class:"alert alert-warning",role:"alert"};function D(e,s,T,n,r,b){return a(),l("div",g,[k,t("h2",S," Monthly AI usage: "+o(r.month)+", "+o(r.year),1),t("ul",null,[t("li",null,[t("p",null,[p,i(" "+o(n.settingsStore.freeMonthlyTokens.toLocaleString()),1)])]),t("li",null,[t("p",null,[f,i(" "+o(n.userDetailsStore.tokens.toLocaleString()),1)])]),t("li",null,[t("p",null,[_,i(" "+o(n.userDetailsStore.monthlyTokenUsage.toLocaleString()),1)])])]),r.isAITokenLimitReached?(a(),l("div",y," You are over the monthly free limit. You can't use the AI features until next month. ")):h("",!0)])}const P=u(m,[["render",D]]);export{P as default};
