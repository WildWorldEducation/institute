import{_ as u,f,r as p,o as c,c as d,a as n,k as _,p as y,d as w,b as g,F as C}from"./main-63ddc164.js";import{u as A}from"./AnalyticsStore-c9914b70.js";import"./transform-4d0f7c8f.js";import{l as k,a as B,b as D}from"./linear-841004c4.js";import{m as F,b as L}from"./continuous-e5db47ab.js";import{s as T}from"./sort-fcaf8f38.js";import{s as z}from"./string-c67ea49d.js";import{D as S}from"./downloadCSVBtn-7ab9d994.js";import{F as I}from"./FailedAssessmentsHorizontalBarChart-4a8fb244.js";const R={name:"TenantFailedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){this.data;const r=document.getElementById("failed-assessments-chart-container").clientWidth,l=document.getElementById("failed-assessments-chart-container").clientHeight,a=k().domain([0,F(this.data,s=>s.quantity)]).range([200,r-0]),i=L().domain(T(this.data,s=>-s.quantity).map(s=>s.name)).rangeRound([0,l-10]).padding(.1),x=a.tickFormat(20),m=z("#failed-assessments-chart-container").append("svg").attr("width",r).attr("height",l).attr("viewBox",[0,0,r,l]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");m.append("g").attr("fill","darkred").selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",s=>i(s.name)).attr("width",s=>a(s.quantity)-a(0)).attr("height",i.bandwidth()),m.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",s=>a(s.quantity)).attr("y",s=>i(s.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(s=>x(s.quantity)).call(s=>s.filter(b=>a(b.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),m.append("g").attr("transform","translate(0,0)").call(B(a).ticks(0)).call(s=>s.select(".domain").remove()),m.append("g").attr("transform","translate(200,0)").call(D(i).tickSizeOuter(0))}};function H(t,e,h,o,r,l){return null}const j=u(R,[["render",H]]);const E={setup(){const t=f(),e=A();return{userDetailsStore:t,analyticsStore:e}},components:{TenantFailedAssessmentsHorizontalBarChart:j,DownloadCSVBtn:S},data(){return{studentId:this.$route.params.studentId}},async created(){this.analyticsStore.failedAssessments.length==0&&await this.getFailedAssessments()},methods:{async getFailedAssessments(){try{const t=await fetch(`/student-analytics/failed-assessments/tenant/${this.userDetailsStore.tenantId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);this.analyticsStore.failedAssessments=await t.json()}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.analyticsStore.failedAssessments=[]}}}},v=t=>(y("data-v-ba06c1cf"),t=t(),w(),t),q={class:"container chart-page"},Q={class:"row h-100"},M={class:"col-md position-relative"},N=v(()=>n("h3",{class:"secondary-heading h5"},"Assessments failed",-1)),V={id:"failed-assessments-chart-container"},P=v(()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[n("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)),O=[P],U={key:1};function W(t,e,h,o,r,l){const a=p("TenantFailedAssessmentsHorizontalBarChart");return c(),d("div",q,[n("div",Q,[n("div",M,[N,n("div",V,[n("button",{class:"position-absolute download-btn btn",onClick:e[0]||(e[0]=i=>t.downloadData(o.analyticsStore.rootSubjectsFailedAssessments,"Subjects-failed"))},O),o.analyticsStore.failedAssessments.length>0?(c(),_(a,{key:0,data:o.analyticsStore.failedAssessments},null,8,["data"])):(c(),d("p",U,"No data yet"))])])])])}const G=u(E,[["render",W],["__scopeId","data-v-ba06c1cf"]]);const J={setup(){const t=f(),e=A();return{userDetailsStore:t,analyticsStore:e}},components:{FailedAssessmentsHorizontalBarChart:I,DownloadCSVBtn:S},data(){return{failedAssessmentQuantities:[],failedAssessmentQuantitiesDownloadData:[]}},async created(){this.getAllStudentsFailedAssessments()},methods:{async getAllStudentsFailedAssessments(){try{const t=await fetch(`/student-analytics/failed-assessments/all-students/${this.userDetailsStore.userId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();this.failedAssessmentQuantities=Array.isArray(e)?e:[]}catch(t){console.error("Error fetching all students failed assessments:",t),this.failedAssessmentQuantities=[]}}}},$=t=>(y("data-v-5841f13e"),t=t(),w(),t),K={class:"container chart-page"},X={class:"row h-100"},Y={class:"col-md position-relative"},Z=$(()=>n("h3",{class:"secondary-heading h5"},"Assessments failed",-1)),tt={id:"fails-by-skill-chart-container"},st=$(()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[n("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)),et=[st],at={key:1};function nt(t,e,h,o,r,l){const a=p("FailedAssessmentsHorizontalBarChart");return c(),d("div",K,[n("div",X,[n("div",Y,[Z,n("div",tt,[n("button",{class:"position-absolute download-btn btn",onClick:e[0]||(e[0]=i=>t.downloadData(o.analyticsStore.rootSubjectsFailedAssessments,"Subjects-failed"))},et),r.failedAssessmentQuantities.length>0?(c(),_(a,{key:0,data:r.failedAssessmentQuantities},null,8,["data"])):(c(),d("p",at,"No data yet"))])])])])}const ot=u(J,[["render",nt],["__scopeId","data-v-5841f13e"]]),rt={name:"Dashboard",setup(){return{userDetailsStore:f()}},data(){return{}},components:{SchoolAdminChallengesReport:G,TeacherChallengesReport:ot},async created(){}};function it(t,e,h,o,r,l){const a=p("SchoolAdminChallengesReport"),i=p("TeacherChallengesReport");return c(),d(C,null,[o.userDetailsStore.role=="school_admin"?(c(),_(a,{key:0})):g("",!0),o.userDetailsStore.role=="instructor"||o.userDetailsStore.role=="partner"?(c(),_(i,{key:1})):g("",!0)],64)}const gt=u(rt,[["render",it]]);export{gt as default};
