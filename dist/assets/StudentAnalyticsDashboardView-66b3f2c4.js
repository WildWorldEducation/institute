import{u as B}from"./AnalyticsStore-4ee5e19d.js";import{u as M}from"./TeacherAnalyticsStore-fb336232.js";import{_ as $,o as p,c as _,f as P,r as v,a as e,g as y,l as S,k,b,F as q,z as H,s as f,t as L,p as R,d as j}from"./main-d2006104.js";import{c as V,S as F}from"./StudentProgressChart-77fac8c4.js";import"./transform-af9a74a2.js";import{u as N,l as z}from"./line-85f04100.js";import{e as E}from"./extent-4cf1c809.js";import{l as A,a as O,b as I,c as Y}from"./linear-5b188edc.js";import{m as T,o as Q,b as W}from"./continuous-7328829e.js";import{s as w}from"./string-dd82ab4a.js";import{s as U}from"./sort-ed61f96d.js";import"./colors-98f238a0.js";import"./time-0457d93b.js";import"./point-ea70dc51.js";const G={name:"SchoolTimeChart",props:[],data(){return{axisData:[]}},mounted(){},methods:{createChart(t){if(t.student.length==0)this.axisData=t.tenant;else if(t.tenant.length==0)this.axisData=t.student;else{const a=t.student.reduce((x,C)=>Math.max(x,C.quantity),-1/0),D=t.tenant.reduce((x,C)=>Math.max(x,C.quantity),-1/0);a>=D?this.axisData=t.student:this.axisData=t.tenant}const d=Object.entries(t).map(([a,D])=>({name:a,values:D})),r=document.getElementById("time-chart-container").clientWidth,n=document.getElementById("time-chart-container").clientHeight,u=5,g=0,i=25,m=25,o=N(E(this.axisData,a=>a.date),[m,r-g]),c=A([0,T(this.axisData,a=>a.formattedQuantity)],[n-i,u]);Q().domain(d.map(a=>a.name)).range(V);const l=z().x(a=>o(a.date)).y(a=>c(a.formattedQuantity)),s=w("#time-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,+Math.min(r,n),+Math.min(r,n)]).attr("preserveAspectRatio","xMinYMin");s.append("g").attr("transform",`translate(0,${n-i})`).call(O(o).ticks(t.length).tickSizeOuter(0)),s.append("g").attr("transform",`translate(${m},0)`).call(I(c).ticks(n/40)).call(a=>a.select(".domain").remove()).call(a=>a.selectAll(".tick line").clone().attr("x2",r-m-g).attr("stroke-opacity",.2)).call(a=>a.append("text").attr("x",-m).attr("y",10).attr("fill","currentColor").attr("text-anchor","start")),s.selectAll(".line").data(d).join("path").attr("fill","none").attr("stroke",a=>a.name=="student"?"RoyalBlue":"#ff7f0e").attr("stroke-width",3).attr("d",a=>l(a.values))}}};function J(t,d,r,n,u,g){return null}const K=$(G,[["render",J]]),X={name:"StudentComparisonChart",props:["data","colour"],data(){return{}},mounted(){},methods:{createChart(t){w("#student-comparison-container");const d=25,r=0,n=20,u=10,g=200,i=700,m=Math.ceil((t.length+.1)*d)+r+u,o=A().domain([0,T(t,s=>s.quantity)]).range([g,i-n]),c=W().domain(U(t,s=>-s.quantity).map(s=>s.name)).rangeRound([r,m-u]).padding(.1);o.tickFormat(20);const l=w("#student-comparison-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,i,m]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");l.append("g").selectAll().data(t).join("rect").attr("x",o(0)).attr("y",s=>c(s.name)).attr("width",s=>o(s.quantity)-o(0)).attr("height",c.bandwidth()).attr("fill",function(s){return s.name=="Language"?"DarkMagenta":s.name=="Mathematics"?"blue":s.name=="Science & Invention"?"purple":s.name=="Computer Science"?"deeppink":s.name=="Dangerous Ideas"?"brown":s.name=="History"?"cyan":s.name=="Life"?"magenta":"#ff7f0e"}),l.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(t).join("text").attr("x",s=>o(s.quantity)).attr("y",s=>c(s.name)+c.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(s=>s.quantity).call(s=>s.filter(a=>o(a.quantity)-o(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),l.append("g").attr("transform",`translate(0,${r})`).call(Y(o).ticks(0)).call(s=>s.select(".domain").remove()),l.append("g").attr("transform",`translate(${g},0)`).attr("style","font-size: 16px").call(I(c).tickSizeOuter(0))}}},Z={id:"student-comparison-container"};function tt(t,d,r,n,u,g){return p(),_("div",Z)}const et=$(X,[["render",tt]]);const st={name:"Student-Dashboard",setup(){const t=P(),d=B(),r=M();return{userDetailsStore:t,analyticsStore:d,teacherAnalyticsStore:r}},data(){return{showSidebar:!0,screenWidth:screen.width,isStudentData:!0,isSchoolData:!0,isLanguageData:!1,isMathData:!1,isHistoryData:!1,isLifeData:!1,isCSData:!1,isSAndIData:!1,isDIData:!1,progressData:{student:[],average:[]},isAboveTheCurve:!1}},components:{StudentProgressChart:F,StudentComparisonChart:et,StudentTimeChart:K},async created(){await this.analyticsStore.getStudentProgress(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.userDetailsStore.userId),await this.analyticsStore.getStudentTime(this.userDetailsStore.userId,this.userDetailsStore.tenantId),await this.teacherAnalyticsStore.getStudentMultipleFails(this.userDetailsStore.userId),this.analyticsStore.progress.student[this.analyticsStore.progress.student.length-1].quantity>this.analyticsStore.progress.tenant[this.analyticsStore.progress.tenant.length-1].quantity&&(this.isAboveTheCurve=!0),await this.HandleProgressData(),await this.HandleComparisonData(),await this.HandleTimeData()},methods:{async HandleProgressData(){if(this.isStudentData){this.progressData.student=[];for(let t=0;t<this.analyticsStore.progress.student.length;t++)this.progressData.student.push(this.analyticsStore.progress.student[t])}else this.progressData.student=[];if(this.isSchoolData){this.progressData.average=[];for(let t=0;t<this.analyticsStore.progress.tenant.length;t++)this.progressData.average.push(this.analyticsStore.progress.tenant[t])}else this.progressData.average=[];this.$nextTick(()=>{this.$refs.progressChart&&this.$refs.progressChart.createChart(this.progressData)})},async HandleComparisonData(){this.$nextTick(()=>{this.$refs.comparisonChart&&this.$refs.comparisonChart.createChart(this.analyticsStore.studentRootSubjectsPassedAssessments)})},async HandleTimeData(){this.$nextTick(()=>{this.$refs.timeChart&&this.$refs.timeChart.createChart(this.analyticsStore.time)})},toggleSidebar(){this.showSidebar=!this.showSidebar}}},h=t=>(R("data-v-0771bc52"),t=t(),j(),t),at={class:"dashboard"},nt={class:"main"},rt={class:"content container-fluid"},ot={class:"dash-row row"},it={class:"col-md-6 h-100 position-relative"},ct=h(()=>e("h2",{class:"heading h5"},"Progress over time",-1)),lt=h(()=>e("figcaption",{class:""},[e("span",{style:{color:"green"}},"You"),f(" vs "),e("span",{style:{color:"#ff7f0e"}},"school average")],-1)),ht={id:"progress-chart-container"},dt={class:"col-md-6"},ut={id:"comparison-chart-container"},mt=h(()=>e("h2",{class:"heading h5 mt-1"},"Progress comparison",-1)),pt={class:"dash-row row"},gt={class:"col-md h-100 position-relative"},_t=h(()=>e("h2",{class:"heading h5"},"Study time",-1)),ft=h(()=>e("figcaption",{class:""},[e("span",{style:{color:"blue"}},"You"),f(" vs "),e("span",{style:{color:"#ff7f0e"}},"school average")],-1)),yt={id:"time-chart-container"},St={class:"col-md position-relative"},vt={class:"row"},Dt={class:"col-md"},xt=h(()=>e("h2",{class:"h5 heading"}," Consider asking for help ",-1)),Ct={key:0},kt={key:1},bt={class:"col-md"},wt=h(()=>e("h2",{class:"h5 heading"},"Stats",-1)),$t=h(()=>e("li",null,[e("strong",null,"Skills passed:"),f(" 25")],-1)),At=h(()=>e("li",null,[e("strong",null,"Total time spent:"),f(" 5:00 ")],-1)),It=h(()=>e("strong",null,"AI usage:",-1));function Tt(t,d,r,n,u,g){const i=v("RouterLink"),m=v("StudentProgressChart"),o=v("StudentComparisonChart"),c=v("StudentTimeChart");return p(),_("div",at,[e("div",nt,[e("div",rt,[e("div",ot,[e("div",it,[y(i,{to:"/my-progress/skills",class:"",target:"_blank"},{default:S(()=>[ct]),_:1}),lt,e("div",ht,[u.progressData.student.length>0||u.progressData.average.length>0?(p(),k(m,{key:0,ref:"progressChart"},null,512)):b("",!0)])]),e("div",dt,[e("div",ut,[mt,n.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(p(),k(o,{key:0,ref:"comparisonChart",data:n.analyticsStore.studentRootSubjectsPassedAssessments,colour:"#5f31dd"},null,8,["data"])):b("",!0)])])]),e("div",pt,[e("div",gt,[y(i,{to:"/my-progress/time",target:"_blank"},{default:S(()=>[_t]),_:1}),ft,e("div",yt,[n.analyticsStore.time.student.length>0||n.analyticsStore.time.tenant.length>0?(p(),k(c,{key:0,ref:"timeChart"},null,512)):b("",!0)])]),e("div",St,[e("div",vt,[e("div",Dt,[y(i,{to:"/my-progress/super-challenging",class:"col",target:"_blank"},{default:S(()=>[xt]),_:1}),n.teacherAnalyticsStore.studentMultipleFails.length>0?(p(),_("ul",Ct,[(p(!0),_(q,null,H(n.teacherAnalyticsStore.studentMultipleFails,l=>(p(),_("li",{class:"failed-skills",key:l.id},[y(i,{to:"/skills/"+l.url,target:"_blank"},{default:S(()=>[f(L(l.name),1)]),_:2},1032,["to"])]))),128))])):(p(),_("p",kt,"Nothing to worry about yet"))]),e("div",bt,[wt,e("ul",null,[$t,At,e("li",null,[y(i,{to:"/my-progress/tokens",target:"_blank"},{default:S(()=>[It,f(" 10,000")]),_:1})])])])])])])])])])}const Yt=$(st,[["render",Tt],["__scopeId","data-v-0771bc52"]]);export{Yt as default};
