import{_ as y,e as B,r as u,o as h,c as p,a as i,b as T,j as g,f as k,F as j}from"./main-3e053fd3.js";import{u as C}from"./AnalyticsStore-3eced577.js";import"./transform-af9a74a2.js";import{l as w,c as A,b}from"./linear-5b188edc.js";import{m as _,b as S}from"./continuous-7328829e.js";import{s as v}from"./sort-ed61f96d.js";import{s as x}from"./string-dd82ab4a.js";import{u as $}from"./CohortsStore-ea35a999.js";import{C as L}from"./CohortProgressLineChart-d2d00796.js";import{D as P}from"./downloadCSVBtn-07268208.js";import"./line-85f04100.js";import"./time-0457d93b.js";import"./point-ea70dc51.js";import"./extent-4cf1c809.js";const D={name:"TenantPassedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const c=document.getElementById("passed-subjects-chart").clientWidth,o=document.getElementById("passed-subjects-chart").clientHeight,r=w().domain([0,_(this.data,e=>e.quantity)]).range([200,c-0]),n=S().domain(v(this.data,e=>-e.quantity).map(e=>e.name)).rangeRound([0,o-10]).padding(.1),l=x("#passed-subjects-chart").append("svg").attr("width",c).attr("height",o).attr("viewBox",[0,0,+Math.min(c,o),+Math.min(c,o)]).attr("preserveAspectRatio","xMinYMin");l.append("g").selectAll().data(this.data).join("rect").attr("x",r(0)).attr("y",e=>n(e.name)).attr("width",e=>r(e.quantity)-r(0)).attr("height",n.bandwidth()).attr("fill",function(e){return e.name=="Language"?"DarkMagenta":e.name=="Mathematics"?"blue":e.name=="Science & Invention"?"purple":e.name=="Computer Science"?"deeppink":e.name=="Dangerous Ideas"?"brown":e.name=="History"?"cyan":e.name=="Life"?"magenta":"#ff7f0e"}),l.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",e=>r(e.quantity)).attr("y",e=>n(e.name)+n.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>e.quantity).call(e=>e.filter(t=>r(t.quantity)-r(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),l.append("g").attr("transform","translate(0,0)").call(A(r).ticks(0)).call(e=>e.select(".domain").remove()),l.append("g").attr("transform","translate(200,0)").call(b(n).tickSizeOuter(0))},computed:{}};function R(s,a,m,d,c,o){return null}const M=y(D,[["render",R]]),z={name:"TenantPassedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const o=document.getElementById("passed-skills-chart").clientWidth,r=this.data.length*20+0+10,n=w().domain([0,_(this.data,t=>t.quantity)]).range([200,o-0]),l=S().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,r-10]).padding(0),e=x("#passed-skills-chart").append("svg").attr("width",o).attr("height",r).attr("viewBox",[0,0,+Math.min(o,r),+Math.min(o,r)]).attr("preserveAspectRatio","xMinYMin");e.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",n(0)).attr("y",t=>l(t.name)).attr("width",t=>n(t.quantity)-n(0)).attr("height",l.bandwidth()),e.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>n(t.quantity)).attr("y",t=>l(t.name)+l.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(f=>n(f.quantity)-n(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),e.append("g").attr("transform","translate(0,0)").call(A(n).ticks(0)).call(t=>t.select(".domain").remove()),e.append("g").attr("transform","translate(200,0)").call(b(l).tickSizeOuter(0))},computed:{}};function H(s,a,m,d,c,o){return null}const q=y(z,[["render",H]]),I={name:"TenantAssessmentsAttemptedHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const o=document.getElementById("attempted-skills-chart").clientWidth,r=20*this.data.length+0+10,n=w().domain([0,_(this.data,t=>t.quantity)]).range([200,o-0]),l=S().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,r-10]).padding(0);n.tickFormat(20);const e=x("#attempted-skills-chart").append("svg").attr("width",o).attr("height",r).attr("viewBox",[0,0,+Math.min(o,r),+Math.min(o,r)]).attr("preserveAspectRatio","xMinYMin");e.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",n(0)).attr("y",t=>l(t.name)).attr("width",t=>n(t.quantity)-n(0)).attr("height",l.bandwidth()),e.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>n(t.quantity)).attr("y",t=>l(t.name)+l.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(f=>n(f.quantity)-n(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),e.append("g").attr("transform","translate(0,0)").call(A(n).ticks(0)).call(t=>t.select(".domain").remove()),e.append("g").attr("transform","translate(200,0)").call(b(l).tickSizeOuter(0))},computed:{}};function E(s,a,m,d,c,o){return null}const N=y(I,[["render",E]]),Q={name:"TenantAttemptedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const c=document.getElementById("attempted-subjects-chart").clientWidth,o=document.getElementById("attempted-subjects-chart").clientHeight,r=w().domain([0,_(this.data,e=>e.quantity)]).range([200,c-20]),n=S().domain(v(this.data,e=>-e.quantity).map(e=>e.name)).rangeRound([0,o-20]).padding(.1);r.tickFormat(20);const l=x("#attempted-subjects-chart").append("svg").attr("width",c).attr("height",o).attr("viewBox",[0,0,+Math.min(c,o),+Math.min(c,o)]).attr("preserveAspectRatio","xMinYMin");l.append("g").selectAll().data(this.data).join("rect").attr("x",r(0)).attr("y",e=>n(e.name)).attr("width",e=>r(e.quantity)-r(0)).attr("height",n.bandwidth()).attr("fill",function(e){return e.name=="Language"?"DarkMagenta":e.name=="Mathematics"?"blue":e.name=="Science & Invention"?"purple":e.name=="Computer Science"?"deeppink":e.name=="Dangerous Ideas"?"brown":e.name=="History"?"cyan":e.name=="Life"?"magenta":"#ff7f0e"}),l.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",e=>r(e.quantity)).attr("y",e=>n(e.name)+n.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>e.quantity).call(e=>e.filter(t=>r(t.quantity)-r(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),l.append("g").attr("transform","translate(0,0)").call(A(r).ticks(0)).call(e=>e.select(".domain").remove()),l.append("g").attr("transform","translate(200,0)").call(b(n).tickSizeOuter(0))},computed:{}};function O(s,a,m,d,c,o){return null}const W=y(Q,[["render",O]]);const V={setup(){const s=B(),a=C();return{userDetailsStore:s,analyticsStore:a}},components:{TenantPassedAssessmentsHorizontalBarChart:q,TenantAssessmentsAttemptedHorizontalBarChart:N,TenantPassedAssessmentsByRootSubjectHorizontalBarChart:M,TenantAttemptedAssessmentsByRootSubjectHorizontalBarChart:W},data(){return{tenantId:this.userDetailsStore.tenantId,isDataWeekly:!1,isTutorialComplete:!1,showTutorialTip1:!1,dataMode:"total"}},async created(){await this.checkIfTutorialComplete(),this.analyticsStore.passedAssessments.length==0&&await this.getPassedAssessments(),this.analyticsStore.rootSubjectsPassedAssessments.length==0&&await this.getPassedAssessmentsBySubject(),this.analyticsStore.rootSubjectsAttemptedAssessments.length==0&&await this.getAttemptedAssessmentsBySubject(),this.analyticsStore.attemptedAssessments.length==0&&await this.getTenantAssessmentsAttempted()},methods:{async checkIfTutorialComplete(){const a=await(await fetch(`/users/check-tutorial-progress/school-report/${this.userDetailsStore.userId}`)).json();a==0?(this.isTutorialComplete=!1,this.showTutorialTip1=!0):a==1&&(this.isTutorialComplete=!0)},progressTutorial(s){s==1&&(this.showTutorialTip1=!1,this.markTutorialComplete())},restartTutorial(){this.isTutorialComplete=!1,this.showTutorialTip1=!0},markTutorialComplete(){let s="/users/mark-tutorial-complete/school-report/"+this.userDetailsStore.userId;fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"}})},async getPassedAssessments(){try{const s=await fetch(`/student-analytics/passed-assessments/tenant/${this.tenantId}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);this.analyticsStore.passedAssessments=await s.json()}catch(s){console.error("Error fetching cohort mastered assessments:",s),this.analyticsStore.passedAssessments=[]}},async getTenantAssessmentsAttempted(){try{const s=await fetch(`/student-analytics/attempted-assessments/tenant/${this.tenantId}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);this.analyticsStore.attemptedAssessments=await s.json()}catch(s){console.error("Error fetching cohort mastered assessments:",s),this.analyticsStore.attemptedAssessments=[]}},async getPassedAssessmentsBySubject(){try{const s=await fetch(`/student-analytics/passed-assessments-by-subject/tenant/${this.tenantId}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);this.analyticsStore.rootSubjectsPassedAssessments=await s.json()}catch(s){console.error("Error fetching cohort mastered assessments:",s),this.analyticsStore.rootSubjectsPassedAssessments=[]}},async getAttemptedAssessmentsBySubject(){try{const s=await fetch(`/student-analytics/attempted-assessments-by-subject/tenant/${this.tenantId}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);this.analyticsStore.rootSubjectsAttemptedAssessments=await s.json()}catch(s){console.error("Error fetching cohort mastered assessments:",s),this.analyticsStore.rootSubjectsAttemptedAssessments=[]}},downloadData(s,a){const m=Object.keys(s[0]),d=[];d.push(m.join(","));for(const n of s){const l=m.map(e=>{const t=n[e];return`"${String(t).replace(/"/g,'""')}"`});d.push(l.join(","))}const c=d.join(`
`),o=new Blob([c],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(o),r.download=a+".csv",r.click()},async toggleWeeklyCumulativeData(){this.dataMode=="total"?this.dataMode="weekly":this.dataMode="total"}}},Y={class:"container-fluid chart-page"},U={class:"d-flex justify-content-between w-100"},F={key:0,class:"modal"},G={class:"modal-content"},J={class:"d-flex justify-content-between"},K={class:"row chart-row"},X={class:"col-md chart-col position-relative"},Z={id:"passed-subjects-chart"},tt={key:1},et={class:"col-md chart-col position-relative overflow-auto"},st={id:"passed-skills-chart"},at={key:1},nt={class:"row chart-row"},rt={class:"col-md chart-col position-relative"},ot={id:"attempted-subjects-chart"},it={key:1},lt={class:"col-md chart-col position-relative overflow-auto"},ct={id:"attempted-skills-chart"},dt={key:1};function mt(s,a,m,d,c,o){const r=u("TenantPassedAssessmentsByRootSubjectHorizontalBarChart"),n=u("TenantPassedAssessmentsHorizontalBarChart"),l=u("TenantAttemptedAssessmentsByRootSubjectHorizontalBarChart"),e=u("TenantAssessmentsAttemptedHorizontalBarChart");return h(),p("div",Y,[i("span",U,[a[7]||(a[7]=i("h1",{class:"heading h4"},"School-wide Progress Report",-1)),i("button",{class:"btn me-1",onClick:a[0]||(a[0]=(...t)=>o.restartTutorial&&o.restartTutorial(...t)),"aria-label":"info"},a[6]||(a[6]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"23",class:"primary-icon"},[i("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)]))]),c.showTutorialTip1?(h(),p("div",F,[i("div",G,[a[8]||(a[8]=i("p",{class:"modal-text"}," The report shows data on passed and attempted assessments, by subject and specific skill. ",-1)),i("div",J,[i("button",{class:"btn primary-btn",onClick:a[1]||(a[1]=t=>o.progressTutorial(1))}," close ")])])])):T("",!0),i("div",K,[a[11]||(a[11]=i("h2",{class:"heading h5"},"Passed",-1)),i("div",X,[i("div",Z,[i("button",{class:"btn position-absolute download-btn",onClick:a[2]||(a[2]=t=>o.downloadData(d.analyticsStore.rootSubjectsPassedAssessments,"Subjects-passed"))},a[9]||(a[9]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[i("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)])),d.analyticsStore.rootSubjectsPassedAssessments.length>0?(h(),g(r,{key:0,data:d.analyticsStore.rootSubjectsPassedAssessments,colour:"darkgreen",class:""},null,8,["data"])):(h(),p("p",tt,"No data yet"))])]),i("div",et,[i("div",st,[i("button",{class:"btn position-absolute download-btn",onClick:a[3]||(a[3]=t=>o.downloadData(d.analyticsStore.passedAssessments,"Assessments-passed"))},a[10]||(a[10]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[i("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)])),d.analyticsStore.passedAssessments.length>0?(h(),g(n,{key:0,data:d.analyticsStore.passedAssessments,colour:"darkgreen",class:""},null,8,["data"])):(h(),p("p",at,"No data yet"))])])]),i("div",nt,[a[14]||(a[14]=i("h2",{class:"heading h5"},"Attempted",-1)),i("div",rt,[i("div",ot,[i("button",{class:"btn position-absolute download-btn",onClick:a[4]||(a[4]=t=>o.downloadData(d.analyticsStore.rootSubjectsAttemptedAssessments,"Subjects-attempted"))},a[12]||(a[12]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[i("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)])),d.analyticsStore.rootSubjectsAttemptedAssessments.length>0?(h(),g(l,{key:0,data:d.analyticsStore.rootSubjectsAttemptedAssessments,colour:"darkblue",class:""},null,8,["data"])):(h(),p("p",it,"No data yet"))])]),i("div",lt,[i("div",ct,[i("button",{class:"btn position-absolute download-btn",onClick:a[5]||(a[5]=t=>o.downloadData(d.analyticsStore.attemptedAssessments,"Assessments-attempted"))},a[13]||(a[13]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[i("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)])),d.analyticsStore.attemptedAssessments.length>0?(h(),g(e,{key:0,data:d.analyticsStore.attemptedAssessments,colour:"#5f31dd",class:""},null,8,["data"])):(h(),p("p",dt,"No data yet"))])])])])}const ht=y(V,[["render",mt],["__scopeId","data-v-69b95fa5"]]),pt={name:"CohortPassedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){const o=document.getElementById("progress-bar-chart-container").clientWidth,r=20*this.data.length+0+10,n=w().domain([0,_(this.data,t=>t.quantity)]).range([200,o-0]),l=S().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,r-10]).padding(.1),e=x("#progress-bar-chart-container").append("svg").attr("width",o).attr("height",r).attr("viewBox",[0,0,+Math.min(o,r),+Math.min(o,r)]).attr("preserveAspectRatio","xMinYMin");e.append("g").attr("fill","green").selectAll().data(this.data).join("rect").attr("x",n(0)).attr("y",t=>l(t.name)).attr("width",t=>n(t.quantity)-n(0)).attr("height",l.bandwidth()),e.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>n(t.quantity)).attr("y",t=>l(t.name)+l.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(f=>n(f.quantity)-n(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),e.append("g").attr("transform","translate(0,0)").call(A(n).ticks(0)).call(t=>t.select(".domain").remove()),e.append("g").attr("transform","translate(200,0)").call(b(l).tickSizeOuter(0))},computed:{}};function ut(s,a,m,d,c,o){return null}const gt=y(pt,[["render",ut]]),yt={name:"CohortAttemptedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const o=document.getElementById("attempted-bar-chart-container").clientWidth,r=20*this.data.length+0+10,n=w().domain([0,_(this.data,t=>t.quantity)]).range([200,o-0]),l=S().domain(v(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,r-10]).padding(.1),e=x("#attempted-bar-chart-container").append("svg").attr("width",o).attr("height",r).attr("viewBox",[0,0,+Math.min(o,r),+Math.min(o,r)]).attr("preserveAspectRatio","xMinYMin");e.append("g").attr("fill","blue").selectAll().data(this.data).join("rect").attr("x",n(0)).attr("y",t=>l(t.name)).attr("width",t=>n(t.quantity)-n(0)).attr("height",l.bandwidth()),e.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>n(t.quantity)).attr("y",t=>l(t.name)+l.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.quantity).call(t=>t.filter(f=>n(f.quantity)-n(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),e.append("g").attr("transform","translate(0,0)").call(A(n).ticks(0)).call(t=>t.select(".domain").remove()),e.append("g").attr("transform","translate(200,0)").call(b(l).tickSizeOuter(0))},computed:{}};function ft(s,a,m,d,c,o){return null}const wt=y(yt,[["render",ft]]);const At={setup(){const s=$(),a=B();return{cohortsStore:s,userDetailsStore:a}},components:{CohortProgressLineChart:L,CohortPassedAssessmentsHorizontalBarChart:gt,CohortAttemptedAssessmentsHorizontalChart:wt,DownloadCSVBtn:P},data(){return{cohortProgress:[],cohortProgressDownloadData:[],masteredSkillQuantities:[],attemptedAssessmentQuantities:[],masteredSkillQuantitiesDownloadData:[],attemptedAssessmentQuantitiesDownloadData:[]}},async created(){this.getAllStudentsMasteredAssessments(),this.getAllStudentsAttemptedAssessments(),await this.getAllStudentsProgress()},methods:{async getAllStudentsProgress(){fetch(`/student-analytics/all-students-progress/${this.userDetailsStore.userId}`).then(s=>s.json()).then(s=>{for(let a=0;a<s.length;a++)s[a].date=new Date(s[a].date);s.sort((a,m)=>a.date-m.date),this.cohortProgress=s,this.cohortProgressDownloadData=s.map(a=>({date:a.date,skillsMastered:a.quantity}))}).catch(s=>{console.error("Error fetching student progress:",s)})},async getAllStudentsMasteredAssessments(){try{const s=await fetch(`/student-analytics/mastered-skills/all-students/${this.userDetailsStore.userId}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json();this.masteredSkillQuantities=Array.isArray(a)?a:[],this.masteredSkillQuantitiesDownloadData=a.map(m=>({student:m.name,quantity:m.quantity}))}catch(s){console.error("Error fetching all students mastered assessments:",s),this.masteredSkillQuantities=[]}},async getAllStudentsAttemptedAssessments(){try{const s=await fetch(`/student-analytics/attempted-assessments/all-students/${this.userDetailsStore.userId}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json();this.attemptedAssessmentQuantities=Array.isArray(a)?a:[]}catch(s){console.error("Error fetching cohort mastered assessments:",s),this.attemptedAssessmentQuantities=[]}},assessmentDate(s){return new Date(s).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}}},bt={class:"container-fluid chart-page"},_t={class:"row chart-row position-relative"},St={id:"progress-chart-container"},vt={key:1},xt={class:"row chart-row"},kt={class:"col-md chart-col position-relative position-relative overflow-auto"},Tt={id:"progress-bar-chart-container"},Bt={key:1},jt={class:"col-md chart-col position-relative position-relative overflow-auto"},Ct={id:"attempted-bar-chart-container"},$t={key:1};function Lt(s,a,m,d,c,o){const r=u("DownloadCSVBtn"),n=u("CohortProgressLineChart"),l=u("CohortPassedAssessmentsHorizontalBarChart"),e=u("CohortAttemptedAssessmentsHorizontalChart");return h(),p("div",bt,[a[2]||(a[2]=i("h1",{class:"heading h4"},"Progress Report",-1)),i("div",_t,[i("div",St,[k(r,{data:c.cohortProgressDownloadData,fileName:`${s.cohortName?s.cohortName:"All Students"}-progress.csv`,class:"download-btn position-absolute btn"},null,8,["data","fileName"]),c.cohortProgress.length>0?(h(),g(n,{key:0,data:c.cohortProgress},null,8,["data"])):(h(),p("p",vt,"There is no data to show yet."))])]),i("div",xt,[i("div",kt,[i("div",Tt,[k(r,{data:c.masteredSkillQuantitiesDownloadData,fileName:`${s.cohortName}-passed-assessments.csv`,class:"download-btn position-absolute btn"},null,8,["data","fileName"]),c.masteredSkillQuantities.length>0?(h(),g(l,{key:0,data:c.masteredSkillQuantities,colour:"darkgreen"},null,8,["data"])):(h(),p("p",Bt,"There is no data to show yet."))]),a[0]||(a[0]=i("figcaption",{class:"text-muted"},"Passed",-1))]),i("div",jt,[i("div",Ct,[k(r,{data:c.attemptedAssessmentQuantitiesDownloadData,fileName:`${s.cohortName}-attempted-assessments.csv`,class:"download-btn position-absolute btn"},null,8,["data","fileName"]),c.attemptedAssessmentQuantities.length>0?(h(),g(e,{key:0,data:c.attemptedAssessmentQuantities,colour:"darkblue"},null,8,["data"])):(h(),p("p",$t,"There is no data to show yet."))]),a[1]||(a[1]=i("figcaption",{class:"text-muted"},"Attempted",-1))])])])}const Pt=y(At,[["render",Lt],["__scopeId","data-v-79bab523"]]),Dt={name:"Dashboard",setup(){return{userDetailsStore:B()}},data(){return{}},components:{SchoolAdminProgressReport:ht,TeacherProgressReport:Pt},async created(){}};function Rt(s,a,m,d,c,o){const r=u("SchoolAdminProgressReport"),n=u("TeacherProgressReport");return h(),p(j,null,[d.userDetailsStore.role=="school_admin"?(h(),g(r,{key:0})):T("",!0),d.userDetailsStore.role=="instructor"||d.userDetailsStore.role=="partner"?(h(),g(n,{key:1})):T("",!0)],64)}const Gt=y(Dt,[["render",Rt]]);export{Gt as default};
