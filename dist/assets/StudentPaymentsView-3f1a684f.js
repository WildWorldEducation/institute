import{_ as g,o as d,c as l,a as e,F as _,x as y,t as u,p,w as m,Q as f}from"./main-b1bef2a3.js";const h={setup(){},data(){return{studentId:this.$route.params.studentId,payments:[]}},async created(){this.getPayments()},methods:{getPayments(){fetch(`/referrals/get-receipts/${this.studentId}`).then(function(n){return n.json()}).then(async n=>{this.payments=n})},async toggleIsCompensated(n,t){try{const s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_partner_compensated:t})};await fetch(`/referrals/${n}/update`,s)}catch(s){console.error("Error updating instructor:",s)}},formattedStripeReceiptAmount(n){return(n/100).toLocaleString("en-US",{style:"currency",currency:"USD"})},formattedStripeReceiptDate(n){let t=new Date(n);const s=t.getUTCMonth()+1,c=t.getUTCDate();return t.getUTCFullYear()+"/"+s+"/"+c}}},S={class:"container bg-light rounded"},C={key:0},U={class:"h6"},D=["onUpdate:modelValue","onClick"],k=["onClick","onUpdate:modelValue"],v={key:1};function w(n,t,s,c,i,r){return d(),l("div",S,[t[4]||(t[4]=e("h1",{class:"heading"},"Student Payments",-1)),i.payments.length>0?(d(),l("ul",C,[(d(!0),l(_,null,y(i.payments,o=>(d(),l("li",null,[e("h2",U,u(r.formattedStripeReceiptDate(o.date)),1),e("ul",null,[e("li",null,[t[0]||(t[0]=e("strong",null,"total:",-1)),p(" "+u(r.formattedStripeReceiptAmount(o.amount)),1)]),e("li",null,[t[1]||(t[1]=e("strong",null,"commission:",-1)),p(" "+u(r.formattedStripeReceiptAmount(o.amount/3)),1)]),e("li",null,[m(e("input",{type:"radio",id:"one",value:"0","onUpdate:modelValue":a=>o.is_partner_compensated=a,onClick:a=>r.toggleIsCompensated(o.id,0)},null,8,D),[[f,o.is_partner_compensated]]),t[2]||(t[2]=e("label",{class:"me-4 ms-2",for:"one"},"Not paid",-1)),m(e("input",{type:"radio",id:"two",value:"1",onClick:a=>r.toggleIsCompensated(o.id,1),"onUpdate:modelValue":a=>o.is_partner_compensated=a},null,8,k),[[f,o.is_partner_compensated]]),t[3]||(t[3]=e("label",{class:"ms-2",for:"two"},"Paid",-1))])])]))),256))])):(d(),l("p",v,"No payments found."))])}const I=g(h,[["render",w]]);export{I as default};
