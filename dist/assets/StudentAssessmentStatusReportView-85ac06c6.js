import{_ as f,y as b,I as k,r as i,o as a,c as d,a as e,t as B,k as l,j as m,f as u}from"./main-c88d736d.js";import{u as _}from"./TeacherAnalyticsStore-3914186d.js";import{u as j}from"./AnalyticsStore-ba0e01a9.js";import{S as w,a as D,b as C}from"./StudentPassedAssessmentsByRootSubjectHorizontalBarChart-d6290a83.js";import{P,A as N}from"./AttemptedAssessmentsTimelineChart-bf7b3403.js";import{F as R}from"./FailedAssessmentsHorizontalBarChart-4c16aecb.js";import{D as F}from"./downloadCSVBtn-21d059b9.js";import"./transform-4d0f7c8f.js";import"./string-c67ea49d.js";import"./linear-d9b6cbf2.js";import"./continuous-93813e6c.js";import"./band-2263c9e7.js";import"./sort-fcaf8f38.js";import"./time-3c9385c3.js";const H={setup(){const t=b(),s=k(),c=_(),n=j();return{usersStore:t,userSkillsStore:s,teacherAnalyticsStore:c,analyticsStore:n}},components:{FailedAssessmentsHorizontalBarChart:R,PassedAssessmentsTimelineChart:P,AttemptedAssessmentsTimelineChart:N,StudentAttemptedAssessmentsByRootSubjectHorizontalBarChart:w,StudentFailedAssessmentsByRootSubjectHorizontalBarChart:D,StudentPassedAssessmentsByRootSubjectHorizontalBarChart:C,DownloadCSVBtn:F},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentPasses:[],assessmentAttempts:[],assessmentPassesDownloadData:[],assessmentAttemptsDownloadData:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const t=this.usersStore.users.find(s=>s.id===this.studentId);t&&(this.studentName=t.username),await this.getUserSkillMasteredHistory(this.studentId),await this.getAssessmentAttempts(),this.assessmentPassesDownloadData=this.assessmentPasses.map(s=>({skill:s.name,date:this.assessmentDate(s.mastered_date)})),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),await this.analyticsStore.getStudentFailedAssessmentsBySubject(this.studentId),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.studentId),await this.analyticsStore.getStudentAttemptedAssessmentsBySubject(this.studentId),this.isLoaded=!0},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(t=>t.json()).then(t=>{this.assessmentAttempts=t.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`})),this.assessmentAttemptsDownloadData=this.assessmentAttempts.map(s=>({skill:s.name,date:this.assessmentDate(s.date)}))}).catch(t=>{console.error("Error fetching last visited skills:",t)})},assessmentDate(t){return new Date(t).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async getUserSkillMasteredHistory(t){await this.userSkillsStore.getMasteredSkills(t),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`}))}}},T={class:"container"},z={class:"d-flex justify-content-between w-100"},I={class:"secondary-heading h3"},V={key:1},x={key:3},M={key:5},v={class:"secondary-heading d-flex justify-content-between"},U={key:7},E={class:"secondary-heading pt-2 d-flex justify-content-between"},L={key:1},O={class:"secondary-heading pt-2 d-flex justify-content-between"},q={key:1};function G(t,s,c,n,o,J){const h=i("StudentFailedAssessmentsByRootSubjectHorizontalBarChart"),S=i("StudentPassedAssessmentsByRootSubjectHorizontalBarChart"),y=i("StudentAttemptedAssessmentsByRootSubjectHorizontalBarChart"),r=i("DownloadCSVBtn"),p=i("FailedAssessmentsHorizontalBarChart"),A=i("PassedAssessmentsTimelineChart"),g=i("AttemptedAssessmentsTimelineChart");return a(),d("div",T,[e("span",z,[s[0]||(s[0]=e("h1",{class:"heading"},"Assessment Status Report",-1)),e("h2",I,B(o.studentName),1)]),e("div",null,[s[2]||(s[2]=e("h3",{class:"secondary-heading"},"By subject",-1)),s[3]||(s[3]=e("h4",{class:"secondary-heading"},"Failed more than once",-1)),n.analyticsStore.studentRootSubjectsFailedAssessments.length>0?(a(),l(h,{key:0,data:n.analyticsStore.studentRootSubjectsFailedAssessments,colour:"darkred",class:"mb-5"},null,8,["data"])):(a(),d("p",V,"No data yet")),s[4]||(s[4]=e("h4",{class:"secondary-heading"},"Passed",-1)),n.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(a(),l(S,{key:2,data:n.analyticsStore.studentRootSubjectsPassedAssessments,colour:"darkgreen",class:"mb-5"},null,8,["data"])):(a(),d("p",x,"No data yet")),s[5]||(s[5]=e("h4",{class:"secondary-heading"},"Attempted",-1)),n.analyticsStore.studentRootSubjectsAttemptedAssessments.length>0?(a(),l(y,{key:4,data:n.analyticsStore.studentRootSubjectsAttemptedAssessments,colour:"darkblue",class:"mb-5"},null,8,["data"])):(a(),d("p",M,"No data yet")),s[6]||(s[6]=e("h3",{class:"secondary-heading mt-4"},"By skill",-1)),e("h4",v,[s[1]||(s[1]=m(" Failed multiple times ",-1)),u(r,{data:n.teacherAnalyticsStore.studentMultipleFails,fileName:`Assessment Status Report - ${o.studentName}`,toolTip:"Download failed assessments data as CSV"},null,8,["data","fileName"])]),n.teacherAnalyticsStore.studentMultipleFails.length>0?(a(),l(p,{key:6,data:n.teacherAnalyticsStore.studentMultipleFails,colour:"darkred",class:"mb-5"},null,8,["data"])):(a(),d("p",U," This student has not failed any assessments more than once yet. "))]),e("div",null,[e("h4",E,[s[7]||(s[7]=m(" Passed ",-1)),u(r,{data:o.assessmentPassesDownloadData,fileName:`Passed Assessments - ${o.studentName}`,toolTip:"Download passed assessments data as CSV"},null,8,["data","fileName"])]),o.assessmentPasses.length>0?(a(),l(A,{key:0,class:"mb-5",data:o.assessmentPasses},null,8,["data"])):(a(),d("p",L,"This student has not completed any assessments yet."))]),e("div",null,[e("h4",O,[s[8]||(s[8]=m(" Attempted ",-1)),u(r,{data:o.assessmentAttemptsDownloadData,fileName:`Attempted Assessments - ${o.studentName}`,toolTip:"Download attempted assessments data as CSV"},null,8,["data","fileName"])]),o.assessmentAttempts.length>0?(a(),l(g,{key:0,class:"mb-5",data:o.assessmentAttempts},null,8,["data"])):(a(),d("p",q,"This student has not attempted any assessments yet."))])])}const ds=f(H,[["render",G]]);export{ds as default};
