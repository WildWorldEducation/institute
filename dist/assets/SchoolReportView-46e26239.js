import{s as g}from"./transform-62bed377.js";import{_ as k,o as m,c as u,r as f,a as i,k as y,b as B}from"./main-0c601d33.js";import{l as T,m as v}from"./linear-95df80da.js";import{b as S,s as w}from"./band-ec92a044.js";import{h as $,b as x,a as b}from"./continuous-074aac43.js";import{o as O}from"./ordinal-c74fec4a.js";import{q,S as L,p as z,a as M}from"./pie-3a47bbf9.js";import{u as P,l as A}from"./line-63ef8bb3.js";import{e as C}from"./extent-4cf1c809.js";import"./point-ea70dc51.js";import"./time-38fd1dc5.js";const H={name:"TenantAvgTokensToMasterSkillsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){g("#tenant-avg-tokens-to-master-skills-chart-container");const t=25,a=0,r=0,p=10,s=200,c=1e3,h=Math.ceil((this.data.length+.1)*t)+a+p,o=T().domain([0,v(this.data,e=>e.quantity)]).range([s,c-r]),d=S().domain(w(this.data,e=>-e.quantity).map(e=>e.name)).rangeRound([a,h-p]).padding(.1),l=o.tickFormat(20),n=g("#tenant-avg-tokens-to-master-skills-chart-container").append("svg").attr("width",c).attr("height",h).attr("viewBox",[0,0,c,h]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");n.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",o(0)).attr("y",e=>d(e.name)).attr("width",e=>o(e.quantity)-o(0)).attr("height",d.bandwidth()),n.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",e=>o(e.quantity)).attr("y",e=>d(e.name)+d.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>l(e.quantity)).call(e=>e.filter(_=>o(_.quantity)-o(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),n.append("g").attr("transform",`translate(0,${a})`).call($(o).ticks(0)).call(e=>e.select(".domain").remove()),n.append("g").attr("transform",`translate(${s},0)`).call(x(d).tickSizeOuter(0))},computed:{}},D={id:"tenant-avg-tokens-to-master-skills-chart-container"};function R(t,a,r,p,s,c){return m(),u("div",D)}const j=k(H,[["render",R],["__scopeId","data-v-e380fbfe"]]);const I={name:"TenantAvgInteractionTimePerSkill",props:["data","colour"],data(){return{padding:60}},mounted(){g("#tenant-avg-interaction-time-per-skill-chart-container");const t=25,a=0,r=0,p=10,s=200,c=1e3,h=Math.ceil((this.data.length+.1)*t)+a+p,o=T().domain([0,v(this.data,n=>n.quantity)]).range([s,c-r]),d=S().domain(w(this.data,n=>-n.quantity).map(n=>n.name)).rangeRound([a,h-p]).padding(.1);o.tickFormat(20);const l=g("#tenant-avg-interaction-time-per-skill-chart-container").append("svg").attr("width",c).attr("height",h).attr("viewBox",[0,0,c,h]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");l.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",o(0)).attr("y",n=>d(n.name)).attr("width",n=>o(n.quantity)-o(0)).attr("height",d.bandwidth()),l.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",n=>o(n.quantity)).attr("y",n=>d(n.name)+d.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(n=>n.formattedQuantity).call(n=>n.filter(e=>o(e.quantity)-o(0)<30).attr("dx",4).attr("fill","black").attr("text-anchor","start")),l.append("g").attr("transform",`translate(0,${a})`).call($(o).ticks(0)).call(n=>n.select(".domain").remove()),l.append("g").attr("transform",`translate(${s},0)`).call(x(d).tickSizeOuter(0))},computed:{}},E={id:"tenant-avg-interaction-time-per-skill-chart-container"};function N(t,a,r,p,s,c){return m(),u("div",E)}const Q=k(I,[["render",N],["__scopeId","data-v-cc1cee98"]]),F={name:"TenantPercentageStudentsMasteredAtLeastOneSkillPieChart",props:["data"],data(){return{}},mounted(){g("#tenant-percentage-students-mastered-one-skill-chart-container");let t=this.data;const a=928,r=Math.min(a,500);O().domain(t.map(l=>l.name)).range(q(l=>L(l*.8+.1),t.length).reverse());const p=z().sort(null).value(l=>l.value),s=M().innerRadius(0).outerRadius(Math.min(a,r)/2-1),c=s.outerRadius()()*.8,h=M().innerRadius(c).outerRadius(c),o=p(t),d=g("#tenant-percentage-students-mastered-one-skill-chart-container").append("svg").attr("width",a).attr("height",r).attr("viewBox",[-a/2,-r/2,a,r]).attr("style","max-width: 100%; height: auto; font: 10px sans-serif;");d.append("g").attr("stroke","white").selectAll().data(o).join("path").attr("fill",l=>{if(l.data.name==="Mastered one skill")return"darkgreen";if(l.data.name==="Mastered no skills")return"darkred"}).attr("d",s).append("title").text(l=>`${l.data.name}: ${l.data.value.toLocaleString("en-US")}`),d.append("g").attr("text-anchor","middle").selectAll().data(o).join("text").attr("transform",l=>`translate(${h.centroid(l)})`).call(l=>l.append("tspan").attr("y","-0.4em").attr("fill","white").attr("font-weight","bold").text(n=>n.data.name)).call(l=>l.filter(n=>n.endAngle-n.startAngle>.25).append("tspan").attr("x",0).attr("fill","white").attr("y","1em").attr("fill-opacity",1).text(n=>n.data.value.toLocaleString("en-US")))},computed:{}},U={id:"tenant-percentage-students-mastered-one-skill-chart-container"};function V(t,a,r,p,s,c){return m(),u("div",U)}const G=k(F,[["render",V]]),J={name:"TenantProgressLineChart",props:["data","colour"],data(){},mounted(){const t=this.data;g("#tenant-progress-line-chart-container");const a=928,r=500,p=20,s=30,c=30,h=40,o=P(C(t,e=>e.date),[h,a-s]),d=T([0,v(t,e=>e.quantity)],[r-c,p]),l=A().x(e=>o(e.date)).y(e=>d(e.quantity)),n=g("#tenant-progress-line-chart-container").append("svg").attr("width",a).attr("height",r).attr("viewBox",[0,0,a,r]).attr("style","max-width: 100%; height: auto; height: intrinsic;");n.append("g").attr("transform",`translate(0,${r-c})`).call(b(o).ticks(t.length/2).tickSizeOuter(0)),n.append("g").attr("transform",`translate(${h},0)`).call(x(d).ticks(r/80)).call(e=>e.selectAll(".tick line").clone().attr("x2",a-h-s).attr("stroke-opacity",.1)).call(e=>e.append("text").attr("x",-h).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text("↑ Skills mastered")),n.append("path").attr("fill","none").attr("stroke",this.colour).attr("stroke-width",1.5).attr("d",l(t))}},K={id:"tenant-progress-line-chart-container"};function W(t,a,r,p,s,c){return m(),u("div",K)}const X=k(J,[["render",W]]),Y={name:"TenantDurationPerDayLineChart",props:["data","colour"],data(){return{padding:60}},mounted(){const t=this.data;g("#tenant-duration-per-day-chart-container");const a=928,r=500,p=20,s=30,c=30,h=40,o=P(C(t,e=>e.date),[h,a-s]),d=T([0,v(t,e=>e.formattedQuantity)],[r-c,p]),l=A().x(e=>o(e.date)).y(e=>d(e.formattedQuantity)),n=g("#tenant-duration-per-day-chart-container").append("svg").attr("width",a).attr("height",r).attr("viewBox",[0,0,a,r]).attr("style","max-width: 100%; height: auto; height: intrinsic;");n.append("g").attr("transform",`translate(0,${r-c})`).call(b(o).ticks(t.length/2).tickSizeOuter(0)),n.append("g").attr("transform",`translate(${h},0)`).call(x(d).ticks(r/80)).call(e=>e.selectAll(".tick line").clone().attr("x2",a-h-s).attr("stroke-opacity",.1)).call(e=>e.append("text").attr("x",-h).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text("↑ Duration in seconds")),n.append("path").attr("fill","none").attr("stroke","#5f31dd").attr("stroke-width",1.5).attr("d",l(t))}},Z={id:"tenant-duration-per-day-chart-container"};function tt(t,a,r,p,s,c){return m(),u("div",Z)}const et=k(Y,[["render",tt]]);const at={name:"TenantTokensPerSkillHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){g("#tenant-tokens-per-skill-chart-container");const t=25,a=0,r=0,p=10,s=200,c=1e3,h=Math.ceil((this.data.length+.1)*t)+a+p,o=T().domain([0,v(this.data,e=>e.quantity)]).range([s,c-r]),d=S().domain(w(this.data,e=>-e.quantity).map(e=>e.name)).rangeRound([a,h-p]).padding(.1),l=o.tickFormat(20),n=g("#tenant-tokens-per-skill-chart-container").append("svg").attr("width",c).attr("height",h).attr("viewBox",[0,0,c,h]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");n.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",o(0)).attr("y",e=>d(e.name)).attr("width",e=>o(e.quantity)-o(0)).attr("height",d.bandwidth()),n.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",e=>o(e.quantity)).attr("y",e=>d(e.name)+d.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>l(e.quantity)).call(e=>e.filter(_=>o(_.quantity)-o(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),n.append("g").attr("transform",`translate(0,${a})`).call($(o).ticks(0)).call(e=>e.select(".domain").remove()),n.append("g").attr("transform",`translate(${s},0)`).call(x(d).tickSizeOuter(0))},computed:{}},nt={id:"tenant-tokens-per-skill-chart-container"};function rt(t,a,r,p,s,c){return m(),u("div",nt)}const st=k(at,[["render",rt],["__scopeId","data-v-039ce704"]]),ot={name:"TenantTokensPerDayLineChart",props:["data","colour"],data(){return{padding:60}},mounted(){const t=this.data;g("#tenant-tokens-per-day-chart-container");const a=928,r=500,p=20,s=30,c=30,h=40,o=P(C(t,e=>e.date),[h,a-s]),d=T([0,v(t,e=>e.formattedQuantity)],[r-c,p]),l=A().x(e=>o(e.date)).y(e=>d(e.formattedQuantity)),n=g("#tenant-tokens-per-day-chart-container").append("svg").attr("width",a).attr("height",r).attr("viewBox",[0,0,a,r]).attr("style","max-width: 100%; height: auto; height: intrinsic;");n.append("g").attr("transform",`translate(0,${r-c})`).call(b(o).ticks(t.length/2).tickSizeOuter(0)),n.append("g").attr("transform",`translate(${h},0)`).call(x(d).ticks(r/80)).call(e=>e.selectAll(".tick line").clone().attr("x2",a-h-s).attr("stroke-opacity",.1)).call(e=>e.append("text").attr("x",-h).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text("↑ Duration in seconds")),n.append("path").attr("fill","none").attr("stroke","#5f31dd").attr("stroke-width",1.5).attr("d",l(t))}},it={id:"tenant-tokens-per-day-chart-container"};function lt(t,a,r,p,s,c){return m(),u("div",it)}const ct=k(ot,[["render",lt]]),dt={setup(){return{}},components:{TenantAvgTokensToMasterSkillsHorizontalBarChart:j,TenantTokensPerSkillHorizontalBarChart:st,TenantAvgInteractionTimePerSkillHorizontalBarChart:Q,TenantPercentageStudentsMasteredAtLeastOneSkillPieChart:G,TenantProgressLineChart:X,TenantDurationPerDayLineChart:et,TenantTokensPerDayLineChart:ct},data(){return{chosenPage:1,tenantId:this.$route.params.tenantId,avgTokensToMasterSkills:[],totalTokensPerSkill:[],avgTimeOnSkills:[],percentageStudentsMasteredOneSkill:[],tenantProgress:[],studentDurationsPerSkill:[]}},async created(){await this.getAvgTokensToMasterSkills(),await this.getTotalTokensPerSkill(),await this.getAvgTimeOnSkills(),await this.getPercentageStudentsMasteredOneSkill(),await this.getTenantProgress(),await this.getTenantDuration()},methods:{async getAvgTokensToMasterSkills(){try{const t=await fetch(`/student-analytics/avg-tokens-to-master-skills/tenant/${this.tenantId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();this.avgTokensToMasterSkills=Array.isArray(a)?a:[]}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.avgTokensToMasterSkills=[]}},async getTotalTokensPerSkill(){try{const t=await fetch(`/student-analytics/total-tokens-per-skill/tenant/${this.tenantId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();this.totalTokensPerSkill=Array.isArray(a)?a:[]}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.totalTokensPerSkill=[]}},async getAvgTimeOnSkills(){try{const t=await fetch(`/student-analytics/avg-times-on-skills/tenant/${this.tenantId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();this.avgTimeOnSkills=Array.isArray(a)?a:[];for(let r=0;r<this.avgTimeOnSkills.length;r++)this.avgTimeOnSkills[r].formattedQuantity=this.millisToMinutesAndSeconds(this.avgTimeOnSkills[r].quantity)}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.avgTimeOnSkills=[]}},async getPercentageStudentsMasteredOneSkill(){try{const t=await fetch(`/student-analytics/percentage-students-mastered-one-skill/tenant/${this.tenantId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);this.percentageStudentsMasteredOneSkill=await t.json()}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.percentageStudentsMasteredOneSkill=[]}},async getTenantProgress(){fetch(`/student-analytics/tenant-progress/${this.tenantId}`).then(t=>t.json()).then(t=>{for(let a=0;a<t.length;a++)t[a].date=new Date(t[a].date);t.sort((a,r)=>a.date-r.date),this.tenantProgress=t}).catch(t=>{console.error("Error fetching student progress:",t)})},async getTenantDuration(){fetch(`/student-analytics/tenant-duration-per-day/${this.tenantId}`).then(t=>t.json()).then(t=>{for(let a=0;a<t.length;a++)t[a].date=new Date(t[a].date),t[a].formattedQuantity=t[a].quantity/1e3;t.sort((a,r)=>a.date-r.date),this.studentDurationsPerSkill=t}).catch(t=>{console.error("Error fetching student progress:",t)})},millisToMinutesAndSeconds(t){var a=Math.floor(t/6e4),r=(t%6e4/1e3).toFixed(0);return a+":"+(r<10?"0":"")+r}}},ht={class:"container"},pt=i("span",{class:"d-flex justify-content-between w-100"},[i("h1",{class:"heading"},"School Admin Report")],-1),mt={key:0},ut=i("div",{class:"mt-2 mb-4"},[i("button",{class:"btn btn-dark me-1"},"Total"),i("button",{class:"btn btn-dark me-1"},"This week")],-1),gt=i("h4",null,"Average interaction time per skill (minutes)",-1),kt={key:1},_t=i("h4",null,"Time spent on platform per day",-1),ft={key:3},yt=i("h4",null," Percentage of students who completed at least one skill (cumulative) ",-1),Tt={key:5},vt=i("p",null,"add total tutoring time",-1),xt={key:1},St=i("div",{class:"mt-2 mb-4"},[i("button",{class:"btn btn-dark me-1"},"Total"),i("button",{class:"btn btn-dark me-1"},"This week")],-1),wt=i("h3",null,"Growth Analytics",-1),$t=i("h4",null,"Tenant progress",-1),bt={key:1},Pt=i("p",null,"number of skills mastered",-1),At=i("h3",null,"Assessment Completion Tracking",-1),Ct=i("p",null," percentage of students that have passed an assessment, by number of assessments. from 0 to more than 5, in a given time. ",-1),Mt=i("p",null,"need to use sub query",-1),Bt=i("p",null," percentage of students that have attempted an assessment without passing it, by number of assessments. from 0 to more than 5, in a given time. ",-1),Ot=i("h3",null,"Performance by Root Subject",-1),qt=i("p",null,[i("em",null,"number of fails per root subject")],-1),Lt=i("p",null,[i("em",null,"will have to use recursive function")],-1),zt={key:2},Ht=i("div",{class:"mt-2 mb-4"},[i("button",{class:"btn btn-dark me-1"},"Total"),i("button",{class:"btn btn-dark me-1"},"This week")],-1),Dt=i("h4",{class:"mt-5"}," Average number of tokens spent to master a skill ",-1),Rt={key:1},jt=i("h4",{class:"mt-5"},"Total number of tokens spent per skill",-1),It={key:3},Et=i("p",null,[i("em",null,"please note recording cut off usage after mastery")],-1),Nt=i("h4",{class:"mt-5"},"Number of tokens per day",-1),Qt=i("p",null,[i("em",null,"need to record this data first")],-1);function Ft(t,a,r,p,s,c){const h=f("TenantAvgInteractionTimePerSkillHorizontalBarChart"),o=f("TenantDurationPerDayLineChart"),d=f("TenantPercentageStudentsMasteredAtLeastOneSkillPieChart"),l=f("TenantProgressLineChart"),n=f("TenantAvgTokensToMasterSkillsHorizontalBarChart"),e=f("TenantTokensPerSkillHorizontalBarChart");return m(),u("div",ht,[pt,i("div",null,[i("button",{class:"btn primary-btn me-1",onClick:a[0]||(a[0]=_=>s.chosenPage=1)}," Engagement "),i("button",{class:"btn primary-btn me-1",onClick:a[1]||(a[1]=_=>s.chosenPage=2)}," Academic Performance "),i("button",{class:"btn primary-btn",onClick:a[2]||(a[2]=_=>s.chosenPage=3)}," Resource Usage ")]),s.chosenPage==1?(m(),u("div",mt,[ut,gt,s.avgTimeOnSkills.length>0?(m(),y(h,{key:0,data:s.avgTimeOnSkills,colour:"purple",class:"mb-5"},null,8,["data"])):(m(),u("p",kt,"No data yet")),_t,s.studentDurationsPerSkill.length>0?(m(),y(o,{key:2,data:s.studentDurationsPerSkill,colour:"#5f31dd",class:"mb-5"},null,8,["data"])):(m(),u("p",ft,"No data yet")),yt,s.percentageStudentsMasteredOneSkill.length>0?(m(),y(d,{key:4,data:s.percentageStudentsMasteredOneSkill},null,8,["data"])):(m(),u("p",Tt,"No data yet")),vt])):s.chosenPage==2?(m(),u("div",xt,[St,wt,$t,s.tenantProgress.length>0?(m(),y(l,{key:0,data:s.tenantProgress,colour:"#5f31dd",class:"mb-5 mt-5"},null,8,["data"])):(m(),u("p",bt,"No data yet")),Pt,At,Ct,Mt,Bt,Ot,qt,Lt])):s.chosenPage==3?(m(),u("div",zt,[Ht,Dt,s.avgTokensToMasterSkills.length>0?(m(),y(n,{key:0,data:s.avgTokensToMasterSkills,colour:"darkgreen"},null,8,["data"])):(m(),u("p",Rt,"No data yet")),jt,s.totalTokensPerSkill.length>0?(m(),y(e,{key:2,data:s.totalTokensPerSkill,colour:"#5f31dd"},null,8,["data"])):(m(),u("p",It,"No data yet")),Et,Nt,Qt])):B("",!0)])}const ae=k(dt,[["render",Ft]]);export{ae as default};
