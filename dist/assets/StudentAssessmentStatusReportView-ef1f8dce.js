import{_ as u,A as p,J as _,r,o as e,c as i,a,t as y,k as o}from"./main-60219ccb.js";import{u as A}from"./TeacherAnalyticsStore-8ebde5be.js";import{P as S,A as g}from"./AttemptedAssessmentsTimelineChart-ed33dc6d.js";import{F as k}from"./FailedAssessmentsHorizontalBarChart-f8776744.js";import"./transform-62bed377.js";import"./time-8a8f3333.js";import"./linear-c1216a03.js";import"./band-22321830.js";import"./ordinal-3694ef9e.js";import"./sort-a49d696f.js";const f={setup(){const s=p(),t=_(),l=A();return{usersStore:s,userSkillsStore:t,teacherAnalyticsStore:l}},components:{FailedAssessmentsHorizontalBarChart:k,PassedAssessmentsTimelineChart:S,AttemptedAssessmentsTimelineChart:g},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentPasses:[],assessmentAttempts:[],multipleFails:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const s=this.usersStore.users.find(t=>t.id===this.studentId);s&&(this.studentName=s.username),await this.getUserSkillMasteredHistory(this.studentId),await this.getAssessmentAttempts(),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),this.isLoaded=!0},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(s=>s.json()).then(s=>{this.assessmentAttempts=s.map(t=>({...t,url:`/skills/${t.url}`,labelName:`${t.name}`}))}).catch(s=>{console.error("Error fetching last visited skills:",s)})},assessmentDate(s){return new Date(s).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async getUserSkillMasteredHistory(s){await this.userSkillsStore.getMasteredSkills(s),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(t=>({...t,url:`/skills/${t.url}`,labelName:`${t.name}`}))}}},C={class:"container"},F={class:"d-flex justify-content-between w-100"},T=a("h1",{class:"heading"},"Assessment Status Report",-1),w={class:"secondary-heading h3"},P=a("h4",{class:"secondary-heading"},"Failed multiple times",-1),b={key:1},B=a("h4",{class:"secondary-heading"},"Passed",-1),M={key:3},I=a("h4",{class:"secondary-heading"},"Attempted",-1),N={key:5};function U(s,t,l,d,n,j){const m=r("FailedAssessmentsHorizontalBarChart"),c=r("PassedAssessmentsTimelineChart"),h=r("AttemptedAssessmentsTimelineChart");return e(),i("div",C,[a("span",F,[T,a("h2",w,y(n.studentName),1)]),P,d.teacherAnalyticsStore.studentMultipleFails.length>0?(e(),o(m,{key:0,data:d.teacherAnalyticsStore.studentMultipleFails,colour:"darkred",class:"mb-5"},null,8,["data"])):(e(),i("p",b," This student has not failed any assessments more than once yet. ")),B,n.assessmentPasses.length>0?(e(),o(c,{key:2,class:"mb-5",data:n.assessmentPasses},null,8,["data"])):(e(),i("p",M,"This student has not completed any assessments yet.")),I,n.assessmentAttempts.length>0?(e(),o(h,{key:4,class:"mb-5",data:n.assessmentAttempts},null,8,["data"])):(e(),i("p",N,"This student has attempted any assessments yet."))])}const J=u(f,[["render",U]]);export{J as default};
