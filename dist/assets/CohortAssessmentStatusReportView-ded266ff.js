import{u as b}from"./CohortsStore-1aaea8df.js";import{_,o as h,c as S,e as B,r as p,a as i,t as H,f as A,k as y,b as w}from"./main-c88d736d.js";import"./transform-4d0f7c8f.js";import{l as k,a as x,b as C}from"./linear-d9b6cbf2.js";import{m as D}from"./continuous-93813e6c.js";import{b as Q}from"./band-2263c9e7.js";import{s as $}from"./sort-fcaf8f38.js";import{s as f}from"./string-c67ea49d.js";import{F as q}from"./FailedAssessmentsHorizontalBarChart-4c16aecb.js";import{D as v}from"./downloadCSVBtn-21d059b9.js";const j={name:"CohortPassedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){f("#cohort-passed-assessments-chart-container");const t=25,s=0,n=0,m=10,a=200,l=1e3,d=Math.ceil((this.data.length+.1)*t)+s+m,r=k().domain([0,D(this.data,e=>e.quantity)]).range([a,l-n]),o=Q().domain($(this.data,e=>-e.quantity).map(e=>e.name)).rangeRound([s,d-m]).padding(.1),u=r.tickFormat(20),c=f("#cohort-passed-assessments-chart-container").append("svg").attr("width",l).attr("height",d).attr("viewBox",[0,0,l,d]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");c.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",r(0)).attr("y",e=>o(e.name)).attr("width",e=>r(e.quantity)-r(0)).attr("height",o.bandwidth()),c.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",e=>r(e.quantity)).attr("y",e=>o(e.name)+o.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>u(e.quantity)).call(e=>e.filter(g=>r(g.quantity)-r(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),c.append("g").attr("transform",`translate(0,${s})`).call(x(r).ticks(0)).call(e=>e.select(".domain").remove()),c.append("g").attr("transform",`translate(${a},0)`).call(C(o).tickSizeOuter(0))},computed:{}},N={id:"cohort-passed-assessments-chart-container"};function T(t,s,n,m,a,l){return h(),S("div",N)}const z=_(j,[["render",T]]),E={name:"CohortAttemptedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){f("#cohort-attempted-assessments-chart-container");const t=25,s=0,n=0,m=10,a=200,l=1e3,d=Math.ceil((this.data.length+.1)*t)+s+m,r=k().domain([0,D(this.data,e=>e.quantity)]).range([a,l-n]),o=Q().domain($(this.data,e=>-e.quantity).map(e=>e.name)).rangeRound([s,d-m]).padding(.1),u=r.tickFormat(20),c=f("#cohort-attempted-assessments-chart-container").append("svg").attr("width",l).attr("height",d).attr("viewBox",[0,0,l,d]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");c.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",r(0)).attr("y",e=>o(e.name)).attr("width",e=>r(e.quantity)-r(0)).attr("height",o.bandwidth()),c.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",e=>r(e.quantity)).attr("y",e=>o(e.name)+o.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>u(e.quantity)).call(e=>e.filter(g=>r(g.quantity)-r(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),c.append("g").attr("transform",`translate(0,${s})`).call(x(r).ticks(0)).call(e=>e.select(".domain").remove()),c.append("g").attr("transform",`translate(${a},0)`).call(C(o).tickSizeOuter(0))},computed:{}},F={id:"cohort-attempted-assessments-chart-container"};function I(t,s,n,m,a,l){return h(),S("div",F)}const P=_(E,[["render",I]]),V={setup(){const t=b(),s=B();return{cohortsStore:t,userDetailsStore:s}},components:{CohortPassedAssessmentsHorizontalBarChart:z,CohortAttemptedAssessmentsHorizontalChart:P,FailedAssessmentsHorizontalBarChart:q,DownloadCSVBtn:v},data(){return{cohortId:this.$route.params.cohortId,cohortName:"",masteredSkillQuantities:[],failedAssessmentQuantities:[],attemptedAssessmentQuantities:[],masteredSkillQuantitiesDownloadData:[],attemptedAssessmentQuantitiesDownloadData:[],failedAssessmentQuantitiesDownloadData:[]}},async created(){if(this.cohortId!="all-students"){this.getCohortMasteredAssessments(),this.getCohortAttemptedAssessments(),this.getCohortFailedAssessments(),this.cohortsStore.cohorts.length<1&&await this.cohortsStore.getCohorts(this.userDetailsStore.userId);const t=this.cohortsStore.cohorts.find(s=>s.id==this.cohortId);t&&(this.cohortName=t.name)}else this.getAllStudentsMasteredAssessments(),this.getAllStudentsAttemptedAssessments(),this.getAllStudentsFailedAssessments()},methods:{async getCohortMasteredAssessments(){try{const t=await fetch(`/student-analytics/mastered-skills/cohort/${this.cohortId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();this.masteredSkillQuantities=Array.isArray(s)?s:[],this.masteredSkillQuantitiesDownloadData=s.map(n=>({student:n.name,quantity:n.quantity}))}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.masteredSkillQuantities=[]}},async getAllStudentsMasteredAssessments(){try{const t=await fetch(`/student-analytics/mastered-skills/all-students/${this.userDetailsStore.userId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();this.masteredSkillQuantities=Array.isArray(s)?s:[],this.masteredSkillQuantitiesDownloadData=s.map(n=>({student:n.name,quantity:n.quantity}))}catch(t){console.error("Error fetching all students mastered assessments:",t),this.masteredSkillQuantities=[]}},async getCohortAttemptedAssessments(){try{const t=await fetch(`/student-analytics/attempted-assessments/cohort/${this.cohortId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();this.attemptedAssessmentQuantities=Array.isArray(s)?s:[],this.attemptedAssessmentQuantitiesDownloadData=s.map(n=>({student:n.name,quantity:n.quantity}))}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.attemptedAssessmentQuantities=[]}},async getAllStudentsAttemptedAssessments(){try{const t=await fetch(`/student-analytics/attempted-assessments/all-students/${this.userDetailsStore.userId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();this.attemptedAssessmentQuantities=Array.isArray(s)?s:[]}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.attemptedAssessmentQuantities=[]}},async getCohortFailedAssessments(){try{const t=await fetch(`/student-analytics/failed-assessments/cohort/${this.cohortId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();this.failedAssessmentQuantities=Array.isArray(s)?s:[]}catch(t){console.error("Error fetching cohort failed assessments:",t),this.failedAssessmentQuantities=[]}},async getAllStudentsFailedAssessments(){try{const t=await fetch(`/student-analytics/failed-assessments/all-students/${this.userDetailsStore.userId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();this.failedAssessmentQuantities=Array.isArray(s)?s:[]}catch(t){console.error("Error fetching all students failed assessments:",t),this.failedAssessmentQuantities=[]}},assessmentDate(t){return new Date(t).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}}},M={class:"container"},R={class:"d-flex justify-content-between w-100"},L={class:"secondary-heading h3"},O={class:"mb-4"},U={class:"secondary-heading d-flex justify-content-between mt-5 mb-2"},G={class:"mb-4"},J={class:"secondary-heading d-flex justify-content-between"},K={class:"mb-4"},W={class:"secondary-heading d-flex justify-content-between"};function X(t,s,n,m,a,l){const d=p("DownloadCSVBtn"),r=p("CohortPassedAssessmentsHorizontalBarChart"),o=p("CohortAttemptedAssessmentsHorizontalChart"),u=p("FailedAssessmentsHorizontalBarChart");return h(),S("div",M,[i("span",R,[s[0]||(s[0]=i("h1",{class:"heading"},"Assessment Status Report",-1)),i("h2",L,H(a.cohortName),1)]),i("div",O,[i("h4",U,[s[1]||(s[1]=i("span",null,"Passed",-1)),A(d,{data:a.masteredSkillQuantitiesDownloadData,fileName:`${a.cohortName}-passed-assessments.csv`},null,8,["data","fileName"])]),a.masteredSkillQuantities.length>0?(h(),y(r,{key:0,data:a.masteredSkillQuantities,colour:"darkgreen",class:"mb-4"},null,8,["data"])):w("",!0)]),i("div",G,[i("h4",J,[s[2]||(s[2]=i("span",null,"Attempted",-1)),A(d,{data:a.attemptedAssessmentQuantitiesDownloadData,fileName:`${a.cohortName}-attempted-assessments.csv`},null,8,["data","fileName"])]),a.attemptedAssessmentQuantities.length>0?(h(),y(o,{key:0,data:a.attemptedAssessmentQuantities,colour:"darkblue",class:"mb-4"},null,8,["data"])):w("",!0)]),i("div",K,[i("h4",W,[s[3]||(s[3]=i("span",null,"Failed multiple times",-1)),A(d,{data:a.failedAssessmentQuantities,fileName:`${a.cohortName}-failed-assessments.csv`},null,8,["data","fileName"])]),a.failedAssessmentQuantities.length>0?(h(),y(u,{key:0,data:a.failedAssessmentQuantities,colour:"darkred"},null,8,["data"])):w("",!0)])])}const dt=_(V,[["render",X]]);export{dt as default};
