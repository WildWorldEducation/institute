import{_ as b,g as x,r as w,o as i,c as n,d as s,F as f,y as $,l as r,t as a,z as p,b as d,i as S,j as k,e as m,m as U,T as g}from"./main-625b1928.js";import{u as D,a as I,b as A}from"./EssayQuestionsStore-9565fae6.js";const W={props:["userId"],setup(){const l=x(),t=D(),u=I(),h=A();return{skillsStore:l,resourcesStore:t,mcQuestionsStore:u,essayQuestionsStore:h}},data(){return{contentFlags:[],rows:[],currentChooseSkill:"",showActionWarnModal:!1,showSkillWarnModal:!1}},components:{},async created(){},async mounted(){await this.getContentFlagLogs(),this.contentFlags.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),c={date:u.toLocaleTimeString()+` (${h})`,action:l.action,question:t.question,questionName:t.question_name,skillName:t.name,skillUrl:t.skill_url,id:l.id,skill_deleted:t.skill_deleted,is_deleted:l.is_deleted};switch(l.flag_type){case"mc_question":c.type="mc_question",c.questionId=t.question_id,c.skillId=t.skill_id,c.skillUrl=t.skill_url;break;case"resource":c.type="resource",c.skillId=t.skill_id,c.skillUrl=t.skill_url;break;case"skill":c.type="skill",c.skillId=t.skill_id,c.skillUrl=t.skill_url;break;case"essay_question":c.type="essay_question",c.skillId=t.skill_id,c.skillUrl=t.skill_url;break;case"image_question":c.type="image_question",c.questionId=t.question_id,c.skillId=t.skill_id,c.skillUrl=t.skill_url;break;default:c.type="delete";break}this.rows.push(c)})},methods:{async getContentFlagLogs(){const l=await fetch(`/user-actions/${this.userId}/flag`);this.contentFlags=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}},handleNoneLinkClick(l,t){l==="delete"?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)}}},j={key:0,class:"container-md main-container"},L={class:"d-flex flex-column gap-3"},Q={key:0},T={key:0},q=["onClick"],O={key:3,class:"text-danger"},B={key:1},R=["onClick"],E={key:2,class:"text-danger"},K={key:2},z=["onClick"],H={key:2,class:"text-danger"},J={key:3},V=["onClick"],P={key:2,class:"text-danger"},G={key:4},X=["onClick"],Y={key:2,class:"text-danger"},Z={key:5},F={key:0,class:"text-danger"},ee={key:1,class:"shake"},se={key:2},te={id:"myModal",class:"modal"},oe={class:"modal-content skill-modal"},le={class:"mb-4"},ie={class:"modal-label"},ne={class:"skill-modal-text"},ae={class:"d-flex justify-content-center"},re=s("div",null,"OK",-1),ce=[re],de={key:3},ue={id:"myModal",class:"modal"},_e={class:"modal-content skill-modal"},he={class:"mb-4"},ke={class:"modal-label"},me={class:"skill-modal-text"},pe={class:"d-flex justify-content-center"},we=s("div",null,"OK",-1),fe=[we],ve={key:4},ye={id:"myModal",class:"modal"},Se={class:"modal-content"},be=s("div",{class:"d-flex gap-4 justify-content-center mb-4"},[s("div",{class:"modal-label"},"this flag is deleted !!")],-1),ge={class:"d-flex justify-content-center"},$e=s("div",null,"OK",-1),xe=[$e];function Ce(l,t,u,h,o,c){const _=w("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",j,[s("div",L,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[r(a(e.date)+" ",1),e.type==="skill"?(i(),n("span",Q,[s("span",{class:p(c.actionColor(e.action))}," - "+a(e.action),3),e.action=="delete"?(i(),n("span",T," flag with id: "+a(e.id),1)):d("",!0),r(" flag on skill: "),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:1,class:"skill-link",onClick:v=>c.handleNoneLinkClick(e.action,e.skillName)},a(e.skillName),9,q)):(i(),S(_,{key:2,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[r(a(e.skillName),1)]),_:2},1032,["to"])),e.is_deleted?(i(),n("span",O,"[Flag deleted]")):d("",!0)])):d("",!0),e.type==="resource"?(i(),n("span",B,[s("span",{class:p(c.actionColor(e.action))}," - "+a(e.action),3),r(" flag on resource of skill: "),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>c.handleNoneLinkClick(e.action,e.skillName)},a(e.skillName),9,R)):(i(),S(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[r(a(e.skillName),1)]),_:2},1032,["to"])),e.is_deleted?(i(),n("span",E,"[Flag deleted]")):d("",!0)])):d("",!0),e.type==="mc_question"?(i(),n("span",K,[s("span",{class:p(c.actionColor(e.action))}," - "+a(e.action),3),r(" flag on mc_question "+a('"'+e.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${e.skillId}/question-bank`},{default:k(()=>[r(a(e.question),1)]),_:2},1032,["to"]),r(" on skill: "),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>c.handleNoneLinkClick(e.action,e.skillName)},a(e.skillName),9,z)):(i(),S(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[r(a(e.skillName),1)]),_:2},1032,["to"])),e.is_deleted?(i(),n("span",H,"[Flag deleted]")):d("",!0)])):d("",!0),e.type==="essay_question"?(i(),n("span",J,[s("span",{class:p(c.actionColor(e.action))}," - "+a(e.action),3),r(" flag on essay question "+a('"'+e.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${e.skillId}/question-bank`},{default:k(()=>[r(a(e.question),1)]),_:2},1032,["to"]),r(" on skill: "),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>c.handleNoneLinkClick(e.action,e.skillName)},a(e.skillName),9,V)):(i(),S(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[r(a(e.skillName),1)]),_:2},1032,["to"])),e.is_deleted?(i(),n("span",P,"[Flag deleted]")):d("",!0)])):d("",!0),e.type==="image_question"?(i(),n("span",G,[s("span",{class:p(c.actionColor(e.action))}," - "+a(e.action),3),r(" flag on image question "+a('"'+e.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${e.skillId}/question-bank`},{default:k(()=>[r(a(e.question),1)]),_:2},1032,["to"]),r(" on skill: "),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>c.handleNoneLinkClick(e.action,e.skillName)},a(e.skillName),9,X)):(i(),S(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[r(a(e.skillName),1)]),_:2},1032,["to"])),e.is_deleted?(i(),n("span",Y,"[Flag deleted]")):d("",!0)])):d("",!0),e.type==="delete"?(i(),n("span",Z,[s("span",{class:p(c.actionColor(e.action))}," - "+a(e.action),3),r(" flag with id "+a(e.id)+" ",1),e.is_deleted?(i(),n("span",F,"[Flag deleted]")):d("",!0)])):d("",!0)]))),256))])])):(i(),n("div",ee,"The user has no action on flags")),o.showSkillWarnModal?(i(),n("div",se,[s("div",te,[s("div",oe,[s("div",le,[s("div",ie,[r(" Skill "),s("span",ne,a(o.currentChooseSkill),1),r(" is deleted !! ")])]),s("div",ae,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=e=>o.showSkillWarnModal=!1)},ce)])])])])):d("",!0),o.showSkillWarnModal?(i(),n("div",de,[s("div",ue,[s("div",_e,[s("div",he,[s("div",ke,[r(" Skill "),s("span",me,a(o.currentChooseSkill),1),r(" is deleted !! ")])]),s("div",pe,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=e=>o.showSkillWarnModal=!1)},fe)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",ve,[s("div",ye,[s("div",Se,[be,s("div",ge,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[2]||(t[2]=e=>o.showActionWarnModal=!1)},xe)])])])])):d("",!0)],64)}const Me=b(W,[["render",Ce]]),Ne={props:["userId"],data(){return{resourcesData:[],rows:[],showWarnModal:!1,currentChooseSkill:"",showActionWarnModal:!1,showSkillWarnModal:!1}},components:{},async created(){await this.getResourceLogs(),this.resourcesData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,skillDeleted:t.skill_deleted,skillUrl:t.skill_url,resourceDeleted:t.resource_deleted})})},methods:{async getResourceLogs(){const l=await fetch(`/user-actions/${this.userId}/resource`);this.resourcesData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}},handleNoneLinkClick(l,t,u){l==="delete"?this.showActionWarnModal=!0:u?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)}}},Ue={key:0,class:"container-md main-container"},De={class:"d-flex flex-column"},Ie=["onClick"],Ae={key:1,class:"shake"},We={key:2},je={id:"myModal",class:"modal"},Le={class:"modal-content skill-modal"},Qe={class:"modal-label"},Te={class:"skill-modal-text"},qe={class:"d-flex justify-content-center"},Oe=s("div",null,"OK",-1),Be=[Oe],Re={key:3},Ee={id:"myModal",class:"modal"},Ke={class:"modal-content"},ze=s("div",{class:"d-flex gap-4 justify-content-center mb-4"},[s("div",{class:"modal-label"},"Resource is deleted !!")],-1),He={class:"d-flex justify-content-center"},Je=s("div",null,"OK",-1),Ve=[Je];function Pe(l,t,u,h,o,c){const _=w("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",Ue,[s("div",De,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[r(a(e.time)+" ("+a(e.date)+") - ",1),s("span",{class:p(c.actionColor(e.action))},a(e.action),3),r("Â  "),s("span",null,[m(_,{class:"skill-link",target:"_blank",to:"/users/"+u.userId+"/activity-report/source/"+e.id},{default:k(()=>[r("source")]),_:2},1032,["to"]),r(" in forum of skill: ")]),e.action==="delete"||e.skillDeleted===1||e.resourceDeleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>c.handleNoneLinkClick(e.action,e.skillName,e.resourceDeleted)},a(e.skillName),9,Ie)):(i(),S(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[r(a(e.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",Ae,"The user has no action on resource")),o.showSkillWarnModal?(i(),n("div",We,[s("div",je,[s("div",Le,[s("div",Qe,[r(" Skill "),s("span",Te,a(o.currentChooseSkill),1),r(" is deleted !! ")]),s("div",qe,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=e=>o.showSkillWarnModal=!1)},Be)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",Re,[s("div",Ee,[s("div",Ke,[ze,s("div",He,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=e=>o.showActionWarnModal=!1)},Ve)])])])])):d("",!0)],64)}const Ge=b(Ne,[["render",Pe]]),Xe={props:["userId"],data(){return{questionsData:[],rows:[],showSkillWarnModal:!1,showActionWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getMcQuestionsLog(),this.questionsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({question_name:t.question_name,skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,studentName:t.student_name,studentId:t.student_id,type:l.content_type,skillDeleted:t.skill_deleted,skillUrl:t.skill_url,questionDeleted:t.question_deleted})})},methods:{async getMcQuestionsLog(){const l=await fetch(`/user-actions/${this.userId}/question`);this.questionsData=await l.json(),console.log("QUESTION ACTION: "),console.log(this.questionsData)},handleNoneLinkClick(l,t,u){l==="delete"||u?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";case"bulk-create":return"bulk-create-action";case"submit_update_for_review":return"submit_update_for_review";case"approve":return"approve-action";case"edit_and_approve":return"edit-and-approve-action";default:return"delete-action"}}}},Ye={key:0,class:"container-md main-container"},Ze={class:"d-flex flex-column"},Fe={key:0},es={key:1},ss={key:2},ts=["onClick"],os={key:1,class:"shake"},ls={key:2},is={id:"myModal",class:"modal"},ns={class:"modal-content skill-modal"},as={class:"mb-4"},rs={class:"modal-label"},cs={class:"skill-modal-text"},ds={class:"d-flex justify-content-center"},us=s("div",null,"OK",-1),_s=[us],hs={key:3},ks={id:"myModal",class:"modal"},ms={class:"modal-content"},ps=s("div",{class:"d-flex gap-4 justify-content-center mb-4"},[s("div",{class:"modal-label"},"Question is deleted !!")],-1),ws={class:"d-flex justify-content-center"},fs=s("div",null,"OK",-1),vs=[fs];function ys(l,t,u,h,o,c){const _=w("router-link");return i(),n(f,null,[o.rows.length>0?(i(),n("div",Ye,[s("div",Ze,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[r(a(e.time)+" ("+a(e.date)+") ",1),s("span",{class:p(c.actionColor(e.action))}," - "+a(e.action.replace(/_/g," ")),3),e.type==="mc_question"?(i(),n("span",Fe,a(' "'+e.question_name+'"')+" in question bank of skill: ",1)):d("",!0),e.type==="essay_question"?(i(),n("span",es," essay question "+a(' "'+e.question_name+'"')+" in question bank of skill: ",1)):d("",!0),e.type==="image_question"?(i(),n("span",ss," image question "+a(' "'+e.question_name+'"')+" in question bank of skill: ",1)):d("",!0),e.action==="delete"||e.skillDeleted===1||e.questionDeleted===1?(i(),n("span",{key:3,class:"skill-link",onClick:v=>c.handleNoneLinkClick(e.action,e.skillName,e.questionDeleted)},a(e.skillName),9,ts)):(i(),S(_,{key:4,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[r(a(e.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",os," The user has no action on multiple-choice questions ")),o.showSkillWarnModal?(i(),n("div",ls,[s("div",is,[s("div",ns,[s("div",as,[s("div",rs,[r(" Skill "),s("span",cs,a(o.currentChooseSkill),1),r(" is deleted !! ")])]),s("div",ds,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=e=>o.showSkillWarnModal=!1)},_s)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",hs,[s("div",ks,[s("div",ms,[ps,s("div",ws,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=e=>o.showActionWarnModal=!1)},vs)])])])])):d("",!0)],64)}const Ss=b(Xe,[["render",ys]]),bs={props:["userId"],data(){return{skillsData:[],rows:[],showWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getSkillLogs(),this.skillsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,skillUrl:t.skill_url,is_deleted:t.is_deleted})})},methods:{async getSkillLogs(){const l=await fetch(`/user-actions/${this.userId}/skill`);this.skillsData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},gs={key:0,class:"container-md main-container"},$s={class:"d-flex flex-column"},xs=s("span",null," skill: ",-1),Cs=["onClick"],Ms={key:1,class:"shake"},Ns={key:2},Us={id:"myModal",class:"modal"},Ds={class:"modal-content skill-modal"},Is={class:"modal-label"},As={class:"skill-modal-text"},Ws={class:"d-flex justify-content-center"},js=s("div",null,"OK",-1),Ls=[js];function Qs(l,t,u,h,o,c){const _=w("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",gs,[s("div",$s,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[r(a(e.time)+" ("+a(e.date)+") - ",1),s("span",{class:p(c.actionColor(e.action))},a(e.action),3),xs,e.action==="delete"||e.is_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:v=>{o.showWarnModal=!0,o.currentChooseSkill=e.skillName}},a(e.skillName),9,Cs)):(i(),S(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[r(a(e.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",Ms,"The user has no recorded actions on skills")),o.showWarnModal?(i(),n("div",Ns,[s("div",Us,[s("div",Ds,[s("div",Is,[r(" Skill "),s("span",As,a(o.currentChooseSkill),1),r(" is deleted !! ")]),s("div",Ws,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=e=>o.showWarnModal=!1)},Ls)])])])])):d("",!0)],64)}const Ts=b(bs,[["render",Qs]]),qs={props:["userId","deleteMcQuestion"],data(){return{questionsData:[],rows:[],showWarnModal:!1}},components:{},async created(){await this.getMcQuestionsLog(),this.questionsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,skillUrl:t.skill_url,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,studentName:t.student_name,studentId:t.student_id,skill_deleted:t.skill_deleted})})},methods:{async getMcQuestionsLog(){const l=await fetch(`/user-actions/${this.userId}/student_mc_question`);this.questionsData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},Os={key:0,class:"container-md main-container"},Bs={class:"d-flex flex-column"},Rs={key:0},Es={key:1},Ks={key:2},zs={key:1,class:"shake"},Hs={key:2},Js={id:"myModal",class:"modal"},Vs={class:"modal-content"},Ps=s("div",{class:"d-flex gap-4 justify-content-center mb-4"},[s("div",{class:"modal-label"},"This skill is deleted !!")],-1),Gs={class:"d-flex justify-content-center"},Xs=s("div",null,"OK",-1),Ys=[Xs];function Zs(l,t,u,h,o,c){const _=w("router-link");return i(),n(f,null,[o.rows.length>0?(i(),n("div",Os,[s("div",Bs,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[r(a(e.time)+" ("+a(e.date)+") ",1),s("span",{class:p(c.actionColor(e.action))}," - "+a(e.action),3),e.action==="delete"?(i(),n("span",Rs," student mc_question with id "+a(e.id),1)):e.action==="create"?(i(),n("span",Es," student mc_question for skill: ")):(i(),n("span",Ks,[r(" mc question of student "),m(_,{class:"user-link",target:"_blank",to:"/users"},{default:k(()=>[r(a(e.studentName),1)]),_:2},1024),r(" on skill: ")])),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:3,class:"skill-link",onClick:t[0]||(t[0]=v=>o.showWarnModal=!0)},a(e.skillName),1)):(i(),S(_,{key:4,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[r(a(e.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",zs," The user has no recorded actions on multiple-choice questions ")),o.showWarnModal?(i(),n("div",Hs,[s("div",Js,[s("div",Vs,[Ps,s("div",Gs,[s("button",{type:"button",class:"btn green-btn w-25",onClick:t[1]||(t[1]=e=>o.showWarnModal=!1)},Ys)])])])])):d("",!0)],64)}const Fs=b(qs,[["render",Zs]]);const et={props:["userId"],setup(){return{skillsStore:x()}},data(){return{skillsData:[],rows:[],showWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getSubmittedSkillLogs();const l=[];this.skillsData.forEach(t=>{t.action==="approve"?l.push(this.getApproveSkillData(t)):l.push(this.getStillAwaitingData(t))}),Promise.all(l)},methods:{async getSubmittedSkillLogs(){const l=await fetch(`/user-actions/${this.userId}/new-skill`);this.skillsData=await l.json()},async getApproveSkillData(l){const t=new Date(l.create_date),u=t.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=t.toLocaleTimeString(),o=await this.skillsStore.findSkillById(l.content_id);this.rows.push({resourceId:l.content_id,action:l.action,date:u,time:h,id:l.id,skillName:o&&o.name,skillUrl:o.url&&o.url})},async getStillAwaitingData(l){const t=new Date(l.create_date),u=t.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=t.toLocaleTimeString(),c=await(await fetch(`/new-skills-awaiting-approval/show/${l.content_id}`)).json(),_=c.name&&c.name;this.rows.push({resourceId:l.content_id,action:l.action,date:u,time:h,id:l.id,skillName:_})},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},st={key:0,class:"container-md main-container"},tt={class:"d-flex flex-column"},ot={key:0,class:"ms-1"},lt={key:1,class:"shake"},it={key:2},nt={id:"myModal",class:"modal"},at={class:"modal-content skill-modal"},rt=s("div",{class:"modal-label"},"Skill is deleted !!",-1),ct={class:"d-flex justify-content-center"},dt=s("div",null,"OK",-1),ut=[dt];function _t(l,t,u,h,o,c){const _=w("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",st,[s("div",tt,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[r(a(e.time)+" ("+a(e.date)+") - ",1),s("span",{class:p(c.actionColor(e.action))},a(e.action),3),e.skillName&&e.action!=="approve"?(i(),n("span",ot," skill: "+a(e.skillName),1)):d("",!0),e.skillName&&e.action==="approve"?(i(),S(_,{key:1,class:"skill-link ms-1",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[r(a(e.skillName)+".",1)]),_:2},1032,["to"])):d("",!0),e.skillName?d("",!0):(i(),n("span",{key:2,onClick:t[0]||(t[0]=v=>o.showWarnModal=!0),class:"no-skill-text ms-1"},"skill deleted."))]))),256))])])):(i(),n("div",lt,"The user has no recorded actions on skills")),o.showWarnModal?(i(),n("div",it,[s("div",nt,[s("div",at,[rt,s("div",ct,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=e=>o.showWarnModal=!1)},ut)])])])])):d("",!0)],64)}const ht=b(et,[["render",_t]]);const kt={setup(){return{usersStore:U()}},data(){return{user:{id:this.$route.params.id,firstName:null,lastName:null,username:null,role:null,avatar:null},showFlags:!1,showSources:!1,showMcQuestions:!1,showStudentMcQuestions:!1,showSkills:!1,showSkillSubmittedByUsers:!1,mcQuestions:[],resources:[],flags:[],skillEdits:[]}},components:{UserFlagActions:Me,UserResourceActions:Ge,UserQuestionActions:Ss,UserStudentMcQuestionActions:Fs,UserSkillActions:Ts,UserSkillAwaitingForApprovalActions:ht},async created(){await this.getUserDetails()},methods:{async getUserDetails(){this.usersStore.users.length<1&&await this.usersStore.getUsers();for(let l=0;l<this.usersStore.users.length;l++)this.usersStore.users[l].id==this.user.id&&(this.user.firstName=this.usersStore.users[l].first_name,this.user.lastName=this.usersStore.users[l].last_name,this.user.username=this.usersStore.users[l].username,this.user.role=this.usersStore.users[l].role,this.user.avatar=this.usersStore.users[l].avatar)}}},mt={class:"container bg-light rounded p-3"},pt=s("h1",{class:"heading mb-2"},"User Activity Report",-1),wt={class:"row"},ft={class:"d-flex flex-column flex-md-row gap-3"},vt=["src"],yt={class:"d-flex flex-column"},St={id:"user-name"},bt={id:"role"},gt={class:"d-flex flex-column"},$t={class:"d-flex flex-row justify-content-between"},xt=["title"],Ct={class:"secondary-heading h4"},Mt=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),Nt=[Mt],Ut={key:0},Dt={class:"d-flex flex-column"},It={class:"d-flex flex-row justify-content-between"},At=["title"],Wt={class:"secondary-heading h4"},jt=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),Lt=[jt],Qt={key:0},Tt={key:0,class:"mt-5 mb-3"},qt={class:"d-flex flex-column"},Ot={class:"d-flex flex-row justify-content-between"},Bt=["title"],Rt={class:"secondary-heading h4"},Et=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),Kt=[Et],zt={key:0},Ht={class:"d-flex flex-column"},Jt={class:"d-flex flex-row justify-content-between"},Vt=["title"],Pt={class:"secondary-heading h4"},Gt=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),Xt=[Gt],Yt={key:0},Zt={class:"d-flex flex-column"},Ft={class:"d-flex flex-row justify-content-between"},eo=["title"],so={class:"secondary-heading h4"},to=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),oo=[to],lo={key:0},io={class:"d-flex flex-column mb-3"},no={class:"d-flex flex-row justify-content-between"},ao=["title"],ro={class:"secondary-heading h4"},co=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),uo=[co],_o={key:0};function ho(l,t,u,h,o,c){const _=w("UserFlagActions"),e=w("UserQuestionActions"),v=w("UserStudentMcQuestionActions"),C=w("UserResourceActions"),M=w("UserSkillActions"),N=w("UserSkillAwaitingForApprovalActions");return i(),n("div",mt,[pt,s("div",wt,[s("div",ft,[s("img",{id:"activity-report-user-avatar",src:o.user.avatar},null,8,vt),s("div",yt,[s("div",St,a(o.user.username),1),s("div",bt,a(o.user.role),1)])])]),s("div",null,[s("div",gt,[s("div",$t,[s("div",{class:"log-type",onClick:t[0]||(t[0]=y=>o.showFlags=!o.showFlags),"b-on-hover":"",title:o.showFlags?"collapse":"expand"},[s("h2",Ct,[r(" Flags "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showFlags?"arrow-point-down mb-2":"arrow-point-up "])},Nt,2))])],8,xt)]),m(g,{name:"dropdown"},{default:k(()=>[o.showFlags?(i(),n("div",Ut,[m(_,{ref:"contentFlagsPerUser",userId:o.user.id,onCloseFlagDiv:t[1]||(t[1]=y=>o.showFlags=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),s("div",Dt,[s("div",It,[s("div",{class:"log-type",onClick:t[2]||(t[2]=y=>o.showMcQuestions=!o.showMcQuestions),"b-on-hover":"",title:o.showMcQuestions?"collapse":"expand"},[s("h2",Wt,[r(" Questions "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showMcQuestions?"arrow-point-down mb-2":"arrow-point-up"])},Lt,2))])],8,At)]),m(g,{name:"dropdown"},{default:k(()=>[o.showMcQuestions?(i(),n("div",Qt,[m(e,{userId:o.user.id,onCloseMcQuestionDiv:t[3]||(t[3]=y=>o.showMcQuestions=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),o.user.role==="admin"?(i(),n("hr",Tt)):d("",!0),s("div",qt,[s("div",Ot,[s("div",{class:"log-type",onClick:t[4]||(t[4]=y=>o.showStudentMcQuestions=!o.showStudentMcQuestions),"b-on-hover":"",title:o.showStudentMcQuestions?"collapse":"expand"},[s("h2",Rt,[r(" Student Suggested MC Questions "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showStudentMcQuestions?"arrow-point-down mb-2":"arrow-point-up"])},Kt,2))])],8,Bt)]),m(g,{name:"dropdown"},{default:k(()=>[o.showStudentMcQuestions?(i(),n("div",zt,[m(v,{userId:o.user.id,onCloseMcQuestionDiv:t[5]||(t[5]=y=>o.showStudentMcQuestions=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),s("div",Ht,[s("div",Jt,[s("div",{class:"log-type",onClick:t[6]||(t[6]=y=>o.showSources=!o.showSources),"b-on-hover":"",title:o.showSources?"collapse":"expand"},[s("h2",Pt,[r(" Sources "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSources?"arrow-point-down mb-2":"arrow-point-up "])},Xt,2))])],8,Vt)]),m(g,{name:"dropdown"},{default:k(()=>[o.showSources?(i(),n("div",Yt,[m(C,{userId:o.user.id,onCloseResourceDiv:t[7]||(t[7]=y=>o.showSources=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),s("div",Zt,[s("div",Ft,[s("div",{class:"log-type",onClick:t[8]||(t[8]=y=>o.showSkills=!o.showSkills),"b-on-hover":"",title:o.showSkills?"collapse":"expand"},[s("h2",so,[r(" Skills "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSkills?"arrow-point-down mb-2":"arrow-point-up "])},oo,2))])],8,eo)]),m(g,{name:"dropdown"},{default:k(()=>[o.showSkills?(i(),n("div",lo,[m(M,{userId:o.user.id,onCloseResourceDiv:t[9]||(t[9]=y=>o.showSkills=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),s("div",io,[s("div",no,[s("div",{class:"log-type",onClick:t[10]||(t[10]=y=>o.showSkillSubmittedByUsers=!o.showSkillSubmittedByUsers),"b-on-hover":"",title:o.showSkillSubmittedByUsers?"collapse":"expand"},[s("h2",ro,[r(" User Suggested New Skills "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSkillSubmittedByUsers?"arrow-point-down mb-2":"arrow-point-up "])},uo,2))])],8,ao)]),m(g,{name:"dropdown"},{default:k(()=>[o.showSkillSubmittedByUsers?(i(),n("div",_o,[m(N,{userId:o.user.id,onCloseResourceDiv:t[11]||(t[11]=y=>o.showSkillSubmittedByUsers=!1)},null,8,["userId"])])):d("",!0)]),_:1})])])])}const po=b(kt,[["render",ho]]);export{po as default};
