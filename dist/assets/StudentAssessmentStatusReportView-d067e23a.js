import{_ as S,y,I as f,r as o,o as n,c as i,a,t as _,j as d,f as m,k as u}from"./main-ba22c42c.js";import{u as D}from"./TeacherAnalyticsStore-29f69bc2.js";import{P as g,A as k}from"./AttemptedAssessmentsTimelineChart-de153fe1.js";import{F as w}from"./FailedAssessmentsHorizontalBarChart-98c54a72.js";import{D as N}from"./downloadCSVBtn-a5a7b8ca.js";import"./transform-35b9fb9e.js";import"./time-962c8065.js";import"./linear-c968f95f.js";import"./band-18e9f0c1.js";import"./sort-855cf5d1.js";const C={setup(){const t=y(),s=f(),c=D();return{usersStore:t,userSkillsStore:s,teacherAnalyticsStore:c}},components:{FailedAssessmentsHorizontalBarChart:w,PassedAssessmentsTimelineChart:g,AttemptedAssessmentsTimelineChart:k,DownloadCSVBtn:N},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentPasses:[],assessmentAttempts:[],assessmentPassesDownloadData:[],assessmentAttemptsDownloadData:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const t=this.usersStore.users.find(s=>s.id===this.studentId);t&&(this.studentName=t.username),await this.getUserSkillMasteredHistory(this.studentId),await this.getAssessmentAttempts(),this.assessmentPassesDownloadData=this.assessmentPasses.map(s=>({skill:s.name,date:this.assessmentDate(s.mastered_date)})),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),this.isLoaded=!0},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(t=>t.json()).then(t=>{this.assessmentAttempts=t.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`})),this.assessmentAttemptsDownloadData=this.assessmentAttempts.map(s=>({skill:s.name,date:this.assessmentDate(s.date)}))}).catch(t=>{console.error("Error fetching last visited skills:",t)})},assessmentDate(t){return new Date(t).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async getUserSkillMasteredHistory(t){await this.userSkillsStore.getMasteredSkills(t),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`}))}}},P={class:"container"},T={class:"d-flex justify-content-between w-100"},b={class:"secondary-heading h3"},B={class:"secondary-heading pt-2 d-flex justify-content-between"},F={key:1},V={class:"secondary-heading pt-2 d-flex justify-content-between"},j={key:1},x={class:"secondary-heading pt-2 d-flex justify-content-between"},M={key:1};function I(t,s,c,l,e,v){const r=o("DownloadCSVBtn"),h=o("FailedAssessmentsHorizontalBarChart"),p=o("PassedAssessmentsTimelineChart"),A=o("AttemptedAssessmentsTimelineChart");return n(),i("div",P,[a("span",T,[s[0]||(s[0]=a("h1",{class:"heading"},"Assessment Status Report",-1)),a("h2",b,_(e.studentName),1)]),a("div",null,[a("h4",B,[s[1]||(s[1]=d(" Failed multiple times ",-1)),m(r,{data:l.teacherAnalyticsStore.studentMultipleFails,fileName:`Assessment Status Report - ${e.studentName}`,toolTip:"Download failed assessments data as CSV"},null,8,["data","fileName"])]),l.teacherAnalyticsStore.studentMultipleFails.length>0?(n(),u(h,{key:0,data:l.teacherAnalyticsStore.studentMultipleFails,colour:"darkred",class:"mb-5"},null,8,["data"])):(n(),i("p",F," This student has not failed any assessments more than once yet. "))]),a("div",null,[a("h4",V,[s[2]||(s[2]=d(" Passed ",-1)),m(r,{data:e.assessmentPassesDownloadData,fileName:`Passed Assessments - ${e.studentName}`,toolTip:"Download passed assessments data as CSV"},null,8,["data","fileName"])]),e.assessmentPasses.length>0?(n(),u(p,{key:0,class:"mb-5",data:e.assessmentPasses},null,8,["data"])):(n(),i("p",j,"This student has not completed any assessments yet."))]),a("div",null,[a("h4",x,[s[3]||(s[3]=d(" Attempted ",-1)),m(r,{data:e.assessmentAttemptsDownloadData,fileName:`Attempted Assessments - ${e.studentName}`,toolTip:"Download attempted assessments data as CSV"},null,8,["data","fileName"])]),e.assessmentAttempts.length>0?(n(),u(A,{key:0,class:"mb-5",data:e.assessmentAttempts},null,8,["data"])):(n(),i("p",M,"This student has not attempted any assessments yet."))])])}const K=S(C,[["render",I]]);export{K as default};
