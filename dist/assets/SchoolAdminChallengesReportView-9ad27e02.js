import{u}from"./AnalyticsStore-c154d111.js";import{_ as p,f as y,r as w,o as l,c as h,a as e,k as x,p as S,d as v}from"./main-e10ce0af.js";import"./transform-4d0f7c8f.js";import{l as A,a as b,b as B}from"./linear-841004c4.js";import{m as k,b as $}from"./continuous-e5db47ab.js";import{s as C}from"./sort-fcaf8f38.js";import{s as L}from"./string-c67ea49d.js";import{D as T}from"./downloadCSVBtn-b6253f61.js";const I={name:"TenantFailedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){this.data;const i=document.getElementById("failed-assessments-chart-container").clientWidth,c=document.getElementById("failed-assessments-chart-container").clientHeight,a=A().domain([0,k(this.data,t=>t.quantity)]).range([200,i-0]),o=$().domain(C(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,c-10]).padding(.1),g=a.tickFormat(20),d=L("#failed-assessments-chart-container").append("svg").attr("width",i).attr("height",c).attr("viewBox",[0,0,i,c]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");d.append("g").attr("fill","darkred").selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",t=>o(t.name)).attr("width",t=>a(t.quantity)-a(0)).attr("height",o.bandwidth()),d.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>a(t.quantity)).attr("y",t=>o(t.name)+o.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>g(t.quantity)).call(t=>t.filter(_=>a(_.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),d.append("g").attr("transform","translate(0,0)").call(b(a).ticks(0)).call(t=>t.select(".domain").remove()),d.append("g").attr("transform","translate(200,0)").call(B(o).tickSizeOuter(0))}};function z(s,n,m,r,i,c){return null}const F=p(I,[["render",z]]);const q={setup(){const s=y(),n=u();return{userDetailsStore:s,analyticsStore:n}},components:{TenantFailedAssessmentsHorizontalBarChart:F,DownloadCSVBtn:T},data(){return{studentId:this.$route.params.studentId}},async created(){this.analyticsStore.failedAssessments.length==0&&await this.getFailedAssessments()},methods:{async getFailedAssessments(){try{const s=await fetch(`/student-analytics/failed-assessments/tenant/${this.userDetailsStore.tenantId}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);this.analyticsStore.failedAssessments=await s.json()}catch(s){console.error("Error fetching cohort mastered assessments:",s),this.analyticsStore.failedAssessments=[]}}}},f=s=>(S("data-v-cc57eb76"),s=s(),v(),s),D={class:"container chart-page"},H={class:"row h-100"},j={class:"col-md position-relative"},E=f(()=>e("h3",{class:"secondary-heading h5"},"Assessments failed",-1)),R={id:"failed-assessments-chart-container"},V=f(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[e("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)),M=[V],N={key:1};function O(s,n,m,r,i,c){const a=w("TenantFailedAssessmentsHorizontalBarChart");return l(),h("div",D,[e("div",H,[e("div",j,[E,e("div",R,[e("button",{class:"position-absolute download-btn btn",onClick:n[0]||(n[0]=o=>s.downloadData(r.analyticsStore.rootSubjectsFailedAssessments,"Subjects-failed"))},M),r.analyticsStore.failedAssessments.length>0?(l(),x(a,{key:0,data:r.analyticsStore.failedAssessments},null,8,["data"])):(l(),h("p",N,"No data yet"))])])])])}const Y=p(q,[["render",O],["__scopeId","data-v-cc57eb76"]]);export{Y as default};
