import{_ as f,o as m,c as h,e as g,J as y,r as k,a as p,j as _}from"./main-617fe1f8.js";import{u as x}from"./AnalyticsStore-06d39a3a.js";import{S as w}from"./StudentDurationPerDayLineChart-d79a96e8.js";import"./transform-af9a74a2.js";import{l as D,c as $,b}from"./linear-5b188edc.js";import{m as v,b as B}from"./continuous-7328829e.js";import{s as T}from"./sort-ed61f96d.js";import{s as u}from"./string-dd82ab4a.js";import"./line-85f04100.js";import"./time-0457d93b.js";import"./point-ea70dc51.js";const C={name:"TimePerSkillHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){u("#time-per-skill-chart-container");const s=25,a=0,i=0,r=10,c=200,n=1e3,o=Math.ceil((this.data.length+.1)*s)+a+r,e=D().domain([0,v(this.data,t=>t.quantity)]).range([c,n-i]),l=B().domain(T(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([a,o-r]).padding(.1);e.tickFormat(20);const d=u("#time-per-skill-chart-container").append("svg").attr("width",n).attr("height",o).attr("viewBox",[0,0,n,o]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");d.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",e(0)).attr("y",t=>l(t.name)).attr("width",t=>e(t.quantity)-e(0)).attr("height",l.bandwidth()),d.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>e(t.quantity)).attr("y",t=>l(t.name)+l.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>t.formattedQuantity).call(t=>t.filter(S=>e(S.quantity)-e(0)<40).attr("dx",4).attr("fill","black").attr("text-anchor","start")),d.append("g").attr("transform",`translate(0,${a})`).call($(e).ticks(0)).call(t=>t.select(".domain").remove()),d.append("g").attr("transform",`translate(${c},0)`).call(b(l).tickSizeOuter(0))},computed:{}},P={id:"time-per-skill-chart-container"};function q(s,a,i,r,c,n){return m(),h("div",P)}const z=f(C,[["render",q]]),A={setup(){const s=g(),a=y(),i=x();return{userDetailsStore:s,userSkillsStore:a,analyticsStore:i}},components:{StudentDurationPerDayLineChart:w,TimePerSkillHorizontalBarChart:z},data(){return{studentId:this.userDetailsStore.userId}},async created(){await this.analyticsStore.getStudentDurationPerDay(this.studentId),await this.analyticsStore.getStudentSkillDurations(this.studentId)},methods:{}},H={class:"container"},j={class:"row"},I={key:1};function L(s,a,i,r,c,n){const o=k("TimePerSkillHorizontalBarChart");return m(),h("div",H,[p("div",j,[a[0]||(a[0]=p("h2",{class:"h4 heading"},"Time per skill",-1)),r.analyticsStore.studentSkillDurations.length>0?(m(),_(o,{key:0,data:r.analyticsStore.studentSkillDurations,colour:"purple"},null,8,["data"])):(m(),h("p",I,"You haven't spent any time on skills yet."))]),a[1]||(a[1]=p("p",{class:"mt-5"}," TODO: Add time per subject bar chart (above this chart) ",-1))])}const G=f(A,[["render",L]]);export{G as default};
