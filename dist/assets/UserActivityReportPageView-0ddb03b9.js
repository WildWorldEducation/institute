import{_ as g,g as x,r as v,o as i,c as n,d as s,F as f,t as $,m as c,x as a,l as p,b as d,i as b,j as k,e as m,y as U,a as D,T as S}from"./main-d56af489.js";import{u as T,a as I,b as j}from"./EssayQuestionsStore-66ffd70d.js";const A={props:["userId"],setup(){const l=x(),t=T(),u=I(),h=j();return{skillsStore:l,resourcesStore:t,mcQuestionsStore:u,essayQuestionsStore:h}},data(){return{contentFlags:[],rows:[],currentChooseSkill:"",showActionWarnModal:!1,showSkillWarnModal:!1}},components:{},async created(){},async mounted(){await this.getContentFlagLogs(),this.contentFlags.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),r={date:u.toLocaleTimeString()+` (${h})`,action:l.action,question:t.question,questionName:t.question_name,skillName:t.name,skillUrl:t.skill_url,id:l.id,skill_deleted:t.skill_deleted,is_deleted:l.is_deleted};switch(l.flag_type){case"mc_question":r.type="mc_question",r.questionId=t.question_id,r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"resource":r.type="resource",r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"skill":r.type="skill",r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"essay_question":r.type="essay_question",r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;case"image_question":r.type="image_question",r.questionId=t.question_id,r.skillId=t.skill_id,r.skillUrl=t.skill_url;break;default:r.type="delete";break}this.rows.push(r)})},methods:{async getContentFlagLogs(){const l=await fetch(`/user-actions/${this.userId}/flag`);this.contentFlags=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}},handleNoneLinkClick(l,t){l==="delete"?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)}}},W={key:0,class:"container-md main-container"},L={class:"d-flex flex-column gap-3"},Q={key:0},q={key:0},O=["onClick"],B={key:3,class:"text-danger"},R={key:1},E=["onClick"],K={key:2,class:"text-danger"},z={key:2},H=["onClick"],J={key:2,class:"text-danger"},V={key:3},P=["onClick"],G={key:2,class:"text-danger"},X={key:4},Y=["onClick"],Z={key:2,class:"text-danger"},F={key:5},ee={key:0,class:"text-danger"},se={key:1,class:"shake"},te={key:2},oe={id:"myModal",class:"modal"},le={class:"modal-content skill-modal"},ie={class:"mb-4"},ne={class:"modal-label"},ae={class:"skill-modal-text"},re={class:"d-flex justify-content-center"},ce=s("div",null,"OK",-1),de=[ce],ue={key:3},_e={id:"myModal",class:"modal"},he={class:"modal-content skill-modal"},ke={class:"mb-4"},me={class:"modal-label"},pe={class:"skill-modal-text"},we={class:"d-flex justify-content-center"},fe=s("div",null,"OK",-1),ve=[fe],ye={key:4},be={id:"myModal",class:"modal"},ge={class:"modal-content"},Se=s("div",{class:"d-flex gap-4 justify-content-center mb-4"},[s("div",{class:"modal-label"},"this flag is deleted !!")],-1),$e={class:"d-flex justify-content-center"},xe=s("div",null,"OK",-1),Ce=[xe];function Me(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",W,[s("div",L,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[c(a(e.date)+" ",1),e.type==="skill"?(i(),n("span",Q,[s("span",{class:p(r.actionColor(e.action))}," - "+a(e.action),3),e.action=="delete"?(i(),n("span",q," flag with id: "+a(e.id),1)):d("",!0),c(" flag on skill: "),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:1,class:"skill-link",onClick:y=>r.handleNoneLinkClick(e.action,e.skillName)},a(e.skillName),9,O)):(i(),b(_,{key:2,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[c(a(e.skillName),1)]),_:2},1032,["to"])),e.is_deleted?(i(),n("span",B,"[Flag deleted]")):d("",!0)])):d("",!0),e.type==="resource"?(i(),n("span",R,[s("span",{class:p(r.actionColor(e.action))}," - "+a(e.action),3),c(" flag on resource of skill: "),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>r.handleNoneLinkClick(e.action,e.skillName)},a(e.skillName),9,E)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[c(a(e.skillName),1)]),_:2},1032,["to"])),e.is_deleted?(i(),n("span",K,"[Flag deleted]")):d("",!0)])):d("",!0),e.type==="mc_question"?(i(),n("span",z,[s("span",{class:p(r.actionColor(e.action))}," - "+a(e.action),3),c(" flag on mc_question "+a('"'+e.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${e.skillId}/question-bank`},{default:k(()=>[c(a(e.question),1)]),_:2},1032,["to"]),c(" on skill: "),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>r.handleNoneLinkClick(e.action,e.skillName)},a(e.skillName),9,H)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[c(a(e.skillName),1)]),_:2},1032,["to"])),e.is_deleted?(i(),n("span",J,"[Flag deleted]")):d("",!0)])):d("",!0),e.type==="essay_question"?(i(),n("span",V,[s("span",{class:p(r.actionColor(e.action))}," - "+a(e.action),3),c(" flag on essay question "+a('"'+e.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${e.skillId}/question-bank`},{default:k(()=>[c(a(e.question),1)]),_:2},1032,["to"]),c(" on skill: "),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>r.handleNoneLinkClick(e.action,e.skillName)},a(e.skillName),9,P)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[c(a(e.skillName),1)]),_:2},1032,["to"])),e.is_deleted?(i(),n("span",G,"[Flag deleted]")):d("",!0)])):d("",!0),e.type==="image_question"?(i(),n("span",X,[s("span",{class:p(r.actionColor(e.action))}," - "+a(e.action),3),c(" flag on image question "+a('"'+e.questionName+'"')+": ",1),m(_,{class:"question-link",target:"_blank",to:`/skills/${e.skillId}/question-bank`},{default:k(()=>[c(a(e.question),1)]),_:2},1032,["to"]),c(" on skill: "),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>r.handleNoneLinkClick(e.action,e.skillName)},a(e.skillName),9,Y)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[c(a(e.skillName),1)]),_:2},1032,["to"])),e.is_deleted?(i(),n("span",Z,"[Flag deleted]")):d("",!0)])):d("",!0),e.type==="delete"?(i(),n("span",F,[s("span",{class:p(r.actionColor(e.action))}," - "+a(e.action),3),c(" flag with id "+a(e.id)+" ",1),e.is_deleted?(i(),n("span",ee,"[Flag deleted]")):d("",!0)])):d("",!0)]))),256))])])):(i(),n("div",se,"The user has no action on flags")),o.showSkillWarnModal?(i(),n("div",te,[s("div",oe,[s("div",le,[s("div",ie,[s("div",ne,[c(" Skill "),s("span",ae,a(o.currentChooseSkill),1),c(" is deleted !! ")])]),s("div",re,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=e=>o.showSkillWarnModal=!1)},de)])])])])):d("",!0),o.showSkillWarnModal?(i(),n("div",ue,[s("div",_e,[s("div",he,[s("div",ke,[s("div",me,[c(" Skill "),s("span",pe,a(o.currentChooseSkill),1),c(" is deleted !! ")])]),s("div",we,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=e=>o.showSkillWarnModal=!1)},ve)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",ye,[s("div",be,[s("div",ge,[Se,s("div",$e,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[2]||(t[2]=e=>o.showActionWarnModal=!1)},Ce)])])])])):d("",!0)],64)}const Ne=g(A,[["render",Me]]),Ue={props:["userId"],data(){return{resourcesData:[],rows:[],showWarnModal:!1,currentChooseSkill:"",showActionWarnModal:!1,showSkillWarnModal:!1}},components:{},async created(){await this.getResourceLogs(),this.resourcesData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,skillDeleted:t.skill_deleted,skillUrl:t.skill_url,resourceDeleted:t.resource_deleted})})},methods:{async getResourceLogs(){const l=await fetch(`/user-actions/${this.userId}/resource`);this.resourcesData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}},handleNoneLinkClick(l,t,u){l==="delete"?this.showActionWarnModal=!0:u?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)}}},De={key:0,class:"container-md main-container"},Te={class:"d-flex flex-column"},Ie=["onClick"],je={key:1,class:"shake"},Ae={key:2},We={id:"myModal",class:"modal"},Le={class:"modal-content skill-modal"},Qe={class:"modal-label"},qe={class:"skill-modal-text"},Oe={class:"d-flex justify-content-center"},Be=s("div",null,"OK",-1),Re=[Be],Ee={key:3},Ke={id:"myModal",class:"modal"},ze={class:"modal-content"},He=s("div",{class:"d-flex gap-4 justify-content-center mb-4"},[s("div",{class:"modal-label"},"Resource is deleted !!")],-1),Je={class:"d-flex justify-content-center"},Ve=s("div",null,"OK",-1),Pe=[Ve];function Ge(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",De,[s("div",Te,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[c(a(e.time)+" ("+a(e.date)+") - ",1),s("span",{class:p(r.actionColor(e.action))},a(e.action),3),c("Â  "),s("span",null,[m(_,{class:"skill-link",target:"_blank",to:"/users/"+u.userId+"/activity-report/source/"+e.id},{default:k(()=>[c("source")]),_:2},1032,["to"]),c(" in forum of skill: ")]),e.action==="delete"||e.skillDeleted===1||e.resourceDeleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>r.handleNoneLinkClick(e.action,e.skillName,e.resourceDeleted)},a(e.skillName),9,Ie)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[c(a(e.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",je,"The user has no action on resource")),o.showSkillWarnModal?(i(),n("div",Ae,[s("div",We,[s("div",Le,[s("div",Qe,[c(" Skill "),s("span",qe,a(o.currentChooseSkill),1),c(" is deleted !! ")]),s("div",Oe,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=e=>o.showSkillWarnModal=!1)},Re)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",Ee,[s("div",Ke,[s("div",ze,[He,s("div",Je,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=e=>o.showActionWarnModal=!1)},Pe)])])])])):d("",!0)],64)}const Xe=g(Ue,[["render",Ge]]),Ye={props:["userId"],data(){return{questionsData:[],rows:[],showSkillWarnModal:!1,showActionWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getMcQuestionsLog(),this.questionsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({question_name:t.question_name,skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,studentName:t.student_name,studentId:t.student_id,type:l.content_type,skillDeleted:t.skill_deleted,skillUrl:t.skill_url,questionDeleted:t.question_deleted})})},methods:{async getMcQuestionsLog(){const l=await fetch(`/user-actions/${this.userId}/question`);this.questionsData=await l.json(),console.log("QUESTION ACTION: "),console.log(this.questionsData)},handleNoneLinkClick(l,t,u){l==="delete"||u?this.showActionWarnModal=!0:(this.showSkillWarnModal=!0,this.currentChooseSkill=t)},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";case"bulk-create":return"bulk-create-action";case"submit_update_for_review":return"submit_update_for_review";case"approve":return"approve-action";case"edit_and_approve":return"edit-and-approve-action";default:return"delete-action"}}}},Ze={key:0,class:"container-md main-container"},Fe={class:"d-flex flex-column"},es={key:0},ss={key:1},ts={key:2},os=["onClick"],ls={key:1,class:"shake"},is={key:2},ns={id:"myModal",class:"modal"},as={class:"modal-content skill-modal"},rs={class:"mb-4"},cs={class:"modal-label"},ds={class:"skill-modal-text"},us={class:"d-flex justify-content-center"},_s=s("div",null,"OK",-1),hs=[_s],ks={key:3},ms={id:"myModal",class:"modal"},ps={class:"modal-content"},ws=s("div",{class:"d-flex gap-4 justify-content-center mb-4"},[s("div",{class:"modal-label"},"Question is deleted !!")],-1),fs={class:"d-flex justify-content-center"},vs=s("div",null,"OK",-1),ys=[vs];function bs(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length>0?(i(),n("div",Ze,[s("div",Fe,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[c(a(e.time)+" ("+a(e.date)+") ",1),s("span",{class:p(r.actionColor(e.action))}," - "+a(e.action.replace(/_/g," ")),3),e.type==="mc_question"?(i(),n("span",es,a(' "'+e.question_name+'"')+" in question bank of skill: ",1)):d("",!0),e.type==="essay_question"?(i(),n("span",ss," essay question "+a(' "'+e.question_name+'"')+" in question bank of skill: ",1)):d("",!0),e.type==="image_question"?(i(),n("span",ts," image question "+a(' "'+e.question_name+'"')+" in question bank of skill: ",1)):d("",!0),e.action==="delete"||e.skillDeleted===1||e.questionDeleted===1?(i(),n("span",{key:3,class:"skill-link",onClick:y=>r.handleNoneLinkClick(e.action,e.skillName,e.questionDeleted)},a(e.skillName),9,os)):(i(),b(_,{key:4,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[c(a(e.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",ls," The user has no action on multiple-choice questions ")),o.showSkillWarnModal?(i(),n("div",is,[s("div",ns,[s("div",as,[s("div",rs,[s("div",cs,[c(" Skill "),s("span",ds,a(o.currentChooseSkill),1),c(" is deleted !! ")])]),s("div",us,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=e=>o.showSkillWarnModal=!1)},hs)])])])])):d("",!0),o.showActionWarnModal?(i(),n("div",ks,[s("div",ms,[s("div",ps,[ws,s("div",fs,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=e=>o.showActionWarnModal=!1)},ys)])])])])):d("",!0)],64)}const gs=g(Ye,[["render",bs]]),Ss={props:["userId"],data(){return{skillsData:[],rows:[],showWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getSkillLogs(),this.skillsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,skillUrl:t.skill_url,is_deleted:t.is_deleted})})},methods:{async getSkillLogs(){const l=await fetch(`/user-actions/${this.userId}/skill`);this.skillsData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},$s={key:0,class:"container-md main-container"},xs={class:"d-flex flex-column"},Cs=s("span",null," skill: ",-1),Ms=["onClick"],Ns={key:1,class:"shake"},Us={key:2},Ds={id:"myModal",class:"modal"},Ts={class:"modal-content skill-modal"},Is={class:"modal-label"},js={class:"skill-modal-text"},As={class:"d-flex justify-content-center"},Ws=s("div",null,"OK",-1),Ls=[Ws];function Qs(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",$s,[s("div",xs,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[c(a(e.time)+" ("+a(e.date)+") - ",1),s("span",{class:p(r.actionColor(e.action))},a(e.action),3),Cs,e.action==="delete"||e.is_deleted===1?(i(),n("span",{key:0,class:"skill-link",onClick:y=>{o.showWarnModal=!0,o.currentChooseSkill=e.skillName}},a(e.skillName),9,Ms)):(i(),b(_,{key:1,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[c(a(e.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",Ns,"The user has no recorded actions on skills")),o.showWarnModal?(i(),n("div",Us,[s("div",Ds,[s("div",Ts,[s("div",Is,[c(" Skill "),s("span",js,a(o.currentChooseSkill),1),c(" is deleted !! ")]),s("div",As,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[0]||(t[0]=e=>o.showWarnModal=!1)},Ls)])])])])):d("",!0)],64)}const qs=g(Ss,[["render",Qs]]),Os={props:["userId","deleteMcQuestion"],data(){return{questionsData:[],rows:[],showWarnModal:!1}},components:{},async created(){await this.getMcQuestionsLog(),this.questionsData.forEach(l=>{const t=JSON.parse(l.content_obj),u=new Date(l.create_date),h=u.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=u.toLocaleTimeString();this.rows.push({skillName:t.skill_name,skillUrl:t.skill_url,resourceId:l.content_id,action:l.action,date:h,time:o,id:l.id,studentName:t.student_name,studentId:t.student_id,skill_deleted:t.skill_deleted})})},methods:{async getMcQuestionsLog(){const l=await fetch(`/user-actions/${this.userId}/student_mc_question`);this.questionsData=await l.json()},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},Bs={key:0,class:"container-md main-container"},Rs={class:"d-flex flex-column"},Es={key:0},Ks={key:1},zs={key:2},Hs={key:1,class:"shake"},Js={key:2},Vs={id:"myModal",class:"modal"},Ps={class:"modal-content"},Gs=s("div",{class:"d-flex gap-4 justify-content-center mb-4"},[s("div",{class:"modal-label"},"This skill is deleted !!")],-1),Xs={class:"d-flex justify-content-center"},Ys=s("div",null,"OK",-1),Zs=[Ys];function Fs(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length>0?(i(),n("div",Bs,[s("div",Rs,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[c(a(e.time)+" ("+a(e.date)+") ",1),s("span",{class:p(r.actionColor(e.action))}," - "+a(e.action),3),e.action==="delete"?(i(),n("span",Es," student mc_question with id "+a(e.id),1)):e.action==="create"?(i(),n("span",Ks," student mc_question for skill: ")):(i(),n("span",zs,[c(" mc question of student "),m(_,{class:"user-link",target:"_blank",to:"/users"},{default:k(()=>[c(a(e.studentName),1)]),_:2},1024),c(" on skill: ")])),e.action==="delete"||e.skill_deleted===1?(i(),n("span",{key:3,class:"skill-link",onClick:t[0]||(t[0]=y=>o.showWarnModal=!0)},a(e.skillName),1)):(i(),b(_,{key:4,class:"skill-link",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[c(a(e.skillName),1)]),_:2},1032,["to"]))]))),256))])])):(i(),n("div",Hs," The user has no recorded actions on multiple-choice questions ")),o.showWarnModal?(i(),n("div",Js,[s("div",Vs,[s("div",Ps,[Gs,s("div",Xs,[s("button",{type:"button",class:"btn green-btn w-25",onClick:t[1]||(t[1]=e=>o.showWarnModal=!1)},Zs)])])])])):d("",!0)],64)}const et=g(Os,[["render",Fs]]);const st={props:["userId"],setup(){return{skillsStore:x()}},data(){return{skillsData:[],rows:[],showWarnModal:!1,currentChooseSkill:""}},components:{},async created(){await this.getSubmittedSkillLogs();const l=[];this.skillsData.forEach(t=>{t.action==="approve"?l.push(this.getApproveSkillData(t)):l.push(this.getStillAwaitingData(t))}),Promise.all(l)},methods:{async getSubmittedSkillLogs(){const l=await fetch(`/user-actions/${this.userId}/new-skill`);this.skillsData=await l.json()},async getApproveSkillData(l){const t=new Date(l.create_date),u=t.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=t.toLocaleTimeString(),o=await this.skillsStore.findSkillById(l.content_id);this.rows.push({resourceId:l.content_id,action:l.action,date:u,time:h,id:l.id,skillName:o&&o.name,skillUrl:o.url&&o.url})},async getStillAwaitingData(l){const t=new Date(l.create_date),u=t.toLocaleString("en-gb",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),h=t.toLocaleTimeString(),r=await(await fetch(`/new-skills-awaiting-approval/show/${l.content_id}`)).json(),_=r.name&&r.name;this.rows.push({resourceId:l.content_id,action:l.action,date:u,time:h,id:l.id,skillName:_})},actionColor(l){switch(l){case"create":return"create-action";case"update":return"update-action";default:return"delete-action"}}}},tt={key:0,class:"container-md main-container"},ot={class:"d-flex flex-column"},lt={key:0,class:"ms-1"},it={key:1,class:"shake"},nt={key:2},at={id:"myModal",class:"modal"},rt={class:"modal-content skill-modal"},ct=s("div",{class:"modal-label"},"Skill is deleted !!",-1),dt={class:"d-flex justify-content-center"},ut=s("div",null,"OK",-1),_t=[ut];function ht(l,t,u,h,o,r){const _=v("router-link");return i(),n(f,null,[o.rows.length?(i(),n("div",tt,[s("div",ot,[(i(!0),n(f,null,$(o.rows,e=>(i(),n("div",null,[c(a(e.time)+" ("+a(e.date)+") - ",1),s("span",{class:p(r.actionColor(e.action))},a(e.action),3),e.skillName&&e.action!=="approve"?(i(),n("span",lt," skill: "+a(e.skillName),1)):d("",!0),e.skillName&&e.action==="approve"?(i(),b(_,{key:1,class:"skill-link ms-1",target:"_blank",to:`/skills/${e.skillUrl}`},{default:k(()=>[c(a(e.skillName)+".",1)]),_:2},1032,["to"])):d("",!0),e.skillName?d("",!0):(i(),n("span",{key:2,onClick:t[0]||(t[0]=y=>o.showWarnModal=!0),class:"no-skill-text ms-1"},"skill deleted."))]))),256))])])):(i(),n("div",it,"The user has no recorded actions on skills")),o.showWarnModal?(i(),n("div",nt,[s("div",at,[s("div",rt,[ct,s("div",dt,[s("button",{type:"button",class:"btn green-btn w-fit",onClick:t[1]||(t[1]=e=>o.showWarnModal=!1)},_t)])])])])):d("",!0)],64)}const kt=g(st,[["render",ht]]);const mt={setup(){const l=U(),t=D();return{usersStore:l,userDetailsStore:t}},data(){return{user:{id:this.$route.params.id,firstName:null,lastName:null,username:null,role:null,avatar:null},showFlags:!1,showSources:!1,showMcQuestions:!1,showStudentMcQuestions:!1,showSkills:!1,showSkillSubmittedByUsers:!1,mcQuestions:[],resources:[],flags:[],skillEdits:[],isTutorialComplete:!1,showTutorialTip1:!1}},components:{UserFlagActions:Ne,UserResourceActions:Xe,UserQuestionActions:gs,UserStudentMcQuestionActions:et,UserSkillActions:qs,UserSkillAwaitingForApprovalActions:kt},async created(){await this.getUserDetails(),this.checkIfTutorialComplete()},methods:{async getUserDetails(){this.usersStore.users.length<1&&await this.usersStore.getUsers();for(let l=0;l<this.usersStore.users.length;l++)this.usersStore.users[l].id==this.user.id&&(this.user.firstName=this.usersStore.users[l].first_name,this.user.lastName=this.usersStore.users[l].last_name,this.user.username=this.usersStore.users[l].username,this.user.role=this.usersStore.users[l].role,this.user.avatar=this.usersStore.users[l].avatar)},async checkIfTutorialComplete(){const t=await(await fetch("/users/check-tutorial-progress/user-activity-report/"+this.userDetailsStore.userId)).json();t==0?(this.isTutorialComplete=!1,this.showTutorialTip1=!0):t==1&&(this.isTutorialComplete=!0)},progressTutorial(l){l==1&&(this.showTutorialTip1=!1,this.markTutorialComplete())},restartTutorial(){this.showTutorialTip1=!0,this.isTutorialComplete=!1},markTutorialComplete(){let l="/users/mark-tutorial-complete/user-activity-report/"+this.userDetailsStore.userId;fetch(l,{method:"PUT",headers:{"Content-Type":"application/json"}})}}},pt={class:"container bg-light rounded p-3"},wt={class:"d-flex justify-content-between"},ft=s("h1",{class:"heading mb-2"},"User Activity Report",-1),vt=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",fill:"white"},[s("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1),yt=[vt],bt={class:"row"},gt={class:"d-flex flex-column flex-md-row gap-3"},St=["src"],$t={class:"d-flex flex-column"},xt={id:"user-name"},Ct={id:"role"},Mt={class:"d-flex flex-column"},Nt={class:"d-flex flex-row justify-content-between"},Ut=["title"],Dt={class:"secondary-heading h4"},Tt=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),It=[Tt],jt={key:0},At={class:"d-flex flex-column"},Wt={class:"d-flex flex-row justify-content-between"},Lt=["title"],Qt={class:"secondary-heading h4"},qt=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),Ot=[qt],Bt={key:0},Rt={key:0,class:"mt-5 mb-3"},Et={class:"d-flex flex-column"},Kt={class:"d-flex flex-row justify-content-between"},zt=["title"],Ht={class:"secondary-heading h4"},Jt=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),Vt=[Jt],Pt={key:0},Gt={class:"d-flex flex-column"},Xt={class:"d-flex flex-row justify-content-between"},Yt=["title"],Zt={class:"secondary-heading h4"},Ft=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),eo=[Ft],so={key:0},to={class:"d-flex flex-column"},oo={class:"d-flex flex-row justify-content-between"},lo=["title"],io={class:"secondary-heading h4"},no=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),ao=[no],ro={key:0},co={class:"d-flex flex-column mb-3"},uo={class:"d-flex flex-row justify-content-between"},_o=["title"],ho={class:"secondary-heading h4"},ko=s("path",{d:"M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1),mo=[ko],po={key:0},wo={key:0,class:"modal"},fo={class:"modal-content"},vo={key:0},yo=s("p",null,"This is the User Activity List page.",-1),bo=s("p",null,"It shows what editors have been up to on the site.",-1);function go(l,t,u,h,o,r){const _=v("UserFlagActions"),e=v("UserQuestionActions"),y=v("UserStudentMcQuestionActions"),C=v("UserResourceActions"),M=v("UserSkillActions"),N=v("UserSkillAwaitingForApprovalActions");return i(),n(f,null,[s("div",pt,[s("div",wt,[ft,s("button",{class:"btn primary-btn",onClick:t[0]||(t[0]=(...w)=>r.restartTutorial&&r.restartTutorial(...w))},yt)]),s("div",bt,[s("div",gt,[s("img",{id:"activity-report-user-avatar",src:o.user.avatar},null,8,St),s("div",$t,[s("div",xt,a(o.user.username),1),s("div",Ct,a(o.user.role),1)])])]),s("div",null,[s("div",Mt,[s("div",Nt,[s("div",{class:"log-type",onClick:t[1]||(t[1]=w=>o.showFlags=!o.showFlags),"b-on-hover":"",title:o.showFlags?"collapse":"expand"},[s("h2",Dt,[c(" Flags "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showFlags?"arrow-point-down mb-2":"arrow-point-up "])},It,2))])],8,Ut)]),m(S,{name:"dropdown"},{default:k(()=>[o.showFlags?(i(),n("div",jt,[m(_,{ref:"contentFlagsPerUser",userId:o.user.id,onCloseFlagDiv:t[2]||(t[2]=w=>o.showFlags=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),s("div",At,[s("div",Wt,[s("div",{class:"log-type",onClick:t[3]||(t[3]=w=>o.showMcQuestions=!o.showMcQuestions),"b-on-hover":"",title:o.showMcQuestions?"collapse":"expand"},[s("h2",Qt,[c(" Questions "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showMcQuestions?"arrow-point-down mb-2":"arrow-point-up"])},Ot,2))])],8,Lt)]),m(S,{name:"dropdown"},{default:k(()=>[o.showMcQuestions?(i(),n("div",Bt,[m(e,{userId:o.user.id,onCloseMcQuestionDiv:t[4]||(t[4]=w=>o.showMcQuestions=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),o.user.role==="admin"?(i(),n("hr",Rt)):d("",!0),s("div",Et,[s("div",Kt,[s("div",{class:"log-type",onClick:t[5]||(t[5]=w=>o.showStudentMcQuestions=!o.showStudentMcQuestions),"b-on-hover":"",title:o.showStudentMcQuestions?"collapse":"expand"},[s("h2",Ht,[c(" Student Suggested MC Questions "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showStudentMcQuestions?"arrow-point-down mb-2":"arrow-point-up"])},Vt,2))])],8,zt)]),m(S,{name:"dropdown"},{default:k(()=>[o.showStudentMcQuestions?(i(),n("div",Pt,[m(y,{userId:o.user.id,onCloseMcQuestionDiv:t[6]||(t[6]=w=>o.showStudentMcQuestions=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),s("div",Gt,[s("div",Xt,[s("div",{class:"log-type",onClick:t[7]||(t[7]=w=>o.showSources=!o.showSources),"b-on-hover":"",title:o.showSources?"collapse":"expand"},[s("h2",Zt,[c(" Sources "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSources?"arrow-point-down mb-2":"arrow-point-up "])},eo,2))])],8,Yt)]),m(S,{name:"dropdown"},{default:k(()=>[o.showSources?(i(),n("div",so,[m(C,{userId:o.user.id,onCloseResourceDiv:t[8]||(t[8]=w=>o.showSources=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),s("div",to,[s("div",oo,[s("div",{class:"log-type",onClick:t[9]||(t[9]=w=>o.showSkills=!o.showSkills),"b-on-hover":"",title:o.showSkills?"collapse":"expand"},[s("h2",io,[c(" Skills "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSkills?"arrow-point-down mb-2":"arrow-point-up "])},ao,2))])],8,lo)]),m(S,{name:"dropdown"},{default:k(()=>[o.showSkills?(i(),n("div",ro,[m(M,{userId:o.user.id,onCloseResourceDiv:t[10]||(t[10]=w=>o.showSkills=!1)},null,8,["userId"])])):d("",!0)]),_:1})]),s("div",co,[s("div",uo,[s("div",{class:"log-type",onClick:t[11]||(t[11]=w=>o.showSkillSubmittedByUsers=!o.showSkillSubmittedByUsers),"b-on-hover":"",title:o.showSkillSubmittedByUsers?"collapse":"expand"},[s("h2",ho,[c(" User Suggested New Skills "),(i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"22",height:"22",fill:"#667085",class:p([o.showSkillSubmittedByUsers?"arrow-point-down mb-2":"arrow-point-up "])},mo,2))])],8,_o)]),m(S,{name:"dropdown"},{default:k(()=>[o.showSkillSubmittedByUsers?(i(),n("div",po,[m(N,{userId:o.user.id,onCloseResourceDiv:t[12]||(t[12]=w=>o.showSkillSubmittedByUsers=!1)},null,8,["userId"])])):d("",!0)]),_:1})])])]),o.showTutorialTip1?(i(),n("div",wo,[s("div",fo,[o.showTutorialTip1?(i(),n("div",vo,[yo,bo,s("button",{class:"btn primary-btn",onClick:t[13]||(t[13]=w=>r.progressTutorial(1))}," close ")])):d("",!0)])])):d("",!0)],64)}const xo=g(mt,[["render",go]]);export{xo as default};
