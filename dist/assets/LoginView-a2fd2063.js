import{_ as g,j as l,o as a,c as d,a as s,w as m,C as p,q as _,t as u,b as h,p as f,d as b,s as v,k as w}from"./main-287bea5d.js";import{_ as k}from"./app-logo-6a421005.js";const y={data(){return{username:null,password:null,errors:{username:null,password:null},isSubmitting:!1,isMobileCheck:window.innerWidth}},mounted(){let e=document.createElement("script");e.setAttribute("src","https://accounts.google.com/gsi/client"),e.setAttribute("defer",""),document.head.appendChild(e),this.GetGoogleLoginResult(),document.addEventListener("keydown",this.handleKeyPress)},unmounted(){document.removeEventListener("keydown",this.handleKeyPress)},computed:{},methods:{clearError(e){this.errors[e]&&(this.errors[e]=null)},validateForm(){this.errors={username:null,password:null};let e=!0;return(!this.username||this.username.trim()==="")&&(this.errors.username="Username is required",e=!1),(!this.password||this.password.trim()==="")&&(this.errors.password="Password is required",e=!1),e},Submit(){if(!this.validateForm())return;this.isSubmitting=!0;const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})};var t="/login-attempt";fetch(t,e).then(r=>r.json()).then(r=>{this.isSubmitting=!1,r.account=="authorized"?r.role=="student"?this.isMobileCheck<576?l.push({name:"search"}):l.push({name:"skill-tree"}):r.role=="instructor"?l.push({name:"students"}):r.role=="editor"?l.push({name:"todo"}):l.push({name:"skills"}):r.account=="wrong-password"?alert("Wrong password"):alert("No account found")}).catch(r=>{this.isSubmitting=!1,console.error("Login error:",r),alert("An error occurred during login. Please try again.")})},GetGoogleLoginResult(){fetch("/google-login-result").then(function(e){return e.json()}).then(e=>{e.account=="no account"&&alert("No account found.")})},handleKeyPress(e){e.key==="Enter"&&this.Submit()}}},i=e=>(f("data-v-02540334"),e=e(),b(),e),x={class:"login-page"},S={class:"form-signin"},q=i(()=>s("div",{class:"text-center app-logo-wrapper"},[s("img",{class:"",src:k,alt:"icon of a skill tree"})],-1)),C=i(()=>s("h1",{class:"h3 mt-2 font-weight-normal"},"Sign in",-1)),P={class:"form"},E=i(()=>s("label",{class:"mb-4 welcome-message"},"Welcome back! Please enter your details.",-1)),L={class:"mb-3 text-start"},V=i(()=>s("label",{class:"form-label"},"Username",-1)),j={key:0,class:"invalid-feedback"},I={class:"mb-3 text-start"},N=i(()=>s("label",{class:"form-label"},"Password",-1)),U={key:0,class:"invalid-feedback"},B=i(()=>s("div",{class:"d-flex password-extras"},[s("div",{style:{color:"rgba(164, 139, 229, 1)"}},[s("a",{href:"/password-reset",class:"links"},"Forgot password")])],-1)),G=["disabled"],M={key:0,id:"g_id_onload","data-client_id":"13191319610-qectaoi146ce1pm4v95jtgctsbtmqb3t.apps.googleusercontent.com","data-context":"signin","data-ux_mode":"popup","data-login_uri":"/google-login-attempt?device=mobile","data-auto_prompt":"false"},T={key:1,id:"g_id_onload","data-client_id":"13191319610-qectaoi146ce1pm4v95jtgctsbtmqb3t.apps.googleusercontent.com","data-context":"signin","data-ux_mode":"popup","data-login_uri":"/google-login-attempt?device=not-mobile","data-auto_prompt":"false"},z=i(()=>s("div",{class:"g_id_signin","data-type":"standard","data-shape":"rectangular","data-theme":"outline","data-text":"signin_with","data-size":"large","data-logo_alignment":"left","data-width":"330"},null,-1)),A=i(()=>s("div",{class:"mt-4 signup text-center"},[v(" Don't have an account? "),s("a",{href:"/student-signup",class:"links"},"Register")],-1));function D(e,t,r,K,o,c){return a(),d("div",x,[s("div",S,[q,C,s("div",P,[E,s("div",L,[V,m(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.username=n),type:"text",placeholder:"Username",class:_(["form-control",{"is-invalid":o.errors.username}]),required:"",onInput:t[1]||(t[1]=n=>c.clearError("username"))},null,34),[[p,o.username]]),o.errors.username?(a(),d("div",j,u(o.errors.username),1)):h("",!0)]),s("div",I,[N,m(s("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.password=n),type:"password",placeholder:"Password",class:_(["form-control",{"is-invalid":o.errors.password}]),required:"",onInput:t[3]||(t[3]=n=>c.clearError("password"))},null,34),[[p,o.password]]),o.errors.password?(a(),d("div",U,u(o.errors.password),1)):h("",!0)]),B,s("button",{class:"btn btn-dark mb-2",onClick:t[4]||(t[4]=n=>c.Submit()),disabled:o.isSubmitting},u(o.isSubmitting?"Signing in...":"Sign in"),9,G),o.isMobileCheck<576?(a(),d("div",M)):(a(),d("div",T)),z,A])])])}const F=g(y,[["render",D],["__scopeId","data-v-02540334"]]),W={__name:"LoginView",setup(e){return(t,r)=>(a(),w(F))}};export{W as default};
