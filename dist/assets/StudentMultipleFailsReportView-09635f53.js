import{_ as y,A as S,r as h,o as c,c as p,a,t as b,k as _,g as B,p as w,d as A}from"./main-f43802e9.js";import{u as x}from"./TeacherAnalyticsStore-f758b6c6.js";import{u as F}from"./AnalyticsStore-c33006bd.js";import"./transform-4d0f7c8f.js";import{l as v,a as j,b as k}from"./linear-841004c4.js";import{m as C,b as I}from"./continuous-e5db47ab.js";import{s as R}from"./sort-fcaf8f38.js";import{s as M}from"./string-c67ea49d.js";import{F as z}from"./FailedAssessmentsHorizontalBarChart-2b773ed3.js";import{D as H}from"./downloadCSVBtn-4e6ea100.js";const N={name:"StudentFailedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){const r=document.getElementById("fails-by-subject-chart-container").clientWidth,u=document.getElementById("fails-by-subject-chart-container").clientHeight,s=v().domain([0,C(this.data,t=>t.quantity)]).range([200,r-0]),o=I().domain(R(this.data,t=>-t.quantity).map(t=>t.name)).rangeRound([0,u-0]).padding(.2),m=s.tickFormat(20),d=M("#fails-by-subject-chart-container").append("svg").attr("width","100%").attr("height","100%").attr("viewBox",[0,0,"100%","100%"]).attr("preserveAspectRatio","xMinYMin");d.append("g").selectAll().data(this.data).join("rect").attr("x",s(0)).attr("y",t=>o(t.name)).attr("width",t=>s(t.quantity)-s(0)).attr("height",o.bandwidth()).attr("fill",function(t){return t.name=="Language"?"DarkMagenta":t.name=="Mathematics"?"blue":t.name=="Science & Invention"?"purple":t.name=="Computer Science"?"deeppink":t.name=="Dangerous Ideas"?"brown":t.name=="History"?"cyan":t.name=="Life"?"magenta":"#ff7f0e"}),d.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",t=>s(t.quantity)).attr("y",t=>o(t.name)+o.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(t=>m(t.quantity)).call(t=>t.filter(g=>s(g.quantity)-s(0)<20).attr("dx",4).attr("fill","white").attr("text-anchor","start")),d.append("g").attr("transform","translate(0,0)").call(j(s).ticks(0)).call(t=>t.select(".domain").remove()),d.append("g").attr("transform","translate(200,0)").attr("style","font-size: 16px").call(k(o).tickSizeOuter(0))}};function D(e,i,l,n,r,u){return null}const V=y(N,[["render",D]]);const L={setup(){const e=S(),i=x(),l=F();return{usersStore:e,teacherAnalyticsStore:i,analyticsStore:l}},components:{FailedAssessmentsHorizontalBarChart:z,StudentFailedAssessmentsByRootSubjectHorizontalBarChart:V,DownloadCSVBtn:H},data(){return{studentId:this.$route.params.studentId,studentName:null}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const e=this.usersStore.users.find(i=>i.id===this.studentId);e&&(this.studentName=e.username),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),await this.analyticsStore.getStudentFailedAssessmentsBySubject(this.studentId),this.isLoaded=!0},methods:{}},f=e=>(w("data-v-6191698f"),e=e(),A(),e),T={class:"container chart-page"},$={class:"d-flex justify-content-between w-100"},q=f(()=>a("h1",{class:"heading h4"},"Multiple fails",-1)),E={class:"tertiary-heading h4"},O={class:"row h-100"},U={class:"col-md"},W=f(()=>a("h3",{class:"secondary-heading h5"},"By subject",-1)),Y={id:"fails-by-subject-chart-container"},G={key:1},J={class:"col-md position-relative"},K=f(()=>a("h3",{class:"secondary-heading h5"},"By skill",-1)),P={id:"fails-by-skill-chart-container"},Q={key:1};function X(e,i,l,n,r,u){const s=h("StudentFailedAssessmentsByRootSubjectHorizontalBarChart"),o=h("DownloadCSVBtn"),m=h("FailedAssessmentsHorizontalBarChart");return c(),p("div",T,[a("span",$,[q,a("h2",E,b(r.studentName),1)]),a("div",O,[a("div",U,[W,a("div",Y,[n.analyticsStore.studentRootSubjectsFailedAssessments.length>0?(c(),_(s,{key:0,data:n.analyticsStore.studentRootSubjectsFailedAssessments},null,8,["data"])):(c(),p("p",G,"No data yet"))])]),a("div",J,[K,a("div",P,[B(o,{data:n.teacherAnalyticsStore.studentMultipleFails,fileName:`Assessment Status Report - ${r.studentName}`,toolTip:"Download failed assessments data as CSV",class:"position-absolute download-btn"},null,8,["data","fileName"]),n.teacherAnalyticsStore.studentMultipleFails.length>0?(c(),_(m,{key:0,data:n.teacherAnalyticsStore.studentMultipleFails,colour:"darkred"},null,8,["data"])):(c(),p("p",Q," This student has not failed any assessments more than once yet. "))])])])])}const lt=y(L,[["render",X],["__scopeId","data-v-6191698f"]]);export{lt as default};
