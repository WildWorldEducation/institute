import{_ as f,y as h,e as m,o as r,c as n,a as e,t as l,b as i,p as _,F as g,x as p}from"./main-323bd1ce.js";const y={setup(){const s=h(),t=m();return{usersStore:s,usersDetailsStore:t}},data(){return{referredUserId:this.$route.params.referredUserId,receipts:[],student:null,loading:!0}},async created(){await this.getStudentInfo(),await this.getReferral()},methods:{async getStudentInfo(){try{await this.usersStore.getUsers(),this.student=this.usersStore.users.find(s=>s.id==this.referredUserId),this.student||console.error("Student not found")}catch(s){console.error("Error fetching student info:",s)}},async getReferral(){fetch(`/referrals/get-receipts/${this.referredUserId}`).then(function(s){return s.json()}).then(async s=>{this.receipts=s,console.log(this.receipts),this.loading=!1})},formattedStripeReceiptAmount(s){return(s/100).toLocaleString("en-US",{style:"currency",currency:"USD"})},formattedStripeReceiptDate(s){let t=new Date(s);const c=t.getUTCMonth()+1,u=t.getUTCDate();return t.getUTCFullYear()+"/"+c+"/"+u},getTotalPayments(){return this.receipts.filter(s=>s.status==="completed"||!s.status).reduce((s,t)=>s+parseFloat(t.amount||0),0)},goBack(){this.$router.push("/referrals")}}},b={class:"container bg-light rounded"},S={class:"d-flex justify-content-between flex-wrap"},k={key:0,class:"heading"},v={key:1,class:"heading"},w={key:0,class:"text-center py-4"},D={key:1,class:"row mb-4"},U={class:"col-md-6"},x={class:"card"},I={class:"card-body"},R={class:"card-text"},T={key:2},A={key:0,class:"alert alert-info"},B={key:1,class:"table-responsive"},C={class:"table table-striped table-hover"},V={class:"fw-bold"},N={class:"fw-bold"},P={class:"font-monospace small"},F=["href"],j={key:0,class:"badge badge-success"},L={key:1,class:"badge badge-warning"};function E(s,t,c,u,o,a){return r(),n("div",b,[e("div",S,[o.student?(r(),n("h1",k,l(o.student.username),1)):(r(),n("h1",v,"Student ID: "+l(o.referredUserId),1)),e("button",{onClick:t[0]||(t[0]=(...d)=>a.goBack&&a.goBack(...d)),class:"btn btn-outline-secondary primary-btn"}," ← Back ")]),o.loading?(r(),n("div",w,t[1]||(t[1]=[e("div",{class:"spinner-border",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):i("",!0),!o.loading&&o.student?(r(),n("div",D,[e("div",U,[e("div",x,[e("div",I,[e("p",R,[t[2]||(t[2]=e("strong",null,"Total Payments:",-1)),_(" "+l(a.formattedStripeReceiptAmount(a.getTotalPayments())),1),t[3]||(t[3]=e("br",null,null,-1)),t[4]||(t[4]=e("strong",null,"Number of Transactions:",-1)),_(" "+l(o.receipts.length),1)])])])])])):i("",!0),o.loading?i("",!0):(r(),n("div",T,[o.receipts.length===0?(r(),n("div",A," No payments found for this student. ")):(r(),n("div",B,[e("table",C,[t[5]||(t[5]=e("thead",{class:"table-dark"},[e("tr",null,[e("th",null,"Date"),e("th",null,"Amount"),e("th",null,"Commission"),e("th",null,"Transaction ID"),e("th",null,"Compensation Status")])],-1)),e("tbody",null,[(r(!0),n(g,null,p(o.receipts,d=>(r(),n("tr",{key:d.id},[e("td",null,l(a.formattedStripeReceiptDate(d.date)),1),e("td",V,l(a.formattedStripeReceiptAmount(d.amount)),1),e("td",N,l(a.formattedStripeReceiptAmount(d.amount/3)),1),e("td",P,[e("a",{href:d.url,target:"_blank"},"View",8,F)]),e("td",null,[d.is_partner_compensated==1?(r(),n("span",j,"Paid")):(r(),n("span",L,"Pending"))])]))),128))])])]))]))])}const O=f(y,[["render",E],["__scopeId","data-v-5acddc37"]]);export{O as default};
