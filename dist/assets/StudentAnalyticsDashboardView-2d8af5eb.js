import{_ as g,o as c,c as h,f as D,K as C,r as y,a as m,k as S,p as b,d as x}from"./main-dd4581f6.js";import{u as A}from"./TeacherAnalyticsStore-61f269fa.js";import{u as $}from"./AnalyticsStore-4e584d18.js";import{s as p}from"./transform-8aa7b14f.js";import{u as L,l as I}from"./line-d33e4d9b.js";import{e as M}from"./time-5737df17.js";import{l as k,m as v}from"./linear-ebf0540e.js";import{b as w}from"./band-682f5aee.js";import{s as T}from"./sort-cd73da73.js";import{m as B}from"./main-fbe756c6.js";import"./point-ea70dc51.js";const P={name:"StudentDurationPerDayLineChart",props:["data","colour"],data(){return{}},mounted(){const t=this.data;p("#student-duration-per-day-chart-container");const s=928,a=500,e=20,o=30,i=30,l=40,r=L(M(t,_=>_.date),[l,s-o]),d=k([0,v(t,_=>_.formattedQuantity)],[a-i,e]),u=I().x(_=>r(_.date)).y(_=>d(_.formattedQuantity));p("#student-duration-per-day-chart-container").append("svg").attr("width",s).attr("height",a).attr("viewBox",[0,0,s,a]).attr("style","max-width: 100%; height: auto; height: intrinsic;").append("path").attr("fill","none").attr("stroke","#5f31dd").attr("stroke-width",3).attr("d",u(t))}},N={id:"student-duration-per-day-chart-container"};function z(t,s,a,e,o,i){return c(),h("div",N)}const H=g(P,[["render",z]]),E={name:"TimePerSkillHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){p("#time-per-skill-chart-container");const t=25,s=0,a=0,e=0,o=0,i=1e3,l=Math.ceil((this.data.length+.1)*t)+s+e,r=k().domain([0,v(this.data,n=>n.quantity)]).range([o,i-a]),d=w().domain(T(this.data,n=>-n.quantity).map(n=>n.name)).rangeRound([s,l-e]).padding(.1);r.tickFormat(20),p("#time-per-skill-chart-container").append("svg").attr("width",i).attr("height",l).attr("viewBox",[0,0,i,l]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;").append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",r(0)).attr("y",n=>d(n.name)).attr("width",n=>r(n.quantity)-r(0)).attr("height",d.bandwidth())},computed:{}},F={id:"time-per-skill-chart-container"};function W(t,s,a,e,o,i){return c(),h("div",F)}const q=g(E,[["render",W]]);const O={name:"TenantAvgTokensToMasterSkillsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){p("#tenant-avg-tokens-to-master-skills-chart-container");const t=25,s=0,a=0,e=10,o=0,i=1e3,l=Math.ceil((this.data.length+.1)*t)+s+e,r=k().domain([0,v(this.data,n=>n.quantity)]).range([o,i-a]),d=w().domain(T(this.data,n=>-n.quantity).map(n=>n.name)).rangeRound([s,l-e]).padding(.1);r.tickFormat(20),p("#tenant-avg-tokens-to-master-skills-chart-container").append("svg").attr("width",i).attr("height",l).attr("viewBox",[0,0,i,l]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;").append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",r(0)).attr("y",n=>d(n.name)).attr("width",n=>r(n.quantity)-r(0)).attr("height",d.bandwidth())},computed:{}},R={id:"tenant-avg-tokens-to-master-skills-chart-container"};function j(t,s,a,e,o,i){return c(),h("div",R)}const V=g(O,[["render",j],["__scopeId","data-v-68ac0c01"]]);const Q={setup(){const t=D(),s=C();return{userDetailsStore:t,userSkillsStore:s}},props:["data"],data(){return{chartOrientation:"horizontal"}},async mounted(){console.log(this.data),this.drawTimeLineChartWithMilesStone(),this.calculateChartLength(this.data)},methods:{drawTimeLineChartWithMilesStone(){B("#passed-assessments-timeline").mapping({timestamp:"mastered_date",text:"labelName"}).aggregateBy("week").labelFormat("%d-%m-%Y").optimize(!0).orientation(this.chartOrientation).renderCallback(()=>{this.changeLabelColor()}).render(this.data),this.changeBulletColor(),this.changeLabelColor()},calculateChartLength(t){const s=t[0].date,a=t[t.length-1].date,e=this.getDaysBetweenDates(s,a),o=t.length;this.chartWidth=e*3+o*50+"px"},getDaysBetweenDates(t,s){const a=new Date(t),e=new Date(s),o=a.getTime(),i=e.getTime(),l=Math.abs(i-o),r=1e3*60*60*24;return Math.round(l/r)},changeBulletColor(){const s=document.getElementsByClassName("milestones")[0].getElementsByClassName("milestones__group");for(let a=0;a<s.length;a++){const e=s[a],i=e.getElementsByClassName("milestones-link-label")[0].id,l=this.data.find(n=>n.id===parseInt(i)),d=e.getElementsByClassName("milestones__group__bullet")[0],u=this.mapSkillLevelWithColor(l.level);d.style.backgroundColor=u}},changeLabelColor(){this.data.forEach(t=>{const s=document.getElementById(t.id),a=this.data.find(o=>parseInt(s.id)===o.id),e=this.mapSkillLevelWithColor(a.level);s.style.color=e})},mapSkillLevelWithColor(t){switch(t){case"grade_school":return"#116b62";case"middle_school":return"#168216";case"high_school":return"#7d6a02";case"college":return"#ffa500";case"phd":return"#9e0000"}}}},U={id:"passed-assessments-timeline"};function Y(t,s,a,e,o,i){return c(),h("div",U)}const K=g(Q,[["render",Y]]);const G={setup(){const t=D(),s=C();return{userDetailsStore:t,userSkillsStore:s}},props:["data"],data(){return{chartOrientation:"horizontal"}},async mounted(){this.drawTimeLineChartWithMilesStone(),this.calculateChartLength(this.data)},methods:{drawTimeLineChartWithMilesStone(){B("#attempted-assessments-timeline").mapping({timestamp:"date",text:"labelName"}).aggregateBy("week").labelFormat("%d-%m-%Y").optimize(!0).orientation(this.chartOrientation).renderCallback(()=>{if(this.changeLabelColor(),this.chartOrientation==="vertical"){const s=document.getElementsByClassName("milestones")[0];s.style.marginLeft="30%"}}).render(this.data),this.changeBulletColor(),this.changeLabelColor()},calculateChartLength(t){const s=t[0].date,a=t[t.length-1].date,e=this.getDaysBetweenDates(s,a),o=t.length;this.chartWidth=e*3+o*50+"px"},getDaysBetweenDates(t,s){const a=new Date(t),e=new Date(s),o=a.getTime(),i=e.getTime(),l=Math.abs(i-o),r=1e3*60*60*24;return Math.round(l/r)},changeBulletColor(){const s=document.getElementsByClassName("milestones")[0].getElementsByClassName("milestones__group");for(let a=0;a<s.length;a++){const e=s[a],i=e.getElementsByClassName("milestones-link-label")[0].id,l=this.data.find(n=>n.id===parseInt(i)),d=e.getElementsByClassName("milestones__group__bullet")[0],u=this.mapSkillLevelWithColor(l.level);d.style.backgroundColor=u}},changeLabelColor(){this.data.forEach(t=>{const s=document.getElementById(t.id),a=this.data.find(o=>parseInt(s.id)===o.id),e=this.mapSkillLevelWithColor(a.level);s.style.color=e})},mapSkillLevelWithColor(t){switch(t){case"grade_school":return"#116b62";case"middle_school":return"#168216";case"high_school":return"#7d6a02";case"college":return"#ffa500";case"phd":return"#9e0000"}},handleOrientationBtnClick(t){this.chartOrientation=t,this.drawTimeLineChartWithMilesStone()}}},J={id:"attempted-assessments-timeline"};function X(t,s,a,e,o,i){return c(),h("div",J)}const Z=g(G,[["render",X]]),tt={name:"FailedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){p("#failed-assessments-chart-container");const t=25,s=0,a=0,e=10,o=0,i=700,l=Math.ceil((this.data.length+.1)*t)+s+e,r=k().domain([0,v(this.data,n=>n.quantity)]).range([o,i-a]),d=w().domain(T(this.data,n=>-n.quantity).map(n=>n.name)).rangeRound([s,l-e]).padding(.1);r.tickFormat(20),p("#failed-assessments-chart-container").append("svg").attr("width",i).attr("height",l).attr("viewBox",[0,0,i,l]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;").append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",r(0)).attr("y",n=>d(n.name)).attr("width",n=>r(n.quantity)-r(0)).attr("height",d.bandwidth())}},et={id:"failed-assessments-chart-container"};function st(t,s,a,e,o,i){return c(),h("div",et)}const at=g(tt,[["render",st]]);const nt={setup(){const t=D(),s=A(),a=C(),e=$();return{userDetailsStore:t,teacherAnalyticsStore:s,userSkillsStore:a,analyticsStore:e}},components:{SmallStudentDurationPerDayLineChart:H,SmallTimePerSkillHorizontalBarChart:q,SmallStudentAvgTokensToMasterSkillsHorizontalBarChart:V,SmallPassedAssessmentsTimelineChart:K,SmallAttemptedAssessmentsTimelineChart:Z,SmallFailedAssessmentsHorizontalBarChart:at},data(){return{studentId:this.userDetailsStore.userId}},async created(){await this.analyticsStore.getStudentDurationPerDay(this.studentId),await this.analyticsStore.getStudentSkillDurations(this.studentId),await this.analyticsStore.getAvgTokensToMasterSkills(this.studentId),await this.analyticsStore.getStudentAssessmentPasses(this.studentId),await this.analyticsStore.getStudentAssessmentAttempts(this.studentId),await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId)},methods:{}},f=t=>(b("data-v-5e7f7de0"),t=t(),x(),t),ot={class:"container-fluid"},it={class:"charts-grid"},rt={class:"chart"},lt=f(()=>m("h2",{class:"h6"},"Time per day",-1)),ct={key:1},dt={class:"chart"},ht=f(()=>m("h2",{class:"h6"},"Time per skill",-1)),mt={key:1},ut={class:"chart"},_t=f(()=>m("h2",{class:"h6"},"Tokens per skill",-1)),pt={key:1},gt={class:"chart"},yt=f(()=>m("h2",{class:"h6"},"Passed",-1)),St={key:1},ft={class:"chart"},kt=f(()=>m("h2",{class:"h6"},"Attempted",-1)),vt={key:1},Dt={class:"chart"},Ct=f(()=>m("h2",{class:"h6"},"Failed multiple times",-1)),wt={key:1};function Tt(t,s,a,e,o,i){const l=y("SmallStudentDurationPerDayLineChart"),r=y("SmallTimePerSkillHorizontalBarChart"),d=y("SmallStudentAvgTokensToMasterSkillsHorizontalBarChart"),u=y("SmallPassedAssessmentsTimelineChart"),n=y("SmallAttemptedAssessmentsTimelineChart"),_=y("SmallFailedAssessmentsHorizontalBarChart");return c(),h("div",ot,[m("div",it,[m("div",rt,[lt,e.analyticsStore.studentDurationsPerDay.length>0?(c(),S(l,{key:0,data:e.analyticsStore.studentDurationsPerDay,colour:"black"},null,8,["data"])):(c(),h("p",ct,"No data yet"))]),m("div",dt,[ht,e.analyticsStore.studentSkillDurations.length>0?(c(),S(r,{key:0,data:e.analyticsStore.studentSkillDurations,colour:"purple"},null,8,["data"])):(c(),h("p",mt,"No data yet"))]),m("div",ut,[_t,e.analyticsStore.studentTokensPerSkills.length>0?(c(),S(d,{key:0,class:"",data:e.analyticsStore.studentTokensPerSkills,colour:"darkgreen"},null,8,["data"])):(c(),h("p",pt,"No data yet"))]),m("div",gt,[yt,e.analyticsStore.studentAssessmentPasses.length>0?(c(),S(u,{key:0,class:"",data:e.analyticsStore.studentAssessmentPasses},null,8,["data"])):(c(),h("p",St," This student has not completed any assessments yet. "))]),m("div",ft,[kt,e.analyticsStore.studentAssessmentAttempts.length>0?(c(),S(n,{key:0,class:"",data:e.analyticsStore.studentAssessmentAttempts},null,8,["data"])):(c(),h("p",vt,"This student has attempted any assessments yet."))]),m("div",Dt,[Ct,e.teacherAnalyticsStore.studentMultipleFails.length>0?(c(),S(_,{key:0,data:e.teacherAnalyticsStore.studentMultipleFails,colour:"darkred",class:""},null,8,["data"])):(c(),h("p",wt," This student has not failed any assessments more than once yet. "))])])])}const Ht=g(nt,[["render",Tt],["__scopeId","data-v-5e7f7de0"]]);export{Ht as default};
