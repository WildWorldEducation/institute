import{_ as f,e as _,r as p,o as l,c as d,a as n,j as u,b as g,F as S}from"./main-e507ef79.js";import{u as y}from"./AnalyticsStore-0f03cf0c.js";import"./transform-af9a74a2.js";import{l as v,c as $,b as x}from"./linear-5b188edc.js";import{m as b,b as C}from"./continuous-7328829e.js";import{s as k}from"./sort-ed61f96d.js";import{s as B}from"./string-dd82ab4a.js";import{D as w}from"./downloadCSVBtn-401ca8cd.js";import{F as D}from"./FailedAssessmentsHorizontalBarChart-4277605d.js";const F={name:"TenantFailedAssessmentsHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){this.data;const r=document.getElementById("failed-assessments-chart-container").clientWidth,c=document.getElementById("failed-assessments-chart-container").clientHeight,a=v().domain([0,b(this.data,e=>e.quantity)]).range([200,r-0]),i=C().domain(k(this.data,e=>-e.quantity).map(e=>e.name)).rangeRound([0,c-10]).padding(.1);a.tickFormat(20);const h=B("#failed-assessments-chart-container").append("svg").attr("width",r).attr("height",c).attr("viewBox",[0,0,r,c]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");h.append("g").attr("fill","darkred").selectAll().data(this.data).join("rect").attr("x",a(0)).attr("y",e=>i(e.name)).attr("width",e=>a(e.quantity)-a(0)).attr("height",i.bandwidth()),h.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",e=>a(e.quantity)).attr("y",e=>i(e.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>e.quantity).call(e=>e.filter(A=>a(A.quantity)-a(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),h.append("g").attr("transform","translate(0,0)").call($(a).ticks(0)).call(e=>e.select(".domain").remove()),h.append("g").attr("transform","translate(200,0)").call(x(i).tickSizeOuter(0))}};function L(t,s,m,o,r,c){return null}const T=f(F,[["render",L]]);const z={setup(){const t=_(),s=y();return{userDetailsStore:t,analyticsStore:s}},components:{TenantFailedAssessmentsHorizontalBarChart:T,DownloadCSVBtn:w},data(){return{studentId:this.$route.params.studentId}},async created(){this.analyticsStore.failedAssessments.length==0&&await this.getFailedAssessments()},methods:{async getFailedAssessments(){try{const t=await fetch(`/student-analytics/failed-assessments/tenant/${this.userDetailsStore.tenantId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);this.analyticsStore.failedAssessments=await t.json()}catch(t){console.error("Error fetching cohort mastered assessments:",t),this.analyticsStore.failedAssessments=[]}}}},R={class:"container chart-page"},H={class:"row h-100"},j={class:"col-md position-relative"},I={id:"failed-assessments-chart-container"},E={key:1};function q(t,s,m,o,r,c){const a=p("TenantFailedAssessmentsHorizontalBarChart");return l(),d("div",R,[n("div",H,[n("div",j,[s[2]||(s[2]=n("h3",{class:"secondary-heading h5"},"Assessments failed",-1)),n("div",I,[n("button",{class:"position-absolute download-btn btn",onClick:s[0]||(s[0]=i=>t.downloadData(o.analyticsStore.rootSubjectsFailedAssessments,"Subjects-failed"))},s[1]||(s[1]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[n("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)])),o.analyticsStore.failedAssessments.length>0?(l(),u(a,{key:0,data:o.analyticsStore.failedAssessments},null,8,["data"])):(l(),d("p",E,"No data yet"))])])])])}const Q=f(z,[["render",q],["__scopeId","data-v-ba06c1cf"]]);const M={setup(){const t=_(),s=y();return{userDetailsStore:t,analyticsStore:s}},components:{FailedAssessmentsHorizontalBarChart:D,DownloadCSVBtn:w},data(){return{failedAssessmentQuantities:[],failedAssessmentQuantitiesDownloadData:[]}},async created(){this.getAllStudentsFailedAssessments()},methods:{async getAllStudentsFailedAssessments(){try{const t=await fetch(`/student-analytics/failed-assessments/all-students/${this.userDetailsStore.userId}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();this.failedAssessmentQuantities=Array.isArray(s)?s:[]}catch(t){console.error("Error fetching all students failed assessments:",t),this.failedAssessmentQuantities=[]}}}},N={class:"container chart-page"},V={class:"row h-100"},P={class:"col-md position-relative"},O={id:"fails-by-skill-chart-container"},U={key:1};function W(t,s,m,o,r,c){const a=p("FailedAssessmentsHorizontalBarChart");return l(),d("div",N,[n("div",V,[n("div",P,[s[2]||(s[2]=n("h3",{class:"secondary-heading h5"},"Assessments failed",-1)),n("div",O,[n("button",{class:"position-absolute download-btn btn",onClick:s[0]||(s[0]=i=>t.downloadData(o.analyticsStore.rootSubjectsFailedAssessments,"Subjects-failed"))},s[1]||(s[1]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"18",height:"18"},[n("path",{d:"M0 64C0 28.7 28.7 0 64 0L213.5 0c17 0 33.3 6.7 45.3 18.7L365.3 125.3c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64zm208-5.5l0 93.5c0 13.3 10.7 24 24 24L325.5 176 208 58.5zM175 441c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23 0-86.1c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 86.1-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64z"})],-1)])),r.failedAssessmentQuantities.length>0?(l(),u(a,{key:0,data:r.failedAssessmentQuantities},null,8,["data"])):(l(),d("p",U,"No data yet"))])])])])}const G=f(M,[["render",W],["__scopeId","data-v-5841f13e"]]),J={name:"Dashboard",setup(){return{userDetailsStore:_()}},data(){return{}},components:{SchoolAdminChallengesReport:Q,TeacherChallengesReport:G},async created(){}};function K(t,s,m,o,r,c){const a=p("SchoolAdminChallengesReport"),i=p("TeacherChallengesReport");return l(),d(S,null,[o.userDetailsStore.role=="school_admin"?(l(),u(a,{key:0})):g("",!0),o.userDetailsStore.role=="instructor"||o.userDetailsStore.role=="partner"?(l(),u(i,{key:1})):g("",!0)],64)}const rt=f(J,[["render",K]]);export{rt as default};
