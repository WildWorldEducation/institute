import{_ as k,x as S,g as b,a as w,B as v,o as n,c as l,d as s,t as m,w as r,j as f,b as a,F as q,k as x,s as g,G as M,L as Q,p as y,f as C}from"./main-ddf04a42.js";import{u as E}from"./StudentMCQuestionsStore-c729b9d4.js";import{_ as V}from"./general-banner-1c13aca4.js";const N={setup(){const o=E(),e=S(),p=b(),c=w();return{studentMCQuestionsStore:o,usersStore:e,skillsStore:p,userDetailsStore:c}},data(){return{studentQuestionId:this.$route.params.id,question:{},answers:[],validate:{validated:!1,name:!1,question:!1,answer:!1,explanation:!1},isEditMode:!1,studentName:null,skillName:null,skillId:null}},async created(){this.usersStore.users.length==0&&await this.usersStore.getUsers(),this.skillsStore.skillsList.length==0&&await this.skillsStore.getSkillsList(),await this.getStudentQuestion()},methods:{async getStudentQuestion(){fetch("/questions/student-mc-questions/"+this.studentQuestionId).then(function(o){return o.json()}).then(o=>{this.question=o.question,this.answers=o.answers;for(let e=0;e<this.usersStore.users.length;e++)this.question.student_id==this.usersStore.users[e].id&&(this.studentName=this.usersStore.users[e].username);for(let e=0;e<this.skillsStore.skillsList.length;e++)this.question.skill_id==this.skillsStore.skillsList[e].id&&(this.skillName=this.skillsStore.skillsList[e].name)})},deleteStudentQuestion(){confirm("Delete this question?")&&(this.studentMCQuestionsStore.deleteStudentMCQuestion(this.studentQuestionId),v.go(-1))},saveToQuestionBank(){this.question.name="User: "+this.question.student_id;const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:this.question,answers:this.answers,skill_id:this.question.skill_id})};var e="/questions/mc-questions/add";fetch(e,o).then(()=>{this.studentMCQuestionsStore.deleteStudentMCQuestion(this.studentQuestionId),v.go(-1)})},editMode(){this.isEditMode=!0}}},u=o=>(y("data-v-2afe79fd"),o=o(),C(),o),U={id:"banner"},I=u(()=>s("img",{src:V,class:"img-fluid"},null,-1)),D={class:"container mt-3 pb-3"},L={class:"row"},B={class:"col-10"},A={id:"header-tile"},T={id:"header-tile"},O={class:"main-content-container container-fluid mt-4"},j={class:"row p-0"},F={id:"form-container",class:"col p-4"},z={class:"mb-3"},G=u(()=>s("label",{for:"last_name",class:"form-label"},"Question",-1)),J=["disabled"],P={key:0,class:"form-validate"},R={class:"form-label"},H={class:"d-flex answer-option"},K=["disabled","onUpdate:modelValue","id"],W={key:0,class:"form-validate"},X={class:"form-check"},Y=["disabled","id","value"],Z=["for"],$={class:"mb-3"},ee=u(()=>s("svg",{width:"20",height:"20",fill:"#ffffff",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[s("path",{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"})],-1)),se={class:"mb-3 form-check"},te=["disabled"],oe=u(()=>s("label",{for:"randomOrder",class:"form-check-label"},"Show answers in random order",-1)),ie={class:"mb-3"},ne=u(()=>s("label",{class:"form-label"},"Explanation",-1)),le=["disabled"],de={key:0,class:"form-validate"},re={key:0,class:"d-flex justify-content-end gap-4"};function ae(o,e,p,c,t,h){return n(),l("div",U,[I,s("div",D,[s("div",L,[s("div",B,[s("h2",A,"Student: "+m(t.studentName),1),s("h2",T,"Skill: "+m(t.skillName),1)])]),s("div",O,[s("div",j,[s("div",F,[s("div",z,[G,r(s("textarea",{disabled:!t.isEditMode,rows:"1","onUpdate:modelValue":e[0]||(e[0]=i=>t.question.text=i),class:"form-control"},`\r
                            `,8,J),[[f,t.question.text]]),t.validate.question&&(t.question.text===""||t.question.text===null)?(n(),l("div",P," please enter a question ! ")):a("",!0)]),(n(!0),l(q,null,x(t.answers,(i,d)=>(n(),l("div",{key:d,class:"mb-3"},[s("label",R,"Answer "+m(d+1)+":",1),s("div",H,[r(s("input",{disabled:!t.isEditMode,"onUpdate:modelValue":_=>i.text=_,id:"answer"+(d+1),placeholder:"Enter answer option",type:"text",class:"form-control"},null,8,K),[[f,i.text]])]),t.validate.validated&&i.text===""?(n(),l("div",W," please enter a correct answer ! ")):a("",!0),s("div",X,[r(s("input",{disabled:!t.isEditMode,class:"form-check-input",type:"radio",id:"correct"+(d+1),name:"correctAnswer",value:d+1,"onUpdate:modelValue":e[1]||(e[1]=_=>t.question.correct_answer=_)},null,8,Y),[[Q,t.question.correct_answer]]),s("label",{for:"correct"+(d+1),class:""},"Set as correct",8,Z)])]))),128)),s("div",$,[t.answers.length<5?(n(),l("button",{key:0,onClick:e[2]||(e[2]=(...i)=>o.addAnswer&&o.addAnswer(...i)),class:"btn purple-btn"},[ee,g(" Add Answer ")])):a("",!0)]),s("div",se,[r(s("input",{disabled:!t.isEditMode,type:"checkbox",id:"randomOrder","onUpdate:modelValue":e[3]||(e[3]=i=>t.question.is_random=i),class:"form-check-input"},null,8,te),[[M,t.question.is_random]]),oe]),s("div",ie,[ne,r(s("textarea",{disabled:!t.isEditMode,"onUpdate:modelValue":e[4]||(e[4]=i=>t.question.explanation=i),class:"form-control",rows:"3"},null,8,le),[[f,t.question.explanation]]),t.validate.explanation&&(t.question.explanation===""||t.question.explanation===null)?(n(),l("div",de," please enter an explanation ! ")):a("",!0)]),c.userDetailsStore.role=="admin"||c.userDetailsStore.role=="editor"?(n(),l("div",re,[s("a",{class:"btn red-btn",onClick:e[5]||(e[5]=i=>h.editMode())},"Edit"),s("a",{class:"btn red-btn",onClick:e[6]||(e[6]=i=>h.deleteStudentQuestion())},"Delete"),s("button",{class:"btn purple-btn",onClick:e[7]||(e[7]=i=>h.saveToQuestionBank())}," Save ")])):a("",!0)])])])])])}const _e=k(N,[["render",ae],["__scopeId","data-v-2afe79fd"]]);export{_e as default};
