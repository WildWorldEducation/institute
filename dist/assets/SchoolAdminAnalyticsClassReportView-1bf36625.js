import{u as P}from"./CohortsStore-cf7f7886.js";import{_ as S,o as h,c as u,e as B,r as y,a as d,t as $,b as R,j as b,f as L}from"./main-fb767ba2.js";import{u as M}from"./AnalyticsStore-26520060.js";import{C as z}from"./CohortProgressLineChart-d3caf367.js";import"./transform-af9a74a2.js";import{o as D,m as C,b as k}from"./continuous-7328829e.js";import{o as q,s as f}from"./string-dd82ab4a.js";import{c as T}from"./colors-98f238a0.js";import{p as H,a as _,C as O}from"./CohortDurationPerDayLineChart-f155ba03.js";import{C as F}from"./CohortSkillActivityChart-b76748bb.js";import{l as A,c as w,b as x}from"./linear-5b188edc.js";import{s as v}from"./sort-ed61f96d.js";import"./line-85f04100.js";import"./time-0457d93b.js";import"./point-ea70dc51.js";import"./extent-4cf1c809.js";function I(a,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=a(r/(t-1));return n}const N=a=>q(a[a.length-1]);var E=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(T);const V=N(E),U={name:"CohortPercentageStudentsMasteredAtLeastOneSkillPieChart",data(){return{}},mounted(){this.clearChart()},methods:{async clearChart(){f("#cohort-percentage-students-mastered-one-skill-chart-container").selectAll("*").remove()},async generateChart(){this.clearChart();const a=f("#cohort-percentage-students-mastered-one-skill-chart-container");let t=this.$parent.percentageStudentsMasteredOneSkill;if(t[0].value==0&&t[1].value==0){a.append("p").text("No data available.");return}const n=928,r=Math.min(n,250);D().domain(t.map(s=>s.name)).range(I(s=>V(s*.8+.1),t.length).reverse());const l=H().sort(null).value(s=>s.value),c=_().innerRadius(0).outerRadius(Math.min(n,r)/2-1),m=c.outerRadius()()*.6,o=_().innerRadius(m).outerRadius(m),i=l(t),p=f("#cohort-percentage-students-mastered-one-skill-chart-container").append("svg").attr("width",n).attr("height",r).attr("viewBox",[-n/2,-r/2,n,r]).attr("style","max-width: 100%; height: auto; font: 10px sans-serif;");p.append("g").attr("stroke","white").selectAll().data(i).join("path").attr("fill",s=>{if(s.data.name==="Mastered one skill")return"darkgreen";if(s.data.name==="Mastered no skills")return"darkred"}).attr("d",c).append("title").text(s=>`${s.data.name}: ${s.data.value.toLocaleString("en-US")}`),p.append("g").attr("text-anchor","middle").selectAll().data(i).join("text").attr("transform",s=>`translate(${o.centroid(s)})`).call(s=>s.append("tspan").attr("y","-0.4em").attr("fill","white").attr("font-weight","bold").text(e=>e.data.name)).call(s=>s.filter(e=>e.endAngle-e.startAngle>.25).append("tspan").attr("x",0).attr("fill","white").attr("y","1em").attr("fill-opacity",1).text(e=>e.data.value.toLocaleString("en-US")))}}},Q={id:"cohort-percentage-students-mastered-one-skill-chart-container"};function W(a,t,n,r,l,c){return h(),u("div",Q)}const G=S(U,[["render",W]]),J={name:"CohortFailedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){f("#cohort-failed-assessments-by-root-subject-chart-container");const a=25,t=0,n=0,r=10,l=200,c=1e3,m=Math.ceil((this.data.length+.1)*a)+t+r,o=A().domain([0,C(this.data,e=>e.quantity)]).range([l,c-n]),i=k().domain(v(this.data,e=>-e.quantity).map(e=>e.name)).rangeRound([t,m-r]).padding(.1),p=o.tickFormat(20),s=f("#cohort-failed-assessments-by-root-subject-chart-container").append("svg").attr("width",c).attr("height",m).attr("viewBox",[0,0,c,m]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");s.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",o(0)).attr("y",e=>i(e.name)).attr("width",e=>o(e.quantity)-o(0)).attr("height",i.bandwidth()),s.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",e=>o(e.quantity)).attr("y",e=>i(e.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>p(e.quantity)).call(e=>e.filter(g=>o(g.quantity)-o(0)<20).attr("dx",4).attr("fill","white").attr("text-anchor","start")),s.append("g").attr("transform",`translate(0,${t})`).call(w(o).ticks(0)).call(e=>e.select(".domain").remove()),s.append("g").attr("transform",`translate(${l},0)`).attr("style","font-size: 16px").call(x(i).tickSizeOuter(0))}},K={id:"cohort-failed-assessments-by-root-subject-chart-container"};function X(a,t,n,r,l,c){return h(),u("div",K)}const Y=S(J,[["render",X]]),Z={name:"CohortPassedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{}},mounted(){f("#cohort-passed-assessments-by-root-subject-chart-container");const a=25,t=0,n=0,r=10,l=200,c=1e3,m=Math.ceil((this.data.length+.1)*a)+t+r,o=A().domain([0,C(this.data,e=>e.quantity)]).range([l,c-n]),i=k().domain(v(this.data,e=>-e.quantity).map(e=>e.name)).rangeRound([t,m-r]).padding(.1),p=o.tickFormat(20),s=f("#cohort-passed-assessments-by-root-subject-chart-container").append("svg").attr("width",c).attr("height",m).attr("viewBox",[0,0,c,m]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");s.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",o(0)).attr("y",e=>i(e.name)).attr("width",e=>o(e.quantity)-o(0)).attr("height",i.bandwidth()),s.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",e=>o(e.quantity)).attr("y",e=>i(e.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>p(e.quantity)).call(e=>e.filter(g=>o(g.quantity)-o(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),s.append("g").attr("transform",`translate(0,${t})`).call(w(o).ticks(0)).call(e=>e.select(".domain").remove()),s.append("g").attr("transform",`translate(${l},0)`).attr("style","font-size: 16px").call(x(i).tickSizeOuter(0))},computed:{}},tt={id:"cohort-passed-assessments-by-root-subject-chart-container"};function et(a,t,n,r,l,c){return h(),u("div",tt)}const at=S(Z,[["render",et]]),st={name:"CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart",props:["data","colour"],data(){return{padding:60}},mounted(){f("#cohort-attempted-assessments-by-root-subject-chart-container");const a=25,t=0,n=0,r=10,l=200,c=1e3,m=Math.ceil((this.data.length+.1)*a)+t+r,o=A().domain([0,C(this.data,e=>e.quantity)]).range([l,c-n]),i=k().domain(v(this.data,e=>-e.quantity).map(e=>e.name)).rangeRound([t,m-r]).padding(.1),p=o.tickFormat(20),s=f("#cohort-attempted-assessments-by-root-subject-chart-container").append("svg").attr("width",c).attr("height",m).attr("viewBox",[0,0,c,m]).attr("style","max-width: 100%; height: 100%; font: 14px sans-serif;");s.append("g").attr("fill",this.colour).selectAll().data(this.data).join("rect").attr("x",o(0)).attr("y",e=>i(e.name)).attr("width",e=>o(e.quantity)-o(0)).attr("height",i.bandwidth()),s.append("g").attr("fill","white").attr("text-anchor","end").selectAll().data(this.data).join("text").attr("x",e=>o(e.quantity)).attr("y",e=>i(e.name)+i.bandwidth()/2).attr("dy","0.35em").attr("dx",-4).text(e=>p(e.quantity)).call(e=>e.filter(g=>o(g.quantity)-o(0)<20).attr("dx",4).attr("fill","black").attr("text-anchor","start")),s.append("g").attr("transform",`translate(0,${t})`).call(w(o).ticks(0)).call(e=>e.select(".domain").remove()),s.append("g").attr("transform",`translate(${l},0)`).attr("style","font-size: 16px").call(x(i).tickSizeOuter(0))},computed:{}},rt={id:"cohort-attempted-assessments-by-root-subject-chart-container"};function ot(a,t,n,r,l,c){return h(),u("div",rt)}const nt=S(st,[["render",ot]]);const it={setup(){const a=P(),t=B(),n=M();return{cohortsStore:a,userDetailsStore:t,analyticsStore:n}},data(){return{teacherId:this.$route.params.teacherId,isMobileCheck:window.innerWidth,percentageStudentsMasteredOneSkill:[],isLoaded:!1,classProgress:[],durationsPerDay:[]}},async created(){await this.getTenantClassProgress(),await this.getInstructorPercentageStudentsMasteredAtLeastOneSkill(),await this.getTenantClassDurationPerDay(),await this.analyticsStore.getTeacherClassSkillActivityReport(this.teacherId),await this.analyticsStore.getTeacherClassFailedAssessmentsBySubject(this.teacherId),await this.analyticsStore.getTeacherClassPassedAssessmentsBySubject(this.teacherId),await this.analyticsStore.getTeacherClassAttemptedAssessmentsBySubject(this.teacherId)},components:{CohortPercentageStudentsMasteredAtLeastOneSkillPieChart:G,CohortProgressLineChart:z,CohortDurationPerDayLineChart:O,CohortSkillActivityChart:F,CohortFailedAssessmentsByRootSubjectHorizontalBarChart:Y,CohortPassedAssessmentsByRootSubjectHorizontalBarChart:at,CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart:nt},methods:{async getTenantClassProgress(){fetch(`/student-analytics/all-students-progress/${this.teacherId}`).then(a=>a.json()).then(a=>{for(let t=0;t<a.length;t++)a[t].date=new Date(a[t].date);a.sort((t,n)=>t.date-n.date),this.classProgress=a}).catch(a=>{console.error("Error fetching student progress:",a)})},async getInstructorPercentageStudentsMasteredAtLeastOneSkill(){try{const a=await fetch(`/student-analytics/percentage-students-mastered-one-skill/instructor/${this.teacherId}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const t=await a.json();this.percentageStudentsMasteredOneSkill=Array.isArray(t)?t:[],this.isLoaded=!0,await this.$refs.cohortPercentageStudentsMasteredAtLeastOneSkillPieChart.generateChart()}catch(a){console.error("Error fetching all students failed assessments:",a),this.percentageStudentsMasteredOneSkill=[]}},async getTenantClassDurationPerDay(){fetch(`/student-analytics/all-students-duration-per-day/${this.teacherId}`).then(a=>a.json()).then(a=>{for(let t=0;t<a.length;t++)a[t].formattedQuantity=a[t].quantity/(1e3*60),a[t].date=new Date(a[t].date);a.sort((t,n)=>t.date-n.date),this.durationsPerDay=a}).catch(a=>{console.error("Error fetching student duration per day:",a)})},millisToMinutesAndSeconds(a){var t=Math.floor(a/6e4),n=(a%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n}}},dt={class:"container bg-light"},lt={key:0,class:"row"},ct={class:"secondary-heading h3"},ht={class:"d-flex justify-content-between"},mt={key:2},ut={key:4},pt={key:6},ft={key:8},gt={key:10},yt={key:12};function bt(a,t,n,r,l,c){const m=y("CohortDurationPerDayLineChart"),o=y("CohortSkillActivityChart"),i=y("CohortProgressLineChart"),p=y("CohortPercentageStudentsMasteredAtLeastOneSkillPieChart"),s=y("CohortFailedAssessmentsByRootSubjectHorizontalBarChart"),e=y("CohortPassedAssessmentsByRootSubjectHorizontalBarChart"),g=y("CohortAttemptedAssessmentsByRootSubjectHorizontalBarChart");return h(),u("div",dt,[l.isMobileCheck<576?(h(),u("div",lt,[d("h1",ct,$(this.cohortsStore.selectedCohort.name),1)])):R("",!0),d("div",ht,[t[2]||(t[2]=d("h1",{class:"heading"},"Teacher Report",-1)),d("button",{class:"btn me-1",onClick:t[0]||(t[0]=(...j)=>a.$parent.restartTutorial&&a.$parent.restartTutorial(...j))},t[1]||(t[1]=[d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"20",height:"20",class:"primary-icon"},[d("path",{d:"M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"})],-1)]))]),t[3]||(t[3]=d("h2",{class:"secondary-heading"},"Engagement",-1)),t[4]||(t[4]=d("h4",null,"Time on platform",-1)),l.durationsPerDay.length>0?(h(),b(m,{key:1,data:l.durationsPerDay,colour:"#5f31dd",ref:"cohortDurationPerDayLineChart"},null,8,["data"])):(h(),u("p",mt,"No data available")),t[5]||(t[5]=d("hr",{class:"mt-5 mb-5"},null,-1)),t[6]||(t[6]=d("h4",{class:"mt-4"},"Skills visited",-1)),r.analyticsStore.cohortSkillActivities.length>0?(h(),b(o,{key:3,data:r.analyticsStore.cohortSkillActivities},null,8,["data"])):(h(),u("p",ut,"No skills visited by this student.")),t[7]||(t[7]=d("hr",{class:"mt-5 mb-5"},null,-1)),t[8]||(t[8]=d("h2",{class:"secondary-heading mt-5"},"Academics",-1)),t[9]||(t[9]=d("h4",null,"Skill mastery progress",-1)),l.classProgress.length>0?(h(),b(i,{key:5,data:l.classProgress,colour:"#5f31dd",ref:"cohortProgressLineChart"},null,8,["data"])):(h(),u("p",pt,"No data available")),t[10]||(t[10]=d("hr",{class:"mt-5 mb-5"},null,-1)),t[11]||(t[11]=d("h4",{class:"mt-4"}," Percentage of students who completed at least one skill ",-1)),L(p,{ref:"cohortPercentageStudentsMasteredAtLeastOneSkillPieChart",class:"mb-5"},null,512),t[12]||(t[12]=d("hr",{class:"mt-5 mb-5"},null,-1)),t[13]||(t[13]=d("h3",{class:"secondary-heading"},"By subject",-1)),t[14]||(t[14]=d("h4",{class:""},"Failed more than once",-1)),r.analyticsStore.cohortRootSubjectsFailedAssessments.length>0?(h(),b(s,{key:7,data:r.analyticsStore.cohortRootSubjectsFailedAssessments,colour:"darkred",class:"mb-5"},null,8,["data"])):(h(),u("p",ft,"No data yet")),t[15]||(t[15]=d("hr",{class:"mt-5 mb-5"},null,-1)),t[16]||(t[16]=d("h4",{class:""},"Passed",-1)),r.analyticsStore.cohortRootSubjectsPassedAssessments.length>0?(h(),b(e,{key:9,data:r.analyticsStore.cohortRootSubjectsPassedAssessments,colour:"darkgreen",class:"mb-5"},null,8,["data"])):(h(),u("p",gt,"No data yet")),t[17]||(t[17]=d("hr",{class:"mt-5 mb-5"},null,-1)),t[18]||(t[18]=d("h4",{class:""},"Attempted",-1)),r.analyticsStore.cohortRootSubjectsAttemptedAssessments.length>0?(h(),b(g,{key:11,data:r.analyticsStore.cohortRootSubjectsAttemptedAssessments,colour:"darkblue",class:"mb-5"},null,8,["data"])):(h(),u("p",yt,"No data yet"))])}const Dt=S(it,[["render",bt],["__scopeId","data-v-ebaba9d7"]]);export{Dt as default};
