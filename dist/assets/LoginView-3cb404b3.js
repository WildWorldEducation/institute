import{_ as f,i as n,o as a,c as l,a as t,w as m,A as p,p as c,t as u,b as g,j as h,k as _}from"./main-80cca98b.js";import{_ as b}from"./app-logo-6a421005.js";const v={data(){return{username:null,password:null,errors:{username:null,password:null},isSubmitting:!1,isMobileCheck:window.innerWidth}},mounted(){let s=document.createElement("script");s.setAttribute("src","https://accounts.google.com/gsi/client"),s.setAttribute("defer",""),document.head.appendChild(s),this.GetGoogleLoginResult(),document.addEventListener("keydown",this.handleKeyPress)},unmounted(){document.removeEventListener("keydown",this.handleKeyPress)},computed:{},methods:{clearError(s){this.errors[s]&&(this.errors[s]=null)},validateForm(){this.errors={username:null,password:null};let s=!0;return(!this.username||this.username.trim()==="")&&(this.errors.username="Username is required",s=!1),(!this.password||this.password.trim()==="")&&(this.errors.password="Password is required",s=!1),s},Submit(){if(!this.validateForm())return;this.isSubmitting=!0;const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})};var e="/login-attempt";fetch(e,s).then(r=>r.json()).then(r=>{this.isSubmitting=!1,r.account=="authorized"?r.role=="student"?this.isMobileCheck<576?n.push({name:"search"}):n.push({name:"skill-tree"}):r.role=="instructor"?n.push({name:"students"}):r.role=="editor"?n.push({name:"todo"}):r.role=="partner"?n.push({name:"students"}):r.role=="platform_admin"?n.push({name:"tenants"}):r.role=="school_admin"?n.push({name:"skill-tree"}):n.push({name:"skills"}):r.account=="wrong-password"?alert("Wrong password"):alert("No account found")}).catch(r=>{this.isSubmitting=!1,console.error("Login error:",r),alert("An error occurred during login. Please try again.")})},GetGoogleLoginResult(){fetch("/google-login-result").then(function(s){return s.json()}).then(s=>{s.account=="no account"&&alert("No account found.")})},handleKeyPress(s){s.key==="Enter"&&this.Submit()}}},w={class:"login-page"},k={class:"form-signin"},y={class:"form"},x={class:"mb-3 text-start"},S={key:0,class:"invalid-feedback"},q={class:"mb-3 text-start"},P={key:0,class:"invalid-feedback"},C=["disabled"],E={key:0,id:"g_id_onload","data-client_id":"13191319610-qectaoi146ce1pm4v95jtgctsbtmqb3t.apps.googleusercontent.com","data-context":"signin","data-ux_mode":"popup","data-login_uri":"/google-login-attempt?device=mobile","data-auto_prompt":"false"},L={key:1,id:"g_id_onload","data-client_id":"13191319610-qectaoi146ce1pm4v95jtgctsbtmqb3t.apps.googleusercontent.com","data-context":"signin","data-ux_mode":"popup","data-login_uri":"/google-login-attempt?device=not-mobile","data-auto_prompt":"false"};function V(s,e,r,N,o,d){return a(),l("div",w,[t("div",k,[e[11]||(e[11]=t("div",{class:"text-center app-logo-wrapper"},[t("img",{class:"",src:b,alt:"icon of a skill tree"})],-1)),e[12]||(e[12]=t("h1",{class:"h3 mt-2 font-weight-normal"},"Sign in",-1)),t("div",y,[e[7]||(e[7]=t("label",{class:"mb-4 welcome-message"},"Welcome back! Please enter your details.",-1)),t("div",x,[e[5]||(e[5]=t("label",{class:"form-label"},"Username",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>o.username=i),type:"text",placeholder:"Username",class:c(["form-control",{"is-invalid":o.errors.username}]),required:"",onInput:e[1]||(e[1]=i=>d.clearError("username"))},null,34),[[p,o.username]]),o.errors.username?(a(),l("div",S,u(o.errors.username),1)):g("",!0)]),t("div",q,[e[6]||(e[6]=t("label",{class:"form-label"},"Password",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>o.password=i),type:"password",placeholder:"Password",class:c(["form-control",{"is-invalid":o.errors.password}]),required:"",onInput:e[3]||(e[3]=i=>d.clearError("password"))},null,34),[[p,o.password]]),o.errors.password?(a(),l("div",P,u(o.errors.password),1)):g("",!0)]),e[8]||(e[8]=t("div",{class:"d-flex password-extras"},[t("div",{style:{color:"rgba(164, 139, 229, 1)"}},[t("a",{href:"/password-reset",class:"links"},"Forgot password")])],-1)),t("button",{class:"btn btn-dark mb-2",onClick:e[4]||(e[4]=i=>d.Submit()),disabled:o.isSubmitting},u(o.isSubmitting?"Signing in...":"Sign in"),9,C),o.isMobileCheck<576?(a(),l("div",E)):(a(),l("div",L)),e[9]||(e[9]=t("div",{class:"g_id_signin","data-type":"standard","data-shape":"rectangular","data-theme":"outline","data-text":"signin_with","data-size":"large","data-logo_alignment":"left","data-width":"330"},null,-1)),e[10]||(e[10]=t("div",{class:"mt-4 signup text-center"},[h(" Don't have an account? "),t("a",{href:"/student-signup",class:"links"},"Register")],-1))])])])}const j=f(v,[["render",V],["__scopeId","data-v-007d9fe1"]]),B={__name:"LoginView",setup(s){return(e,r)=>(a(),_(j))}};export{B as default};
