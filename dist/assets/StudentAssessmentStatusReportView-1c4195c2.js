import{_ as g,A as f,K as b,r as i,o as a,c as d,a as e,t as k,k as l,s as m,g as c}from"./main-a6b8d99d.js";import{u as B}from"./TeacherAnalyticsStore-f2a42260.js";import{u as j}from"./AnalyticsStore-950e8269.js";import{S as w,a as D,b as C}from"./StudentPassedAssessmentsByRootSubjectHorizontalBarChart-517dce68.js";import{P,A as N}from"./AttemptedAssessmentsTimelineChart-1827e23a.js";import{F as R}from"./FailedAssessmentsHorizontalBarChart-5349d059.js";import{D as F}from"./downloadCSVBtn-151eb5a9.js";import"./transform-4d0f7c8f.js";import"./string-c67ea49d.js";import"./linear-d9b6cbf2.js";import"./continuous-93813e6c.js";import"./band-2263c9e7.js";import"./sort-fcaf8f38.js";import"./time-3c9385c3.js";const H={setup(){const t=f(),s=b(),u=B(),n=j();return{usersStore:t,userSkillsStore:s,teacherAnalyticsStore:u,analyticsStore:n}},components:{FailedAssessmentsHorizontalBarChart:R,PassedAssessmentsTimelineChart:P,AttemptedAssessmentsTimelineChart:N,StudentAttemptedAssessmentsByRootSubjectHorizontalBarChart:w,StudentFailedAssessmentsByRootSubjectHorizontalBarChart:D,StudentPassedAssessmentsByRootSubjectHorizontalBarChart:C,DownloadCSVBtn:F},data(){return{studentId:this.$route.params.studentId,studentName:null,assessmentPasses:[],assessmentAttempts:[],assessmentPassesDownloadData:[],assessmentAttemptsDownloadData:[]}},async created(){this.usersStore.users.length<1&&await this.usersStore.getUsers();const t=this.usersStore.users.find(s=>s.id===this.studentId);t&&(this.studentName=t.username),await this.getUserSkillMasteredHistory(this.studentId),await this.getAssessmentAttempts(),this.assessmentPassesDownloadData=this.assessmentPasses.map(s=>({skill:s.name,date:this.assessmentDate(s.mastered_date)})),this.teacherAnalyticsStore.studentMultipleFails.length==0&&await this.teacherAnalyticsStore.getStudentMultipleFails(this.studentId),await this.analyticsStore.getStudentFailedAssessmentsBySubject(this.studentId),await this.analyticsStore.getStudentPassedAssessmentsBySubject(this.studentId),await this.analyticsStore.getStudentAttemptedAssessmentsBySubject(this.studentId),this.isLoaded=!0},methods:{async getAssessmentAttempts(){fetch(`/student-analytics/started-unmastered-assessments/${this.studentId}`).then(t=>t.json()).then(t=>{this.assessmentAttempts=t.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`})),this.assessmentAttemptsDownloadData=this.assessmentAttempts.map(s=>({skill:s.name,date:this.assessmentDate(s.date)}))}).catch(t=>{console.error("Error fetching last visited skills:",t)})},assessmentDate(t){return new Date(t).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async getUserSkillMasteredHistory(t){await this.userSkillsStore.getMasteredSkills(t),this.assessmentPasses=this.userSkillsStore.masteredSkills.map(s=>({...s,url:`/skills/${s.url}`,labelName:`${s.name}`}))}}},T={class:"container"},z={class:"d-flex justify-content-between w-100"},V=e("h1",{class:"heading"},"Assessment Status Report",-1),I={class:"secondary-heading h3"},x=e("h3",{class:"secondary-heading"},"By subject",-1),M=e("h4",{class:"secondary-heading"},"Failed more than once",-1),v={key:1},U=e("h4",{class:"secondary-heading"},"Passed",-1),E={key:3},L=e("h4",{class:"secondary-heading"},"Attempted",-1),K={key:5},O=e("h3",{class:"secondary-heading mt-4"},"By skill",-1),q={class:"secondary-heading d-flex justify-content-between"},G={key:7},J={class:"secondary-heading pt-2 d-flex justify-content-between"},Q={key:1},W={class:"secondary-heading pt-2 d-flex justify-content-between"},X={key:1};function Y(t,s,u,n,o,Z){const h=i("StudentFailedAssessmentsByRootSubjectHorizontalBarChart"),S=i("StudentPassedAssessmentsByRootSubjectHorizontalBarChart"),p=i("StudentAttemptedAssessmentsByRootSubjectHorizontalBarChart"),r=i("DownloadCSVBtn"),y=i("FailedAssessmentsHorizontalBarChart"),A=i("PassedAssessmentsTimelineChart"),_=i("AttemptedAssessmentsTimelineChart");return a(),d("div",T,[e("span",z,[V,e("h2",I,k(o.studentName),1)]),e("div",null,[x,M,n.analyticsStore.studentRootSubjectsFailedAssessments.length>0?(a(),l(h,{key:0,data:n.analyticsStore.studentRootSubjectsFailedAssessments,colour:"darkred",class:"mb-5"},null,8,["data"])):(a(),d("p",v,"No data yet")),U,n.analyticsStore.studentRootSubjectsPassedAssessments.length>0?(a(),l(S,{key:2,data:n.analyticsStore.studentRootSubjectsPassedAssessments,colour:"darkgreen",class:"mb-5"},null,8,["data"])):(a(),d("p",E,"No data yet")),L,n.analyticsStore.studentRootSubjectsAttemptedAssessments.length>0?(a(),l(p,{key:4,data:n.analyticsStore.studentRootSubjectsAttemptedAssessments,colour:"darkblue",class:"mb-5"},null,8,["data"])):(a(),d("p",K,"No data yet")),O,e("h4",q,[m(" Failed multiple times "),c(r,{data:n.teacherAnalyticsStore.studentMultipleFails,fileName:`Assessment Status Report - ${o.studentName}`,toolTip:"Download failed assessments data as CSV"},null,8,["data","fileName"])]),n.teacherAnalyticsStore.studentMultipleFails.length>0?(a(),l(y,{key:6,data:n.teacherAnalyticsStore.studentMultipleFails,colour:"darkred",class:"mb-5"},null,8,["data"])):(a(),d("p",G," This student has not failed any assessments more than once yet. "))]),e("div",null,[e("h4",J,[m(" Passed "),c(r,{data:o.assessmentPassesDownloadData,fileName:`Passed Assessments - ${o.studentName}`,toolTip:"Download passed assessments data as CSV"},null,8,["data","fileName"])]),o.assessmentPasses.length>0?(a(),l(A,{key:0,class:"mb-5",data:o.assessmentPasses},null,8,["data"])):(a(),d("p",Q,"This student has not completed any assessments yet."))]),e("div",null,[e("h4",W,[m(" Attempted "),c(r,{data:o.assessmentAttemptsDownloadData,fileName:`Attempted Assessments - ${o.studentName}`,toolTip:"Download attempted assessments data as CSV"},null,8,["data","fileName"])]),o.assessmentAttempts.length>0?(a(),l(_,{key:0,class:"mb-5",data:o.assessmentAttempts},null,8,["data"])):(a(),d("p",X,"This student has not attempted any assessments yet."))])])}const hs=g(H,[["render",Y]]);export{hs as default};
